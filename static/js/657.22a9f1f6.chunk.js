"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[657],{21977:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(29439),i=n(57621),s=n(10889),a=n(72791),l=n(60393),c=n(10600),o=n(80184);function u(e){var t=e.levelLow,n=e.levelHigh,u=e.setLow,d=e.setHigh,h=e.setBoth,f=e.dark,x=void 0!==f&&f,Z=(0,a.useState)(t),v=(0,r.Z)(Z,2),p=v[0],j=v[1],m=(0,a.useState)(n),y=(0,r.Z)(m,2),g=y[0],b=y[1],w=(0,a.useCallback)((function(e,t){var n=(0,r.Z)(t,2),i=n[0],s=n[1];j(i),b(s)}),[j,b]);return(0,a.useEffect)((function(){return j(t)}),[j,t]),(0,a.useEffect)((function(){return b(n)}),[b,n]),(0,o.jsxs)(i.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:x?"contentDark.main":"contentLight.main"},children:[(0,o.jsx)(c.ZP,{value:p,onChange:function(e){return u((0,l.uZ)(e,0,n))},sx:{pl:2,width:100},inputProps:{sx:{textAlign:"center"}},startAdornment:"Level: "}),(0,o.jsx)(s.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:function(){return"Arifact Level Range"},value:[p,g],onChange:w,onChangeCommitted:function(e,t){return h(t[0],t[1])},valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0}),(0,o.jsx)(c.ZP,{value:g,onChange:function(e){return d((0,l.uZ)(e,t,20))},sx:{px:1,width:50},inputProps:{sx:{textAlign:"center"}}})]})}},8375:function(e,t,n){n.d(t,{Z:function(){return S}});var r,i=n(1413),s=n(93433),a=n(29439),l=n(30168),c=n(45987),o=n(49670),u=n(23786),d=n(57064),h=n(49900),f=n(94721),x=n(20890),Z=n(72791),v=n(22020),p=n(76899),j=n(31148),m=n(42320),y=n(33890),g=n(55942),b=n(10157),w=n(80184),k=["selectedSetKey","onChange","artifactSetsByRarity","hasUnselect"];function S(e){var t,n=e.selectedSetKey,S=void 0===n?"":n,C=e.onChange,P=e.artifactSetsByRarity,K=e.hasUnselect,A=void 0!==K&&K,I=(0,c.Z)(e,k),E=(0,v.$)("artifact").t,F=(0,m.Z)(j.y.getAll,[]),M=null===F||void 0===F?void 0:F[S],G=(0,Z.useMemo)((function(){return P||(F?j.y.setKeysByRarities(F):{})}),[F,P]);return(0,w.jsxs)(y.Z,(0,i.Z)((0,i.Z)({},I),{},{title:null!==(t=null===M||void 0===M?void 0:M.name)&&void 0!==t?t:E(r||(r=(0,l.Z)(["editor.set.artifactSet"]))),startIcon:(null===M||void 0===M?void 0:M.defIconSrc)&&(0,w.jsx)(g.Z,{src:null===M||void 0===M?void 0:M.defIconSrc}),color:M?"success":"primary",children:[A&&(0,w.jsxs)(u.Z,{onClick:function(){return C("")},selected:""===S,disabled:""===S,children:[(0,w.jsx)(d.Z,{children:(0,w.jsx)(o.Z,{})}),(0,w.jsx)(h.Z,{children:(0,w.jsx)(p.c,{t:E,i18nKey:"ui:unselect",children:"Unselect"})})]}),!!Object.keys(G).length&&Object.entries(G).reverse().flatMap((function(e,t){var n=(0,a.Z)(e,2),r=n[0],i=n[1];return[].concat((0,s.Z)((t>0||A)&&i.length?[(0,w.jsx)(f.Z,{},"".concat(r,"divi"))]:[]),(0,s.Z)(i.length?[(0,w.jsx)(u.Z,{children:(0,w.jsx)(x.Z,{children:(0,w.jsxs)(p.c,{t:E,i18nKey:"editor.set.maxRarity",children:["Max Rarity ",(0,w.jsx)(b.t,{stars:parseInt(r)})]})})},"".concat(r,"header"))]:[]),(0,s.Z)(i.map((function(e){var t,n;return(0,w.jsxs)(u.Z,{onClick:function(){return C(e)},selected:S===e,disabled:S===e,children:[(0,w.jsx)(d.Z,{children:(0,w.jsx)(g.Z,{src:null===F||void 0===F||null===(t=F[e])||void 0===t?void 0:t.defIconSrc,sx:{fontSize:"1.5em"}})}),(0,w.jsx)(h.Z,{children:null===F||void 0===F||null===(n=F[e])||void 0===n?void 0:n.name})]},e)}))))}))]}))}},96106:function(e,t,n){var r=n(4942),i=n(1413),s=n(45987),a=n(66934),l=n(18455),c=n(69293),o=n(80184),u=["className"],d=(0,a.ZP)((function(e){var t=e.className,n=(0,s.Z)(e,u);return(0,o.jsx)(l.Z,(0,i.Z)((0,i.Z)({},n),{},{arrow:!0,classes:{popper:t}}))}))((function(e){var t,n=e.theme;return t={},(0,r.Z)(t,"& .".concat(c.Z.arrow),{color:n.palette.common.black}),(0,r.Z)(t,"& .".concat(c.Z.tooltip),{backgroundColor:n.palette.common.black}),t}));t.Z=d},36944:function(e,t,n){n.d(t,{Z:function(){return S},d:function(){return C}});var r,i,s,a,l=n(1413),c=n(30168),o=n(45987),u=n(63204),d=n(49670),h=n(23786),f=n(57064),x=n(20890),Z=n(94721),v=n(72791),p=n(22020),j=n(947),m=n(3997),y=n(42320),g=n(33890),b=n(2380),w=n(80184),k=["value","onChange","unSelectText","unSelectIcon","inventory","noUnselect","filter"];function S(e){var t,n=e.value,S=e.onChange,P=e.unSelectText,K=e.unSelectIcon,A=e.inventory,I=void 0!==A&&A,E=e.noUnselect,F=void 0!==E&&E,M=e.filter,G=void 0===M?function(){return!0}:M,W=(0,o.Z)(e,k),R=(0,p.$)("ui").t,L=(0,v.useContext)(m.t4),O=(0,y.Z)(j.ZP.getAll,[]),D=(0,y.Z)(j.ZP.get(n),[n]),T=L._getCharKeys().filter((function(e){return(null===O||void 0===O?void 0:O[e])&&G(O[e],e)})).sort();return(0,w.jsxs)(g.Z,(0,l.Z)((0,l.Z)({},W),{},{title:null!==(t=null===D||void 0===D?void 0:D.name)&&void 0!==t?t:I?R(r||(r=(0,c.Z)(["inventory"]))):null!==P&&void 0!==P?P:R(i||(i=(0,c.Z)(["unselect"]))),color:n?"success":"primary",startIcon:null!==D&&void 0!==D&&D.thumbImg?(0,w.jsx)(b.Z,{src:D.thumbImgSide}):I?(0,w.jsx)(u.Z,{}):null!==K&&void 0!==K?K:(0,w.jsx)(d.Z,{}),children:[!F&&(I?(0,w.jsxs)(h.Z,{onClick:function(){return S("")},selected:""===n,disabled:""===n,children:[(0,w.jsx)(f.Z,{children:(0,w.jsx)(u.Z,{})}),(0,w.jsx)(x.Z,{variant:"inherit",noWrap:!0,children:R(s||(s=(0,c.Z)(["inventory"])))})]}):(0,w.jsxs)(h.Z,{onClick:function(){return S("")},selected:""===n,disabled:""===n,children:[(0,w.jsx)(f.Z,{children:(0,w.jsx)(d.Z,{})}),(0,w.jsx)(x.Z,{variant:"inherit",noWrap:!0,children:R(a||(a=(0,c.Z)(["unselect"])))})]})),!F&&(0,w.jsx)(Z.Z,{},"div"),!!O&&C(O,T,S,n)]}))}function C(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t.map((function(t){var i,s;return(0,w.jsxs)(h.Z,{onClick:function(){return n(t)},selected:r===t,disabled:r===t,children:[(0,w.jsx)(f.Z,{children:(0,w.jsx)(b.Z,{src:null===(i=e[t])||void 0===i?void 0:i.thumbImgSide})}),(0,w.jsx)(x.Z,{variant:"inherit",noWrap:!0,children:null===e||void 0===e||null===(s=e[t])||void 0===s?void 0:s.name})]},t)}))}},40020:function(e,t,n){n.d(t,{Z:function(){return d}});var r,i=n(30168),s=n(63204),a=n(20890),l=n(22020),c=n(947),o=n(42320),u=n(80184);function d(e){var t=e.location,n=(0,l.$)("ui").t,d=(0,o.Z)(c.ZP.get(null!==t&&void 0!==t?t:""),[t]);return(0,u.jsx)(a.Z,{component:"span",children:null!==d&&void 0!==d&&d.name?d.nameWIthIcon:(0,u.jsxs)("span",{children:[(0,u.jsx)(s.Z,{sx:{verticalAlign:"text-bottom"}})," ",n(r||(r=(0,i.Z)(["inventory"])))]})})}},2380:function(e,t,n){var r=(0,n(93457).Z)("img")((function(e){var t=e.theme;return{display:"inline-block",width:"auto",height:"2.3em",lineHeight:1,verticalAlign:"text-bottom",marginTop:t.spacing(-3),marginLeft:t.spacing(-1.25),marginRight:t.spacing(-1),marginBottom:t.spacing(-1)}}));t.Z=r},10600:function(e,t,n){n.d(t,{el:function(){return f},CC:function(){return Z},ZP:function(){return v}});var r=n(29439),i=n(1413),s=n(45987),a=n(66934),l=n(28e3),c=n(24518),o=n(72791),u=n(80184),d=["children","disableRipple","disableFocusRipple","disableTouchRipple"],h=["value","onChange","disabled","float"],f=(0,a.ZP)(l.ZP)((function(e){var t=e.theme;return{backgroundColor:t.palette.primary.main,transition:"all 0.5s ease","&:hover":{backgroundColor:t.palette.primary.dark},"&.Mui-focused":{backgroundColor:t.palette.primary.dark},"&.Mui-disabled":{backgroundColor:t.palette.primary.dark}}})),x=(0,a.ZP)(c.Z)((function(e){return{backgroundColor:e.theme.palette.primary.main,padding:0,overflow:"hidden",div:{width:"100%",height:"100%"}}}));function Z(e){var t=e.children,n=(e.disableRipple,e.disableFocusRipple,e.disableTouchRipple,(0,s.Z)(e,d));return(0,u.jsx)(x,(0,i.Z)((0,i.Z)({disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0},n),{},{children:t}))}function v(e){var t=e.value,n=void 0===t?0:t,a=e.onChange,l=e.disabled,c=void 0!==l&&l,d=e.float,x=void 0!==d&&d,Z=(0,s.Z)(e,h),v=(0,o.useState)(n),p=(0,r.Z)(v,2),j=p[0],m=p[1],y=(0,o.useState)(!1),g=(0,r.Z)(y,2),b=g[0],w=g[1],k=(0,o.useMemo)((function(){return x?parseFloat:parseInt}),[x]),S=(0,o.useCallback)((function(){a(j),w(!1)}),[a,j,w]),C=(0,o.useCallback)((function(){w(!0)}),[w]);(0,o.useEffect)((function(){return m(n)}),[n,m]);var P=(0,o.useCallback)((function(e){return m(k(e.target.value)||0)}),[m,k]),K=(0,o.useCallback)((function(e){return"Enter"===e.key&&S()}),[S]);return(0,u.jsx)(f,(0,i.Z)({value:b&&!j?"":j,"aria-label":"custom-input",type:"number",inputProps:{step:x?.1:1},onChange:P,onBlur:S,onFocus:C,disabled:c,onKeyDown:K},Z))}},43568:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(29439),i=n(53174),s=n(54483),a=n(61889),l=n(20890),c=n(24518),o=n(39504),u=n(94721),d=n(47047),h=n(72791),f=n(23741),x=n(60393),Z=n(3992),v=n(68198),p=n(9321),j=n(66624),m=n(80184);function y(e){var t,n,y=e.pageKey,g=void 0===y?"":y,b=e.text,w=void 0===b?"":b,k=e.modalTitle,S=void 0===k?"":k,C=e.children,P=(0,h.useState)(null===(t=null===(n=f.Hk.get("infoShown"))||void 0===n?void 0:n[g])||void 0===t||t),K=(0,r.Z)(P,2),A=K[0],I=K[1],E=(0,h.useState)(Array.isArray(w)?(0,x.F_)(w):w),F=(0,r.Z)(E,1)[0],M=function(){var e,t=null!==(e=f.Hk.get("infoShown"))&&void 0!==e?e:{};t[g]=!1,f.Hk.set("infoShown",t),I(!1)};return(0,m.jsxs)(Z.Z,{children:[(0,m.jsxs)(a.ZP,{container:!0,children:[(0,m.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,m.jsx)(l.Z,{variant:"caption",pl:1,children:F})}),(0,m.jsx)(a.ZP,{item:!0,xs:"auto",children:(0,m.jsx)(c.Z,{size:"small",color:"info",variant:"contained",onClick:function(){return I(!0)},startIcon:(0,m.jsx)(s.G,{icon:i.sph}),children:(0,m.jsx)(j.v,{ns:"ui",key18:"info"})})})]}),(0,m.jsx)(p.Z,{containerProps:{maxWidth:"xl"},open:A,onClose:function(){return M()},children:(0,m.jsxs)(Z.Z,{children:[(0,m.jsx)(o.Z,{sx:{py:1},children:(0,m.jsxs)(a.ZP,{container:!0,children:[(0,m.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,m.jsx)(l.Z,{variant:"h6",children:S})}),(0,m.jsx)(a.ZP,{item:!0,children:(0,m.jsx)(v.Z,{onClick:M})})]})}),(0,m.jsx)(u.Z,{}),(0,m.jsx)(o.Z,{children:(0,m.jsx)(h.Suspense,{fallback:(0,m.jsx)(d.Z,{variant:"rectangular",width:"100%",height:500}),children:C})}),(0,m.jsx)(u.Z,{}),(0,m.jsx)(o.Z,{sx:{py:1},children:(0,m.jsx)(v.Z,{large:!0,onClick:M})})]})})]})}},59215:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(1413),i=n(45987),s=n(53174),a=n(54483),l=n(2199),c=n(23786),o=n(24518),u=n(22020),d=n(76899),h=n(33890),f=n(80184),x=["sortKeys","value","onChange","ascending","onChangeAsc"];function Z(e){var t=e.sortKeys,n=e.value,Z=e.onChange,v=e.ascending,p=e.onChangeAsc,j=(0,i.Z)(e,x),m=(0,u.$)("ui").t;return(0,f.jsxs)(l.Z,(0,r.Z)((0,r.Z)({},j),{},{children:[(0,f.jsx)(h.Z,{title:(0,f.jsxs)(d.c,{t:m,i18nKey:"sortByFormat",value:m("sortMap.".concat(n)),children:["Sort By: ",{value:m("sortMap.".concat(n))}]}),children:t.map((function(e){return(0,f.jsx)(c.Z,{selected:n===e,disabled:n===e,onClick:function(){return Z(e)},children:m("sortMap.".concat(e))},e)}))}),(0,f.jsx)(o.Z,{onClick:function(){return p(!v)},startIcon:(0,f.jsx)(a.G,{icon:v?s.Pa6:s.xrW,className:"fa-fw"}),children:v?(0,f.jsx)(d.c,{t:m,i18nKey:"ascending",children:"Ascending"}):(0,f.jsx)(d.c,{t:m,i18nKey:"descending",children:"Descending"})})]}))}},14525:function(e,t,n){n.d(t,{Z:function(){return w},b:function(){return k}});var r=n(29439),i=n(4942),s=n(1413),a=n(53174),l=n(54483),c=n(39504),o=n(20890),u=n(94721),d=n(61889),h=n(2199),f=n(23786),x=n(24518),Z=n(72791),v=n(71310),p=n(10600),j=n(33890),m=n(2693),y=n(26138),g=n(44297),b=n(80184);function w(e){var t=e.statFilters,n=void 0===t?{}:t,a=e.setStatFilters,l=e.disabled,h=void 0!==l&&l,f=(0,Z.useContext)(m.R).data,x=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==f.get(y.ri.weaponType).value&&x.push("physical_dmg_");var p=f.get(y.ri.charEle).value;x.push("".concat(p,"_dmg_"));var j=x.filter((function(e){return!Object.keys(n).some((function(t){return t===e}))})),g=(0,Z.useCallback)((function(e,t){return a((0,s.Z)((0,s.Z)({},n),{},(0,i.Z)({},e,t)))}),[n,a]);return(0,b.jsxs)(v.Z,{children:[(0,b.jsx)(c.Z,{sx:{py:1},children:(0,b.jsx)(o.Z,{children:"Minimum Final Stat Filter"})}),(0,b.jsx)(u.Z,{}),(0,b.jsx)(c.Z,{children:(0,b.jsxs)(d.ZP,{container:!0,spacing:1,children:[Object.entries(n).map((function(e){var t=(0,r.Z)(e,2),i=t[0],l=t[1];return(0,b.jsx)(d.ZP,{item:!0,xs:12,children:(0,b.jsx)(k,{statKey:i,statKeys:j,setFilter:g,disabled:h,value:l,close:function(){delete n[i],a((0,s.Z)({},n))}})},i)})),(0,b.jsx)(d.ZP,{item:!0,xs:12,children:(0,b.jsx)(k,{value:void 0,close:void 0,statKeys:j,setFilter:g,disabled:h})})]})})]})}function k(e){var t=e.statKey,n=e.statKeys,r=void 0===n?[]:n,i=e.value,s=void 0===i?0:i,c=e.close,o=e.setFilter,u=e.disabled,d=void 0!==u&&u,v="%"===g.ZP.unit(t),m=(0,Z.useCallback)((function(e){return t&&o(t,e)}),[o,t]);return(0,b.jsxs)(h.Z,{sx:{width:"100%"},children:[(0,b.jsx)(j.Z,{title:t?g.ZP.get(t):"New Stat",disabled:d,children:r.map((function(e){return(0,b.jsx)(f.Z,{onClick:function(){null===c||void 0===c||c(),o(e,s)},children:g.ZP.get(e)},e)}))}),(0,b.jsx)(p.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,b.jsx)(p.ZP,{disabled:!t,float:v,value:s,placeholder:"Min Value",onChange:m,sx:{px:2}})}),!!c&&(0,b.jsx)(x.Z,{color:"error",onClick:c,disabled:d,children:(0,b.jsx)(l.G,{icon:a.I7k})})]})}},92443:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),i=n(45987),s=n(66934),a=n(24518),l=n(80184),c=["children","disabled"],o=(0,s.ZP)(a.Z)((function(e){var t=e.theme;return{"&.Mui-disabled":{backgroundColor:t.palette.primary.dark,color:t.palette.text.secondary}}}));function u(e){var t=e.children,n=(e.disabled,(0,i.Z)(e,c));return(0,l.jsx)(o,(0,r.Z)((0,r.Z)({},n),{},{disabled:!0,children:t}))}},2693:function(e,t,n){n.d(t,{R:function(){return r}});var r=(0,n(72791).createContext)({})},31148:function(e,t,n){n.d(t,{y:function(){return p},u:function(){return j}});var r=n(29439),i=n(93433),s=n(15671),a=n(43144),l=n(55942),c=n(66624),o=n(87234),u=n(24351),d=n(26138),h=n(25617),f=n(80184),x=n.e(90).then(n.bind(n,10090)).then((function(e){return e.default})),Z=function(e,t){return(0,f.jsx)(c.v,{ns:"artifact_".concat(e,"_gen"),key18:t})},v=x.then((function(e){return(0,o.b3)(Object.values(e).map((function(e){return e.data})))})),p=function(){function e(t,n,r){var i=this;(0,s.Z)(this,e),this.sheet=void 0,this.key=void 0,this.data=void 0,this.getSlotName=function(e){return Z(i.key,"pieces.".concat(e,".name"))},this.getSlotDesc=function(e){return Z(i.key,"pieces.".concat(e,".desc"))},this.setEffectDesc=function(e){return Z(i.key,"setEffects.".concat(e))},this.setEffectDocument=function(e){var t;return null===(t=i.sheet.setEffects[e])||void 0===t?void 0:t.document},this.hasEnough=function(e,t){var n;return(null!==(n=t.get(d.qH.artSet[i.key]).value)&&void 0!==n?n:0)>=e},this.sheet=n,this.key=t,this.data=r}return(0,a.Z)(e,[{key:"name",get:function(){return Z(this.key,"setName")}},{key:"defIconSrc",get:function(){var e=this.slots[0];if(this.slotIcons[e])return this.slotIcons[e]}},{key:"defIcon",get:function(){return(0,f.jsx)(l.Z,{src:this.defIconSrc,sx:{fontSize:"1.5em"}})}},{key:"nameWithIcon",get:function(){var e=this.slots[0];return(0,f.jsxs)("span",{children:[(0,f.jsx)(l.Z,{src:this.slotIcons[e]})," ",Z(this.key,"setName")]})}},{key:"nameRaw",get:function(){return this.sheet.name}},{key:"rarity",get:function(){return this.sheet.rarity}},{key:"slots",get:function(){switch(this.key){case"PrayersForDestiny":case"PrayersForIllumination":case"PrayersForWisdom":case"PrayersToSpringtime":return["circlet"];default:return(0,i.Z)(u.eV)}}},{key:"slotIcons",get:function(){return this.sheet.icons}},{key:"setEffects",get:function(){return this.sheet.setEffects}}],[{key:"get",value:function(e){return e?x.then((function(t){return t[e]})):void 0}},{key:"getAll",get:function(){return x}},{key:"getAllData",get:function(){return v}},{key:"setKeysByRarities",value:function(e){var t={};return Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),s=n[0],a=n[1],l=Math.max.apply(Math,(0,i.Z)(a.rarity));t[l]?t[l].push(s):t[l]=[s]})),t}},{key:"setEffects",value:function(e,t){var n={};return Object.entries(e).forEach((function(e){var i=(0,r.Z)(e,2),s=i[0],a=i[1],l=Object.keys(a.setEffects).map((function(e){return parseInt(e)})).filter((function(e){return a.hasEnough(e,t)}));l.length&&(n[s]=l)})),n}}]),e}(),j=function(e,t){return{title:e("setName"),icon:(0,f.jsx)(l.Z,{size:2,sx:{m:-1},src:t}),action:(0,f.jsx)(h.Z,{color:"success",children:"4-set"})}}},16246:function(e,t,n){n.d(t,{Z:function(){return V}});var r=n(30168),i=n(53174),s=n(54483),a=n(40117),l=n(62002),c=n(20890),o=n(47047),u=n(39504),d=n(68870),h=n(81918),f=n(13400),x=n(61889),Z=n(42169),v=n(72363),p=n(2199),j=n(24518),m=n(18455),y=n(72791),g=n(22020),b=n(95614),w=n(96106),k=n(71310),S=n(36944),C=n(40020),P=n(91702),K=n(25617),A=n(10157),I=n(19272),E=n(31148),F=n(3997),M=n(44297),G=n(29439);var W,R,L,O=n(42320),D=n(50765),T=n(60393),N=n(46797),U=n(44217),z=n(80184),_=new Set(D.L);function V(e){var t,n,D,V,B=e.artifactId,q=e.artifactObj,H=e.onEdit,$=e.onDelete,Q=e.mainStatAssumptionLevel,X=void 0===Q?0:Q,Y=e.effFilter,J=void 0===Y?_:Y,ee=e.probabilityFilter,te=(0,g.$)(["artifact"]).t,ne=(0,y.useContext)(F.t4),re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,y.useContext)(F.t4),n=(0,y.useState)(t._getArt(e)),r=(0,G.Z)(n,2),i=r[0],s=r[1];return(0,y.useEffect)((function(){return s(t._getArt(e))}),[t,e]),(0,y.useEffect)((function(){return e?t.followArt(e,s):void 0}),[e,s,t]),i}(B),ie=(0,O.Z)(E.y.get(null===(t=null!==q&&void 0!==q?q:re)||void 0===t?void 0:t.setKey),[q,re]),se=!q&&ne===F.Fs,ae=null!==q&&void 0!==q?q:re;if(!ae)return null;var le=ae.id,ce=ae.lock,oe=ae.slotKey,ue=ae.rarity,de=ae.level,he=ae.mainStatKey,fe=ae.substats,xe=ae.exclude,Ze=ae.location,ve=void 0===Ze?"":Ze,pe=Math.max(Math.min(X,4*ue),de),je="roll"+(Math.floor(Math.max(de,0)/4)+1),me=(0,z.jsx)(P.Z,{color:pe!==de?"warning":void 0,children:(0,M.qs)(null!==(n=I.Z.mainStatValue(he,ue,pe))&&void 0!==n?n:0,M.ZP.unit(he))}),ye=I.Z.getArtifactEfficiency(ae,J),ge=ye.currentEfficiency,be=ye.maxEfficiency,we=0!==be,ke=(null===ie||void 0===ie?void 0:ie.getSlotName(oe))||"Unknown Piece Name",Se=null===ie||void 0===ie?void 0:ie.getSlotDesc(oe),Ce=Se&&(0,z.jsx)(w.Z,{placement:"top",title:(0,z.jsx)(c.Z,{children:Se}),children:(0,z.jsx)("span",{children:(0,z.jsx)(s.G,{icon:i.sqG})})}),Pe=null===ie||void 0===ie?void 0:ie.setEffects,Ke=ie&&Pe&&(0,z.jsx)(w.Z,{placement:"top",title:(0,z.jsx)("span",{children:Object.keys(Pe).map((function(e){return(0,z.jsxs)("span",{children:[(0,z.jsx)(c.Z,{variant:"h6",children:(0,z.jsx)(K.Z,{color:"success",children:te("setEffectNum",{setNum:e})})}),(0,z.jsx)(c.Z,{children:ie.setEffectDesc(e)})]},e)}))}),children:(0,z.jsx)("span",{children:(0,z.jsx)(s.G,{icon:i.sqG})})});return(0,z.jsx)(y.Suspense,{fallback:(0,z.jsx)(o.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:(0,z.jsxs)(k.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,z.jsxs)(u.Z,{className:"grad-".concat(ue,"star"),sx:{pt:1,pb:0,pr:0},children:[(0,z.jsxs)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",pr:1},children:[(0,z.jsx)(h.Z,{size:"small",label:(0,z.jsx)("strong",{children:" +".concat(de)}),color:je}),(0,z.jsxs)(c.Z,{sx:{pl:1,flexGrow:1},children:[ke," ",Ce]}),(0,z.jsx)(f.Z,{color:"primary",disabled:!se,onClick:function(){return ne.updateArt({lock:!ce},le)},children:ce?(0,z.jsx)(a.Z,{}):(0,z.jsx)(l.Z,{})})]}),(0,z.jsxs)(x.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,z.jsxs)(x.ZP,{item:!0,flexGrow:1,children:[(0,z.jsx)(c.Z,{color:"text.secondary",variant:"body2",children:(0,z.jsx)(b.ZP,{slotKey:oe})}),(0,z.jsx)(c.Z,{variant:"h6",children:M.ZP.get(he)}),(0,z.jsx)(c.Z,{variant:"h5",children:(0,z.jsx)("strong",{children:me})}),(0,z.jsx)(A.t,{stars:ue,colored:!0})]}),(0,z.jsx)(x.ZP,{item:!0,maxWidth:"40%",sx:{mt:-3,mb:-1,pl:-2},alignSelf:"flex-end",children:(0,z.jsx)(Z.Z,{component:"img",image:null!==(D=null===ie||void 0===ie?void 0:ie.slotIcons[oe])&&void 0!==D?D:"",width:"100%",height:"auto"})})]})]}),(0,z.jsxs)(u.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0},children:[fe.map((function(e,t){var n,r,i;if(!e.value)return null;var s=null!==(n=null===(r=e.rolls)||void 0===r?void 0:r.length)&&void 0!==n?n:0,a="roll".concat((0,T.uZ)(s,1,6)),l=null!==(i=e.efficiency)&&void 0!==i?i:0,o=(0,T.V2)(.5+l/500*.5),u=M.ZP.get(e.key);return(0,z.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,z.jsxs)(d.Z,{sx:{flexGrow:1},children:[(0,z.jsx)(K.Z,{color:s?a:"error",sx:{mr:1},children:(0,z.jsx)("strong",{children:s||"?"})}),(0,z.jsxs)(c.Z,{color:s?"".concat(a,".main"):"error.main",component:"span",children:[u,"+".concat((0,M.qs)(e.value,M.ZP.unit(e.key)))]})]}),(0,z.jsx)(c.Z,{sx:{opacity:o},children:e.key&&J.has(e.key)?"".concat(l.toFixed(),"%"):"-"})]},t)})),(0,z.jsxs)(d.Z,{sx:{display:"flex",my:1},children:[(0,z.jsx)(c.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:te(W||(W=(0,r.Z)(["editor.curSubEff"])))}),(0,z.jsx)(N.Z,{value:ge,max:900,valid:we})]}),ge!==be&&(0,z.jsxs)(d.Z,{sx:{display:"flex",mb:1},children:[(0,z.jsx)(c.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:te(R||(R=(0,r.Z)(["editor.maxSubEff"])))}),(0,z.jsx)(N.Z,{value:be,max:900,valid:we})]}),(0,z.jsx)(d.Z,{flexGrow:1}),ee&&(0,z.jsxs)("strong",{children:["Probability: ",(100*(0,U.B)(ae,ee)).toFixed(2),"%"]}),(0,z.jsxs)(c.Z,{color:"success.main",children:[null!==(V=null===ie||void 0===ie?void 0:ie.name)&&void 0!==V?V:"Artifact Set"," ",Ke]})]}),(0,z.jsx)(v.Z,{children:(0,z.jsxs)(x.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,z.jsx)(x.ZP,{item:!0,xs:"auto",flexShrink:1,children:se?(0,z.jsx)(S.Z,{size:"small",inventory:!0,value:ve,onChange:function(e){return ne.setArtLocation(B,e)}}):(0,z.jsx)(C.Z,{location:ve})}),(0,z.jsx)(x.ZP,{item:!0,flexGrow:1,sx:{mr:1}}),se&&(0,z.jsx)(x.ZP,{item:!0,xs:"auto",children:(0,z.jsxs)(p.Z,{sx:{height:"100%"},children:[!!H&&(0,z.jsx)(j.Z,{color:"info",onClick:function(){return H(le)},size:"small",children:(0,z.jsx)(s.G,{icon:i.Xcf,className:"fa-fw"})}),(0,z.jsx)(m.Z,{title:(0,z.jsx)(c.Z,{children:te(L||(L=(0,r.Z)(["excludeArtifactTip"])))}),placement:"top",arrow:!0,children:(0,z.jsx)(j.Z,{onClick:function(){return ne.updateArt({exclude:!xe},le)},color:xe?"error":"success",size:"small",children:(0,z.jsx)(s.G,{icon:xe?i.gPx:i.Stf,className:"fa-fw"})})}),!!$&&(0,z.jsx)(j.Z,{color:"error",size:"small",onClick:function(){return $(le)},disabled:ce,children:(0,z.jsx)(s.G,{icon:i.I7k,className:"fa-fw"})})]})})]})})]})})}},13657:function(e,t,n){n.r(t),n.d(t,{default:function(){return on}});var r,i=n(30168),s=n(29439),a=n(93433),l=n(1413),c=n(49670),o=n(68870),u=n(19658),d=n(23060),h=n(39504),f=n(61889),x=n(24518),Z=n(57246),v=n(47047),p=n(20890),j=n(90388),m=n(72791),y=n(16129),g=n(22020),b=n(76899),w=n(91523),k=n(3992),S=n(43568),C=n(91839),P=n(3997),K=n(23741),A=n(68544),I=n(50765),E=n(44824),F=n(46956),M=n(60393),G=n(16246),W=n(87757),R=n.n(W),L=n(53174),O=n(54483),D=n(43245),T=n(68087),N=n(54091),U=n(66934),z=n(9585),_=n(2199),V=n(23786),B=n(13239),q=n(45987),H=n(24351),$=n(33890),Q=n(10157),X=n(80184),Y=["rarity","onChange","filter"];function J(e){var t=e.rarity,n=e.onChange,s=e.filter,a=(0,q.Z)(e,Y),c=(0,g.$)("artifact").t;return(0,X.jsx)($.Z,(0,l.Z)((0,l.Z)({},a),{},{title:t?(0,X.jsx)(Q.t,{stars:t}):c(r||(r=(0,i.Z)(["editor.rarity"]))),color:t?"success":"primary",children:[5,4,3].map((function(e){return(0,X.jsx)(V.Z,{disabled:!s(e),onClick:function(){return n(e)},children:(0,X.jsx)(Q.t,{stars:e})},e)}))}))}var ee,te=n(8375),ne=n(57064),re=n(49900),ie=n(94721),se=n(95614),ae=["slotKey","onChange","hasUnselect"];function le(e){var t=e.slotKey,n=void 0===t?"":t,r=e.onChange,s=e.hasUnselect,a=void 0!==s&&s,o=(0,q.Z)(e,ae),u=(0,g.$)(["artifact","ui"]).t;return(0,X.jsxs)($.Z,(0,l.Z)((0,l.Z)({title:u(n?"artifact:slotName:".concat(n):"artifact:slot"),color:n?"success":"primary",startIcon:n?(0,se.Ir)(n):void 0},o),{},{children:[a&&(0,X.jsxs)(V.Z,{selected:""===n,disabled:""===n,onClick:function(){return r("")},children:[(0,X.jsx)(ne.Z,{children:(0,X.jsx)(c.Z,{})}),(0,X.jsx)(re.Z,{children:u(ee||(ee=(0,i.Z)(["ui:unselect"])))})]}),a&&(0,X.jsx)(ie.Z,{}),H.eV.map((function(e){return(0,X.jsxs)(V.Z,{selected:n===e,disabled:n===e,onClick:function(){return r(e)},children:[(0,X.jsx)(ne.Z,{children:(0,se.Ir)(e)}),(0,X.jsx)(re.Z,{children:u("artifact:slotName:".concat(e))})]},e)}))]}))}var ce=n(71310),oe=n(68198),ue=n(27391),de=["value","onChange","disabled","float"];function he(e){var t=e.value,n=e.onChange,r=e.disabled,i=void 0!==r&&r,a=e.float,c=void 0!==a&&a,o=(0,q.Z)(e,de),u=(0,m.useState)(""),d=(0,s.Z)(u,2),h=d[0],f=d[1],x=(0,m.useCallback)((function(){if(""===h)return n(0);var e=c?parseFloat:parseInt;n(e(h))}),[n,h,c]);return(0,m.useEffect)((function(){var e;return f(null!==(e=null===t||void 0===t?void 0:t.toString())&&void 0!==e?e:"")}),[t,f]),(0,X.jsx)(ue.Z,(0,l.Z)({value:h,"aria-label":"custom-input",type:"number",onChange:function(e){return f(e.target.value)},onBlur:x,disabled:i,onKeyDown:function(e){return"Enter"===e.key&&x()}},o))}var fe=n(55942),xe=n(9321),Ze=n(19272),ve=n(31148),pe=n(93329),je=n(44297),me=n(42320),ye=JSON.parse('{"5":{"def_":{"24.0":"24.1","36.5":"36.4"},"critRate_":{"8.5":"8.6"}}}');var ge=n(96106),be=n(46797);function we(e){var t=e.efficiency,n=e.max,r=void 0!==n&&n,i=e.t,s=e.valid,a=r?"maxSubEff":"curSubEff";return(0,X.jsx)(ce.Z,{sx:{py:1,px:2},children:(0,X.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,X.jsx)(f.ZP,{item:!0,children:i("editor.".concat(a))}),(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,X.jsx)(ge.Z,{placement:"top",title:(0,X.jsxs)("span",{children:[(0,X.jsx)(p.Z,{variant:"h6",children:i("editor.".concat(a))}),(0,X.jsx)(p.Z,{children:(0,X.jsx)(b.c,{t:i,i18nKey:"editor.".concat(a,"Desc")})})]}),children:(0,X.jsx)("span",{children:(0,X.jsx)(o.Z,{component:O.G,icon:L.sph,sx:{cursor:"help"}})})})}),(0,X.jsx)(f.ZP,{item:!0,xs:"auto",children:(0,X.jsx)(be.Z,{valid:s,max:900,value:s?t:"ERR"})})]})})}var ke,Se,Ce,Pe,Ke,Ae,Ie,Ee=n(10600),Fe=n(25617),Me=n(92443);function Ge(e){var t,n=e.index,r=e.artifact,s=e.setSubstat,l=(0,g.$)("artifact").t,c=null!==r&&void 0!==r?r:{},u=c.mainStatKey,d=void 0===u?"":u,h=c.rarity,Z=void 0===h?5:h,v=null!==(t=null===r||void 0===r?void 0:r.substats[n])&&void 0!==t?t:{},j=v.key,m=void 0===j?"":j,y=v.value,w=void 0===y?0:y,k=v.rolls,S=void 0===k?[]:k,C=v.efficiency,P=void 0===C?0:C,K=S.reduce((function(e,t){return e+t}),0),A=je.ZP.unit(m),E=S.length,F="",G=[],W=0;if(r){var R=r.rarity,L=Ze.Z.rollInfo(R),O=L.numUpgrades,D=L.high;W=O+D-3-E,G=m?Ze.Z.getSubstatRollData(m,R):[]}var T=7-G.length;return!E&&m&&w&&(F=F||l(ke||(ke=(0,i.Z)(["editor.substat.error.noCalc"])))),W<0&&(F=F||l("editor.substat.error.noOverRoll",{value:W+E})),(0,X.jsxs)(ce.Z,{children:[(0,X.jsx)(o.Z,{sx:{display:"flex"},children:(0,X.jsxs)(_.Z,{size:"small",sx:{width:"100%",display:"flex"},children:[(0,X.jsxs)($.Z,{title:m?je.ZP.get(m):l("editor.substat.substatFormat",{value:n+1}),disabled:!r,color:m?"success":"primary",sx:{whiteSpace:"nowrap"},children:[m&&(0,X.jsx)(V.Z,{onClick:function(){return s(n,{key:"",value:0})},children:l(Se||(Se=(0,i.Z)(["editor.substat.noSubstat"])))}),I.L.filter((function(e){return d!==e})).map((function(e){return(0,X.jsx)(V.Z,{selected:m===e,disabled:m===e,onClick:function(){return s(n,{key:e,value:0})},children:je.ZP.get(e)},e)}))]}),(0,X.jsx)(Ee.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,X.jsx)(Ee.ZP,{float:"%"===A,placeholder:l(Ce||(Ce=(0,i.Z)(["editor.substat.selectSub"]))),value:m?w:void 0,onChange:function(e){return s(n,{key:m,value:null!==e&&void 0!==e?e:0})},disabled:!m,error:!!F,sx:{px:1},inputProps:{sx:{textAlign:"right"}}})}),!!G.length&&(0,X.jsx)(Me.Z,{children:l(Pe||(Pe=(0,i.Z)(["editor.substat.nextRolls"])))}),G.map((function(e,t){var r,i,a,l=(0,je.qs)(K+e,A);return l=null!==(r=null===(i=ye[Z])||void 0===i||null===(a=i[m])||void 0===a?void 0:a[l])&&void 0!==r?r:l,(0,X.jsx)(x.Z,{color:"roll".concat((0,M.uZ)(T+t,1,6)),disabled:w&&!E||W<=0,onClick:function(){return s(n,{key:m,value:parseFloat(l)})},children:l},t)}))]})}),(0,X.jsx)(o.Z,{sx:{p:1},children:F?(0,X.jsx)(Fe.Z,{color:"error",children:l(Ke||(Ke=(0,i.Z)(["ui:error"])))}):(0,X.jsxs)(f.ZP,{container:!0,children:[(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(Fe.Z,{color:0===E?"secondary":"roll".concat((0,M.uZ)(E,1,6)),children:E?l("editor.substat.RollCount",{count:E}):l(Ae||(Ae=(0,i.Z)(["editor.substat.noRoll"])))})}),(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:!!S.length&&(0,a.Z)(S).sort().map((function(e){return(0,X.jsx)(p.Z,{component:"span",color:"roll".concat((0,M.uZ)(T+G.indexOf(e),1,6),".main"),sx:{ml:1},children:(0,je.qs)(e,A)},e)}))}),(0,X.jsx)(f.ZP,{item:!0,xs:"auto",flexShrink:1,children:(0,X.jsx)(p.Z,{children:(0,X.jsxs)(b.c,{t:l,i18nKey:"editor.substat.eff",color:"text.secondary",children:["Efficiency: ",(0,X.jsx)(be.Z,{valid:!0,max:100*E,value:P||l(Ie||(Ie=(0,i.Z)(["editor.substat.noStat"])))})]})})})]})})]})}var We=n(57641),Re=n(82554);function Le(e){var t=e.modalShow,n=e.hide;return(0,X.jsx)(xe.Z,{open:t,onClose:n,children:(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(h.Z,{sx:{py:1},children:(0,X.jsxs)(f.ZP,{container:!0,children:[(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,X.jsx)(p.Z,{variant:"subtitle1",children:"How do Upload Screenshots for parsing"})}),(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(oe.Z,{onClick:n})})]})}),(0,X.jsx)(ie.Z,{}),(0,X.jsxs)(h.Z,{children:[(0,X.jsxs)(u.Z,{variant:"outlined",severity:"warning",children:["NOTE: Artifact Scanning currently only work for ",(0,X.jsx)("strong",{children:"ENGLISH"})," artifacts."]}),(0,X.jsxs)(f.ZP,{container:!0,spacing:1,mt:1,children:[(0,X.jsx)(f.ZP,{item:!0,xs:8,md:4,children:(0,X.jsx)(o.Z,{component:"img",alt:"snippet of the screen to take",src:Re,width:"100%",height:"auto"})}),(0,X.jsxs)(f.ZP,{item:!0,xs:12,md:8,children:[(0,X.jsx)(p.Z,{gutterBottom:!0,children:"Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer."}),(0,X.jsx)(p.Z,{variant:"h5",children:"Where to snip the screenshot."}),(0,X.jsxs)(p.Z,{gutterBottom:!0,children:["In game, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer. ",(0,X.jsx)("b",{children:"Only artifact from this screen can be scanned."})]}),(0,X.jsx)(p.Z,{variant:"h6",children:"Single artifact"}),(0,X.jsxs)(p.Z,{gutterBottom:!0,children:["To take a screenshot, in Windows, the shortcut is ",(0,X.jsx)("strong",{children:"Shift + WindowsKey + S"}),". Once you selected the region, the image is automatically included in your clipboard."]}),(0,X.jsx)(p.Z,{variant:"h6",children:"Multiple artifacts"}),(0,X.jsxs)(p.Z,{gutterBottom:!0,children:["To take advantage of batch uploads, you can use a tool like ",(0,X.jsx)("a",{href:"https://picpick.app/",target:"_blank",rel:"noreferrer",children:"PicPick"})," to create a macro to easily to screenshot a region to screenshot multiple artifacts at once."]}),(0,X.jsx)(p.Z,{variant:"h5",children:"What to include in the screenshot."}),(0,X.jsx)(p.Z,{children:"As shown in the Image, starting from the top with the artifact name, all the way to the set name(the text in green). "})]}),(0,X.jsxs)(f.ZP,{item:!0,xs:12,md:7,children:[(0,X.jsx)(p.Z,{variant:"h5",children:"Adding Screenshot to Genshin Optimizer"}),(0,X.jsx)(p.Z,{children:"At this point, you should have the artifact snippet either saved to your harddrive, or in your clipboard."}),(0,X.jsx)(p.Z,{gutterBottom:!0,children:'You can click on the box next to "Browse" to browse the files in your harddrive for multiple screenshots.'}),(0,X.jsxs)(p.Z,{children:["For single screenshots from the snippets, just press ",(0,X.jsx)("strong",{children:"Ctrl + V"})," to paste from your clipboard."]}),(0,X.jsxs)(p.Z,{gutterBottom:!0,children:["You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the ",(0,X.jsx)("b",{children:"Artifact Editor"}),"."]}),(0,X.jsx)(p.Z,{variant:"h5",children:"Finishing the Artifact"}),(0,X.jsxs)(p.Z,{children:["Unfortunately, computer vision is not 100%. There will always be cases where something is not scanned properly. You should always double check the scanned artifact values! Once the artifact has been filled, Click on ",(0,X.jsx)("strong",{children:"Add Artifact"})," to finish editing the artifact."]})]}),(0,X.jsx)(f.ZP,{item:!0,xs:8,md:5,children:(0,X.jsx)(o.Z,{component:"img",alt:"main screen after importing stats",src:We,width:"100%",height:"auto"})})]})]}),(0,X.jsx)(ie.Z,{}),(0,X.jsx)(h.Z,{sx:{py:1},children:(0,X.jsx)(oe.Z,{large:!0,onClick:n})})]})})}var Oe=n(37762),De=n(15861),Te=n(31362),Ne=n(91702),Ue=n(15671),ze=n(43144),_e=function(){function e(t,n){(0,Ue.Z)(this,e),this.data={},this.init=void 0,this.deinit=void 0,this.init=t,this.deinit=n}return(0,ze.Z)(e,[{key:"borrow",value:function(){var e=(0,De.Z)(R().mark((function e(t,n){var r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.data[t]||(this.data[t]={value:this.init(t),refCount:0}),(r=this.data[t]).refCount+=1,e.next=5,n(r.value);case 5:return i=e.sent,r.refCount-=1,r.refCount||(delete this.data[t],this.deinit(t,r.value)),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Ve={r:255,g:204,b:50},Be=new _e(function(){var e=(0,De.Z)(R().mark((function e(t){var n,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,Te.createScheduler)(),r=Array(2).fill(0).map(function(){var e=(0,De.Z)(R().mark((function e(r){var i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,Te.createWorker)({errorHandler:console.error}),e.next=3,i.load();case 3:return e.next=5,i.loadLanguage(t);case 5:return e.next=7,i.initialize(t);case 7:n.addWorker(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.any(r);case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e,t){t.then((function(e){return e.terminate()}))})),qe=function(e,t){switch(t.type){case"upload":return{processed:e.processed,outstanding:[].concat((0,a.Z)(e.outstanding),(0,a.Z)(t.files))};case"processing":return{processed:e.processed,outstanding:(0,a.Z)(e.outstanding)};case"processed":return e.outstanding[0].file===t.file?{processed:[].concat((0,a.Z)(e.processed),[t.result]),outstanding:e.outstanding.slice(1)}:e;case"pop":return{processed:e.processed.slice(1),outstanding:e.outstanding};case"clear":return{processed:[],outstanding:[]}}};function He(e){if(!e.result){var t=e.file,n=e.fileName;e.imageURL=lt(t),e.result=e.imageURL.then(function(){var e=(0,De.Z)(R().mark((function e(r){var i,a,l,c,o,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.y.getAll;case 2:return i=e.sent,e.next=5,ut(r);case 5:return a=e.sent,l=xt(i,a.rarities,Zt(a.artifactSetTexts,i),jt(a.whiteTexts),gt(a.substatTexts),mt(a.whiteTexts),yt(a.whiteTexts)),c=(0,s.Z)(l,2),o=c[0],u=c[1],e.abrupt("return",{file:t,result:{fileName:n,imageURL:r,artifact:o,texts:u}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}var $e,Qe,Xe,Ye,Je,et,tt,nt,rt,it,st,at,lt=function(e){return new Promise((function(t){var n=new FileReader;n.onloadend=function(e){var n=e.target;return t(n.result)},n.readAsDataURL(e)}))},ct=function(e){return new Promise((function(t){var n=new Image;n.onload=function(e){var n=e.target;return t(function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)}(n))},n.src=e}))};function ot(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t}function ut(e){return dt.apply(this,arguments)}function dt(){return(dt=(0,De.Z)(R().mark((function e(t){var n,r,i,a,l,c,o,u,d,h,f;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t);case 2:return n=e.sent,r=n.width,i=Math.floor(n.height/2),a={rectangle:{top:i,left:0,width:r,height:i}},l=[ht(bt(n,[140,140,140],[255,255,255],{mode:"bw",region:"top"})),ht(bt(n,[30,50,80],[160,160,160],{region:"bot"}),a),ht(bt(n,[30,160,30],[200,255,200],{mode:"bw",region:"bot"}),a)],c=vt(n.data,n.width,n.height),e.next=9,Promise.all(l);case 9:return o=e.sent,u=(0,s.Z)(o,3),d=u[0],h=u[1],f=u[2],e.abrupt("return",{whiteTexts:d,substatTexts:h,artifactSetTexts:f,rarities:c});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e){return ft.apply(this,arguments)}function ft(){return ft=(0,De.Z)(R().mark((function e(t){var n,r,i,s=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:void 0,r=ot(t),e.next=4,Be.borrow("eng",function(){var e=(0,De.Z)(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,e.sent.addJob("recognize",r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return i=e.sent,e.abrupt("return",i.data.lines.map((function(e){return e.text})));case 6:case"end":return e.stop()}}),e)}))),ft.apply(this,arguments)}function xt(e,t,n,r,i,l,c){var o,u=(0,a.Z)(new Set([].concat((0,a.Z)(n),["EmblemOfSeveredFate"]))),d=-1,h=[{setKey:"EmblemOfSeveredFate",rarity:3,level:0,slotKey:"flower",mainStatKey:"hp",substats:[],location:"",lock:!1,exclude:!1}],f=(0,M.O)(H.En,(function(t){var r=0;n.size&&(r+=(0,a.Z)(n).reduce((function(n,r){return n+(e[r].rarity.includes(t)?1:0)}),0)/n.size);if(i.length){var s=i.reduce((function(e,n){return e+(Ze.Z.getSubstatRolls(n.key,n.value,t).length?1:0)}),0);r+=s/i.length*2}return r})),x=(0,Oe.Z)(H.eV);try{for(x.s();!(o=x.n()).done;){var Z,v=o.value,p=(0,Oe.Z)(Ze.Z.slotMainStats(v));try{var j=function(){for(var t=Z.value,i=(r.has(v)?1:0)+(l.has(t)?1:0),a=c.filter((function(e){return"%"!==e.unit||"%"===je.ZP.unit(t)})).map((function(e){return e.mainStatValue})),o=function(){var r=(0,s.Z)(p[x],2),l=r[0],c=r[1],o=parseInt(l),f=u.filter((function(t){return e[t].rarity.includes(o)})),Z=i+c;if(Z+2<d)return"continue";var j,m=(0,Oe.Z)(a);try{var y=function(){var e,r=j.value,i=Ze.Z.mainStatValues(o,t),s=Math.max(0,i.findIndex((function(e){return e>=r}))),a=i[s],l=Z+(a===r?1:0),c=(0,Oe.Z)(f);try{for(c.s();!(e=c.n()).done;){var u=e.value,x=l+(n.has(u)?1:0);x>=d&&(x>d&&(h=[]),d=x,h.push({setKey:u,rarity:o,level:s,slotKey:v,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1}))}}catch(p){c.e(p)}finally{c.f()}};for(m.s();!(j=m.n()).done;)y()}catch(S){m.e(S)}finally{m.f()}if(Z>=d){var g,b=(0,Oe.Z)(f);try{for(b.s();!(g=b.n()).done;){var w=g.value,k=Z+(n.has(w)?1:0);k>d&&(h=[]),d=k,h.push({setKey:w,rarity:o,level:0,slotKey:v,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1})}}catch(S){b.e(S)}finally{b.f()}}},x=0,p=Object.entries(f);x<p.length;x++)o()};for(p.s();!(Z=p.n()).done;)j()}catch(F){p.e(F)}finally{p.f()}}}catch(F){x.e(F)}finally{x.f()}var m={},y={setKey:new Set,rarity:new Set,level:new Set,slotKey:new Set,mainStatKey:new Set,mainStatVal:new Set},g=h[0],b=Ze.Z.mainStatValue(g.mainStatKey,g.rarity,g.level);g.substats=i.filter((function(e,t){return e.key!==g.mainStatKey&&i.slice(0,t).every((function(t){return t.key!==e.key}))}));for(var w=g.substats.length;w<4;w++)g.substats.push({key:"",value:0});for(var k=0,S=h;k<S.length;k++){var C=S[k];y.setKey.add(C.setKey),y.rarity.add(C.rarity),y.level.add(C.level),y.slotKey.add(C.slotKey),y.mainStatKey.add(C.mainStatKey)}function P(e,t,n){return(0,X.jsxs)(X.Fragment,{children:["Unknown ",t," : Set to ",(0,X.jsx)(Ne.Z,{color:"error",children:n(e)})]})}function K(e,t,n){return(0,X.jsxs)(X.Fragment,{children:["Detected ",t," ",(0,X.jsx)(Ne.Z,{color:"success",children:n(e)})]})}function A(e,t,n){return(0,X.jsxs)(X.Fragment,{children:["Inferred ",t," ",(0,X.jsx)(Ne.Z,{color:"warning",children:n(e)})]})}function I(e,t,n,r){var i=new Set((0,a.Z)(y[e]).filter((function(e){return t.has(e)})));i.size>1?m[e]=function(e,t,n,r){return(0,X.jsxs)(X.Fragment,{children:["Ambiguous ",n," ",(0,X.jsx)(Ne.Z,{color:"error",children:r(e)})," : May also be ",t.filter((function(t){return t!==e})).map((function(e,t){return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("b",{children:t>0?"/":""}),(0,X.jsx)(Ne.Z,{color:"warning",children:r(e)})]})}))]})}(g[e],(0,a.Z)(t),n,r):1===i.size?m[e]=K(g[e],n,r):y[e].size>1?m[e]=P(g[e],n,r):m[e]=A(g[e],n,r)}I("setKey",n,"Set",(function(t){return e[t].name})),I("rarity",t,"Rarity",(function(e){return(0,X.jsxs)(X.Fragment,{children:[e," ",1!==e?"Stars":"Star"]})})),I("slotKey",r,"Slot",(function(e){return(0,X.jsx)(X.Fragment,{children:Ze.Z.slotName(e)})})),I("mainStatKey",l,"Main Stat",(function(e){return(0,X.jsx)(X.Fragment,{children:je.ZP.getStr(e)})})),m.substats=(0,X.jsx)(X.Fragment,{children:g.substats.filter((function(e){return""!==e.key})).map((function(e,t){return(0,X.jsx)("div",{children:K(e,"Sub Stat",(function(e){return(0,X.jsxs)(X.Fragment,{children:[je.ZP.getStr(e.key),"+",(0,je.EC)(e.value,je.ZP.unit(e.key))]})}))},t)}))});var E=je.ZP.unit(g.mainStatKey);return c.find((function(e){return e.mainStatValue===b}))?l.has(g.mainStatKey)?(m.level=K(g.level,"Level",(function(e){return"+"+e})),m.mainStatVal=K(b,"Main Stat value",(function(e){return(0,X.jsx)(X.Fragment,{children:(0,je.EC)(e,E)})}))):(m.level=A(g.level,"Level",(function(e){return"+"+e})),m.mainStatVal=A(b,"Main Stat value",(function(e){return(0,X.jsx)(X.Fragment,{children:(0,je.EC)(e,E)})}))):(m.level=P(g.level,"Level",(function(e){return"+"+e})),m.mainStatVal=P(b,"Main Stat value",(function(e){return(0,X.jsx)(X.Fragment,{children:(0,je.EC)(e,E)})}))),[g,m]}function Zt(e,t){var n,r=new Set([]),i=(0,Oe.Z)(e);try{for(i.s();!(n=i.n()).done;){var s,a=n.value,l=(0,Oe.Z)(H.q2);try{for(l.s();!(s=l.n()).done;){var c=s.value;(0,M.UX)(a.replace(/\W/g,""),t[c].nameRaw.replace(/\W/g,""))<=2&&r.add(c)}}catch(o){l.e(o)}finally{l.f()}}}catch(o){i.e(o)}finally{i.f()}return r}function vt(e,t,n){for(var r=e,i=0,s=0,a=new Set([]),l=0;l<n;l++){for(var c=0,o=!1,u=0;u<t;u++){var d=4*(l*t+u);pt({r:r[d],g:r[d+1],b:r[d+2]},Ve)?o||(o=!0,c++):o=!1}i!==c?(i=c,s=1):i&&++s>=10&&a.add((0,M.uZ)(i,3,5))}return a}function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=function(e,t){return Math.abs(e-t)<=n};return r(e.r,t.r)&&r(e.g,t.g)&&r(e.b,t.b)}function jt(e){var t,n=new Set,r=(0,Oe.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,s=t.value,a=(0,Oe.Z)(H.eV);try{for(a.s();!(i=a.n()).done;){var l=i.value;(0,M.UX)(s.replace(/\W/g,""),Ze.Z.slotName(l).replace(/\W/g,""))<=2&&n.add(l)}}catch(c){a.e(c)}finally{a.f()}}}catch(c){r.e(c)}finally{r.f()}return n}function mt(e){var t,n=new Set([]),r=(0,Oe.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,s=t.value,a=(0,Oe.Z)(I.r);try{for(a.s();!(i=a.n()).done;){var l,c,o,u=i.value;s.toLowerCase().includes(null!==(l=null===(c=je.ZP.getStr(u))||void 0===c?void 0:c.toLowerCase())&&void 0!==l?l:"")&&n.add(u),u.includes("_bonu")&&(0,M.UX)(s.replace(/\W/g,""),(null!==(o=je.ZP.getStr(u))&&void 0!==o?o:"").replace(/\W/g,""))<=1&&n.add(u)}}catch(d){a.e(d)}finally{a.f()}}}catch(d){r.e(d)}finally{r.f()}return n}function yt(e){var t,n=[],r=(0,Oe.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,s=/(\d+[,|\\.]+\d)%/,a=s.exec(i);a&&n.push({mainStatValue:parseFloat(a[1].replace(/,/g,".").replace(/\.{2,}/g,".")),unit:"%"}),(a=(s=/(\d+[,|\\.]\d{3}|\d{2,3})/).exec(i))&&n.push({mainStatValue:parseInt(a[1].replace(/[,|\\.]+/g,""))})}}catch(l){r.e(l)}finally{r.f()}return n}function gt(e){var t,n=[],r=(0,Oe.Z)(e);try{var i=function(){var e=t.value;e=e.replace(/^[\W]+/,"").replace(/\n/,""),I.L.forEach((function(t){var r=je.ZP.getStr(t),i=("%"===je.ZP.unit(t)?new RegExp(r+"\\s*\\+\\s*(\\d+[\\.|,]+\\d)%","im"):new RegExp(r+"\\s*\\+\\s*(\\d+,\\d+|\\d+)($|\\s)","im")).exec(e);i&&n.push({key:t,value:parseFloat(i[1].replace(/,/g,".").replace(/\.{2,}/g,"."))})}))};for(r.s();!(t=r.n()).done;)i()}catch(s){r.e(s)}finally{r.f()}return n.slice(0,4)}function bt(e,t,n,r){for(var i=r.region,s=void 0===i?"all":i,a=r.mode,l=void 0===a?"color":a,c=Uint8ClampedArray.from(e.data),o="top"===s,u="bot"===s,d="all"===s,h="bw"===l,f="invert"===l,x=Math.floor(e.width*(e.height/2)*4),Z=0;Z<c.length;Z+=4){var v=c[Z],p=c[Z+1],j=c[Z+2];(d||o&&Z<x||u&&Z>x)&&v>=t[0]&&v<=n[0]&&p>=t[1]&&p<=n[1]&&j>=t[2]&&j<=n[2]?h?c[Z]=c[Z+1]=c[Z+2]=0:f&&(c[Z]=255-v,c[Z+1]=255-p,c[Z+2]=255-j):c[Z]=c[Z+1]=c[Z+2]=255}return new ImageData(c,e.width,e.height)}var wt=new Set(I.L);function kt(e,t){switch(t.type){case"reset":return;case"substat":var n=t.index,r=t.substat,i=r.key?e.substats.findIndex((function(e){return e.key===r.key})):-1;if(-1===i||i===n)e.substats[n]=r;else{var s=[e.substats[i],e.substats[n]];e.substats[n]=s[0],e.substats[i]=s[1]}return(0,l.Z)({},e);case"overwrite":return t.artifact;case"update":return(0,l.Z)((0,l.Z)({},e),t.artifact)}}var St=(0,U.ZP)("input")({display:"none"});function Ct(e){var t,n=e.artifactIdToEdit,r=e.cancelEdit,d=(0,g.$)("artifact").t,Z=(0,me.Z)(ve.y.getAll,[]),j=(0,m.useContext)(P.t4),w=(0,m.useState)(!1),S=(0,s.Z)(w,2),C=S[0],K=S[1],I=(0,A.Z)(),E=(0,s.Z)(I,2),F=E[0],W=E[1];(0,m.useEffect)((function(){return j.followAnyArt(W)}),[j,W]);var R=(0,m.useReducer)(kt,void 0),U=(0,s.Z)(R,2),q=U[0],H=U[1],Q=(0,m.useMemo)((function(){return q&&(0,pe.R$)(q)}),[q]),Y=(0,m.useState)(!1),ee=(0,s.Z)(Y,2),ne=ee[0],re=ee[1],ie=(0,m.useReducer)(qe,{processed:[],outstanding:[]}),se=(0,s.Z)(ie,2),ae=se[0],ue=ae.processed,de=ae.outstanding,ye=se[1],ge=ue[0],be=de[0],ke=(0,me.Z)(null===be||void 0===be?void 0:be.imageURL,[null===be||void 0===be?void 0:be.imageURL]),Se=(0,me.Z)(null===be||void 0===be?void 0:be.result,[null===be||void 0===be?void 0:be.result]),Ce=ue.length+de.length,Pe=null!==(t=null===ge||void 0===ge?void 0:ge.imageURL)&&void 0!==t?t:ke,Ke=null!==ge&&void 0!==ge?ge:{},Ae=Ke.artifact,Ie=Ke.texts;(0,m.useEffect)((function(){!Q&&Ae&&H({type:"overwrite",artifact:Ae})}),[Q,Ae,H]),(0,m.useEffect)((function(){var e=Math.min(16-ue.length,3,de.length),t=e&&!de[0].result;de.slice(0,e).forEach(He),t&&ye({type:"processing"})}),[ue.length,de]),(0,m.useEffect)((function(){Se&&ye((0,l.Z)({type:"processed"},Se))}),[Se,ye]);var Ee=(0,m.useCallback)((function(e){K(!0),ye({type:"upload",files:(0,a.Z)(e).map((function(e){return{file:e,fileName:e.name}}))})}),[ye,K]),Fe=(0,m.useCallback)((function(){return ye({type:"clear"})}),[ye]);(0,m.useEffect)((function(){var e=function(e){return Ee(e.clipboardData.files)};return window.addEventListener("paste",e),function(){return window.removeEventListener("paste",e)}}),[Ee]);var Me=(0,m.useCallback)((function(e){Ee(e.target.files),e.target.value=null}),[Ee]),We=(0,m.useMemo)((function(){var e,t=F&&j._getArt(n);if(t)return{old:t,oldType:"edit"};if(void 0===Q)return{old:void 0,oldType:""};var r=F&&j.findDuplicates(Q),i=r.duplicated,s=r.upgraded;return{old:null!==(e=i[0])&&void 0!==e?e:s[0],oldType:0!==i.length?"duplicate":"upgrade"}}),[Q,n,j,F]),Re=We.old,Oe=We.oldType,De=(0,m.useMemo)((function(){if(!Q)return{artifact:void 0,errors:[]};var e=(0,pe.BG)(Q,n);return Re&&(e.artifact.location=Re.location,e.artifact.exclude=Re.exclude),e}),[Q,n,Re]),Te=De.artifact,Ne=De.errors;(0,m.useEffect)((function(){"new"===n&&(K(!0),H({type:"reset"}));var e=F&&j._getArt(n);e&&(K(!0),H({type:"overwrite",artifact:(0,M.I8)(e)}))}),[n,j,F]);var Ue=Q?null===Z||void 0===Z?void 0:Z[Q.setKey]:void 0,ze=(0,m.useCallback)((function(){null===r||void 0===r||r(),ye({type:"pop"}),H({type:"reset"})}),[r,H]),_e=(0,m.useCallback)((function(e){var t,n,r=e.setKey?Z[e.setKey]:Ue;function i(e,t,n){return e&&t.includes(e)?e:null!==n&&void 0!==n?n:t[0]}e.setKey&&(e.rarity=i(null===Q||void 0===Q?void 0:Q.rarity,r.rarity,Math.max.apply(Math,(0,a.Z)(r.rarity))),e.slotKey=i(null===Q||void 0===Q?void 0:Q.slotKey,r.slots)),e.rarity&&(e.level=null!==(t=null===Q||void 0===Q?void 0:Q.level)&&void 0!==t?t:0),e.level&&(e.level=(0,M.uZ)(e.level,0,4*(null!==(n=e.rarity)&&void 0!==n?n:Q.rarity))),e.slotKey&&(e.mainStatKey=i(null===Q||void 0===Q?void 0:Q.mainStatKey,Ze.Z.slotMainStats(e.slotKey))),e.mainStatKey&&(e.substats=[0,1,2,3].map((function(t){return Q&&Q.substats[t].key!==e.mainStatKey?Q.substats[t]:{key:"",value:0}}))),H({type:"update",artifact:e})}),[Q,Z,Ue,H]),Ve=(0,m.useCallback)((function(e,t){H({type:"substat",index:e,substat:t})}),[H]),Be=!Ne.length,lt=null!==Q&&void 0!==Q?Q:{},ct=lt.rarity,ot=void 0===ct?5:ct,ut=lt.level,dt=void 0===ut?0:ut,ht=lt.slotKey,ft=void 0===ht?"flower":ht,xt=Te?Ze.Z.getArtifactEfficiency(Te,wt):{},Zt=xt.currentEfficiency,vt=void 0===Zt?0:Zt,pt=xt.maxEfficiency,jt=void 0===pt?0:pt,mt=ue.length||de.length,yt=(0,m.useCallback)((function(e){mt&&e.preventDefault(),K(!1),r()}),[mt,K,r]);return(0,X.jsx)(xe.Z,{open:C,onClose:yt,children:(0,X.jsx)(m.Suspense,{fallback:(0,X.jsx)(v.Z,{variant:"rectangular",sx:{width:"100%",height:C?"100%":64}}),children:(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(Le,{modalShow:ne,hide:function(){return re(!1)}}),(0,X.jsx)(z.Z,{title:(0,X.jsx)(b.c,{t:d,i18nKey:"editor.title",children:"Artifact Editor"}),action:(0,X.jsx)(oe.Z,{disabled:!!mt,onClick:yt})}),(0,X.jsxs)(h.Z,{sx:{pt:0},children:[(0,X.jsxs)(f.ZP,{container:!0,spacing:1,sx:{mb:1},children:[(0,X.jsxs)(f.ZP,{item:!0,xs:12,md:6,lg:6,sx:{"> div:nth-last-of-type(n+2)":{mb:1}},children:[(0,X.jsxs)(_.Z,{sx:{display:"flex",mb:1},children:[(0,X.jsx)(te.Z,{selectedSetKey:null===Q||void 0===Q?void 0:Q.setKey,onChange:function(e){return _e({setKey:e})},sx:{flexGrow:1}}),(0,X.jsx)(J,{rarity:Q?ot:void 0,onChange:function(e){return _e({rarity:e})},filter:function(e){var t,n;return!(null===Ue||void 0===Ue||null===(t=Ue.rarity)||void 0===t||null===(n=t.includes)||void 0===n||!n.call(t,e))},disabled:!Ue})]}),(0,X.jsxs)(o.Z,{component:"div",display:"flex",children:[(0,X.jsx)(he,{id:"filled-basic",label:"Level",variant:"filled",sx:{flexShrink:1,flexGrow:1,mr:1,my:0},margin:"dense",size:"small",value:dt,disabled:!Ue,placeholder:"0~".concat(4*ot),onChange:function(e){return _e({level:e})}}),(0,X.jsxs)(_.Z,{children:[(0,X.jsx)(x.Z,{onClick:function(){return _e({level:dt-1})},disabled:!Ue||0===dt,children:"-"}),ot?(0,a.Z)(Array(ot+1).keys()).map((function(e){return 4*e})).map((function(e){return(0,X.jsx)(x.Z,{onClick:function(){return _e({level:e})},disabled:!Ue||dt===e,children:e},e)})):null,(0,X.jsx)(x.Z,{onClick:function(){return _e({level:dt+1})},disabled:!Ue||dt===4*ot,children:"+"})]})]}),(0,X.jsxs)(o.Z,{component:"div",display:"flex",children:[(0,X.jsx)(le,{disabled:!Ue,slotKey:ft,onChange:function(e){return _e({slotKey:e})}}),(0,X.jsx)(ce.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,X.jsx)(m.Suspense,{fallback:(0,X.jsx)(v.Z,{width:"60%"}),children:(0,X.jsx)(p.Z,{color:"text.secondary",children:null!==Ue&&void 0!==Ue&&Ue.getSlotName(Q.slotKey)?(0,X.jsxs)("span",{children:[(0,X.jsx)(fe.Z,{src:Ue.slotIcons[Q.slotKey]})," ",null===Ue||void 0===Ue?void 0:Ue.getSlotName(Q.slotKey)]}):d(Qe||(Qe=(0,i.Z)(["editor.unknownPieceName"])))})})})]}),(0,X.jsxs)(o.Z,{component:"div",display:"flex",children:[(0,X.jsx)($.Z,{title:(0,X.jsx)("b",{children:Q?je.ZP.get(Q.mainStatKey):d(Xe||(Xe=(0,i.Z)(["mainStat"])))}),disabled:!Ue,color:Q?"success":"primary",children:Ze.Z.slotMainStats(ft).map((function(e){return(0,X.jsx)(V.Z,{selected:(null===Q||void 0===Q?void 0:Q.mainStatKey)===e,disabled:(null===Q||void 0===Q?void 0:Q.mainStatKey)===e,onClick:function(){return _e({mainStatKey:e})},children:je.ZP.get(e)},e)}))}),(0,X.jsx)(ce.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,X.jsx)(p.Z,{color:"text.secondary",children:Q?"".concat((0,je.qs)(Ze.Z.mainStatValue(Q.mainStatKey,ot,dt),je.ZP.unit(Q.mainStatKey))).concat(je.ZP.unitStr(Q.mainStatKey)):d(Ye||(Ye=(0,i.Z)(["mainStat"])))})})]}),(0,X.jsx)(we,{valid:Be,efficiency:vt,t:d}),vt!==jt&&(0,X.jsx)(we,{max:!0,valid:Be,efficiency:jt,t:d}),(0,X.jsx)(ce.Z,{children:(0,X.jsx)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:(0,X.jsxs)(m.Suspense,{fallback:(0,X.jsx)(v.Z,{width:"100%",height:"100"}),children:[(0,X.jsxs)(f.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,X.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,X.jsx)(St,{accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",onChange:Me}),(0,X.jsx)(x.Z,{component:"span",startIcon:(0,X.jsx)(D.Z,{}),children:"Upload Screenshot (or Ctrl-V)"})]})}),(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(x.Z,{color:"info",sx:{px:2,minWidth:0},onClick:function(){re(!0),y.ZP.modalview("/artifact/how-to-upload")},children:(0,X.jsx)(p.Z,{children:(0,X.jsx)(O.G,{icon:L.sph})})})})]}),Pe&&(0,X.jsx)(o.Z,{display:"flex",justifyContent:"center",children:(0,X.jsx)(o.Z,{component:"img",src:Pe,width:"100%",maxWidth:350,height:"auto",alt:"Screenshot to parse for artifact values"})}),Ce>0&&(0,X.jsx)(k.Z,{sx:{pl:2},children:(0,X.jsxs)(f.ZP,{container:!0,spacing:1,alignItems:"center",children:[!ge&&be&&(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(B.Z,{size:"1em"})}),(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,X.jsx)(p.Z,{children:(0,X.jsxs)("span",{children:["Screenshots in file-queue: ",(0,X.jsx)("b",{children:Ce})]})})}),(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(x.Z,{size:"small",color:"error",onClick:Fe,children:"Clear file-queue"})})]})})]})})})]}),(0,X.jsxs)(f.ZP,{item:!0,xs:12,md:6,lg:6,display:"flex",flexDirection:"column",gap:1,children:[[0,1,2,3].map((function(e){return(0,X.jsx)(Ge,{index:e,artifact:Te,setSubstat:Ve},e)})),Ie&&(0,X.jsx)(ce.Z,{children:(0,X.jsxs)(h.Z,{children:[(0,X.jsx)("div",{children:Ie.slotKey}),(0,X.jsx)("div",{children:Ie.mainStatKey}),(0,X.jsx)("div",{children:Ie.mainStatVal}),(0,X.jsx)("div",{children:Ie.rarity}),(0,X.jsx)("div",{children:Ie.level}),(0,X.jsx)("div",{children:Ie.substats}),(0,X.jsx)("div",{children:Ie.setKey})]})})]})]}),Re&&(0,X.jsxs)(f.ZP,{container:!0,sx:{justifyContent:"space-around",mb:1},spacing:1,children:[(0,X.jsx)(f.ZP,{item:!0,lg:4,md:6,children:(0,X.jsxs)(ce.Z,{children:[(0,X.jsx)(p.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:d(Je||(Je=(0,i.Z)(["editor.preview"])))}),(0,X.jsx)(G.Z,{artifactObj:Te})]})}),(0,X.jsx)(f.ZP,{item:!0,lg:4,md:6,children:(0,X.jsxs)(ce.Z,{children:[(0,X.jsx)(p.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:d("edit"!==Oe?"duplicate"===Oe?et||(et=(0,i.Z)(["editor.dupArt"])):tt||(tt=(0,i.Z)(["editor.upArt"])):nt||(nt=(0,i.Z)(["editor.beforeEdit"])))}),(0,X.jsx)(G.Z,{artifactObj:Re})]})})]}),!Be&&(0,X.jsx)(u.Z,{variant:"filled",severity:"error",sx:{mb:1},children:Ne.map((function(e,t){return(0,X.jsx)("div",{children:e},t)}))}),(0,X.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,X.jsx)(f.ZP,{item:!0,children:"edit"===Oe?(0,X.jsx)(x.Z,{startIcon:(0,X.jsx)(T.Z,{}),onClick:function(){j.updateArt(q,Re.id),ze()},disabled:!q||!Be,color:"primary",children:d(rt||(rt=(0,i.Z)(["editor.btnSave"])))}):(0,X.jsx)(x.Z,{startIcon:(0,X.jsx)(T.Z,{}),onClick:function(){j.createArt(Q),ze()},disabled:!Q||!Be,color:"duplicate"===Oe?"warning":"primary",children:d(it||(it=(0,i.Z)(["editor.btnAdd"])))})}),(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,X.jsx)(x.Z,{startIcon:(0,X.jsx)(c.Z,{}),disabled:!Q,onClick:function(){window.confirm(d($e||($e=(0,i.Z)(["editor.clearPrompt"]))))&&ze()},color:"error",children:d(st||(st=(0,i.Z)(["editor.btnClear"])))})}),(0,X.jsx)(f.ZP,{item:!0,children:!1}),Re&&"edit"!==Oe&&(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(x.Z,{startIcon:(0,X.jsx)(N.Z,{}),onClick:function(){j.updateArt(q,Re.id),ze()},disabled:!q||!Be,color:"success",children:d(at||(at=(0,i.Z)(["editor.btnUpdate"])))})})]})]})]})})})}var Pt=n(63204),Kt=n(62002),At=n(40117),It=n(52791),Et=n(21977),Ft=n(81918),Mt=n(68096),Gt=n(94925),Wt=n(28029),Rt=n(99321),Lt=n(13967),Ot=n(75545);function Dt(e,t,n){return{fontWeight:t.includes(e)?n.typography.fontWeightMedium:n.typography.fontWeightRegular}}function Tt(e){var t=e.mainStatKeys,n=e.setMainStatKeys,r=(0,Lt.Z)();return(0,X.jsx)("div",{children:(0,X.jsxs)(Mt.Z,{fullWidth:!0,children:[(0,X.jsx)(Gt.Z,{id:"main-stat-multiple-chip-label",children:"Main Stats"}),(0,X.jsx)(Rt.Z,{labelId:"main-stat-multiple-chip-label",id:"main-stat-multiple-chip",multiple:!0,value:t,onChange:function(e){var t=e.target.value;n("string"===typeof t?t.split(","):t)},input:(0,X.jsx)(Wt.Z,{id:"main-stat-select-multiple-chip",label:"Main Stats"}),renderValue:function(e){return(0,X.jsx)(o.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return(0,X.jsx)(Ft.Z,{icon:Ot.Z[e],label:je.ZP.get(e)},e)}))})},children:I.r.map((function(e){return(0,X.jsxs)(V.Z,{value:e,children:[(0,X.jsx)(ne.Z,{children:Ot.Z[e]}),(0,X.jsx)(re.Z,{primaryTypographyProps:{style:Dt(e,t,r)},children:je.ZP.get(e)})]},e)}))})]})})}function Nt(e,t,n){return{fontWeight:t.includes(e)?n.typography.fontWeightMedium:n.typography.fontWeightRegular}}function Ut(e){var t=e.artSetKeys,n=e.setArtSetKeys,r=(0,g.$)("artifact").t,i=(0,me.Z)(ve.y.getAll,[]),l=(0,Lt.Z)(),c=(0,m.useMemo)((function(){return i?ve.y.setKeysByRarities(i):{}}),[i]);return i?(0,X.jsx)("div",{children:(0,X.jsxs)(Mt.Z,{fullWidth:!0,children:[(0,X.jsx)(Gt.Z,{id:"artifact-set-multiple-chip-label",children:"Artifact Sets"}),(0,X.jsx)(Rt.Z,{labelId:"artifact-set-multiple-chip-label",id:"artifact-set-multiple-chip",multiple:!0,value:t,onChange:function(e){var t=e.target.value;n("string"===typeof t?t.split(","):t)},input:(0,X.jsx)(Wt.Z,{id:"artifact-set-select-multiple-chip",label:"Artifact Sets"}),renderValue:function(e){return(0,X.jsx)(o.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){var t;return(0,X.jsx)(Ft.Z,{icon:null===(t=i[e])||void 0===t?void 0:t.defIcon,label:i[e].name},e)}))})},children:!!Object.keys(c).length&&Object.entries(c).reverse().flatMap((function(e,n){var c=(0,s.Z)(e,2),o=c[0],u=c[1];return[].concat((0,a.Z)(n>0&&u.length?[(0,X.jsx)(ie.Z,{},"".concat(o,"divi"))]:[]),(0,a.Z)(u.length?[(0,X.jsx)(V.Z,{style:{pointerEvents:"none"},children:(0,X.jsx)(p.Z,{children:(0,X.jsxs)(b.c,{t:r,i18nKey:"editor.set.maxRarity",children:["Max Rarity ",(0,X.jsx)(Q.t,{stars:parseInt(o)})]})})},"".concat(o,"header"))]:[]),(0,a.Z)(u.map((function(e){var n,r;return(0,X.jsxs)(V.Z,{value:e,children:[(0,X.jsx)(ne.Z,{children:null===(n=i[e])||void 0===n?void 0:n.defIcon}),(0,X.jsx)(re.Z,{primaryTypographyProps:{style:Nt(e,t,l)},children:null===(r=i[e])||void 0===r?void 0:r.name})]},e)}))))}))})]})}):null}function zt(e,t,n){return{fontWeight:t.includes(e)?n.typography.fontWeightMedium:n.typography.fontWeightRegular}}function _t(e){var t=e.subStatKeys,n=e.setSubStatKeys,r=(0,Lt.Z)();return(0,X.jsx)("div",{children:(0,X.jsxs)(Mt.Z,{fullWidth:!0,children:[(0,X.jsx)(Gt.Z,{id:"sub-stat-multiple-chip-label",children:"Sub Stats"}),(0,X.jsx)(Rt.Z,{labelId:"sub-stat-multiple-chip-label",id:"sub-stat-multiple-chip",multiple:!0,value:t,onChange:function(e){var t=e.target.value;n("string"===typeof t?t.split(","):t)},input:(0,X.jsx)(Wt.Z,{id:"sub-stat-select-multiple-chip",label:"Sub Stats"}),renderValue:function(e){return(0,X.jsx)(o.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return(0,X.jsx)(Ft.Z,{icon:Ot.Z[e],label:je.ZP.get(e)},e)}))})},children:I.L.map((function(e){return(0,X.jsxs)(V.Z,{value:e,children:[(0,X.jsx)(ne.Z,{children:Ot.Z[e]}),(0,X.jsx)(re.Z,{primaryTypographyProps:{style:zt(e,t,r)},children:je.ZP.get(e)})]},e)}))})]})})}var Vt,Bt,qt=n(36944),Ht=n(947);function $t(e){var t,n,r=e.filterOption,s=e.filterOptionDispatch,a=e.filterDispatch,l=e.numShowing,o=e.total,u=(0,g.$)(["artifact","ui"]).t,d=r.artSetKeys,Z=void 0===d?[]:d,y=r.mainStatKeys,w=void 0===y?[]:y,S=r.rarity,P=void 0===S?[]:S,K=r.slotKeys,A=void 0===K?[]:K,I=r.levelLow,E=r.levelHigh,F=r.substats,M=void 0===F?[]:F,G=r.location,W=void 0===G?"":G,R=r.excluded,D=void 0===R?"":R,T=(0,me.Z)(Ht.ZP.get(W),[W]);return t=W?"Inventory"===W?(0,X.jsxs)("span",{children:[(0,X.jsx)(Pt.Z,{})," ",u("filterLocation.inventory")]}):"Equipped"===W?(0,X.jsxs)("span",{children:[(0,X.jsx)(O.G,{icon:L.caW})," ",u("filterLocation.currentlyEquipped")]}):(0,X.jsx)("b",{children:null===T||void 0===T?void 0:T.nameWIthIcon}):u("filterLocation.any"),n="excluded"===D?(0,X.jsxs)("span",{children:[(0,X.jsx)(O.G,{icon:L.gPx})," ",u(Vt||(Vt=(0,i.Z)(["exclusion.excluded"])))]}):"included"===D?(0,X.jsxs)("span",{children:[(0,X.jsx)(O.G,{icon:L.Stf})," ",u(Bt||(Bt=(0,i.Z)(["exclusion.included"])))]}):u("exclusionDisplay",{value:u("exclusion.any")}),(0,X.jsx)(m.Suspense,{fallback:(0,X.jsx)(v.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,X.jsx)(k.Z,{children:(0,X.jsxs)(h.Z,{children:[(0,X.jsxs)(f.ZP,{container:!0,children:[(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(p.Z,{variant:"h6",children:(0,X.jsx)(b.c,{t:u,i18nKey:"artifactFilter",children:"Artifact Filter"})})}),(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:l!==o&&(0,X.jsxs)(p.Z,{children:["Filtered ",l," / ",o]})}),(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(x.Z,{size:"small",color:"error",onClick:function(){return a({type:"reset"})},startIcon:(0,X.jsx)(c.Z,{}),children:(0,X.jsx)(b.c,{t:u,i18nKey:"ui:reset"})})})]}),(0,X.jsxs)(f.ZP,{container:!0,spacing:1,mt:1,children:[(0,X.jsxs)(f.ZP,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[(0,X.jsx)(C.Z,{fullWidth:!0,onChange:function(e,t){return s({rarity:t})},value:P,size:"small",children:H.En.map((function(e){return(0,X.jsx)(j.Z,{value:e,children:(0,X.jsx)(Q.t,{stars:e})},e)}))}),(0,X.jsx)(C.Z,{fullWidth:!0,onChange:function(e,t){return s({slotKeys:t})},value:A,size:"small",children:H.eV.map((function(e){return(0,X.jsx)(j.Z,{value:e,children:(0,se.Ir)(e)},e)}))}),(0,X.jsx)(Et.Z,{levelLow:I,levelHigh:E,setLow:function(e){return s({levelLow:e})},setHigh:function(e){return s({levelHigh:e})},setBoth:function(e,t){return s({levelLow:e,levelHigh:t})}}),(0,X.jsxs)(It.Z,{display:"flex",gap:1,children:[(0,X.jsx)(Qt,{dropdownProps:{color:W?"success":"primary"},title:t,onChange:function(e){return s({location:e})},selectedCharacterKey:W}),(0,X.jsxs)($.Z,{fullWidth:!0,title:n,color:D?"included"===D?"success":"error":"primary",children:[(0,X.jsx)(V.Z,{selected:""===D,disabled:""===D,onClick:function(){return s({excluded:""})},children:(0,X.jsx)(b.c,{t:u,i18nKey:"exclusion.any",children:"Any"})}),(0,X.jsxs)(V.Z,{selected:"excluded"===D,disabled:"excluded"===D,onClick:function(){return s({excluded:"excluded"})},children:[(0,X.jsx)(ne.Z,{children:(0,X.jsx)(O.G,{icon:L.gPx})}),(0,X.jsx)(re.Z,{children:(0,X.jsx)(b.c,{t:u,i18nKey:"exclusion.excluded",children:"Excluded"})})]}),(0,X.jsxs)(V.Z,{selected:"included"===D,disabled:"included"===D,onClick:function(){return s({excluded:"included"})},children:[(0,X.jsx)(ne.Z,{children:(0,X.jsx)(O.G,{icon:L.Stf})}),(0,X.jsx)(re.Z,{children:(0,X.jsx)(b.c,{t:u,i18nKey:"exclusion.included",children:"Included"})})]})]})]})]}),(0,X.jsxs)(f.ZP,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:1,children:[(0,X.jsx)(Ut,{artSetKeys:Z,setArtSetKeys:function(e){return s({artSetKeys:e})}}),(0,X.jsx)(Tt,{mainStatKeys:w,setMainStatKeys:function(e){return s({mainStatKeys:e})}}),(0,X.jsx)(_t,{subStatKeys:M,setSubStatKeys:function(e){return s({substats:e})}})]})]})]})})})}function Qt(e){var t=e.title,n=e.onChange,r=e.selectedCharacterKey,i=e.dropdownProps,s=(0,m.useContext)(P.t4),a=(0,me.Z)(Ht.ZP.getAll,[]),o=(0,g.$)(["artifact","ui"]).t;return(0,X.jsxs)($.Z,(0,l.Z)((0,l.Z)({fullWidth:!0},i),{},{title:t,children:[(0,X.jsxs)(V.Z,{selected:""===r,disabled:""===r,onClick:function(){return n("")},children:[(0,X.jsx)(ne.Z,{children:(0,X.jsx)(c.Z,{})}),(0,X.jsx)(re.Z,{children:(0,X.jsx)(b.c,{t:o,i18nKey:"ui:unselect",children:"Unselect"})})]},"unselect"),(0,X.jsxs)(V.Z,{selected:"Inventory"===r,disabled:"Inventory"===r,onClick:function(){return n("Inventory")},children:[(0,X.jsx)(ne.Z,{children:(0,X.jsx)(Pt.Z,{})}),(0,X.jsx)(re.Z,{children:(0,X.jsx)(b.c,{t:o,i18nKey:"filterLocation.inventory",children:"Inventory"})})]},"inventory"),(0,X.jsxs)(V.Z,{selected:"Equipped"===r,disabled:"Equipped"===r,onClick:function(){return n("Equipped")},children:[(0,X.jsx)(ne.Z,{children:(0,X.jsx)(O.G,{icon:L.caW})}),(0,X.jsx)(re.Z,{children:(0,X.jsx)(b.c,{t:o,i18nKey:"filterLocation.currentlyEquipped",children:"Currently Equipped"})})]},"equipped"),(0,X.jsx)(ie.Z,{}),!!a&&(0,qt.d)(a,s._getCharKeys().sort(),n,r)]}))}function Xt(e){var t=e.artifactIds,n=(e.filterOption,(0,g.$)(["artifact","ui"]).t),r=(0,m.useContext)(P.t4),i=(0,m.useMemo)((function(){var e=t.map((function(e){return r._getArt(e)})),n=e.reduce((function(e,t){return e+(t.lock?0:1)}),0),i=e.length-n,s=n,a=e.reduce((function(e,t){return e+(t.location?1:0)}),0),l=e.reduce((function(e,t){return e+(t.exclude?1:0)}),0);return{numDelete:s,numUnequip:a,numExclude:l,numInclude:e.length-l,numUnlock:n,numLock:i}}),[t,r]),s=i.numDelete,a=i.numUnequip,l=i.numExclude,c=i.numInclude,o=i.numUnlock,u=i.numLock;return(0,X.jsxs)(f.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,X.jsxs)(x.Z,{fullWidth:!0,color:"error",disabled:!a,onClick:function(){return window.confirm("Are you sure you want to unequip ".concat(a," artifacts currently equipped on characters?"))&&t.map((function(e){return r.setArtLocation(e,"")}))},startIcon:(0,X.jsx)(O.G,{icon:L.wOQ}),children:[(0,X.jsx)(b.c,{t:n,i18nKey:"button.unequipArtifacts",children:"Unequip Artifacts"}),(0,X.jsx)(Fe.Z,{sx:{ml:1},color:a?"success":"secondary",children:a})]})}),(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,X.jsxs)(x.Z,{fullWidth:!0,color:"error",disabled:!s,onClick:function(){return window.confirm("Are you sure you want to delete ".concat(s," artifacts?"))&&t.map((function(e){var t;return!(null!==(t=r._getArt(e))&&void 0!==t&&t.lock)&&r.removeArt(e)}))},startIcon:(0,X.jsx)(O.G,{icon:L.$aW}),children:[(0,X.jsx)(b.c,{t:n,i18nKey:"button.deleteArtifacts",children:"Delete Artifacts"}),(0,X.jsx)(Fe.Z,{sx:{ml:1},color:s?"success":"secondary",children:s})]})}),(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,X.jsxs)(x.Z,{fullWidth:!0,color:"error",disabled:!c,onClick:function(){return window.confirm("Are you sure you want to exclude ".concat(c," artifacts from build generations?"))&&t.map((function(e){return r.updateArt({exclude:!0},e)}))},startIcon:(0,X.jsx)(O.G,{icon:L.gPx}),children:[(0,X.jsx)(b.c,{t:n,i18nKey:"button.excludeArtifacts",children:"Exclude Artifacts"}),(0,X.jsx)(Fe.Z,{sx:{ml:1},color:c?"success":"secondary",children:c})]})}),(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,X.jsxs)(x.Z,{fullWidth:!0,color:"error",disabled:!l,onClick:function(){return window.confirm("Are you sure you want to include ".concat(l," artifacts in build generations?"))&&t.map((function(e){return r.updateArt({exclude:!1},e)}))},startIcon:(0,X.jsx)(O.G,{icon:L.Stf}),children:[(0,X.jsx)(b.c,{t:n,i18nKey:"button.includeArtifacts",children:"Include Artifacts"}),(0,X.jsx)(Fe.Z,{sx:{ml:1},color:l?"success":"secondary",children:l})]})}),(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,X.jsxs)(x.Z,{fullWidth:!0,color:"error",disabled:!u,onClick:function(){return window.confirm("Are you sure you want to unlock ".concat(u," artifacts?"))&&t.map((function(e){return r.updateArt({lock:!1},e)}))},startIcon:(0,X.jsx)(Kt.Z,{}),children:[(0,X.jsx)(b.c,{t:n,i18nKey:"button.unlockrtifacts",children:"Unlock Artifacts"}),(0,X.jsx)(Fe.Z,{sx:{ml:1},color:u?"success":"secondary",children:u})]})}),(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,X.jsxs)(x.Z,{fullWidth:!0,color:"error",disabled:!o,onClick:function(){return window.confirm("Are you sure you want to lock ".concat(o," artifacts?"))&&t.map((function(e){return r.updateArt({lock:!0},e)}))},startIcon:(0,X.jsx)(At.Z,{}),children:[(0,X.jsx)(b.c,{t:n,i18nKey:"button.lockArtifacts",children:"Lock Artifacts"}),(0,X.jsx)(Fe.Z,{sx:{ml:1},color:o?"success":"secondary",children:o})]})}),(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:12,md:6,display:"flex",justifyContent:"space-around",children:(0,X.jsx)(p.Z,{variant:"caption",color:"text.secondary",children:(0,X.jsxs)(b.c,{t:n,i18nKey:"buttonHint",children:["Note: the red buttons above only applies to ",(0,X.jsx)("b",{children:"currently filtered artifacts"})]})})})]})}var Yt=n(4942),Jt=n(14525);function en(e){var t=e.probabilityFilter,n=void 0===t?{}:t,r=e.setProbabilityFilter,i=e.disabled,a=void 0!==i&&i,c=I.L.filter((function(e){return!Object.keys(n).some((function(t){return t===e}))})),o=(0,m.useCallback)((function(e,t){return r((0,l.Z)((0,l.Z)({},n),{},(0,Yt.Z)({},e,t)))}),[n,r]);return(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(h.Z,{sx:{py:1},children:(0,X.jsxs)(p.Z,{variant:"h6",children:["Roll Probability Calculator ",(0,X.jsx)(Fe.Z,{color:"success",children:"TC Feature"})]})}),(0,X.jsx)(ie.Z,{}),(0,X.jsx)(h.Z,{children:(0,X.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,X.jsx)(f.ZP,{item:!0,xs:12,md:6,children:(0,X.jsx)(ce.Z,{children:(0,X.jsx)(h.Z,{children:(0,X.jsxs)(p.Z,{children:['This UI only pops up when "Sort by" ',(0,X.jsx)("strong",{children:"Probability"}),". In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.",(0,X.jsx)(Ne.Z,{color:"warning",children:" Artifacts that already reach the criteria(100%) or are at 0% are hidden."})]})})})}),(0,X.jsxs)(f.ZP,{item:!0,xs:12,md:6,container:!0,spacing:1,children:[Object.entries(n).map((function(e){var t=(0,s.Z)(e,2),i=t[0],u=t[1];return(0,X.jsx)(f.ZP,{item:!0,xs:12,children:(0,X.jsx)(Jt.b,{statKey:i,statKeys:c,setFilter:o,disabled:a,value:u,close:function(){delete n[i],r((0,l.Z)({},n))}})},i)})),(0,X.jsx)(f.ZP,{item:!0,xs:12,children:(0,X.jsx)(Jt.b,{value:void 0,close:void 0,statKeys:c,setFilter:o,disabled:a})})]})]})})]})}var tn,nn=n(20323),rn=n(44217),sn=n(59215),an=m.lazy((function(){return n.e(400).then(n.bind(n,56400))}));function ln(e,t){return"reset"===t.type?(0,l.Z)((0,l.Z)({},e),(0,E.sZ)()):(0,l.Z)((0,l.Z)({},e),t)}function cn(){var e;return(0,l.Z)((0,l.Z)({},(0,l.Z)((0,l.Z)({},(0,E.sZ)()),{},{maxNumArtifactsToDisplay:50,effFilter:(0,a.Z)(I.L),probabilityFilter:{}})),null!==(e=K.Hk.get("ArtifactDisplay.state"))&&void 0!==e?e:{})}function on(e){var t,n=(0,m.useContext)(nn.l).globalSettings.tcMode,r=(0,g.$)(["artifact","ui"]).t,j=(0,m.useContext)(P.t4),C=(0,m.useReducer)(ln,void 0,cn),W=(0,s.Z)(C,2),R=W[0],D=W[1],T=R.effFilter,N=R.filterOption,U=R.ascending,z=R.probabilityFilter,_=R.maxNumArtifactsToDisplay,V=R.sortType,B=n&&"probability"===V;"probability"!==V||n||D({sortType:E.OQ[0]});var q=(0,m.useState)(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.artToEditId),H=(0,s.Z)(q,2),$=H[0],Q=H[1],Y=(0,m.useState)(0),J=(0,s.Z)(Y,2),ee=J[0],te=J[1],ne=(0,m.useRef)(null),re=(0,A.Z)(),ie=(0,s.Z)(re,2),se=ie[0],ae=ie[1],le=(0,m.useMemo)((function(){return new Set(T)}),[T]),ce=(0,m.useCallback)((function(e){return j.removeArt(e)}),[j]),oe=(0,m.useCallback)((function(e){return Q(e)}),[]),ue=(0,m.useCallback)((function(){return Q(null)}),[]);(0,m.useEffect)((function(){return y.ZP.pageview("/artifact"),j.followAnyArt(ae)}),[j,ae]),(0,m.useEffect)((function(){K.Hk.set("ArtifactDisplay.state",R)}),[R]);var de=(0,m.useCallback)((function(e){D({filterOption:(0,l.Z)((0,l.Z)({},N),e)})}),[D,N]),he=(0,m.useCallback)((function(e){return D({probabilityFilter:e})}),[D]),fe=(0,m.useMemo)((function(){return!j._getArts().length}),[j]),xe=(0,m.useMemo)((function(){return(0,E.x3)(le,z)}),[le,z]),Ze=(0,m.useMemo)((function(){return(0,E.EM)()}),[]),ve=(0,m.useMemo)((function(){var e=R.sortType,t=void 0===e?E.OQ[0]:e,n=R.ascending,r=void 0!==n&&n,i=R.filterOption,s=j._getArts(),a=(0,F.C)(i,Ze),c=(0,F.e)(t,r,xe);B&&(s.forEach((function(e){return e.probability=(0,rn.B)(e,z)})),s=s.filter((function(e){return e.probability&&1!==e.probability})));var o=s.filter(a).sort(c).map((function(e){return e.id}));return(0,l.Z)({artifactIds:o,totalArtNum:s.length},se)}),[R,se,j,xe,Ze,z,B]),pe=ve.artifactIds,je=ve.totalArtNum,me=(0,m.useMemo)((function(){var e=Math.ceil(pe.length/_),t=(0,M.uZ)(ee,0,e-1);return{artifactsToShow:pe.slice(t*_,(t+1)*_),numPages:e,currentPageIndex:t}}),[pe,ee,_]),ye=me.artifactsToShow,ge=me.numPages,be=me.currentPageIndex,we=pe.length!==je?"".concat(pe.length,"/").concat(je):"".concat(je),ke=(0,m.useCallback)((function(e,t){var n;null===(n=ne.current)||void 0===n||n.scrollIntoView({behavior:"smooth"}),te(t-1)}),[te,ne]);return(0,X.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:1,my:1,children:[(0,X.jsx)(S.Z,{pageKey:"artifactPage",modalTitle:r(tn||(tn=(0,i.Z)(["info.title"]))),text:r("tipsOfTheDay",{returnObjects:!0}),children:(0,X.jsx)(an,{})}),fe&&(0,X.jsxs)(u.Z,{severity:"info",variant:"filled",children:["Looks like you haven't added any artifacts yet. If you want, there are ",(0,X.jsx)(d.Z,{color:"warning.main",component:w.rU,to:"/scanner",children:"automatic scanners"})," that can speed up the import process!"]}),(0,X.jsx)(Ct,{artifactIdToEdit:$,cancelEdit:ue}),(0,X.jsx)($t,{filterOption:N,filterOptionDispatch:de,filterDispatch:D,numShowing:pe.length,total:je}),B&&(0,X.jsx)(en,{probabilityFilter:z,setProbabilityFilter:he}),(0,X.jsx)(k.Z,{ref:ne,children:(0,X.jsxs)(h.Z,{children:[(0,X.jsxs)(f.ZP,{container:!0,sx:{mb:1},children:[(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,X.jsx)("span",{children:(0,X.jsx)(b.c,{t:r,i18nKey:"efficiencyFilter.title",children:"Substats to use in efficiency calculation"})})}),(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(x.Z,{size:"small",color:"error",onClick:function(){return D({effFilter:(0,a.Z)(I.L)})},startIcon:(0,X.jsx)(c.Z,{}),children:(0,X.jsx)(b.c,{t:r,i18nKey:"ui:reset"})})})]}),(0,X.jsx)(dn,{selectedKeys:T,onChange:function(e){return D({effFilter:e})}})]})}),(0,X.jsx)(k.Z,{children:(0,X.jsxs)(h.Z,{children:[(0,X.jsxs)(f.ZP,{container:!0,alignItems:"center",sx:{pb:2},children:[(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,X.jsx)(Z.Z,{count:ge,page:be+1,onChange:ke})}),(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,X.jsx)(un,{count:ge,page:be+1,onChange:ke,numShowing:ye.length,total:we,t:r})}),(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,children:(0,X.jsx)(sn.Z,{fullWidth:!0,sortKeys:(0,a.Z)(E.OQ.filter((function(e){return!E.bq.includes(e)||n}))),value:V,onChange:function(e){return D({sortType:e})},ascending:U,onChangeAsc:function(e){return D({ascending:e})}})})]}),(0,X.jsx)(Xt,{artifactIds:pe,filterOption:N})]})}),(0,X.jsx)(m.Suspense,{fallback:(0,X.jsx)(v.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,X.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,children:(0,X.jsxs)(k.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,X.jsx)(h.Z,{children:(0,X.jsx)(p.Z,{sx:{textAlign:"center"},children:"Add New Artifact"})}),(0,X.jsx)(o.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,X.jsx)(x.Z,{onClick:function(){return oe("new")},sx:{borderRadius:"1em"},children:(0,X.jsx)(p.Z,{variant:"h1",children:(0,X.jsx)(O.G,{icon:L.r8p,className:"fa-fw"})})})})]})}),ye.map((function(e){return(0,X.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,children:(0,X.jsx)(G.Z,{artifactId:e,effFilter:le,onDelete:ce,onEdit:oe,probabilityFilter:B?z:void 0})},e)}))]})}),ge>1&&(0,X.jsx)(k.Z,{children:(0,X.jsx)(h.Z,{children:(0,X.jsxs)(f.ZP,{container:!0,children:[(0,X.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,X.jsx)(Z.Z,{count:ge,page:be+1,onChange:ke})}),(0,X.jsx)(f.ZP,{item:!0,children:(0,X.jsx)(un,{count:ge,page:be+1,onChange:ke,numShowing:ye.length,total:we,t:r})})]})})})]})}function un(e){e.count,e.page,e.onChange;var t=e.numShowing,n=e.total,r=e.t;return(0,X.jsx)(p.Z,{color:"text.secondary",children:(0,X.jsxs)(b.c,{t:r,i18nKey:"showingNum",count:t,value:n,children:["Showing ",(0,X.jsx)("b",{children:{count:t}})," out of ",{value:n}," Artifacts"]})})}function dn(e){var t=e.selectedKeys,n=e.onChange,r=I.L.slice(0,6),i=I.L.slice(6),s=t.filter((function(e){return r.includes(e)})),l=t.filter((function(e){return i.includes(e)}));return(0,X.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,X.jsx)(f.ZP,{item:!0,xs:12,md:6,children:(0,X.jsx)(C.Z,{fullWidth:!0,value:s,onChange:function(e,t){return n([].concat((0,a.Z)(l),(0,a.Z)(t)))},sx:{height:"100%"},children:r.map((function(e){return(0,X.jsx)(j.Z,{size:"small",value:e,children:je.ZP.get(e)},e)}))})}),(0,X.jsx)(f.ZP,{item:!0,xs:12,md:6,children:(0,X.jsx)(C.Z,{fullWidth:!0,value:l,onChange:function(e,t){return n([].concat((0,a.Z)(s),(0,a.Z)(t)))},sx:{height:"100%"},children:i.map((function(e){return(0,X.jsx)(j.Z,{size:"small",value:e,children:je.ZP.get(e)},e)}))})})]})}},46797:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(29439),i=n(25617),s=n(60393),a=n(80184);function l(e){var t=e.value,n=e.max,l=void 0===n?1:n,c=e.valid,o="number"===typeof t?["roll".concat((0,s.uZ)(Math.floor(t/l*10)-4,1,6)),t.toFixed()+"%"]:["secondary",t],u=(0,r.Z)(o,2),d=u[0],h=u[1];return c||(d="error"),(0,a.jsx)(i.Z,{color:d,children:h})}},46956:function(e,t,n){n.d(t,{e:function(){return i},C:function(){return s}});var r=n(29439);function i(e,t,n){function r(e,t,n,r){var i=r.getValue(e),s=r.getValue(t);return(n?-1:1)*("string"===typeof i&&"string"===typeof s?i.localeCompare(s):s-i)}return function(i,s){if(!n[e])return 0;var a=n[e],l=r(i,s,t,a);return!l&&a.tieBreaker&&n[a.tieBreaker]&&(l=r(i,s,t,n[a.tieBreaker])),l}}function s(e,t){return function(n){return Object.entries(e).every((function(e){var i=(0,r.Z)(e,2),s=i[0],a=i[1];return t[s]&&t[s](n,a)}))}}},57641:function(e,t,n){e.exports=n.p+"static/media/scan_art_main.66f01e51a69c518e4278.png"},82554:function(e,t,n){e.exports=n.p+"static/media/snippet.d223e79704fd95bcb783.png"}}]);
//# sourceMappingURL=657.22a9f1f6.chunk.js.map