(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[16],{299:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c,a=n(38),r=n(362),i=n(71),l=n(124),s=n(271),o=n(264),j=n(1);function u(e){var t=e.location,n=Object(l.a)("ui").t,u=Object(o.a)(s.b.get(null!==t&&void 0!==t?t:""),[t]);return Object(j.jsx)(i.a,{component:"span",children:null!==u&&void 0!==u&&u.name?u.nameWIthIcon:Object(j.jsxs)("span",{children:[Object(j.jsx)(r.a,{sx:{verticalAlign:"text-bottom"}})," ",n(c||(c=Object(a.a)(["inventory"])))]})})}},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var c=n(10),a=n(125),r=n(791),i=n(0),l=n(272),s=n(19),o=n(267),j=n(288),u=n(1),b=["value","onChange"];function d(e){var t=e.value,n=e.onChange,d=Object(a.a)(e,b),x=Object(i.useCallback)((function(e,t){return n(t||"")}),[n]);return Object(u.jsx)(j.a,Object(c.a)(Object(c.a)({exclusive:!0,onChange:x,value:t||s.l},d),{},{children:s.l.map((function(e){var t;return Object(u.jsx)(r.a,{value:e,children:Object(u.jsx)(o.a,{src:null===(t=l.a.weaponTypes)||void 0===t?void 0:t[e],size:2})},e)}))}))}},302:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(8),a=n(0),r=n(158);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(a.useContext)(r.b),n=Object(a.useState)(t._getWeapon(e)),i=Object(c.a)(n,2),l=i[0],s=i[1];return Object(a.useEffect)((function(){return s(t._getWeapon(e))}),[t,e]),Object(a.useEffect)((function(){return e?t.followWeapon(e,s):void 0}),[e,s,t]),l}},306:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));n(6),n(10),n(38),n(14),n(272),n(105),n(267),n(268);var c=n(126),a=n(18),r=n(17),i=n(1),l=Object(a.a)((function e(){if(Object(r.a)(this,e),this instanceof e)throw Error("A static class cannot be instantiated.")}));l.printStat=function(e,t){return Object(i.jsx)(i.Fragment,{})};var s=function(e){return Object(i.jsx)(c.a,{ns:"sheet",key18:e})},o=function(e){return Object(i.jsx)(c.a,{ns:"sheet_gen",key18:e})}},308:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var c=n(8);function a(e,t,n){function c(e,t,n,c){var a=c.getValue(e),r=c.getValue(t);return(n?-1:1)*("string"===typeof a&&"string"===typeof r?a.localeCompare(r):r-a)}return function(a,r){if(!n[e])return 0;var i=n[e],l=c(a,r,t,i);return!l&&i.tieBreaker&&n[i.tieBreaker]&&(l=c(a,r,t,n[i.tieBreaker])),l}}function r(e,t){return function(n){return Object.entries(e).every((function(e){var a=Object(c.a)(e,2),r=a[0],i=a[1];return t[r](n,i)}))}}},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var c=n(10),a=n(125),r=n(53),i=n(52),l=n(740),s=n(790),o=n(257),j=n(124),u=n(70),b=n(270),d=n(1),x=["sortKeys","value","onChange","ascending","onChangeAsc"];function O(e){var t=e.sortKeys,n=e.value,O=e.onChange,h=e.ascending,v=e.onChangeAsc,f=Object(a.a)(e,x),m=Object(j.a)("ui").t;return Object(d.jsxs)(l.a,Object(c.a)(Object(c.a)({},f),{},{children:[Object(d.jsx)(b.a,{title:Object(d.jsxs)(u.a,{t:m,i18nKey:"sortByFormat",value:m("sortMap.".concat(n)),children:["Sort By: ",{value:m("sortMap.".concat(n))}]}),children:t.map((function(e){return Object(d.jsx)(s.a,{selected:n===e,disabled:n===e,onClick:function(){return O(e)},children:m("sortMap.".concat(e))},e)}))}),Object(d.jsx)(o.a,{onClick:function(){return v(!h)},startIcon:Object(d.jsx)(i.a,{icon:h?r.x:r.y,className:"fa-fw"}),children:h?Object(d.jsx)(u.a,{t:m,i18nKey:"ascending",children:"Ascending"}):Object(d.jsx)(u.a,{t:m,i18nKey:"descending",children:"Descending"})})]}))}},313:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var c=n(8),a=n(16),r=n(6),i=n(10),l=n(14),s=n(25),o=n(60),j=n(106),u=[3,4,6],b={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},d={};function x(e,t,n,c){if(5!==e.length)for(var a=0,o=u;a<o.length;a++){var j=o[a];t[j]>0&&x([].concat(Object(l.a)(e),[j]),Object(i.a)(Object(i.a)({},t),{},Object(r.a)({},j,t[j]-j)),n-j,c*t[j]/n)}else Object(s.k)(d,e,c)}x([0],{3:6,4:20,6:18},44,1),x([3],{3:3,4:20,6:18},41,1),x([4],{3:6,4:16,6:18},40,1),x([6],{3:6,4:20,6:12},38,1);for(var O=Array(6).fill(0).map((function(e,t){for(var n=[1],c=0,a=1;++c<=t;)a*=t-c+1,a/=c,n.push(a);return n})),h=[[1]],v=function(){var e=h[h.length-1],t=Array(e.length+3).fill(0);e.forEach((function(e,n){for(var c=0,a=[0,1,2,3];c<a.length;c++){t[n+a[c]]+=e}})),h.push(t.map((function(e){return e/4})))};h.length<6;)v();for(var f=function(){var e=p[m],t=e.reduce((function(e,t){return e+t}));e.forEach((function(e,n,c){c[n]=t,t-=e}))},m=0,p=h;m<p.length;m++)f();function g(e,t){if(e.rarity<=2)return NaN;var n=e.rarity,l=e.level,x=e.substats,v=Object(i.a)({},t),f=new Set(Object.keys(v)),m=0,p=e.mainStatKey;if(p in v){var g=4*n;if(j[n][p][g]<v[p])return 0;delete v[p],f.delete(p)}var y,k=Object(a.a)(x);try{for(k.s();!(y=k.n()).done;){var C=y.value,w=C.key,S=C.value;w?f.has(w)&&(f.delete(w),v[w]>S?v[w]-=S:delete v[w]):m+=1}}catch(G){k.e(G)}finally{k.f()}if(m+=4-x.length,f.size>m||Object.keys(v).length>4)return 0;for(var _=o.a.rollsRemaining(l,n)-m,A=0,K=Object.entries(v);A<K.length;A++){var T=Object(c.a)(K[A],2),D=T[0],E=T[1];v[D]=Math.max(Math.ceil(10*E/o.a.maxSubstatValues(D,n)),1)}var M=0,I=Object.entries(v).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1],r=f.has(n)?1:0,i=Math.ceil(a/10)-r;return M+=i,{target:a,filler:r,minUpgrade:i}})).reverse();if(M>_)return 0;var W=Object(r.a)({},_,1),L=_-M;return I.forEach((function(e,t){for(var n,a,r,i=e.target,l=e.filler,s=e.minUpgrade,o={},j=s;j<=s+L;j++)for(var u=i-7*(j+l),b=u>0?h[j+l][u]:1,d=0,x=Object.entries(W);d<x.length;d++){var v,f=Object(c.a)(x[d],2),m=f[0],p=f[1],g=parseInt(m);if(!(g<j)){var y=(a=j,r=4-t,O[n=g][a]*Math.pow(r-1,n-a)/Math.pow(r,n)),k=g-j;o[k]=(null!==(v=o[k])&&void 0!==v?v:0)+p*b*y}}W=o})),function(e,t,n){var c,r,i=null!==(c=b[e])&&void 0!==c?c:0,l=0,o={3:2,4:5,6:3},j=d[i],x=Object(a.a)(t);try{for(x.s();!(r=x.n()).done;){var h=r.value.key;if(h){var v=b[h];j=j[v],o[v]-=1}}}catch(G){x.e(G)}finally{x.f()}i&&(o[i]-=1);var f,m={3:0,4:0,6:0},p=Object(a.a)(n);try{for(p.s();!(f=p.n()).done;){var g=f.value;m[b[g]]+=1}}catch(G){p.e(G)}finally{p.f()}var y=0;Object(s.d)(j,[],(function(e){return"number"===typeof e}),(function(e,t){y+=e;var n,c={3:0,4:0,6:0},r=Object(a.a)(t);try{for(r.s();!(n=r.n()).done;){c[n.value]+=1}}catch(G){r.e(G)}finally{r.f()}var i,s=e,o=Object(a.a)(u);try{for(o.s();!(i=o.n()).done;){var j=i.value,b=c[j],d=m[j];if(b<d)return;s*=O[b][d]}}catch(G){o.e(G)}finally{o.f()}l+=s}));var k,C=Object(a.a)(u);try{for(C.s();!(k=C.n()).done;){var w=k.value;l/=O[o[w]][m[w]]}}catch(G){C.e(G)}finally{C.f()}return l/y}(e.mainStatKey,x,f)*Object.values(W).reduce((function(e,t){return e+t}))}},315:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(8),a=n(268),r=n(25),i=n(1);function l(e){var t=e.value,n=e.valid,l="number"===typeof t?["roll".concat(Object(r.b)(Math.floor(.05*t)+1,1,6)),t.toFixed(2)+"%"]:["secondary",t],s=Object(c.a)(l,2),o=s[0],j=s[1];return n||(o="error"),Object(i.jsx)(a.a,{color:o,children:j})}},321:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var c=n(14),a=n(8),r=n(443),i=n(250),l=n(239),s=n(406),o=n(232),j=n(71),u=n(0),b=n(272),d=n(264),x=n(19),O=n(273),h=n(266),v=n(262),f=n(279),m=n(267),p=n(282),g=n(274),y=n(300),k=n(1);function C(e){var t=e.show,n=e.onHide,C=e.onSelect,w=e.filter,S=void 0===w?function(){return!0}:w,_=e.weaponFilter,A=Object(d.a)(O.c.getAll,[]),K=Object(u.useState)(null!==_&&void 0!==_?_:""),T=Object(a.a)(K,2),D=T[0],E=T[1];Object(u.useEffect)((function(){return _&&E(_)}),[_]);var M=A?Object(c.a)(new Set(x.k)).filter((function(e){return S(A[e])})).filter((function(e){var t;return!D||D===(null===A||void 0===A||null===(t=A[e])||void 0===t?void 0:t.weaponType)})).sort((function(e,t){var n,c,a,r;return(null!==(n=null===A||void 0===A||null===(c=A[t])||void 0===c?void 0:c.rarity)&&void 0!==n?n:0)-(null!==(a=null===A||void 0===A||null===(r=A[e])||void 0===r?void 0:r.rarity)&&void 0!==a?a:0)})):[];return A?Object(k.jsx)(p.a,{open:t,onClose:n,children:Object(k.jsxs)(h.a,{children:[Object(k.jsx)(r.a,{sx:{py:1},children:Object(k.jsxs)(i.a,{container:!0,children:[Object(k.jsx)(i.a,{item:!0,flexGrow:1,children:Object(k.jsx)(y.a,{value:D,onChange:E,disabled:!!_,size:"small"})}),Object(k.jsx)(i.a,{item:!0,children:Object(k.jsx)(f.a,{onClick:n})})]})}),Object(k.jsx)(l.a,{}),Object(k.jsx)(r.a,{children:Object(k.jsx)(i.a,{container:!0,spacing:1,children:M.map((function(e){var t,c=A[e];return Object(k.jsx)(i.a,{item:!0,lg:3,md:4,children:Object(k.jsx)(v.a,{sx:{height:"100%"},children:Object(k.jsxs)(s.a,{onClick:function(){n(),C(e)},sx:{display:"flex"},children:[Object(k.jsx)(o.a,{component:"img",src:c.img,sx:{width:100,height:"auto"},className:" grad-".concat(c.rarity,"star")}),Object(k.jsxs)(o.a,{sx:{flexGrow:1,px:1},children:[Object(k.jsx)(j.a,{variant:"subtitle1",children:c.name}),Object(k.jsxs)(j.a,{children:[Object(k.jsx)(m.a,{src:null===(t=b.a.weaponTypes)||void 0===t?void 0:t[c.weaponType]})," ",Object(k.jsx)(g.a,{stars:c.rarity,colored:!0})]})]})]})})},e)}))})}),Object(k.jsx)(l.a,{}),Object(k.jsx)(r.a,{sx:{py:1},children:Object(k.jsx)(f.a,{large:!0,onClick:n})})]})}):null}},322:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var c=n(38),a=n(53),r=n(52),i=n(381),l=n(382),s=n(71),o=n(156),j=n(443),u=n(232),b=n(403),d=n(258),x=n(250),O=n(404),h=n(444),v=n(740),f=n(257),m=n(773),p=n(0),g=n(124),y=n(289),k=n(262),C=n(290),w=n(299),S=n(54),_=n(268),A=n(274),K=n(158),T=n(8);var D,E,M,I=n(264),W=n(61),L=n(127),G=n(25),N=n(60),z=n(269),B=n(128),F=n(315),R=n(313),P=n(102),V=n(1),U=new Set(W.b);function H(e){var t,n,W,H,q=e.artifactId,J=e.artifactObj,X=e.onEdit,Q=e.onDelete,Y=e.mainStatAssumptionLevel,Z=void 0===Y?0:Y,$=e.effFilter,ee=void 0===$?U:$,te=e.probabilityFilter,ne=Object(g.a)(["artifact"]).t,ce=Object(p.useContext)(K.b),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(p.useContext)(K.b),n=Object(p.useState)(t._getArt(e)),c=Object(T.a)(n,2),a=c[0],r=c[1];return Object(p.useEffect)((function(){return r(t._getArt(e))}),[t,e]),Object(p.useEffect)((function(){return e?t.followArt(e,r):void 0}),[e,r,t]),a}(q),re=Object(I.a)(z.a.get(null===(t=null!==J&&void 0!==J?J:ae)||void 0===t?void 0:t.setKey),[J,ae]),ie=!J&&ce===K.c,le=null!==J&&void 0!==J?J:ae;if(!le)return null;var se=le.id,oe=le.lock,je=le.slotKey,ue=le.rarity,be=le.level,de=le.mainStatKey,xe=le.substats,Oe=le.exclude,he=le.location,ve=void 0===he?"":he,fe=Math.max(Math.min(Z,4*ue),be),me="roll"+(Math.floor(Math.max(be,0)/4)+1),pe=Object(V.jsx)(S.a,{color:fe!==be?"warning":void 0,children:Object(L.b)(null!==(n=N.a.mainStatValue(de,ue,fe))&&void 0!==n?n:0,P.b.unit(de))}),ge=N.a.getArtifactEfficiency(le,ee),ye=ge.currentEfficiency,ke=ge.maxEfficiency,Ce=0!==ke,we=(null===re||void 0===re?void 0:re.getSlotName(je))||"Unknown Piece Name",Se=null===re||void 0===re?void 0:re.getSlotDesc(je),_e=Se&&Object(V.jsx)(y.a,{placement:"top",title:Object(V.jsx)(s.a,{children:Se}),children:Object(V.jsx)("span",{children:Object(V.jsx)(r.a,{icon:a.s})})}),Ae=null===re||void 0===re?void 0:re.setEffects,Ke=re&&Ae&&Object(V.jsx)(y.a,{placement:"top",title:Object(V.jsx)("span",{children:Object.keys(Ae).map((function(e){return Object(V.jsxs)("span",{children:[Object(V.jsx)(s.a,{variant:"h6",children:Object(V.jsx)(_.a,{color:"success",children:ne("setEffectNum",{setNum:e})})}),Object(V.jsx)(s.a,{children:re.setEffectDesc(e)})]},e)}))}),children:Object(V.jsx)("span",{children:Object(V.jsx)(r.a,{icon:a.s})})});return Object(V.jsx)(p.Suspense,{fallback:Object(V.jsx)(o.a,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:Object(V.jsxs)(k.a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(V.jsxs)(j.a,{className:"grad-".concat(ue,"star"),sx:{pt:1,pb:0,pr:0},children:[Object(V.jsxs)(u.a,{component:"div",sx:{display:"flex",alignItems:"center",pr:1},children:[Object(V.jsx)(b.a,{size:"small",label:Object(V.jsx)("strong",{children:" +".concat(be)}),color:me}),Object(V.jsxs)(s.a,{sx:{pl:1,flexGrow:1},children:[we," ",_e]}),Object(V.jsx)(d.a,{color:"primary",disabled:!ie,onClick:function(){return ce.updateArt({lock:!oe},se)},children:oe?Object(V.jsx)(i.a,{}):Object(V.jsx)(l.a,{})})]}),Object(V.jsxs)(x.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(V.jsxs)(x.a,{item:!0,flexGrow:1,children:[Object(V.jsx)(s.a,{color:"text.secondary",variant:"body2",children:Object(V.jsx)(B.c,{slotKey:je})}),Object(V.jsx)(s.a,{variant:"h6",children:P.b.get(de)}),Object(V.jsx)(s.a,{variant:"h5",children:Object(V.jsx)("strong",{children:pe})}),Object(V.jsx)(A.a,{stars:ue,colored:!0})]}),Object(V.jsx)(x.a,{item:!0,maxWidth:"40%",sx:{mt:-3,mb:-1,pl:-2},alignSelf:"flex-end",children:Object(V.jsx)(O.a,{component:"img",image:null!==(W=null===re||void 0===re?void 0:re.slotIcons[je])&&void 0!==W?W:"",width:"100%",height:"auto"})})]})]}),Object(V.jsxs)(j.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0},children:[xe.map((function(e,t){var n,c,a;if(!e.value)return null;var r=null!==(n=null===(c=e.rolls)||void 0===c?void 0:c.length)&&void 0!==n?n:0,i="roll".concat(Object(G.b)(r,1,6)),l=null!==(a=e.efficiency)&&void 0!==a?a:0,o=.3+l/100*.7,j=P.b.get(e.key);return Object(V.jsxs)(u.a,{sx:{display:"flex"},children:[Object(V.jsxs)(u.a,{sx:{flexGrow:1},children:[Object(V.jsx)(_.a,{color:r?i:"error",sx:{mr:1},children:Object(V.jsx)("strong",{children:r||"?"})}),Object(V.jsxs)(s.a,{color:r?"".concat(i,".main"):"error.main",component:"span",children:[j,"+".concat(Object(L.b)(e.value,P.b.unit(e.key)))]})]}),Object(V.jsx)(s.a,{sx:{opacity:o},children:e.key&&ee.has(e.key)?Object(L.b)(l,"eff"):"-"})]},t)})),Object(V.jsxs)(u.a,{sx:{display:"flex",my:1},children:[Object(V.jsx)(s.a,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:ne(D||(D=Object(c.a)(["editor.curSubEff"])))}),Object(V.jsx)(F.a,{value:ye,valid:Ce})]}),ye!==ke&&Object(V.jsxs)(u.a,{sx:{display:"flex",mb:1},children:[Object(V.jsx)(s.a,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:ne(E||(E=Object(c.a)(["editor.maxSubEff"])))}),Object(V.jsx)(F.a,{value:ke,valid:Ce})]}),Object(V.jsx)(u.a,{flexGrow:1}),te&&Object(V.jsxs)("strong",{children:["Probability: ",(100*Object(R.a)(le,te)).toFixed(2),"%"]}),Object(V.jsxs)(s.a,{color:"success.main",children:[null!==(H=null===re||void 0===re?void 0:re.name)&&void 0!==H?H:"Artifact Set"," ",Ke]})]}),Object(V.jsx)(h.a,{children:Object(V.jsxs)(x.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(V.jsx)(x.a,{item:!0,xs:"auto",flexShrink:1,children:ie?Object(V.jsx)(C.b,{size:"small",inventory:!0,value:ve,onChange:function(e){return ce.setArtLocation(q,e)}}):Object(V.jsx)(w.a,{location:ve})}),Object(V.jsx)(x.a,{item:!0,flexGrow:1,sx:{mr:1}}),ie&&Object(V.jsx)(x.a,{item:!0,xs:"auto",children:Object(V.jsxs)(v.a,{sx:{height:"100%"},children:[!!X&&Object(V.jsx)(f.a,{color:"info",onClick:function(){return X(se)},size:"small",children:Object(V.jsx)(r.a,{icon:a.m,className:"fa-fw"})}),Object(V.jsx)(m.a,{title:Object(V.jsx)(s.a,{children:ne(M||(M=Object(c.a)(["excludeArtifactTip"])))}),placement:"top",arrow:!0,children:Object(V.jsx)(f.a,{onClick:function(){return ce.updateArt({exclude:!Oe},se)},color:Oe?"error":"success",size:"small",children:Object(V.jsx)(r.a,{icon:Oe?a.b:a.e,className:"fa-fw"})})}),!!Q&&Object(V.jsx)(f.a,{color:"error",size:"small",onClick:function(){return Q(se)},disabled:oe,children:Object(V.jsx)(r.a,{icon:a.D,className:"fa-fw"})})]})})]})})]})})}},323:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var c,a,r,i,l=n(53),s=n(52),o=n(381),j=n(382),u=n(406),b=n(156),d=n(353),x=n(258),O=n(250),h=n(71),v=n(232),f=n(443),m=n(740),p=n(257),g=n(0),y=n(272),k=n(262),C=n(10),w=n(38),S=n(125),_=n(362),A=n(363),K=n(790),T=n(238),D=n(239),E=n(124),M=n(271),I=n(158),W=n(264),L=n(270),G=n(292),N=n(1),z=["value","onChange","unSelectText","unSelectIcon","inventory","noUnselect","filter"];function B(e){var t,n=e.value,l=e.onChange,s=e.unSelectText,o=e.unSelectIcon,j=e.inventory,u=void 0!==j&&j,b=e.noUnselect,d=void 0!==b&&b,x=e.filter,O=void 0===x?function(){return!0}:x,v=Object(S.a)(e,z),f=Object(E.a)("ui").t,m=Object(g.useContext)(I.b),p=Object(W.a)(M.b.getAll,[]),y=Object(W.a)(M.b.get(n),[n]),k=m._getCharKeys().filter((function(e){return(null===p||void 0===p?void 0:p[e])&&O(p[e],e)})).sort();return Object(N.jsxs)(L.a,Object(C.a)(Object(C.a)({},v),{},{title:null!==(t=null===y||void 0===y?void 0:y.name)&&void 0!==t?t:u?f(c||(c=Object(w.a)(["inventory"]))):null!==s&&void 0!==s?s:f(a||(a=Object(w.a)(["unselect"]))),color:n?"success":"primary",startIcon:null!==y&&void 0!==y&&y.thumbImg?Object(N.jsx)(G.a,{src:y.thumbImgSide}):u?Object(N.jsx)(_.a,{}):null!==o&&void 0!==o?o:Object(N.jsx)(A.a,{}),children:[!d&&(u?Object(N.jsxs)(K.a,{onClick:function(){return l("")},selected:""===n,disabled:""===n,children:[Object(N.jsx)(T.a,{children:Object(N.jsx)(_.a,{})}),Object(N.jsx)(h.a,{variant:"inherit",noWrap:!0,children:f(r||(r=Object(w.a)(["inventory"])))})]}):Object(N.jsxs)(K.a,{onClick:function(){return l("")},selected:""===n,disabled:""===n,children:[Object(N.jsx)(T.a,{children:Object(N.jsx)(A.a,{})}),Object(N.jsx)(h.a,{variant:"inherit",noWrap:!0,children:f(i||(i=Object(w.a)(["unselect"])))})]})),!d&&Object(N.jsx)(D.a,{},"div"),!!p&&F(p,k,l,n)]}))}function F(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t.map((function(t){var a;return Object(N.jsxs)(K.a,{onClick:function(){return n(t)},selected:c===t,disabled:c===t,children:[Object(N.jsx)(T.a,{children:Object(N.jsx)(G.a,{src:e[t].thumbImgSide})}),Object(N.jsx)(h.a,{variant:"inherit",noWrap:!0,children:null===e||void 0===e||null===(a=e[t])||void 0===a?void 0:a.name})]},t)}))}var R=n(299),P=n(298),V=n(267),U=n(274),H=n(276),q=n(45),J=n(261),X=n(275),Q=n(302),Y=n(102),Z=n(273);function $(e){var t,n=e.weaponId,c=e.onClick,a=e.onEdit,r=e.onDelete,i=e.canEquip,C=void 0!==i&&i,w=Object(g.useContext)(I.b),S=Object(Q.a)(n),_=Object(W.a)(null!==S&&void 0!==S&&S.key?Z.c.get(S.key):void 0,[null===S||void 0===S?void 0:S.key]),A=Object(g.useCallback)((function(e){return e.weaponTypeKey===(null===_||void 0===_?void 0:_.weaponType)}),[_]),K=Object(g.useCallback)((function(e){return Object(N.jsx)(u.a,{onClick:function(){return null===c||void 0===c?void 0:c(n)},sx:{height:"100%"},children:e})}),[c,n]),T=Object(g.useCallback)((function(e){return w.setWeaponLocation(n,e)}),[w,n]),D=Object(g.useMemo)((function(){return _&&S&&Object(X.a)([_.data,Object(X.d)(S)])}),[_,S]);if(!S||!_||!D)return null;var E=S.level,M=S.ascension,L=S.refinement,G=S.id,z=S.location,F=void 0===z?"":z,$=S.lock,ee=D.get(J.e.weapon.type).value,te=[J.e.weapon.main,J.e.weapon.sub,J.e.weapon.sub2].map((function(e){return D.get(e)})),ne=M<2?null===_||void 0===_?void 0:_.img:null===_||void 0===_?void 0:_.imgAwaken;return Object(N.jsx)(g.Suspense,{fallback:Object(N.jsx)(b.a,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:Object(N.jsx)(P.a,{condition:!!c,wrapper:K,children:Object(N.jsxs)(k.a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(N.jsxs)("div",{className:"grad-".concat(_.rarity,"star"),children:[Object(N.jsx)(d.a,{title:_.name,avatar:Object(N.jsx)(V.a,{sx:{fontSize:"2em"},src:null===(t=y.a.weaponTypes)||void 0===t?void 0:t[ee]}),titleTypographyProps:{variant:"h6"},action:!c&&Object(N.jsx)(x.a,{color:"primary",onClick:function(){return w.updateWeapon({lock:!$},G)},children:$?Object(N.jsx)(o.a,{}):Object(N.jsx)(j.a,{})})}),Object(N.jsxs)(O.a,{container:!0,sx:{flexWrap:"nowrap",pl:2},children:[Object(N.jsxs)(O.a,{item:!0,flexGrow:1,children:[Object(N.jsxs)(h.a,{component:"span",variant:"h4",children:["Lv. ",E]}),Object(N.jsxs)(h.a,{component:"span",variant:"h4",color:"text.secondary",children:["/",q.b[M]]}),Object(N.jsxs)(h.a,{variant:"h6",children:["Refinement ",Object(N.jsx)("strong",{children:L})]}),Object(N.jsx)(h.a,{children:Object(N.jsx)(U.a,{stars:_.rarity,colored:!0})})]}),Object(N.jsx)(O.a,{item:!0,container:!0,maxWidth:"40%",alignContent:"flex-end",sx:{mt:-3},children:Object(N.jsx)(v.a,{component:"img",src:ne,width:"100%",height:"auto"})})]})]}),Object(N.jsx)(f.a,{children:te.map((function(e){if(!e.key)return null;var t=Object(X.h)(e.value,e.unit,"flat"===e.unit?0:void 0);return Object(N.jsxs)(v.a,{sx:{display:"flex"},children:[Object(N.jsxs)(h.a,{flexGrow:1,children:[H.a[e.key]," ",Y.b.get(e.key)]}),Object(N.jsx)(h.a,{children:t})]},e.key)}))}),Object(N.jsx)(v.a,{flexGrow:1}),Object(N.jsx)(f.a,{sx:{py:1},children:Object(N.jsxs)(O.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(N.jsx)(O.a,{item:!0,xs:"auto",flexShrink:1,children:C?Object(N.jsx)(B,{size:"small",noUnselect:!0,inventory:!0,value:F,onChange:T,filter:A}):Object(N.jsx)(R.a,{location:F})}),Object(N.jsx)(O.a,{item:!0,flexGrow:1,sx:{mr:1}}),Object(N.jsx)(O.a,{item:!0,xs:"auto",children:Object(N.jsxs)(m.a,{sx:{height:"100%"},children:[!!a&&Object(N.jsx)(p.a,{color:"info",size:"small",onClick:function(){return a(G)},children:Object(N.jsx)(s.a,{icon:l.m,className:"fa-fw"})}),!!r&&Object(N.jsx)(p.a,{color:"error",size:"small",onClick:function(){return r(G)},disabled:!!F||$,children:Object(N.jsx)(s.a,{icon:l.D,className:"fa-fw"})})]})})]})})]})})})}},334:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var c=n(14),a=n(8),r=n(443),i=n(250),l=n(239),s=n(406),o=n(232),j=n(71),u=n(0),b=n(272),d=n(271),x=n(158),O=n(261),h=n(264),v=n(297),f=n(19),m=n(335),p=n(308),g=n(266),y=n(262),k=n(279),C=n(267),w=n(282),S=n(310),_=n(268),A=n(274),K=n(276),T=n(345),D=n(300),E=n(1),M=["level","rarity","name"];function I(e){var t=e.show,n=e.onHide,s=e.onSelect,o=e.filter,j=void 0===o?function(){return!0}:o,b=e.newFirst,O=void 0!==b&&b,v=Object(u.useMemo)((function(){return O?["new"].concat(M):M}),[O]),y=Object(u.useContext)(x.b),C=Object(u.useState)(v[0]),_=Object(a.a)(C,2),A=_[0],K=_[1],I=Object(u.useState)(!1),L=Object(a.a)(I,2),G=L[0],N=L[1],z=Object(u.useState)(""),B=Object(a.a)(z,2),F=B[0],R=B[1],P=Object(u.useState)(""),V=Object(a.a)(P,2),U=V[0],H=V[1],q=Object(h.a)(d.b.getAll,[]),J=Object(u.useMemo)((function(){return q&&Object(m.b)(y,q)}),[y,q]),X=Object(u.useMemo)((function(){return q&&Object(m.a)(q)}),[q]),Q=Object(u.useMemo)((function(){return q&&J&&X?Object(c.a)(new Set(f.c)).filter((function(e){return j(y._getChar(e),q[e])})).filter(Object(p.a)({element:F,weaponType:U},X)).sort(Object(p.b)(A,G,J)):[]}),[y,q,j,F,U,A,G,J,X]);return q?Object(E.jsx)(w.a,{open:t,onClose:n,children:Object(E.jsxs)(g.a,{children:[Object(E.jsx)(r.a,{sx:{py:1},children:Object(E.jsxs)(i.a,{container:!0,spacing:1,children:[Object(E.jsx)(i.a,{item:!0,children:Object(E.jsx)(D.a,{sx:{height:"100%"},onChange:H,value:U,size:"small"})}),Object(E.jsx)(i.a,{item:!0,flexGrow:1,children:Object(E.jsx)(T.a,{sx:{height:"100%"},onChange:R,value:F,size:"small"})}),Object(E.jsx)(i.a,{item:!0,flexGrow:1}),Object(E.jsx)(i.a,{item:!0,children:Object(E.jsx)(S.a,{sx:{height:"100%"},sortKeys:v,value:A,onChange:K,ascending:G,onChangeAsc:N})}),Object(E.jsx)(i.a,{item:!0,children:Object(E.jsx)(k.a,{onClick:n})})]})}),Object(E.jsx)(l.a,{}),Object(E.jsx)(r.a,{children:Object(E.jsx)(i.a,{container:!0,spacing:1,children:Q.map((function(e){return Object(E.jsx)(i.a,{item:!0,xs:6,md:4,lg:3,children:Object(E.jsx)(W,{characterKey:e,onClick:function(){n(),null===s||void 0===s||s(e)}},e)},e)}))})})]})}):null}function W(e){var t,n,c=e.onClick,a=e.characterKey,r=Object(h.a)(d.b.get(a),[a]),i=Object(v.a)(a),l=(null!==(t=null===i||void 0===i?void 0:i[a])&&void 0!==t?t:{}).target;if(!r)return null;var u=r.rarity;return Object(E.jsx)(s.a,{onClick:c,children:Object(E.jsxs)(y.a,{sx:{display:"flex",alignItems:"center"},children:[Object(E.jsx)(o.a,{component:"img",src:r.thumbImg,sx:{width:130,height:"auto"},className:"grad-".concat(u,"star")}),Object(E.jsxs)(o.a,{sx:{pl:1},children:[Object(E.jsx)(j.a,{children:Object(E.jsx)("strong",{children:r.name})}),l?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(j.a,{variant:"h6",children:[" ",r.elementKey&&K.a[r.elementKey]," ",Object(E.jsx)(C.a,{src:null===(n=b.a.weaponTypes)||void 0===n?void 0:n[r.weaponTypeKey]})," ",d.b.getLevelString(l.get(O.e.lvl).value,l.get(O.e.asc).value)]}),Object(E.jsxs)(j.a,{children:[Object(E.jsx)(_.a,{color:"success",children:"C".concat(l.get(O.e.constellation).value)})," ",Object(E.jsx)(_.a,{color:l.get(O.e.bonus.auto).value?"info":"secondary",children:Object(E.jsx)("strong",{children:l.get(O.e.total.auto).value})})," ",Object(E.jsx)(_.a,{color:l.get(O.e.bonus.skill).value?"info":"secondary",children:Object(E.jsx)("strong",{children:l.get(O.e.total.skill).value})})," ",Object(E.jsx)(_.a,{color:l.get(O.e.bonus.burst).value?"info":"secondary",children:Object(E.jsx)("strong",{children:l.get(O.e.total.burst).value})})]})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(j.a,{variant:"h6",children:Object(E.jsx)(_.a,{color:"primary",children:"NEW"})})}),Object(E.jsx)("small",{children:Object(E.jsx)(A.a,{stars:u,colored:!0})})]})]})})}},335:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var c=["level","rarity","name"];function a(e,t){return{new:{getValue:function(t){return e._getChar(t)?0:1},tieBreaker:"name"},name:{getValue:function(e){return e}},level:{getValue:function(t){var n,c;return null!==(n=null===(c=e._getChar(t))||void 0===c?void 0:c.level)&&void 0!==n?n:0},tieBreaker:"rarity"},rarity:{getValue:function(e){var n;return null===t||void 0===t||null===(n=t[e])||void 0===n?void 0:n.rarity},tieBreaker:"level"}}}function r(e){return{element:function(t,n){var c;return!n||n===(null===e||void 0===e||null===(c=e[t])||void 0===c?void 0:c.elementKey)},weaponType:function(t,n){var c;return!n||n===(null===e||void 0===e||null===(c=e[t])||void 0===c?void 0:c.weaponTypeKey)}}}},344:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return V}));var c=n(14),a=n(8),r=n(381),i=n(382),l=n(438),s=n(443),o=n(250),j=n(740),u=n(257),b=n(790),d=n(239),x=n(232),O=n(71),h=n(402),v=n(0),f=n(272),m=n(271),p=n(266),g=n(262),y=n(290),k=n(279),C=(n(54),n(281)),w=n(295),S=n(270),_=n(277),A=n(267),K=n(282),T=n(268),D=n(274),E=n(321),M=n(45),I=n(158),W=n(261),L=n(275),G=n(264),N=n(302),z=n(25),B=n(323),F=n(273),R=n(265),P=n(1);function V(e){var t,n=e.weaponId,l=e.footer,f=void 0!==l&&l,A=e.onClose,K=Object(v.useContext)(R.a).data,B=Object(v.useContext)(I.b),V=Object(N.a)(n),H=null!==V&&void 0!==V?V:{},q=H.key,J=void 0===q?"":q,X=H.level,Q=H.refinement,Y=void 0===Q?0:Q,Z=H.ascension,$=void 0===Z?0:Z,ee=H.lock,te=H.location,ne=void 0===te?"":te,ce=H.id,ae=Object(G.a)(F.c.get(J),[J]),re=null===ae||void 0===ae?void 0:ae.weaponType,ie=Object(v.useCallback)((function(e){B.updateWeapon(e,n)}),[n,B]),le=Object(v.useCallback)((function(e){e=Object(z.b)(e,1,90);var t=M.b.findIndex((function(t){return e<=t}));ie({level:e,ascension:t})}),[ie]),se=Object(v.useCallback)((function(){var e=M.b.findIndex((function(e){return 90!==X&&X===e}));ie($===e?{ascension:$+1}:{ascension:e})}),[ie,$,X]),oe=Object(G.a)(ne?m.b.get(ne):void 0,[ne]),je=oe?function(e){return e.weaponType===oe.weaponTypeKey}:void 0,ue=oe&&oe.weaponTypeKey,be=Object(v.useCallback)((function(e){return ce&&B.setWeaponLocation(ce,e)}),[B,ce]),de=Object(v.useCallback)((function(e){return e.weaponTypeKey===(null===ae||void 0===ae?void 0:ae.weaponType)}),[ae]),xe=Object(v.useState)(!1),Oe=Object(a.a)(xe,2),he=Oe[0],ve=Oe[1],fe=$<2?null===ae||void 0===ae?void 0:ae.img:null===ae||void 0===ae?void 0:ae.imgAwaken,me=Object(v.useMemo)((function(){return ae&&V&&Object(L.a)([ae.data,Object(L.d)(V)])}),[ae,V]);return Object(P.jsxs)(g.a,{children:[Object(P.jsx)(s.a,{sx:{py:1},children:Object(P.jsxs)(o.a,{container:!0,spacing:1,children:[Object(P.jsx)(o.a,{item:!0,flexGrow:1,children:Object(P.jsxs)(o.a,{container:!0,spacing:1,children:[Object(P.jsxs)(o.a,{item:!0,children:[Object(P.jsx)(E.a,{show:he,onHide:function(){return ve(!1)},onSelect:function(e){return ie({key:e})},filter:je,weaponFilter:ue}),Object(P.jsxs)(j.a,{children:[Object(P.jsx)(u.a,{onClick:function(){return ve(!0)},children:null!==(t=null===ae||void 0===ae?void 0:ae.name)&&void 0!==t?t:"Select a Weapon"}),Object(P.jsxs)(S.a,{title:"Refinement ".concat(Y),children:[Object(P.jsx)(b.a,{children:"Select Weapon Refinement"}),Object(P.jsx)(d.a,{}),Object(c.a)(Array(5).keys()).map((function(e){return Object(P.jsx)(b.a,{onClick:function(){return ie({refinement:e+1})},selected:Y===e+1,disabled:Y===e+1,children:"Refinement ".concat(e+1)},e)}))]})]})]}),Object(P.jsx)(o.a,{item:!0,children:Object(P.jsxs)(j.a,{sx:{bgcolor:function(e){return e.palette.contentLight.main}},children:[Object(P.jsx)(C.a,{children:Object(P.jsx)(C.c,{onChange:le,value:X,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),Object(P.jsx)(u.a,{sx:{pl:1},disabled:!Object(M.a)(X),onClick:se,children:Object(P.jsxs)("strong",{children:["/ ",M.b[$]]})}),Object(P.jsx)(S.a,{title:"Select Level",children:M.c.map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1],r=n===M.b[c]?"Lv. ".concat(n):"Lv. ".concat(n,"/").concat(M.b[c]),i=n===X&&c===$;return Object(P.jsx)(b.a,{selected:i,disabled:i,onClick:function(){return ie({level:n,ascension:c})},children:r},"".concat(n,"/").concat(c))}))})]})}),Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(u.a,{color:"error",onClick:function(){return ce&&B.updateWeapon({lock:!ee},ce)},startIcon:ee?Object(P.jsx)(r.a,{}):Object(P.jsx)(i.a,{}),children:ee?"Locked":"Unlocked"})})]})}),!!A&&Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(k.a,{onClick:A})}),B===I.c&&Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(U,{weaponTypeKey:re,onChangeId:function(e){return B.setWeaponLocation(e,K.get(W.e.charKey).value)}})})]})}),Object(P.jsx)(d.a,{}),Object(P.jsx)(s.a,{children:ae&&me&&Object(P.jsxs)(x.a,{display:"flex",gap:{xs:1,md:1.5,lg:2},children:[Object(P.jsxs)(x.a,{sx:{maxWidth:256},flexShrink:1,minWidth:"25%",children:[Object(P.jsx)(x.a,{component:"img",src:fe,className:"grad-".concat(ae.rarity,"star"),sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}}),Object(P.jsx)(O.a,{children:Object(P.jsx)("small",{children:ae.description})})]}),Object(P.jsxs)(x.a,{sx:{mb:-1},flexGrow:1,children:[Object(P.jsxs)(O.a,{variant:"h6",children:[!1,ae.name," Lv. ",V&&F.c.getLevelString(V)," ",ae.rarity>2&&Object(P.jsxs)(T.a,{color:"info",children:["Refinement ",Y]})]}),Object(P.jsx)(O.a,{children:Object(P.jsx)(D.a,{stars:ae.rarity})}),Object(P.jsx)(O.a,{variant:"subtitle1",children:ae.passiveName}),Object(P.jsx)(O.a,{gutterBottom:!0,children:ae.passiveName&&ae.passiveDescription(me.get(W.e.weapon.refineIndex).value)}),Object(P.jsxs)(x.a,{display:"flex",flexDirection:"column",gap:1,children:[Object(P.jsxs)(p.a,{children:[Object(P.jsx)(s.a,{children:Object(P.jsx)(O.a,{children:"Main Stats"})}),Object(P.jsx)(_.a,{children:[W.e.weapon.main,W.e.weapon.sub,W.e.weapon.sub2].map((function(e,t){var n=me.get(e);return n.isEmpty||!n.value?null:Object(P.jsx)(_.b,{node:n,component:h.a},n.key)}))})]}),K&&ae.document&&Object(P.jsx)(w.a,{sections:ae.document})]})]})]})}),f&&ce&&Object(P.jsx)(s.a,{sx:{py:1},children:Object(P.jsxs)(o.a,{container:!0,children:[Object(P.jsx)(o.a,{item:!0,flexGrow:1,children:Object(P.jsx)(y.b,{noUnselect:!0,inventory:!0,value:ne,onChange:be,filter:de})}),!!A&&Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(k.a,{large:!0,onClick:A})})]})})]})}function U(e){var t=e.onChangeId,n=e.weaponTypeKey,c=Object(v.useContext)(I.b),r=Object(v.useState)(!1),i=Object(a.a)(r,2),j=i[0],b=i[1],x=function(){return b(!1)},h=function(e){t(e),x()},m=Object(G.a)(F.c.getAll,[]),g=c.weapons.keys.filter((function(e){var t,a=c._getWeapon(e);return!!a&&(!n||n===(null===m||void 0===m||null===(t=m[a.key])||void 0===t?void 0:t.weaponType))}));return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(u.a,{color:"info",onClick:function(){return b(!0)},startIcon:Object(P.jsx)(l.a,{}),children:"SWAP WEAPON"}),Object(P.jsx)(K.a,{open:j,onClose:x,children:Object(P.jsxs)(p.a,{children:[Object(P.jsx)(s.a,{sx:{py:1},children:Object(P.jsxs)(o.a,{container:!0,children:[Object(P.jsx)(o.a,{item:!0,flexGrow:1,children:Object(P.jsxs)(O.a,{variant:"h6",children:[n?Object(P.jsx)(A.a,{src:f.a.weaponTypes[n]}):null," Swap Weapon"]})}),Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(k.a,{onClick:x})})]})}),Object(P.jsx)(d.a,{}),Object(P.jsx)(s.a,{children:Object(P.jsx)(o.a,{container:!0,spacing:1,children:g.map((function(e){return Object(P.jsx)(o.a,{item:!0,xs:6,sm:6,md:4,lg:3,children:Object(P.jsx)(B.a,{weaponId:e,onClick:h})},e)}))})})]})})]})}},345:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var c=n(10),a=n(125),r=n(786),i=n(232),l=n(0),s=n(19),o=n(9),j=n(791),u=Object(o.a)(j.a,{shouldForwardProp:function(e){return"baseColor"!==e&&"selectedColor"!==e}})((function(e){var t=e.theme,n=e.baseColor,c=void 0===n?"primary":n,a=e.selectedColor,r=void 0===a?"success":a;return{"&":{backgroundColor:t.palette[c].main,color:t.palette[c].contrastText},"&:hover":{backgroundColor:t.palette[c].dark},"&.Mui-selected":{backgroundColor:t.palette[r].main,color:t.palette[r].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[r].dark},"&.Mui-disabled":{backgroundColor:t.palette[c].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[r].dark}}})),b=n(276),d=n(1),x=["value","onChange"];function O(e){var t=e.value,n=e.onChange,o=Object(a.a)(e,x),j=Object(l.useCallback)((function(e,t){return n(t||"")}),[n]);return Object(d.jsx)(r.a,Object(c.a)(Object(c.a)({exclusive:!0,onChange:j,value:t||s.d},o),{},{children:s.d.map((function(e){return Object(d.jsx)(u,{value:e,selectedColor:e,children:Object(d.jsx)(i.a,{sx:{fontSize:"2em",lineHeight:1},children:b.b[e]})},e)}))}))}},376:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return lt}));var c=n(8),a=n(10),r=n(125),i=n(156),l=n(443),s=n(250),o=n(791),j=n(442),u=n(71),b=n(248),d=n(254),x=n(239),O=n(257),h=n(740),v=n(790),f=n(0),m=n(266),p=n(262),g=n(334),y=n(292),k=n(279),C=n(54),w=n(281),S=n(270),_=n(341),A=n(356),K=n(377),T=n(232),D=n(353),E=n(508),M=n(509),I=n(510),W=n(265),L=n(312),G=n(280),N=n(102),z=n(264),B=n(296),F=n(267),R=n(1);function P(){var e=Object(f.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(f.useCallback)((function(){return a(!n)}),[a,n]);return Object(R.jsxs)(p.a,{children:[Object(R.jsx)(l.a,{children:Object(R.jsxs)(s.a,{container:!0,children:[Object(R.jsxs)(s.a,{item:!0,flexGrow:1,children:[Object(R.jsxs)(u.a,{children:["Formulas ","&"," Calculations"]}),Object(R.jsx)(u.a,{variant:"caption",color:"text.secondary",children:"Expand to see every formula and all their calculations."})]}),Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(B.a,{expand:n,onClick:r,"aria-expanded":n,"aria-label":"show more",children:Object(R.jsx)(A.a,{})})})]})}),Object(R.jsx)(K.a,{in:n,timeout:"auto",unmountOnExit:!0,children:Object(R.jsx)(l.a,{sx:{pt:0},children:Object(R.jsx)(V,{})})})]})}function V(){var e=Object(f.useContext)(W.a).data,t=Object(L.b)(e);return Object(R.jsx)(f.Suspense,{fallback:Object(R.jsx)(i.a,{variant:"rectangular",width:"100%",height:1e3}),children:Object(R.jsx)(T.a,{sx:{mr:-1,mb:-1},children:t.map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(R.jsx)(U,{displayNs:a,sectionKey:n},n)}))})})}function U(e){var t=e.sectionKey,n=e.displayNs,a=Object(f.useContext)(W.a).data,r=Object(z.a)(Object(L.a)(a,t),[a,t]);if(!r)return null;var i=r.title,s=r.icon,o=r.action;return Object(R.jsxs)(m.a,{sx:{mb:1},children:[Object(R.jsx)(D.a,{avatar:s&&Object(R.jsx)(F.a,{size:2,sx:{m:-1},src:s}),title:i,action:o,titleTypographyProps:{variant:"subtitle1"}}),Object(R.jsx)(x.a,{}),Object(R.jsx)(l.a,{children:Object.entries(n).map((function(e){var t,n=Object(c.a)(e,2),a=n[0],r=n[1];return!r.isEmpty&&Object(R.jsxs)(E.a,{sx:{bgcolor:"contentLight.main"},children:[Object(R.jsx)(M.a,{expandIcon:Object(R.jsx)(A.a,{}),children:Object(R.jsxs)(u.a,{children:[Object(R.jsx)(C.a,{color:r.variant,children:N.b.get(null!==(t=r.key)&&void 0!==t?t:"")})," ",Object(R.jsx)("strong",{children:Object(G.b)(r.value,r.unit)})]})}),Object(R.jsx)(I.a,{children:r.formulas.map((function(e,t){return Object(R.jsx)(u.a,{children:e},t)}))})]},a)}))})]})}var H=n(342),q=n(288),J=n(306),X=n(45),Q=n(285),Y=n(305),Z=n(297),$=n(25),ee=n(20),te=n(322),ne=n(269),ce=n(330),ae=n(158),re=n(261),ie=n(293),le=n(19),se=n(340);var oe=function(e){var t=e.newBuild,n=void 0!==t&&t,a=Object(f.useContext)(W.a),r=a.data,i=a.character,o=a.mainStatAssumptionLevel,b=Object(f.useContext)(ae.b),d=Object(ee.g)(),h=Object(f.useCallback)((function(e){return d.push({pathname:"/artifact",artToEditId:e})}),[d]),v=Object(z.a)(ne.a.getAll,[]),m=Object(ie.a)(),g=Object(c.a)(m,2)[1];Object(f.useEffect)((function(){return b.followAnyArt(g)}));var y=Object(f.useCallback)((function(){if(window.confirm("Do you want to equip this artifact build to this character?")){var e=Object.fromEntries(le.j.map((function(e){return[e,r.get(re.e.art[e].id).value]})));b.equipArtifacts(i.key,e)}}),[i,r,b]),k=Object(f.useCallback)((function(){i&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&b.equipArtifacts(i.key,Object($.m)(le.j,(function(e){return""})))}),[i,b]),C=le.j.map((function(e){return r.get(re.e.art[e].id).value})),w=Object(f.useMemo)((function(){return v&&ne.a.setEffects(v,r)}),[v,r]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(p.a,{sx:{mb:1},children:[Object(R.jsx)(l.a,{children:Object(R.jsx)(se.a,{})}),Object(R.jsx)(x.a,{}),Object(R.jsx)(l.a,{sx:{py:1},children:Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,children:n?Object(R.jsx)(O.a,{onClick:y,className:"mr-2",children:"Equip artifacts"}):b===ae.c&&Object(R.jsx)(O.a,{color:"error",onClick:k,children:"Unequip all artifacts"})}),Object(R.jsx)(s.a,{item:!0,flexGrow:1}),Object(R.jsx)(s.a,{item:!0,children:!!o&&Object(R.jsx)(j.a,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:Object(R.jsx)(u.a,{children:Object(R.jsxs)("strong",{children:["Assume Main Stats are Level ",o]})})})})]})})]}),Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:v&&w&&Object.entries(w).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(R.jsxs)(p.a,{sx:{flexGrow:1},children:[Object(R.jsx)(D.a,{avatar:Object(R.jsx)(F.a,{size:2,sx:{m:-1},src:v[n].defIconSrc}),title:v[n].name,titleTypographyProps:{variant:"subtitle1"}}),Object(R.jsx)(x.a,{}),Object(R.jsx)(l.a,{children:Object(R.jsx)(s.a,{container:!0,spacing:1,flexDirection:"column",height:"100%",children:Object(R.jsx)(s.a,{item:!0,display:"flex",flexDirection:"column",gap:1,children:a.map((function(e){return Object(R.jsx)(ce.a,{setKey:n,setNumKey:e},n+e)}))})})})]},n)}))}),C.map((function(e){return!!e&&Object(R.jsx)(s.a,{item:!0,xs:6,md:4,children:Object(R.jsx)(te.a,{artifactId:e,mainStatAssumptionLevel:o,onEdit:function(){return h(e)}})},e)}))]})]})},je=n(14),ue=n(53),be=n(52),de=n(404),xe=n(507),Oe=n(272),he=n(277),ve=n(274),fe=n(276),me=n(275),pe=n(39),ge=n(344),ye=n(271),ke=n(317),Ce=n(504),we=n(437),Se=n(290),_e=n(307),Ae=n(327);function Ke(){return Object(R.jsxs)(we.a,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:[Object(R.jsx)(De,{}),Object(R.jsx)(s.a,{container:!0,spacing:1,children:Object($.p)(0,2).map((function(e){return Object(R.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(R.jsx)(Ee,{index:e})},e)}))})]})}var Te={xs:12,sm:6,md:6,lg:4};function De(){var e,t,n,r=Object(f.useContext)(W.a),i=r.data,o=r.oldData,j=i.getTeamBuff(),u=[];return Object.entries(null!==(e=j.total)&&void 0!==e?e:{}).forEach((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return u.push([["total",n],a])})),Object.entries(null!==(t=j.premod)&&void 0!==t?t:{}).forEach((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return u.push([["premod",n],a])})),Object.entries(null!==(n=j.enemy)&&void 0!==n?n:{}).forEach((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return u.push([["enemy",n],a])})),u.length?Object(R.jsxs)(p.a,{children:[Object(R.jsx)(l.a,{children:"Team Buffs"}),Object(R.jsx)(x.a,{}),Object(R.jsx)(l.a,{children:Object(R.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:u.map((function(e,t){var n,r=Object(c.a)(e,2),i=r[0],l=r[1];return l&&!l.isEmpty&&Object(f.createElement)(s.a,Object(a.a)(Object(a.a)({item:!0},Te),{},{key:l.key}),Object(R.jsx)(he.b,{node:l,oldValue:null===(n=Object($.l)(null===o||void 0===o?void 0:o.getTeamBuff(),i))||void 0===n?void 0:n.value}))}))})})]}):null}function Ee(e){var t=e.index,n=Object(f.useContext)(W.a),c=n.character,a=n.teamData,r=n.characterDispatch,i=c.key,s=c.team[t],o=Object(Q.a)(s),j=Object(Y.a)(),u=a[s],b=u&&o&&{character:u.character,characterSheet:u.characterSheet,data:u.target,teamData:a,mainStatAssumptionLevel:0,characterDispatch:o};return Object(R.jsxs)(p.a,{children:[Object(R.jsx)(l.a,{children:Object(R.jsx)(Se.b,{fullWidth:!0,value:s,onChange:function(e){return r({type:"team",index:t,charKey:e})},filter:function(e,t){return t!==i&&!c.team.includes(t)},unSelectText:"Teammate ".concat(t+1),unSelectIcon:Object(R.jsx)(Ce.a,{})})}),b&&Object(R.jsx)(W.a.Provider,{value:b,children:Object(R.jsx)(Ae.a,{characterKey:s,onClickHeader:j,artifactChildren:Object(R.jsx)(Me,{dataContext:n}),weaponChildren:Object(R.jsx)(Ie,{dataContext:n}),characterChildren:Object(R.jsx)(We,{dataContext:n})})})]})}function Me(e){var t=e.dataContext,n=Object(f.useContext)(W.a).data,a=Object(z.a)(ne.a.getAll,[]),r=Object(f.useMemo)((function(){return a&&Object.entries(ne.a.setEffects(a,n)).flatMap((function(e){var t=Object(c.a)(e,2),n=t[0];return t[1].flatMap((function(e){return a[n].setEffectDocument(e)}))}))}),[a,n]);return r?Object(R.jsx)(Le,{sections:r,dataContext:t}):null}function Ie(e){var t=e.dataContext,n=Object(f.useContext)(W.a),c=(n.data,n.teamData[n.character.key].weaponSheet);return Object(R.jsx)(Le,{sections:c.document,dataContext:t})}function We(e){var t=e.dataContext,n=Object(f.useContext)(W.a),c=n.data,a=n.teamData[n.character.key].characterSheet.getTalent(c.get(re.e.charEle).value),r=Object.values(a.sheets).flatMap((function(e){return e.sections}));return Object(R.jsx)(Le,{sections:r,dataContext:t})}function Le(e){var t=e.sections,n=e.dataContext;return Object(R.jsx)(we.a,{display:"flex",flexDirection:"column",gap:1,pt:0,children:t.map((function(e){var t;return(null===(t=e.conditional)||void 0===t?void 0:t.teamBuff)&&Object(R.jsx)(_e.a,{conditional:e.conditional,fieldContext:n})}))})}function Ge(){var e,t=Object(f.useContext)(W.a),n=t.data,c=t.characterSheet,r=t.character,i=t.character.key,o=Object(Q.a)(i),j=n.get(re.e.charEle).value,b=c.weaponTypeKey,d=n.get(re.e.lvl).value,x=n.get(re.e.asc).value,O=n.get(re.e.constellation).value,h={auto:n.get(re.e.total.auto).value,skill:n.get(re.e.total.skill).value,burst:n.get(re.e.total.burst).value},v={auto:n.get(re.e.bonus.auto).value,skill:n.get(re.e.bonus.skill).value,burst:n.get(re.e.bonus.burst).value};return Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,xs:12,md:3,children:Object(R.jsxs)(p.a,{children:[Object(R.jsx)(de.a,{src:c.cardImg,component:"img",width:"100%",height:"auto"}),Object(R.jsxs)(l.a,{children:[Object(R.jsxs)(u.a,{variant:"h4",children:[c.name," ",Object(R.jsx)(F.a,{src:null===(e=Oe.a.weaponTypes)||void 0===e?void 0:e[b]})," ",fe.a[j]," "]}),Object(R.jsx)(u.a,{variant:"h6",children:Object(R.jsx)(ve.a,{stars:c.rarity,colored:!0})}),Object(R.jsxs)(u.a,{variant:"h5",children:["Lvl. ",ye.b.getLevelString(d,x)]}),Object(R.jsx)(s.a,{container:!0,spacing:1,mt:1,children:["auto","skill","burst"].map((function(e){var t;return Object(R.jsx)(s.a,{item:!0,xs:4,children:Object(R.jsx)(xe.a,{badgeContent:h[e],color:v[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:Object(R.jsx)(T.a,{component:"img",src:null===(t=c.getTalentOfKey(e,j))||void 0===t?void 0:t.img,width:"100%",height:"auto"})})},e)}))}),Object(R.jsx)(u.a,{sx:{textAlign:"center",mt:1},variant:"h6",children:c.constellationName}),Object(R.jsx)(s.a,{container:!0,spacing:1,children:Object($.p)(1,6).map((function(e){var t;return Object(R.jsx)(s.a,{item:!0,xs:4,children:Object(R.jsx)(T.a,{component:"img",src:null===(t=c.getTalentOfKey("constellation".concat(e),j))||void 0===t?void 0:t.img,sx:Object(a.a)({cursor:"pointer"},O>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto",onClick:function(){return o({constellation:e===O?e-1:e})}})},e)}))})]})]})}),Object(R.jsxs)(s.a,{item:!0,xs:12,md:9,sx:{"> div:not(:last-child)":{mb:1}},children:[Object(R.jsx)(ge.default,{weaponId:r.equippedWeapon}),Object(R.jsx)(qe,{})]})]})}var Ne=["eleMas","critRate_","critDMG_","enerRech_","heal_"],ze=[].concat(["atk","hp","def"],Ne).map((function(e){return re.e.total[e]})),Be=["atk_","atk","hp_","hp","def_","def"].concat(Ne),Fe=[].concat(Object(je.a)(le.e.map((function(e){return re.e.total["".concat(e,"_dmg_")]}))),Object(je.a)(le.e.map((function(e){return re.e.total["".concat(e,"_res_")]}))),Object(je.a)(["stamina","incHeal_","shield_","cdRed_"].map((function(e){return re.e.total[e]})))),Re=Fe.map((function(e){return e.info.key})),Pe=[re.e.total.all_dmg_].concat(Object(je.a)(le.e.map((function(e){return re.e.total["".concat(e,"_enemyRes_")]}))),[re.e.total.normal_dmg_,re.e.total.normal_critRate_,re.e.total.charged_dmg_,re.e.total.charged_critRate_,re.e.total.plunging_dmg_,re.e.total.plunging_critRate_,re.e.total.skill_dmg_,re.e.total.skill_critRate_,re.e.total.burst_dmg_,re.e.total.burst_critRate_],Object(je.a)(Object.keys(pe.e).map((function(e){return re.e.total["".concat(e,"_dmg_")]}))),Object(je.a)(Object.keys(pe.a).map((function(e){return re.e.total["".concat(e,"_dmg_")]}))),Object(je.a)(["moveSPD_","atkSPD_","weakspotDMG_"].map((function(e){return re.e.total[e]})))),Ve=Pe.map((function(e){return e.info.key})),Ue={xs:12,sm:6,md:6,lg:4};function He(e){var t=e.nodes,n=e.statBreakpoint,c=e.extra,r=Object(f.useContext)(W.a),i=r.data,l=r.oldData;return Object(R.jsxs)(s.a,{container:!0,columnSpacing:{xs:2,lg:3},rowSpacing:1,children:[t.map((function(e){var t,c;return Object(R.jsx)(s.a,Object(a.a)(Object(a.a)({item:!0},n),{},{children:Object(R.jsx)(he.b,{node:i.get(e),oldValue:null===l||void 0===l||null===(c=l.get(e))||void 0===c?void 0:c.value})}),null===(t=e.info)||void 0===t?void 0:t.key)})),c]})}function qe(){var e=Object(f.useContext)(W.a),t=e.data,n=e.character,c=e.character.key,r=Object(Q.a)(c),i=t.get(re.e.special);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(De,{}),Object(R.jsx)(Je,{title:"Main Stats",content:Object(R.jsx)(He,{statBreakpoint:Ue,nodes:ze,extra:i&&Object(R.jsxs)(s.a,Object(a.a)(Object(a.a)({item:!0},Ue),{},{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(R.jsxs)("span",{children:[Object(R.jsx)("b",{children:"Special:"})," ",Object(R.jsxs)(C.a,{color:i.variant,children:[i.key&&fe.a[i.key]," ",i.key&&N.b.get(i.key)]})]}),Object(R.jsx)("span",{children:Object(me.h)(i.value,i.unit)})]}))}),editContent:Object(R.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:Be.map((function(e){var t,c=N.b.get(e);return Object(R.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(R.jsx)(ke.a,{name:Object(R.jsxs)("span",{children:[fe.a[e]," ",c]}),placeholder:N.b.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===N.b.unit(e),onValueChange:function(t){return r({type:"editStats",statKey:e,value:t})}})},e)}))})}),Object(R.jsx)(Je,{title:"Other Stats",content:Object(R.jsx)(He,{statBreakpoint:Ue,nodes:Fe}),editContent:Object(R.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:Re.map((function(e){var t,c=N.b.get(e);return Object(R.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(R.jsx)(ke.a,{name:Object(R.jsxs)("span",{children:[fe.a[e]," ",c]}),placeholder:N.b.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===N.b.unit(e),defaultValue:void 0,onValueChange:function(t){return r({type:"editStats",statKey:e,value:t})}})},e)}))})}),Object(R.jsx)(Je,{title:"Misc Stats",content:Object(R.jsx)(He,{statBreakpoint:{xs:12,sm:6,md:6},nodes:Pe}),editContent:Object(R.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:Ve.map((function(e){var t,c=N.b.get(e);return Object(R.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(R.jsx)(ke.a,{name:Object(R.jsxs)("span",{children:[fe.a[e]," ",c]}),placeholder:N.b.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===N.b.unit(e),onValueChange:function(t){return r({type:"editStats",statKey:e,value:t})}})},e)}))})})]})}function Je(e){var t=e.title,n=e.content,a=e.editContent,r=Object(f.useState)(!1),i=Object(c.a)(r,2),s=i[0],o=i[1];return Object(R.jsxs)(p.a,{children:[Object(R.jsx)(l.a,{sx:{py:1},children:Object(R.jsxs)(T.a,{display:"flex",justifyContent:"space-between",children:[Object(R.jsx)(u.a,{variant:"subtitle1",children:t}),Object(R.jsx)(O.a,{size:"small",color:s?"error":"info",onClick:function(){return o(!s)},children:Object(R.jsxs)("span",{children:[Object(R.jsx)(be.a,{icon:s?ue.w:ue.m})," ",s?"EXIT":"Edit Stats"]})})]})}),Object(R.jsx)(x.a,{}),Object(R.jsx)(l.a,{children:s?a:n})]})}var Xe=n(406),Qe=n(289),Ye=n(298),Ze=n(295);function $e(){var e=Object(f.useContext)(W.a),t=e.data,n=e.character,a=e.characterSheet,r=Object(Q.a)(n.key),i=t.get(re.e.charEle).value,l=t.get(re.e.asc).value,o=t.get(re.e.constellation).value;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(tt,{}),Object(R.jsxs)(s.a,{container:!0,spacing:1,sx:{mb:1},children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(R.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(R.jsx)(at,{talentKey:n,subtitle:a})},n)})),!!a.getTalentOfKey("sprint",i)&&Object(R.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(R.jsx)(at,{talentKey:"sprint",subtitle:"Alternative Sprint"})}),!!a.getTalentOfKey("passive",i)&&Object(R.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(R.jsx)(at,{talentKey:"passive",subtitle:"Passive"})})]}),Object(R.jsx)(s.a,{container:!0,spacing:1,children:[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var t=Object(c.a)(e,3),n=t[0],r=t[1],o=t[2],j=l>=o;return a.getTalentOfKey(n,i)?Object(R.jsx)(s.a,{item:!0,style:{opacity:j?1:.5},xs:12,md:4,children:Object(R.jsx)(at,{talentKey:n,subtitle:r})},n):null}))}),Object(R.jsxs)(u.a,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",o]}),Object(R.jsx)(s.a,{container:!0,spacing:1,children:Object($.p)(1,6).map((function(e){var t="constellation".concat(e);return Object(R.jsx)(s.a,{item:!0,xs:12,md:4,sx:{opacity:o>=e?1:.5},children:Object(R.jsx)(at,{talentKey:t,subtitle:"Contellation Lv. ".concat(e),onClickTitle:function(){return r({constellation:e===o?e-1:e})}})},e)}))})]})}var et={superconduct:function(e){var t=e.node;return Object(R.jsx)(m.a,{children:Object(R.jsx)(l.a,{sx:{p:1},children:Object(R.jsxs)(u.a,{color:"superconduct.main",children:[N.b.get(t.key)," ",fe.a.electro,"+",fe.a.cryo," ",Object(R.jsx)("strong",{children:Object(G.b)(t.value,t.unit)})]})})})},electrocharged:function(e){var t=e.node;return Object(R.jsx)(m.a,{children:Object(R.jsx)(l.a,{sx:{p:1},children:Object(R.jsxs)(u.a,{color:"electrocharged.main",children:[N.b.get(t.key)," ",fe.a.electro,"+",fe.a.hydro," ",Object(R.jsx)("strong",{children:Object(G.b)(t.value,t.unit)})]})})})},overloaded:function(e){var t=e.node;return Object(R.jsx)(m.a,{children:Object(R.jsx)(l.a,{sx:{p:1},children:Object(R.jsxs)(u.a,{color:"overloaded.main",children:[N.b.get(t.key)," ",fe.a.electro,"+",fe.a.pyro," ",Object(R.jsx)("strong",{children:Object(G.b)(t.value,t.unit)})]})})})},pyroSwirl:function(){var e=Object(f.useState)(Object.keys(nt)[0]),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(f.useContext)(W.a).data.getDisplay().reaction["".concat(n,"Swirl")];return Object(R.jsxs)(m.a,{sx:{display:"flex"},children:[Object(R.jsx)(S.a,{size:"small",title:nt[n],color:"success",children:Object.entries(nt).map((function(e){var t=Object(c.a)(e,2),r=t[0],i=t[1];return Object(R.jsx)(v.a,{selected:n===r,disabled:n===r,onClick:function(){return a(r)},children:i},r)}))}),Object(R.jsx)(T.a,{sx:{color:"".concat(n,".main"),p:1},children:Object(R.jsx)("strong",{children:Object(G.b)(r.value,r.unit)})})]})},shattered:function(e){var t=e.node,n=Object(R.jsx)(Qe.a,{placement:"top",title:Object(R.jsxs)(u.a,{children:["Claymores, Plunging Attacks and ",Object(R.jsx)(C.a,{color:"geo",children:"Geo DMG"})]}),children:Object(R.jsx)(T.a,{component:"span",sx:{cursor:"help"},children:Object(R.jsx)(be.a,{icon:ue.v})})});return Object(R.jsx)(m.a,{children:Object(R.jsx)(l.a,{sx:{p:1},children:Object(R.jsxs)(C.a,{color:"shattered",children:[N.b.get(t.key)," ",fe.a.hydro,"+",fe.a.cryo,"+ ",Object(R.jsx)(C.a,{color:"physical",children:Object(R.jsxs)("small",{children:["Heavy Attack",n," "]})})," ",Object(R.jsx)("strong",{children:Object(G.b)(t.value,t.unit)})]})})})}};function tt(){var e=Object(f.useContext)(W.a).data.getDisplay().reaction;return Object(R.jsx)(p.a,{sx:{mb:1},children:Object(R.jsx)(l.a,{children:Object(R.jsx)(s.a,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1],r=et[n];return r?Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(r,{node:a})},n):null}))})})})}var nt={pyro:Object(R.jsxs)("span",{children:[Object(R.jsx)(C.a,{color:"pyro",children:N.b.get("pyro_swirl_hit")})," ",fe.a.pyro," + ",fe.a.anemo]}),electro:Object(R.jsxs)("span",{children:[Object(R.jsx)(C.a,{color:"electro",children:N.b.get("electro_swirl_hit")})," ",fe.a.electro,"+",fe.a.anemo]}),cryo:Object(R.jsxs)("span",{children:[Object(R.jsx)(C.a,{color:"cryo",children:N.b.get("cryo_swirl_hit")})," ",fe.a.cryo," + ",fe.a.anemo]}),hydro:Object(R.jsxs)("span",{children:[Object(R.jsx)(C.a,{color:"hydro",children:N.b.get("hydro_swirl_hit")})," ",fe.a.hydro," + ",fe.a.anemo]})};C.a,N.b.get("crystalize_hit"),fe.a.electro,fe.a.hydro,fe.a.pyro,fe.a.cryo,fe.a.geo,N.b.get("pyro_crystalize_hit"),fe.a.pyro,fe.a.geo,N.b.get("electro_crystalize_hit"),fe.a.electro,fe.a.geo,N.b.get("cryo_crystalize_hit"),fe.a.cryo,fe.a.geo,N.b.get("hydro_crystalize_hit"),fe.a.hydro,fe.a.geo;var ct=[1,1,2,4,6,8,10];function at(e){var t=e.talentKey,n=e.subtitle,c=e.onClickTitle,a=Object(f.useContext)(W.a),r=a.data,i=a.character.talent,o=a.characterSheet,j=a.characterDispatch,b=Object(f.useCallback)((function(e){return Object(R.jsx)(Xe.a,{onClick:c,children:e})}),[c]),d=null;if(t in i){var O=r.get(re.e.bonus[t]).value,h=r.get(re.e.total[t]).value,m=r.get(re.e.asc).value;d=Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(l.a,{sx:{py:1},children:Object(R.jsx)(S.a,{fullWidth:!0,title:"Talent Lv. ".concat(h),color:O?"info":"primary",children:Object($.p)(1,ct[m]).map((function(e){return Object(R.jsxs)(v.a,{selected:i[t]===e,disabled:i[t]===e,onClick:function(){return n=e,i[t]=n,void j({talent:i});var n},children:["Talent Lv. ",e+O]},e)}))})}),Object(R.jsx)(x.a,{})]})}var g=o.getTalentOfKey(t,r.get(re.e.charEle).value);return Object(R.jsxs)(p.a,{sx:{height:"100%"},children:[d,Object(R.jsxs)(l.a,{children:[Object(R.jsx)(Ye.a,{condition:!!c,wrapper:b,children:Object(R.jsxs)(s.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(T.a,{component:"img",src:null===g||void 0===g?void 0:g.img,sx:{width:60,height:"auto"}})}),Object(R.jsxs)(s.a,{item:!0,flexGrow:1,sx:{pl:1},children:[Object(R.jsx)(u.a,{variant:"h6",children:null===g||void 0===g?void 0:g.name}),Object(R.jsx)(u.a,{variant:"subtitle1",children:n})]})]})}),null!==g&&void 0!==g&&g.sections?Object(R.jsx)(Ze.a,{sections:g.sections}):null]})]})}var rt=["children","current","value"];function it(e){var t=e.children,n=e.current,c=e.value,l=Object(r.a)(e,rt);return c!==n?null:Object(R.jsx)(f.Suspense,{fallback:Object(R.jsx)(i.a,{variant:"rectangular",width:"100%",height:1e3}),children:Object(R.jsx)("div",Object(a.a)(Object(a.a)({role:"tabpanel",hidden:c!==n,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c)},l),{},{children:t}))})}function lt(e){var t,n,r=e.characterKey,i=e.footer,O=e.newteamData,h=e.mainStatAssumptionLevel,v=void 0===h?0:h,g=e.onClose,y=e.tabName,C=e.isFlex,w=Object(Z.a)(r,v),S=null!==(t=null===w||void 0===w?void 0:w[r])&&void 0!==t?t:{},A=S.character,K=S.characterSheet,T=S.target,D=Object(f.useState)(y||(O?"newartifacts":"character")),E=Object(c.a)(D,2),M=E[0],I=E[1],L=Object(f.useCallback)((function(e,t){return I(t)}),[I]),G=Object(Q.a)(null!==(n=null===A||void 0===A?void 0:A.key)&&void 0!==n?n:"");if(!w||!A||!K||!T)return Object(R.jsx)(R.Fragment,{});var N=A.compareData,z={character:A,characterSheet:K,mainStatAssumptionLevel:v,data:O?O[r].target:T,teamData:O||w,oldData:N&&O?T:void 0,characterDispatch:G};return Object(R.jsx)(m.a,{children:Object(R.jsxs)(W.a.Provider,{value:z,children:[Object(R.jsxs)(l.a,{sx:{"> div:not(:last-child)":{mb:1}},children:[Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(st,{})}),Object(R.jsx)(s.a,{item:!0,children:!!O&&Object(R.jsxs)(q.a,{exclusive:!0,value:N,onChange:function(e,t){return G({compareData:t})},size:"small",children:[Object(R.jsx)(o.a,{value:!1,disabled:!N,children:Object(R.jsx)("small",{children:"Show New artifact Stats"})}),Object(R.jsx)(o.a,{value:!0,disabled:N,children:Object(R.jsx)("small",{children:"Compare against equipped artifacts"})})]})}),Object(R.jsx)(s.a,{item:!0,flexGrow:1}),!!v&&Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(j.a,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:Object(R.jsx)(u.a,{children:Object(R.jsxs)("strong",{children:["Assume Main Stats are Level ",v]})})})}),!!g&&Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(k.a,{onClick:g})})]}),Object(R.jsx)(p.a,{children:Object(R.jsxs)(b.a,{onChange:L,value:M,variant:"fullWidth",children:[Object(R.jsx)(d.a,{value:"character",label:"Character"}),!!O&&Object(R.jsx)(d.a,{value:"newartifacts",label:"New Artifacts"}),Object(R.jsx)(d.a,{value:"artifacts",label:O?"Current Artifacts":"Artifacts"}),!C&&Object(R.jsx)(d.a,{value:"buffs",label:"Team Buffs"}),Object(R.jsx)(d.a,{value:"talent",label:"Talents"})]})}),Object(R.jsx)(H.a,{}),Object(R.jsx)(P,{}),Object(R.jsx)(_.b,{}),Object(R.jsx)(it,{value:"character",current:M,children:Object(R.jsx)(Ge,{})}),Object(R.jsx)(W.a.Provider,{value:Object(a.a)(Object(a.a)({},z),{},{data:T,oldData:void 0}),children:Object(R.jsx)(it,{value:"artifacts",current:M,children:Object(R.jsx)(oe,{})})}),Object(R.jsx)(it,{value:"newartifacts",current:M,children:Object(R.jsx)(oe,{newBuild:!0})}),Object(R.jsx)(it,{value:"buffs",current:M,children:Object(R.jsx)(Ke,{})}),Object(R.jsx)(it,{value:"talent",current:M,children:Object(R.jsx)($e,{})})]}),!!i&&Object(R.jsx)(x.a,{}),i&&Object(R.jsx)(l.a,{children:i})]})})}function st(){var e,t=Object(f.useContext)(W.a),n=t.character,a=t.characterSheet,r=t.characterDispatch,i=Object(f.useState)(!1),l=Object(c.a)(i,2),o=l[0],j=l[1],u=Object(Y.a)(),b=Object(f.useCallback)((function(e){e=Object($.b)(e,1,90);var t=X.b.findIndex((function(t){return e<=t}));r({level:e,ascension:t})}),[r]),d=Object(f.useCallback)((function(){if(n){var e=n.level,t=void 0===e?1:e,c=n.ascension,a=void 0===c?0:c,i=X.b.findIndex((function(e){return 90!==t&&t===e}));r(a===i?{ascension:a+1}:{ascension:i})}}),[r,n]),x=n.elementKey,m=void 0===x?"anemo":x,p=n.level,k=void 0===p?1:p,_=n.ascension,A=void 0===_?0:_;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(g.a,{show:o,onHide:function(){return j(!1)},onSelect:u}),Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(O.a,{onClick:function(){return j(!0)},startIcon:Object(R.jsx)(y.a,{src:null===a||void 0===a?void 0:a.thumbImgSide}),children:null!==(e=null===a||void 0===a?void 0:a.name)&&void 0!==e?e:"Select a Character"})}),Object(R.jsx)(s.a,{item:!0,children:Object(R.jsxs)(h.a,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(null===a||void 0===a?void 0:a.sheet)&&"talents"in(null===a||void 0===a?void 0:a.sheet)&&Object(R.jsx)(S.a,{title:Object(R.jsx)("strong",{children:Object(R.jsx)(C.a,{color:m,children:Object(J.a)("element.".concat(m))})}),children:Object.keys(a.sheet.talents).map((function(e){return Object(R.jsx)(v.a,{selected:m===e,disabled:m===e,onClick:function(){return r({elementKey:e})},children:Object(R.jsx)("strong",{children:Object(R.jsx)(C.a,{color:e,children:Object(J.a)("element.".concat(e))})})},e)}))}),Object(R.jsx)(w.a,{children:Object(R.jsx)(w.c,{onChange:b,value:k,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!a})}),Object(R.jsx)(O.a,{sx:{pl:1},disabled:!Object(X.a)(k)||!a,onClick:d,children:Object(R.jsxs)("strong",{children:["/ ",X.b[A]]})}),Object(R.jsx)(S.a,{title:"Select Level",disabled:!a,children:X.c.map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1],i=n===X.b[a]?"Lv. ".concat(n):"Lv. ".concat(n,"/").concat(X.b[a]),l=n===k&&a===A;return Object(R.jsx)(v.a,{selected:l,disabled:l,onClick:function(){return r({level:n,ascension:a})},children:i},"".concat(n,"/").concat(a))}))})]})})]})]})}}}]);
//# sourceMappingURL=16.69da4013.chunk.js.map