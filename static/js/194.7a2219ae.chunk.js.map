{"version":3,"file":"static/js/194.7a2219ae.chunk.js","mappings":"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","sources":["Components/Character/CharacterSelectionModal.tsx","Components/SortByButton.tsx","Components/SolidColoredToggleButton.tsx","Components/ToggleButton/ElementToggle.tsx","Components/ToggleButton/WeaponToggle.tsx","PageFlex/FlexDisplay.tsx","Util/CharacterSort.ts","Util/SortByFilters.ts"],"sourcesContent":["import { Box, CardActionArea, CardContent, Divider, Grid, Typography } from \"@mui/material\";\r\nimport { useContext, useMemo, useState } from \"react\";\r\nimport Assets from \"../../Assets/Assets\";\r\nimport CharacterSheet from \"../../Data/Characters/CharacterSheet\";\r\nimport { DatabaseContext } from \"../../Database/Database\";\r\nimport { uiInput as input } from \"../../Formula\";\r\nimport usePromise from \"../../ReactHooks/usePromise\";\r\nimport useTeamData from \"../../ReactHooks/useTeamData\";\r\nimport { ICachedCharacter } from \"../../Types/character_WR\";\r\nimport { allCharacterKeys, CharacterKey, ElementKey, WeaponTypeKey } from \"../../Types/consts\";\r\nimport { characterFilterConfigs, characterSortConfigs } from \"../../Util/CharacterSort\";\r\nimport { filterFunction, sortFunction } from \"../../Util/SortByFilters\";\r\nimport CardDark from \"../Card/CardDark\";\r\nimport CardLight from \"../Card/CardLight\";\r\nimport CloseButton from \"../CloseButton\";\r\nimport ImgIcon from \"../Image/ImgIcon\";\r\nimport ModalWrapper from \"../ModalWrapper\";\r\nimport SortByButton from \"../SortByButton\";\r\nimport SqBadge from \"../SqBadge\";\r\nimport { Stars } from \"../StarDisplay\";\r\nimport StatIcon from \"../StatIcon\";\r\nimport ElementToggle from \"../ToggleButton/ElementToggle\";\r\nimport WeaponToggle from \"../ToggleButton/WeaponToggle\";\r\n\r\nconst defaultSortKeys = [\"level\", \"rarity\", \"name\"]\r\n\r\ntype characterFilter = (character: ICachedCharacter | undefined, sheet: CharacterSheet) => boolean\r\n\r\ntype CharacterSelectionModalProps = {\r\n  show: boolean,\r\n  newFirst?: boolean\r\n  onHide: () => void,\r\n  onSelect?: (ckey: CharacterKey) => void,\r\n  filter?: characterFilter\r\n}\r\n\r\nexport function CharacterSelectionModal({ show, onHide, onSelect, filter = () => true, newFirst = false }: CharacterSelectionModalProps) {\r\n  const sortKeys = useMemo(() => newFirst ? [\"new\", ...defaultSortKeys] : defaultSortKeys, [newFirst])\r\n  const database = useContext(DatabaseContext)\r\n\r\n  const [sortBy, setsortBy] = useState(sortKeys[0])\r\n  const [ascending, setascending] = useState(false)\r\n  const [elementalFilter, setelementalFilter] = useState<ElementKey | \"\">(\"\")\r\n  const [weaponFilter, setweaponFilter] = useState<WeaponTypeKey | \"\">(\"\")\r\n\r\n  const characterSheets = usePromise(CharacterSheet.getAll, [])\r\n\r\n  const sortConfigs = useMemo(() => characterSheets && characterSortConfigs(database, characterSheets), [database, characterSheets])\r\n  const filterConfigs = useMemo(() => characterSheets && characterFilterConfigs(characterSheets), [characterSheets])\r\n  const characterKeyList = useMemo(() => (characterSheets && sortConfigs && filterConfigs) ?\r\n    [...new Set(allCharacterKeys)].filter(cKey => filter(database._getChar(cKey), characterSheets[cKey]))\r\n      .filter(filterFunction({ element: elementalFilter, weaponType: weaponFilter }, filterConfigs))\r\n      .sort(sortFunction(sortBy, ascending, sortConfigs) as (a: CharacterKey, b: CharacterKey) => number) : [],\r\n    [database, characterSheets, filter, elementalFilter, weaponFilter, sortBy, ascending, sortConfigs, filterConfigs])\r\n\r\n  if (!characterSheets) return null\r\n  return <ModalWrapper open={show} onClose={onHide} >\r\n    <CardDark>\r\n      <CardContent sx={{ py: 1 }}>\r\n        <Grid container spacing={1} >\r\n          <Grid item>\r\n            <WeaponToggle sx={{ height: \"100%\" }} onChange={setweaponFilter} value={weaponFilter} size=\"small\" />\r\n          </Grid>\r\n          <Grid item flexGrow={1}>\r\n            <ElementToggle sx={{ height: \"100%\" }} onChange={setelementalFilter} value={elementalFilter} size=\"small\" />\r\n          </Grid>\r\n\r\n          <Grid item flexGrow={1} />\r\n\r\n          <Grid item >\r\n            <SortByButton sx={{ height: \"100%\" }}\r\n              sortKeys={sortKeys} value={sortBy} onChange={setsortBy as any}\r\n              ascending={ascending} onChangeAsc={setascending} />\r\n          </Grid>\r\n          <Grid item>\r\n            <CloseButton onClick={onHide} />\r\n          </Grid>\r\n        </Grid>\r\n      </CardContent>\r\n      <Divider />\r\n      <CardContent><Grid container spacing={1}>\r\n        {characterKeyList.map(characterKey => <Grid item key={characterKey} xs={6} md={4} lg={3} >\r\n          <CharacterBtn key={characterKey} characterKey={characterKey} onClick={() => { onHide(); onSelect?.(characterKey) }} />\r\n        </Grid>)}\r\n      </Grid></CardContent>\r\n    </CardDark>\r\n  </ModalWrapper>\r\n}\r\n\r\nfunction CharacterBtn({ onClick, characterKey }: { onClick: () => void, characterKey: CharacterKey }) {\r\n  const characterSheet = usePromise(CharacterSheet.get(characterKey), [characterKey])\r\n  const teamData = useTeamData(characterKey)\r\n  const { target: data } = teamData?.[characterKey] ?? {}\r\n  if (!characterSheet) return null\r\n  const rarity = characterSheet.rarity\r\n  return <CardActionArea onClick={onClick} >\r\n    <CardLight sx={{ display: \"flex\", alignItems: \"center\" }}  >\r\n      <Box component=\"img\" src={characterSheet.thumbImg} sx={{ width: 130, height: \"auto\" }} className={`grad-${rarity}star`} />\r\n      <Box sx={{ pl: 1 }}>\r\n        <Typography><strong>{characterSheet.name}</strong></Typography>\r\n        {data ? <>\r\n          <Typography variant=\"h6\"> {characterSheet.elementKey && StatIcon[characterSheet.elementKey]} <ImgIcon src={Assets.weaponTypes?.[characterSheet.weaponTypeKey]} />{` `}{CharacterSheet.getLevelString(data.get(input.lvl).value, data.get(input.asc).value)}</Typography>\r\n          <Typography >\r\n            <SqBadge color=\"success\">{`C${data.get(input.constellation).value}`}</SqBadge>{` `}\r\n            <SqBadge color={data.get(input.bonus.auto).value ? \"info\" : \"secondary\"}><strong >{data.get(input.total.auto).value}</strong></SqBadge>{` `}\r\n            <SqBadge color={data.get(input.bonus.skill).value ? \"info\" : \"secondary\"}><strong >{data.get(input.total.skill).value}</strong></SqBadge>{` `}\r\n            <SqBadge color={data.get(input.bonus.burst).value ? \"info\" : \"secondary\"}><strong >{data.get(input.total.burst).value}</strong></SqBadge>\r\n          </Typography>\r\n        </> : <>\r\n          <Typography variant=\"h6\"><SqBadge color=\"primary\">NEW</SqBadge></Typography>\r\n        </>}\r\n        <small><Stars stars={rarity} colored /></small>\r\n      </Box>\r\n    </CardLight>\r\n  </CardActionArea >\r\n}\r\n","import { faSortAmountDownAlt, faSortAmountUp } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Button, ButtonGroup, ButtonGroupProps, MenuItem } from \"@mui/material\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport DropdownButton from \"./DropdownMenu/DropdownButton\";\r\n\r\ntype SortByButtonProps = ButtonGroupProps & {\r\n  sortKeys: string[]\r\n  value: string\r\n  onChange: (value: string) => void\r\n  ascending: boolean\r\n  onChangeAsc: (value: boolean) => void\r\n}\r\n// Assumes that all the sortKeys has corresponding translations in ui.json sortMap\r\nexport default function SortByButton({ sortKeys, value, onChange, ascending, onChangeAsc, ...props }: SortByButtonProps) {\r\n  const { t } = useTranslation(\"ui\")\r\n  return <ButtonGroup {...props} >\r\n    <DropdownButton title={<Trans t={t} i18nKey=\"sortByFormat\" value={t(`sortMap.${value}`) as any}>Sort By: {{ value: t(`sortMap.${value}`) }}</Trans>}>\r\n      {sortKeys.map(key =>\r\n        <MenuItem key={key} selected={value === key} disabled={value === key} onClick={() => onChange(key)}>{t(`sortMap.${key}`) as any}</MenuItem>)}\r\n    </DropdownButton>\r\n    <Button onClick={() => onChangeAsc(!ascending)} startIcon={<FontAwesomeIcon icon={ascending ? faSortAmountDownAlt : faSortAmountUp} className=\"fa-fw\" />}>\r\n      {ascending ? <Trans t={t} i18nKey=\"ascending\" >Ascending</Trans> : <Trans t={t} i18nKey=\"descending\" >Descending</Trans>}\r\n    </Button>\r\n  </ButtonGroup>\r\n}","import { ButtonProps, ToggleButton, ToggleButtonProps, styled } from \"@mui/material\";\r\n\r\ntype SolidColoredToggleButtonPartial = {\r\n  baseColor?: ButtonProps[\"color\"];\r\n  selectedColor?: ButtonProps[\"color\"];\r\n}\r\nexport type SolidColoredToggleButtonProps = SolidColoredToggleButtonPartial & ToggleButtonProps\r\n\r\n\r\nconst SolidColoredToggleButton = styled(ToggleButton, {\r\n  shouldForwardProp: (prop) => prop !== \"baseColor\" && prop !== \"selectedColor\"\r\n})<SolidColoredToggleButtonPartial>(({ theme, baseColor = \"primary\", selectedColor = \"success\" }) => ({\r\n  '&': {\r\n    backgroundColor: theme.palette[baseColor].main,\r\n    color: theme.palette[baseColor].contrastText,\r\n  },\r\n  '&:hover': {\r\n    backgroundColor: theme.palette[baseColor].dark,\r\n  },\r\n  '&.Mui-selected': {\r\n    backgroundColor: theme.palette[selectedColor].main,\r\n    color: theme.palette[selectedColor].contrastText,\r\n  },\r\n  '&.Mui-selected:hover': {\r\n    backgroundColor: theme.palette[selectedColor].dark,\r\n  },\r\n  '&.Mui-disabled': {\r\n    backgroundColor: theme.palette[baseColor].dark,\r\n  },\r\n  '&.Mui-selected.Mui-disabled': {\r\n    backgroundColor: theme.palette[selectedColor].dark,\r\n  },\r\n}));\r\n\r\nexport default SolidColoredToggleButton","import { Box, ToggleButtonGroup } from \"@mui/material\";\r\nimport { useCallback } from \"react\";\r\nimport { allElements, ElementKey } from \"../../Types/consts\";\r\nimport SolidColoredToggleButton from \"../SolidColoredToggleButton\";\r\nimport { SolidToggleButtonGroupProps } from \"../SolidToggleButtonGroup\";\r\nimport { uncoloredEleIcons } from \"../StatIcon\";\r\ntype ElementToggleProps = Omit<SolidToggleButtonGroupProps, \"onChange\" | \"value\"> & {\r\n  onChange: (value: ElementKey | \"\") => void\r\n  value: ElementKey | \"\"\r\n}\r\nexport default function ElementToggle({ value, onChange, ...props }: ElementToggleProps) {\r\n  const cb = useCallback((e, newVal) => onChange(newVal || \"\"), [onChange])\r\n  return <ToggleButtonGroup exclusive onChange={cb} value={value || allElements} {...props}>\r\n    {allElements.map(ele => <SolidColoredToggleButton key={ele} value={ele} selectedColor={ele} >\r\n      <Box sx={{ fontSize: \"2em\", lineHeight: 1 }}>{uncoloredEleIcons[ele]}</Box>\r\n    </SolidColoredToggleButton>)}\r\n  </ToggleButtonGroup>\r\n}\r\n","import { ToggleButton } from \"@mui/material\";\r\nimport { useCallback } from \"react\";\r\nimport Assets from \"../../Assets/Assets\";\r\nimport { allWeaponTypeKeys, WeaponTypeKey } from \"../../Types/consts\";\r\nimport ImgIcon from \"../Image/ImgIcon\";\r\nimport SolidToggleButtonGroup, { SolidToggleButtonGroupProps } from \"../SolidToggleButtonGroup\";\r\ntype WeaponToggleProps = Omit<SolidToggleButtonGroupProps, \"onChange\" | \"value\"> & {\r\n  onChange: (value: WeaponTypeKey | \"\") => void\r\n  value: WeaponTypeKey | \"\"\r\n}\r\nexport default function WeaponToggle({ value, onChange, ...props }: WeaponToggleProps) {\r\n  const cb = useCallback((e, newVal) => onChange(newVal || \"\"), [onChange])\r\n  return <SolidToggleButtonGroup exclusive onChange={cb} value={value || allWeaponTypeKeys} {...props}>\r\n    {allWeaponTypeKeys.map(wt => <ToggleButton key={wt} value={wt}>\r\n      <ImgIcon src={Assets.weaponTypes?.[wt]} size={2} />\r\n    </ToggleButton>)}\r\n  </SolidToggleButtonGroup>\r\n}","import { faLink } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Alert, Box, Button, ButtonGroup, Snackbar } from \"@mui/material\";\r\nimport { useCallback, useContext, useState } from \"react\";\r\nimport { Redirect, useLocation } from \"react-router-dom\";\r\nimport CharacterDisplayCard from \"../PageCharacter/CharacterDisplayCard\";\r\nimport CardDark from \"../Components/Card/CardDark\";\r\nimport { CustomNumberInputButtonGroupWrapper, StyledInputBase } from \"../Components/CustomNumberInput\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\nimport { CharacterKey } from \"pipeline\";\r\n\r\nexport default function FlexDisplay() {\r\n  const location = useLocation()\r\n  const database = useContext(DatabaseContext)\r\n  const sheets = {} as any\r\n  const searchStr = location.search\r\n  const charKey: CharacterKey = \"Sucrose\" // TODO: hardcoded character\r\n  if (!sheets) return null\r\n  if (searchStr) {\r\n    // const flexResult = importFlex(searchStr.substring(1))\r\n    // if (!flexResult) return <Redirect to={`/`} />\r\n    // const [database, charKey, version] = flexResult\r\n    // if (version !== 4)\r\n    //   return <Redirect to={`/flex?${exportFlex(charKey, database, sheets)}`} />\r\n    return <DatabaseContext.Provider value={database}><Display characterKey={charKey} /></DatabaseContext.Provider>\r\n  } else {\r\n    const characterKey = (location as any).characterKey\r\n    if (!characterKey) return <Redirect to={`/`} />\r\n    const flexObj = undefined// exportFlex(characterKey, database, sheets)\r\n    if (!flexObj) return <Redirect to={`/`} />\r\n    window.scrollTo(0, 0)//sometimes the window isnt scrolled to the top on redirect.\r\n    return <Redirect to={`/flex?${flexObj}`} />\r\n  }\r\n}\r\nfunction Display({ characterKey }) {\r\n  const [open, setOpen] = useState(false);\r\n  const handleClick = useCallback(() => setOpen(true), [setOpen],)\r\n  const handleClose = useCallback(\r\n    (event, reason) => {\r\n      if (reason === 'clickaway') return;\r\n      setOpen(false);\r\n    }, [setOpen])\r\n  const copyToClipboard = useCallback(() => {\r\n    const url = window.location.href\r\n    navigator.clipboard.writeText(url).then(handleClick).catch(console.error)\r\n  }, [handleClick])\r\n  const isUpToDate = false\r\n  return <Box display=\"flex\" flexDirection=\"column\" gap={theme => theme.spacing(1)} mt={1} mb={1}>\r\n    <Snackbar open={open} autoHideDuration={5000} onClose={handleClose}>\r\n      <Alert variant=\"filled\" severity=\"success\" sx={{ width: '100%' }}>\r\n        URL copied to clipboard.\r\n      </Alert>\r\n    </Snackbar>\r\n    <CardDark>\r\n      <ButtonGroup sx={{ width: \"100%\" }}>\r\n        <Button color=\"info\" onClick={copyToClipboard} startIcon={<FontAwesomeIcon icon={faLink} />}>Copy URL to clipboard</Button>\r\n        <CustomNumberInputButtonGroupWrapper sx={{ flexBasis: 30, flexGrow: 1 }}>\r\n          <StyledInputBase readOnly value={window.location.href} onClick={e => {\r\n            const target = e.target as HTMLInputElement;\r\n            target.selectionStart = 0;\r\n            target.selectionEnd = target.value.length;\r\n          }} sx={{ px: 2 }} />\r\n        </CustomNumberInputButtonGroupWrapper>\r\n      </ButtonGroup>\r\n      {!!isUpToDate && <Alert variant=\"outlined\" sx={{ m: 1, mt: 2 }} severity=\"warning\" >This URL is generated on an older database version of Genshin Optimizer. The character data below might not be displayed as intended.</Alert>}\r\n    </CardDark>\r\n    <CharacterDisplayCard characterKey={characterKey} isFlex />\r\n  </Box>\r\n}\r\n","import CharacterSheet from \"../Data/Characters/CharacterSheet\";\r\nimport { ArtCharDatabase } from \"../Database/Database\";\r\nimport { CharacterKey } from \"../Types/consts\";\r\nimport { FilterConfigs, SortConfigs } from \"./SortByFilters\";\r\nexport const characterSortKeys = [\"level\", \"rarity\", \"name\"]\r\nexport type CharacterSortKey = typeof characterSortKeys[number]\r\n\r\nexport function characterSortConfigs(database: ArtCharDatabase, characterSheets: Record<CharacterKey, CharacterSheet>): SortConfigs<CharacterSortKey, CharacterKey> {\r\n  return {\r\n    new: {\r\n      getValue: (ck) => database._getChar(ck as CharacterKey) ? 0 : 1,\r\n      tieBreaker: \"name\"\r\n    },\r\n    name: {\r\n      getValue: (ck) => ck,\r\n    },\r\n    level: {\r\n      getValue: (ck) => database._getChar(ck as CharacterKey)?.level ?? 0,\r\n      tieBreaker: \"rarity\"\r\n    },\r\n    rarity: {\r\n      getValue: (ck) => characterSheets?.[ck]?.rarity,\r\n      tieBreaker: \"level\"\r\n    }\r\n  }\r\n}\r\n\r\nexport function characterFilterConfigs(characterSheets: Record<CharacterKey, CharacterSheet>): FilterConfigs<\"element\" | \"weaponType\", CharacterKey> {\r\n  return {\r\n    element: (ck, filter) => !filter || (filter === characterSheets?.[ck]?.elementKey),\r\n    weaponType: (ck, filter) => !filter || (filter === characterSheets?.[ck]?.weaponTypeKey),\r\n  }\r\n}\r\n","type SortConfig<T> = {\r\n  getValue: (id: T) => number | string\r\n  tieBreaker?: string\r\n}\r\nexport type SortConfigs<Keys extends string, T> = Record<Keys, SortConfig<T>>\r\n\r\nexport function sortFunction<Keys extends string, T>(sortby: string, ascending: boolean, configs: SortConfigs<Keys, T>) {\r\n  function Sort(a: T, b: T, ascending: boolean, config: SortConfig<T>) {\r\n    const aV = config.getValue(a)\r\n    const bV = config.getValue(b)\r\n    let diff = 0\r\n    if (typeof aV === \"string\" && typeof bV === \"string\")\r\n      diff = aV.localeCompare(bV)\r\n    else\r\n      diff = ((bV as number) - (aV as number))\r\n    return (ascending ? -1 : 1) * diff\r\n  }\r\n  return (a: T, b: T) => {\r\n    if (!configs[sortby]) return 0\r\n    const filterOption = configs[sortby]\r\n    let diff = Sort(a, b, ascending, filterOption)\r\n    if (!diff && filterOption.tieBreaker && configs[filterOption.tieBreaker])\r\n      diff = Sort(a, b, ascending, configs[filterOption.tieBreaker])\r\n    return diff\r\n  }\r\n}\r\n\r\ntype FilterConfig<T> = (obj: T, filter: any) => boolean\r\nexport type FilterConfigs<Keys extends string, T> = Record<Keys, FilterConfig<T>>\r\nexport function filterFunction<Keys extends string, T>(filterOptions: Record<Keys, any>, filterConfigs: FilterConfigs<Keys, T>) {\r\n  return (obj: T) => Object.entries(filterOptions).every(([optionKey, optionVal]) => filterConfigs[optionKey as any] && filterConfigs[optionKey as any](obj, optionVal))\r\n}\r\n"],"names":["defaultSortKeys","CharacterSelectionModal","show","onHide","onSelect","filter","newFirst","sortKeys","useMemo","database","useContext","DatabaseContext","useState","sortBy","setsortBy","ascending","setascending","elementalFilter","setelementalFilter","weaponFilter","setweaponFilter","characterSheets","usePromise","CharacterSheet","sortConfigs","characterSortConfigs","filterConfigs","characterFilterConfigs","characterKeyList","Set","allCharacterKeys","cKey","_getChar","filterFunction","element","weaponType","sort","sortFunction","open","onClose","sx","py","container","spacing","item","height","onChange","value","size","flexGrow","onChangeAsc","onClick","map","characterKey","xs","md","lg","CharacterBtn","characterSheet","teamData","useTeamData","data","target","rarity","display","alignItems","component","src","thumbImg","width","className","pl","name","variant","elementKey","StatIcon","Assets","weaponTypeKey","get","input","color","stars","colored","SortByButton","props","t","useTranslation","title","i18nKey","key","selected","disabled","startIcon","icon","faSortAmountDownAlt","faSortAmountUp","styled","ToggleButton","shouldForwardProp","prop","theme","baseColor","selectedColor","backgroundColor","palette","main","contrastText","dark","ElementToggle","cb","useCallback","e","newVal","ToggleButtonGroup","exclusive","allElements","ele","Box","fontSize","lineHeight","uncoloredEleIcons","WeaponToggle","allWeaponTypeKeys","wt","FlexDisplay","location","useLocation","searchStr","search","Display","to","setOpen","handleClick","handleClose","event","reason","copyToClipboard","url","window","href","navigator","clipboard","writeText","then","catch","console","error","flexDirection","gap","mt","mb","autoHideDuration","severity","faLink","flexBasis","readOnly","selectionStart","selectionEnd","length","px","isFlex","characterSortKeys","new","getValue","ck","tieBreaker","level","sortby","configs","Sort","a","b","config","aV","bV","localeCompare","filterOption","diff","filterOptions","obj","Object","entries","every","optionKey","optionVal"],"sourceRoot":""}