"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[831],{20005:function(e,t,n){function r(e){var t=e.condition,n=e.wrapper,r=e.falseWrapper,a=e.children;return t?n(a):r?r(a):a}n.d(t,{Z:function(){return r}})},2693:function(e,t,n){n.d(t,{R:function(){return r}});var r=(0,n(72791).createContext)({})},31148:function(e,t,n){n.d(t,{y:function(){return g},u:function(){return m}});var r=n(29439),a=n(93433),i=n(15671),o=n(43144),s=n(55942),c=n(66624),u=n(87234),l=n(24351),f=n(26138),d=n(25617),h=n(80184),p=n.e(90).then(n.bind(n,10090)).then((function(e){return e.default})),v=function(e,t){return(0,h.jsx)(c.v,{ns:"artifact_".concat(e,"_gen"),key18:t})},x=p.then((function(e){return(0,u.b3)(Object.values(e).map((function(e){return e.data})))})),g=function(){function e(t,n,r){var a=this;(0,i.Z)(this,e),this.sheet=void 0,this.key=void 0,this.data=void 0,this.getSlotName=function(e){return v(a.key,"pieces.".concat(e,".name"))},this.getSlotDesc=function(e){return v(a.key,"pieces.".concat(e,".desc"))},this.setEffectDesc=function(e){return v(a.key,"setEffects.".concat(e))},this.setEffectDocument=function(e){var t;return null===(t=a.sheet.setEffects[e])||void 0===t?void 0:t.document},this.hasEnough=function(e,t){var n;return(null!==(n=t.get(f.qH.artSet[a.key]).value)&&void 0!==n?n:0)>=e},this.sheet=n,this.key=t,this.data=r}return(0,o.Z)(e,[{key:"name",get:function(){return v(this.key,"setName")}},{key:"defIconSrc",get:function(){var e=this.slots[0];if(this.slotIcons[e])return this.slotIcons[e]}},{key:"defIcon",get:function(){return(0,h.jsx)(s.Z,{src:this.defIconSrc,sx:{fontSize:"1.5em"}})}},{key:"nameWithIcon",get:function(){var e=this.slots[0];return(0,h.jsxs)("span",{children:[(0,h.jsx)(s.Z,{src:this.slotIcons[e]})," ",v(this.key,"setName")]})}},{key:"nameRaw",get:function(){return this.sheet.name}},{key:"rarity",get:function(){return this.sheet.rarity}},{key:"slots",get:function(){switch(this.key){case"PrayersForDestiny":case"PrayersForIllumination":case"PrayersForWisdom":case"PrayersToSpringtime":return["circlet"];default:return(0,a.Z)(l.eV)}}},{key:"slotIcons",get:function(){return this.sheet.icons}},{key:"setEffects",get:function(){return this.sheet.setEffects}}],[{key:"get",value:function(e){return e?p.then((function(t){return t[e]})):void 0}},{key:"getAll",get:function(){return p}},{key:"getAllData",get:function(){return x}},{key:"setKeysByRarities",value:function(e){var t={};return Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),i=n[0],o=n[1],s=Math.max.apply(Math,(0,a.Z)(o.rarity));t[s]?t[s].push(i):t[s]=[i]})),t}},{key:"setEffects",value:function(e,t){var n={};return Object.entries(e).forEach((function(e){var a=(0,r.Z)(e,2),i=a[0],o=a[1],s=Object.keys(o.setEffects).map((function(e){return parseInt(e)})).filter((function(e){return o.hasEnough(e,t)}));s.length&&(n[i]=s)})),n}}]),e}(),m=function(e,t){return{title:e("setName"),icon:(0,h.jsx)(s.Z,{size:2,sx:{m:-1},src:t}),action:(0,h.jsx)(d.Z,{color:"success",children:"4-set"})}}},11741:function(e,t,n){n.d(t,{J:function(){return O},Y:function(){return A}});var r,a=n(1413),i=n(93433),o=n(75545),s=n(66624),c=n(26138),u=n(87234),l=n(78661),f=n(24351),d=n(60393),h=n(53343),p=n(80184),v=function(e){return(0,p.jsx)(s.v,{ns:"resonance_gen",key18:e})},x=(0,d.Uq)(f.Kj,(function(e){return["".concat(e,"_res_"),(0,l.ew)(l.Sm.apply(void 0,(0,i.Z)(f.Kj.map((function(e){return(0,l.VV)(1,c.uK[e])})))),4,(0,l.aQ)(.15))]})),g={name:v("ProtectiveCanopy.name"),icon:(0,p.jsxs)("span",{children:[o.Z.anemo," ",o.Z.geo," ",o.Z.pyro," ",o.Z.hydro," ",o.Z.cryo," ",o.Z.electro," x4"]}),canShow:function(e){return 4===f.N.filter((function(t){return e.get(c.uK[t]).value>=1})).length},sections:[{teamBuff:!0,text:v("ProtectiveCanopy.desc"),fields:Object.values(x).map((function(e){return{node:e}}))}]},m=(0,l.ew)(c.uK.pyro,2,(0,l.aQ)(.25)),y={name:v("FerventFlames.name"),icon:(0,p.jsxs)("span",{children:[o.Z.pyro," ",o.Z.pyro]}),canShow:function(e){return e.get(c.uK.pyro).value>=2},sections:[{teamBuff:!0,text:v("FerventFlames.desc"),fields:[{node:m},{text:(0,h.st)("effectDuration.cryo"),value:-40,unit:"%"}]}]},Z=(0,l.ew)(c.uK.hydro,2,(0,l.aQ)(.25)),k={name:v("SoothingWater.name"),icon:(0,p.jsxs)("span",{children:[o.Z.hydro," ",o.Z.hydro]}),canShow:function(e){return e.get(c.uK.hydro).value>=2},sections:[{teamBuff:!0,text:v("SoothingWater.desc"),fields:[{node:Z},{text:(0,h.st)("effectDuration.pyro"),value:-40,unit:"%"}]}]},j=["resonance","ShatteringIce"],w=(0,h.v9)(j),b=(0,l.ew)(c.uK.cryo,2,(0,l.Dg)(w,"on",(0,l.aQ)(.15))),C={name:v("ShatteringIce.name"),icon:(0,p.jsxs)("span",{children:[o.Z.cryo," ",o.Z.cryo]}),canShow:function(e){return e.get(c.uK.cryo).value>=2},sections:[{teamBuff:!0,text:v("ShatteringIce.desc"),fields:[{text:(0,h.st)("effectDuration.electro"),value:-40,unit:"%"}],conditional:{teamBuff:!0,path:j,value:w,name:(r="ShatteringIce.cond",(0,p.jsx)(s.v,{ns:"resonance",key18:r})),states:{on:{fields:[{node:b}]}}}}]},S={name:v("HighVoltage.name"),icon:(0,p.jsxs)("span",{children:[o.Z.electro," ",o.Z.electro]}),canShow:function(e){return e.get(c.uK.electro).value>=2},sections:[{teamBuff:!0,text:v("HighVoltage.desc"),fields:[{text:(0,h.st)("effectDuration.hydro"),value:-40,unit:"%"}]}]},_=(0,l.ew)(c.uK.anemo,2,(0,l.aQ)(-.15)),D=(0,l.ew)(c.uK.anemo,2,(0,l.aQ)(.1)),K=(0,l.ew)(c.uK.anemo,2,(0,l.aQ)(-.05)),P={name:v("ImpetuousWinds.name"),icon:(0,p.jsxs)("span",{children:[o.Z.hydro," ",o.Z.hydro]}),canShow:function(e){return e.get(c.uK.hydro).value>=2},sections:[{teamBuff:!0,text:v("ImpetuousWinds.desc"),fields:[{node:_},{node:D},{node:K}]}]},E=(0,h.v9)(j),I=(0,l.ew)(c.uK.geo,2,(0,l.Dg)(E,"on",(0,l.aQ)(.15))),R=(0,l.ew)(c.uK.geo,2,(0,l.Dg)(E,"on",(0,l.aQ)(.15))),W=(0,l.ew)(c.uK.geo,2,(0,l.Dg)(E,"on",(0,l.aQ)(.2))),O=[g,y,k,C,S,P,{name:v("EnduringRock.name"),icon:(0,p.jsxs)("span",{children:[o.Z.geo," ",o.Z.geo]}),canShow:function(e){return e.get(c.uK.geo).value>=2},sections:[{teamBuff:!0,text:v("EnduringRock.desc"),fields:[{node:I}],conditional:{teamBuff:!0,path:["resonance","EnduringRock"],value:E,name:(0,h.st)("protectedByShield"),states:{on:{fields:[{node:R},{node:W},{text:(0,h.Oy)("duration"),value:15,unit:"s"}]}}}}]}],A=(0,u.d1)({premod:(0,a.Z)((0,a.Z)({},x),{},{atk_:m,incHeal_:Z,staminaDec_:_,moveSPD_:D,cdRed_:K,shield_:I,all_dmg_:R,geo_enemyRes_:W}),total:{critRate_:b}})},53343:function(e,t,n){n.d(t,{st:function(){return s},Oy:function(){return c},v9:function(){return u},wV:function(){return l},dW:function(){return f}});var r=n(93433),a=n(66624),i=n(78661),o=n(80184),s=function(e,t){return(0,o.jsx)(a.v,{ns:"sheet",key18:e,values:t})},c=function(e){return(0,o.jsx)(a.v,{ns:"sheet_gen",key18:e})},u=function(e){return(0,i.Mp)(["conditional"].concat((0,r.Z)(e)))};function l(e,t){var n=[e,t];return[n,u(n)]}function f(e,t){return[function(n){return(0,o.jsx)(a.v,{ns:"".concat(e,"_").concat(t,"_gen"),key18:n})},function(n,r){return(0,o.jsx)(a.v,{ns:"".concat(e,"_").concat(t),key18:n,values:r})}]}},66218:function(e,t,n){n.d(t,{ZP:function(){return h},uh:function(){return p},p$:function(){return v}});var r=n(29439),a=n(15671),i=n(43144),o=n(66624),s=n(2139),c=n(55942),u=n(26138),l=n(25617),f=n(80184),d=n.e(891).then(n.bind(n,96891)).then((function(e){return e.default})),h=function(){function e(t,n,r,i){var s=this;(0,a.Z)(this,e),this.key=void 0,this.sheet=void 0,this.data=void 0,this.rarity=void 0,this.weaponType=void 0,this.tr=function(e){return(0,f.jsx)(o.v,{ns:"weapon_".concat(s.key,"_gen"),key18:e})},this.passiveDescription=function(e){return s.hasRefinement?s.tr("passiveDescription.".concat(e)):""},this.rarity=r.rarity,this.weaponType=r.weaponType,this.key=t,this.sheet=n,this.data=i}return(0,i.Z)(e,[{key:"name",get:function(){return this.tr("name")}},{key:"hasRefinement",get:function(){return this.rarity>2}},{key:"passiveName",get:function(){return this.hasRefinement?this.tr("passiveName"):""}},{key:"description",get:function(){return this.tr("description")}},{key:"img",get:function(){return this.sheet.icon}},{key:"imgAwaken",get:function(){return this.sheet.iconAwaken}},{key:"document",get:function(){return this.sheet.document}},{key:"milestoneLevels",get:function(){return this.hasRefinement?s.D4:s.Xu}},{key:"ambiguousLevel",value:function(e){return this.hasRefinement?(0,s.ek)(e):(0,s.nB)(e)}}],[{key:"getAll",get:function(){return d}}]),e}();h.get=function(e){return e?d.then((function(t){return t[e]})):void 0},h.getWeaponsOfType=function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=(0,r.Z)(e,2);n[0];return n[1].weaponType===t})))},h.getLevelString=function(e){return"".concat(e.level,"/").concat(s.SJ[e.ascension])};var p=function(e,t,n,r){return{title:e("passiveName"),icon:function(e){return(0,f.jsx)(c.Z,{size:2,sx:{m:-1},src:e.get(u.qH.weapon.asc).value<2?t:n})},action:r&&(0,f.jsx)(l.Z,{color:"success",children:r})}},v=function(e){return function(t){return e("passiveDescription.".concat(t.get(u.qH.weapon.refineIndex).value))}}},16134:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(29439),a=n(66647),i=n(47047),o=n(39504),s=n(68870),c=n(81918),u=n(20890),l=n(61889),f=n(72791),d=n(31148),h=n(3992),p=n(71310),v=n(20005),x=n(55942),g=n(25617),m=n(10157),y=n(75545),Z=n(2139),k=n(3997),j=n(2693),w=n(26138),b=n(87234),C=n(44297),S=n(50920),_=n(42320),D=n(47639),K=n(24351),P=n(66218),E=n(80184);function I(e){var t,n,r=e.characterKey,c=e.artifactChildren,u=e.weaponChildren,l=e.characterChildren,d=e.onClick,h=e.onClickHeader,x=e.footer,g=(0,f.useContext)(j.R).teamData,m=null!==(t=(0,D.Z)(g?"":r))&&void 0!==t?t:g,y=null!==(n=null===m||void 0===m?void 0:m[r])&&void 0!==n?n:{},Z=y.character,k=y.characterSheet,w=y.target,b=(0,f.useCallback)((function(){return r&&(null===d||void 0===d?void 0:d(r))}),[r,d]),C=(0,f.useCallback)((function(e){return(0,E.jsx)(a.Z,{onClick:b,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[b]),_=(0,S.Z)(r);if(!m||!Z||!k||!w)return null;var K={character:Z,data:w,characterSheet:k,mainStatAssumptionLevel:0,teamData:m,characterDispatch:_};return(0,E.jsx)(f.Suspense,{fallback:(0,E.jsx)(i.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:(0,E.jsx)(j.R.Provider,{value:K,children:(0,E.jsxs)(p.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,E.jsxs)(v.Z,{condition:!!d,wrapper:C,children:[(0,E.jsx)(R,{onClick:d?void 0:h}),(0,E.jsxs)(o.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1},children:[(0,E.jsx)(W,{weaponId:Z.equippedWeapon}),u,(0,E.jsxs)(s.Z,{flexGrow:1,display:"flex",flexDirection:"column",gap:1,children:[(0,E.jsx)(O,{}),c]}),(0,E.jsx)(A,{}),l]})]}),x]})})})}function R(e){var t=e.onClick,n=(0,f.useContext)(j.R),r=n.data,i=n.characterSheet,o=r.get(w.ri.charKey).value,d=r.get(w.ri.charEle).value,h=r.get(w.ri.lvl).value,p=r.get(w.ri.constellation).value,x=r.get(w.ri.asc).value,y=r.get(w.ri.bonus.auto).value,k=r.get(w.ri.bonus.skill).value,b=r.get(w.ri.bonus.burst).value,C=r.get(w.ri.total.auto).value,S=r.get(w.ri.total.skill).value,_=r.get(w.ri.total.burst).value,D=(0,f.useCallback)((function(e){return(0,E.jsx)(a.Z,{onClick:function(){return o&&(null===t||void 0===t?void 0:t(o))},sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[t,o]);return(0,E.jsx)(v.Z,{condition:!!t,wrapper:D,children:(0,E.jsxs)(s.Z,{display:"flex",position:"relative",className:"grad-".concat(i.rarity,"star"),sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:"url(".concat(i.bannerImg,")"),backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[(0,E.jsx)(s.Z,{flexShrink:1,sx:{maxWidth:{xs:"40%",lg:"40%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:(0,E.jsx)(s.Z,{component:"img",src:i.thumbImg,width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),(0,E.jsxs)(s.Z,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,children:[(0,E.jsx)(c.Z,{label:(0,E.jsx)(u.Z,{variant:"subtitle1",children:i.name}),size:"small",color:d}),(0,E.jsxs)(l.ZP,{container:!0,spacing:1,flexWrap:"nowrap",children:[(0,E.jsxs)(l.ZP,{item:!0,sx:{textShadow:"0 0 5px gray"},children:[(0,E.jsxs)(u.Z,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",h]}),(0,E.jsxs)(u.Z,{component:"span",variant:"h6",color:"text.secondary",children:["/",Z.SJ[x]]})]}),(0,E.jsx)(l.ZP,{item:!0,children:(0,E.jsx)(u.Z,{variant:"h6",children:(0,E.jsxs)(g.Z,{children:["C",p]})})})]}),(0,E.jsxs)(l.ZP,{container:!0,spacing:1,flexWrap:"nowrap",children:[(0,E.jsx)(l.ZP,{item:!0,children:(0,E.jsx)(c.Z,{color:y?"info":"secondary",label:(0,E.jsx)("strong",{children:C})})}),(0,E.jsx)(l.ZP,{item:!0,children:(0,E.jsx)(c.Z,{color:k?"info":"secondary",label:(0,E.jsx)("strong",{children:S})})}),(0,E.jsx)(l.ZP,{item:!0,children:(0,E.jsx)(c.Z,{color:b?"info":"secondary",label:(0,E.jsx)("strong",{children:_})})})]}),(0,E.jsx)(u.Z,{mt:1,children:(0,E.jsx)(m.t,{stars:i.rarity,colored:!0})})]})]})})}function W(e){var t=e.weaponId,n=(0,f.useContext)(k.t).database._getWeapon(t),r=(0,_.Z)((null===n||void 0===n?void 0:n.key)&&P.ZP.get(n.key),[null===n||void 0===n?void 0:n.key]),a=(0,f.useMemo)((function(){return r&&n&&(0,b.mP)([r.data,(0,b.v0)(n)])}),[r,n]);if(!n||!r||!a)return null;var i=null===r||void 0===r?void 0:r.name,o=(0,C.EC)(a.get(w.ri.weapon.main).value,a.get(w.ri.weapon.main).unit,0),c=a.get(w.ri.weapon.sub).key,l=(0,C.EC)(a.get(w.ri.weapon.sub).value,a.get(w.ri.weapon.sub).unit,"flat"===a.get(w.ri.weapon.sub).unit?0:void 0),d=P.ZP.getLevelString(n);return(0,E.jsx)(h.Z,{children:(0,E.jsxs)(s.Z,{display:"flex",children:[(0,E.jsx)(s.Z,{flexShrink:1,maxWidth:"35%",display:"flex",flexDirection:"column",alignContent:"flex-end",className:"grad-".concat(r.rarity,"star"),children:(0,E.jsx)(s.Z,{component:"img",src:r.img,width:"100%",height:"auto",sx:{mt:"auto"}})}),(0,E.jsxs)(s.Z,{flexGrow:1,sx:{p:1},children:[(0,E.jsx)(u.Z,{variant:"body2",children:(0,E.jsx)("strong",{children:i})}),(0,E.jsxs)(u.Z,{whiteSpace:"nowrap",lineHeight:1,children:[(0,E.jsxs)(g.Z,{color:"primary",sx:{mr:1},children:["Lv. ",d]}),c&&(0,E.jsxs)(g.Z,{color:"info",children:[" Refinement ",n.refinement]})]}),(0,E.jsxs)(u.Z,{variant:"subtitle1",children:["ATK: ",o]}),c&&(0,E.jsxs)(u.Z,{variant:"subtitle2",lineHeight:1,children:[C.ZP.get(c),": ",l]})]})]})})}function O(){var e=(0,f.useContext)(k.t).database,t=(0,f.useContext)(j.R).data,n=(0,_.Z)(d.y.getAll,[]),a=(0,f.useMemo)((function(){return K.eV.map((function(n){var r;return[n,e._getArt(null!==(r=t.get(w.ri.art[n].id).value)&&void 0!==r?r:"")]}))}),[t,e]);return n?(0,E.jsx)(l.ZP,{container:!0,spacing:1,children:a.map((function(e){var t=(0,r.Z)(e,2),a=t[0],i=t[1];if(!i)return null;var o=i.setKey,s=i.slotKey,u=i.mainStatKey;return(0,E.jsx)(l.ZP,{item:!0,flexGrow:1,children:(0,E.jsx)(c.Z,{color:"secondary",sx:{width:"100%"},icon:(0,E.jsx)(x.Z,{src:null===n||void 0===n?void 0:n[o].slotIcons[s],size:2.5}),label:(0,E.jsx)("span",{children:C.ZP.get(u)})})},a)}))}):null}function A(){var e=(0,f.useContext)(j.R).data,t=["hp","atk","def","eleMas","critRate_","critDMG_","enerRech_"];return t.push("".concat(e.get(w.ri.charEle).value,"_dmg_")),"catalyst"!==e.get(w.ri.weaponType).value&&t.push("physical_dmg_"),(0,E.jsxs)(s.Z,{sx:{width:"100%"},children:[t.map((function(t){var n=e.get(w.ri.total[t]),r=(0,C.EC)(n.value,n.unit,"flat"===n.unit?0:void 0);return(0,E.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,E.jsx)(u.Z,{flexGrow:1,color:"".concat(n.variant,".main"),children:(0,E.jsxs)("strong",{children:[y.Z[t]," ",C.ZP.get(n.key)]})}),(0,E.jsx)(u.Z,{children:r})]},t)})),e.get(w.ri.special).key&&(0,E.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,E.jsx)(u.Z,{flexGrow:1,children:(0,E.jsx)("strong",{children:"Specialized:"})}),(0,E.jsx)(u.Z,{children:C.ZP.get(e.get(w.ri.special).key)})]})]})}},53561:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(15861),a=n(87757),i=n.n(a),o=n(72791),s=n(79271),c=n(947),u=n(39738),l=n(24351),f=n(60393);var d=n(3997),h=n(11400);function p(){var e=(0,o.useContext)(d.t).database,t=(0,s.k6)(),n=(0,o.useCallback)(function(){var n=(0,r.Z)(i().mark((function n(r){var a,o,s,d;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e._getChar(r)){n.next=12;break}return a={key:r,level:1,ascension:0,hitMode:"avgHit",reactionMode:"",equippedArtifacts:(0,f.O)(l.eV,(function(){return""})),equippedWeapon:"",conditional:{},bonusStats:{},enemyOverride:{},buildSettings:(0,u.$)(),talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0,team:["","",""],compareData:!1},e.updateChar(a),n.next=6,c.ZP.get(r);case 6:if(o=n.sent){n.next=9;break}return n.abrupt("return");case 9:s=(0,h.Q)(o.weaponTypeKey),d=e.createWeapon(s),e.setWeaponLocation(d,r);case 12:t.push("/character/".concat(r));case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e]);return n}},50920:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(93433),a=n(4942),i=n(1413),o=n(72791),s=n(3997),c=n(60393);function u(e){var t=(0,o.useContext)(s.t).database;return(0,o.useCallback)((function(n){if(e)if("type"in n)switch(n.type){case"weapon":t.setWeaponLocation(n.id,e);break;case"enemyOverride":var o=t._getChar(e),s=o.enemyOverride,u=n.statKey,l=n.value;if(s[u]===l)break;t.updateChar((0,i.Z)((0,i.Z)({},o),{},{enemyOverride:(0,i.Z)((0,i.Z)({},s),{},(0,a.Z)({},u,l))}));break;case"editStats":var f=t._getChar(e),d=n.statKey,h=n.value,p=(0,c.I8)(f.bonusStats);if(p[d]===h)break;h?p[d]=h:delete p[d],t.updateChar((0,i.Z)((0,i.Z)({},f),{},{bonusStats:p}));break;case"resetStats":var v=t._getChar(e),x=n.statKey,g=v.bonusStats;delete g[x],t.updateChar((0,i.Z)((0,i.Z)({},v),{},{bonusStats:g}));break;case"team":var m=t._getChar(e),y=m.team,Z=n.index,k=n.charKey,j=y[Z];if(y[Z]=k,j){var w=t._getChar(j);w&&t.updateChar((0,i.Z)((0,i.Z)({},w),{},{team:["","",""]}))}if(k){var b=t._getChar(k);b&&b.team.forEach((function(e){if(e){var n=t._getChar(e);n&&t.updateChar((0,i.Z)((0,i.Z)({},n),{},{team:n.team.map((function(e){return e===k?"":e}))}))}}))}y.forEach((function(n,a){if(n){var o=t._getChar(n);o&&t.updateChar((0,i.Z)((0,i.Z)({},o),{},{team:[e].concat((0,r.Z)(y)).filter((function(e,t){return t!==a+1}))}))}})),t.updateChar((0,i.Z)((0,i.Z)({},m),{},{team:y}))}else t.updateChar((0,i.Z)((0,i.Z)({},t._getChar(e)),n))}),[e,t])}},47639:function(e,t,n){n.d(t,{Z:function(){return j},V:function(){return w}});var r=n(93433),a=n(4942),i=n(15861),o=n(1413),s=n(45987),c=n(29439),u=n(87757),l=n.n(u),f=n(72791),d=n(31148),h=n(947),p=n(3997),v=n(26138),x=n(87234),g=n(60393),m=n(66218),y=n(68544),Z=n(11741),k=["data"];function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,f.useContext)(p.t),r=n.database,a=(0,y.Z)(),i=(0,c.Z)(a,2),u=i[0],l=i[1],d=(0,f.useState)(void 0),h=(0,c.Z)(d,2),v=h[0],m=h[1];(0,f.useEffect)((function(){w(r,e,t).then((function(e){return m(e)}))}),[u,e,r,t]);var Z=null!==v&&void 0!==v?v:{},j=Z.team,b=void 0===j?[]:j,C=Z.teamData,S=Z.teamBundle;(0,f.useEffect)((function(){return e?r.followChar(e,l):void 0}),[e,l,r]);var _=(0,c.Z)(b,4),D=_[0],K=_[1],P=_[2],E=_[3];(0,f.useEffect)((function(){return D?r.followChar(D,l):void 0}),[D,l,r]),(0,f.useEffect)((function(){return K?r.followChar(K,l):void 0}),[K,l,r]),(0,f.useEffect)((function(){return P?r.followChar(P,l):void 0}),[P,l,r]),(0,f.useEffect)((function(){return E?r.followChar(E,l):void 0}),[E,l,r]);var I=(0,f.useMemo)((function(){return C&&(0,x.Qo)(C,e)}),[C,e]),R=(0,f.useMemo)((function(){if(I&&S)return(0,g.xh)(I,(function(e,t){var n=S[t],r=(n.data,(0,s.Z)(n,k));return(0,o.Z)((0,o.Z)({},e),r)}))}),[I,S]);return R}function w(e,t){return b.apply(this,arguments)}function b(){return b=(0,i.Z)(l().mark((function e(t,n){var r,o,s,c,u,f,d=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:0,o=d.length>3?d[3]:void 0,n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,C(t,n,r,o);case 6:if(s=e.sent){e.next=9;break}return e.abrupt("return");case 9:return c=[n],u=(0,a.Z)({},n,s),f=(0,a.Z)({},n,s.data),e.next=14,Promise.all(s.character.team.map(function(){var e=(0,i.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,C(t,n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:c.push(n),u[n]=r,f[n]=r.data;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",{team:c,teamData:f,teamBundle:u});case 15:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function C(e,t){return S.apply(this,arguments)}function S(){return S=(0,i.Z)(l().mark((function e(t,n){var a,i,o,s,c,u,f,p,g,y=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y.length>2&&void 0!==y[2]?y[2]:0,i=y.length>3?y[3]:void 0,n){e.next=4;break}return e.abrupt("return");case 4:if(o=t._getChar(n)){e.next=7;break}return e.abrupt("return");case 7:if(s=t._getWeapon(o.equippedWeapon)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,h.ZP.get(n);case 12:return c=e.sent,e.next=15,m.ZP.get(s.key);case 15:return u=e.sent,e.next=18,d.y.getAllData;case 18:if(f=e.sent,c&&u&&f){e.next=21;break}return e.abrupt("return");case 21:return p=(null!==i&&void 0!==i?i:Object.values(o.equippedArtifacts).map((function(e){return t._getArt(e)}))).filter((function(e){return e})),g=[].concat((0,r.Z)(p.map((function(e){return(0,x.n3)(e,a)}))),[(0,x.vn)(o),c.getData(o.elementKey),(0,x.v0)(s),u.data,f,v.y0,Z.Y]),e.abrupt("return",{character:o,weapon:s,characterSheet:c,weaponSheet:u,data:g});case 24:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}}}]);
//# sourceMappingURL=831.0f092ce3.chunk.js.map