{"version":3,"file":"static/js/460.6015b607.chunk.js","mappings":"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","sources":["Components/Weapon/WeaponSelectionModal.tsx","Stat.tsx","Data/Characters/SheetUtil.tsx","Data/SheetUtil.tsx","Components/FormulaCalcCard.tsx","PageCharacter/CharacterDisplay/CharacterArtifactPane.tsx","Data/Resonance.tsx","PageCharacter/CharacterDisplay/CharacterTeamBuffsPane.tsx","PageCharacter/CharacterDisplay/CharacterOverviewPane.tsx","PageCharacter/CharacterDisplay/CharacterTalentPane.tsx","PageCharacter/CharacterDisplayCard.tsx","Components/Character/CharacterDropdownButton_WR.tsx","PageWeapon/WeaponCard.tsx","PageWeapon/WeaponDisplayCard.tsx","ReactHooks/useWeapon.tsx"],"sourcesContent":["import { Box, CardActionArea, CardContent, Divider, Grid, Typography } from \"@mui/material\"\r\nimport { useEffect, useState } from \"react\"\r\nimport Assets from \"../../Assets/Assets\"\r\nimport usePromise from \"../../ReactHooks/usePromise\"\r\nimport { allWeaponKeys, WeaponKey, WeaponTypeKey } from \"../../Types/consts\"\r\nimport WeaponSheet from \"../../Data/Weapons/WeaponSheet\"\r\nimport CardDark from \"../Card/CardDark\"\r\nimport CardLight from \"../Card/CardLight\"\r\nimport CloseButton from \"../CloseButton\"\r\nimport ImgIcon from \"../Image/ImgIcon\"\r\nimport ModalWrapper from \"../ModalWrapper\"\r\nimport { Stars } from \"../StarDisplay\"\r\nimport WeaponToggle from \"../ToggleButton/WeaponToggle\"\r\n\r\ntype WeaponSelectionModalProps = {\r\n  show: boolean,\r\n  onHide: () => void,\r\n  onSelect: (wKey: WeaponKey) => void,\r\n  filter?: (sheet: WeaponSheet) => boolean,\r\n  weaponFilter?: WeaponTypeKey,\r\n}\r\n\r\nexport default function WeaponSelectionModal({ show, onHide, onSelect, filter = () => true, weaponFilter: propWeaponFilter }: WeaponSelectionModalProps) {\r\n  const weaponSheets = usePromise(WeaponSheet.getAll, [])\r\n  const [weaponFilter, setWeaponfilter] = useState<WeaponTypeKey | \"\">(propWeaponFilter ?? \"\")\r\n\r\n  useEffect(() => propWeaponFilter && setWeaponfilter(propWeaponFilter), [propWeaponFilter])\r\n\r\n  const weaponIdList = !weaponSheets ? [] : [...new Set(allWeaponKeys)].filter(wKey => filter(weaponSheets[wKey]))\r\n    .filter(wKey => {\r\n      if (weaponFilter && weaponFilter !== weaponSheets?.[wKey]?.weaponType) return false\r\n      return true\r\n    })\r\n    .sort((a, b) => (weaponSheets?.[b]?.rarity ?? 0) - (weaponSheets?.[a]?.rarity ?? 0))\r\n\r\n  if (!weaponSheets) return null\r\n\r\n  return <ModalWrapper open={show} onClose={onHide}>\r\n    <CardDark>\r\n      <CardContent sx={{ py: 1 }}>\r\n        <Grid container>\r\n          <Grid item flexGrow={1}>\r\n            <WeaponToggle value={weaponFilter} onChange={setWeaponfilter} disabled={!!propWeaponFilter} size=\"small\" />\r\n          </Grid >\r\n          <Grid item>\r\n            <CloseButton onClick={onHide} />\r\n          </Grid >\r\n        </Grid>\r\n      </CardContent>\r\n      <Divider />\r\n      <CardContent><Grid container spacing={1}>\r\n        {weaponIdList.map(weaponKey => {\r\n          const weaponSheet = weaponSheets[weaponKey]\r\n          return <Grid item key={weaponKey} lg={3} md={4}>\r\n            <CardLight sx={{ height: \"100%\" }} >\r\n              <CardActionArea onClick={() => { onHide(); onSelect(weaponKey) }} sx={{ display: \"flex\" }}>\r\n                <Box component=\"img\" src={weaponSheet.img} sx={{ width: 100, height: \"auto\" }} className={` grad-${weaponSheet.rarity}star`} />\r\n                <Box sx={{ flexGrow: 1, px: 1 }}>\r\n                  <Typography variant=\"subtitle1\">{weaponSheet.name}</Typography>\r\n                  <Typography><ImgIcon src={Assets.weaponTypes?.[weaponSheet.weaponType]} /> <Stars stars={weaponSheet.rarity} colored /></Typography>\r\n                </Box>\r\n              </CardActionArea>\r\n            </CardLight>\r\n          </Grid>\r\n        })}\r\n      </Grid></CardContent>\r\n      <Divider />\r\n      <CardContent sx={{ py: 1 }}>\r\n        <CloseButton large onClick={onHide} />\r\n      </CardContent>\r\n    </CardDark>\r\n  </ModalWrapper>\r\n}\r\n","/**\r\n * @deprecated\r\n */\r\nexport default class Stat {\r\n  //do not instantiate.\r\n  constructor() {\r\n    if (this instanceof Stat)\r\n      throw Error('A static class cannot be instantiated.');\r\n  }\r\n  static printStat = (statKey, stats, premod = false) => <></>\r\n}\r\n","import Assets from \"../../Assets/Assets\";\r\nimport { getTalentStatKey, getTalentStatKeyVariant } from \"../../PageBuild/Build\";\r\nimport ImgIcon from \"../../Components/Image/ImgIcon\";\r\nimport SqBadge from \"../../Components/SqBadge\";\r\nimport { Translate } from \"../../Components/Translate\";\r\nimport Stat from \"../../Stat\";\r\nimport { DocumentSection, TalentSheetElement, TalentSheetElementKey } from \"../../Types/character\";\r\nimport { ElementKey, WeaponTypeKey } from \"../../Types/consts\";\r\n/**\r\n * @deprecated\r\n */\r\nexport const st = (strKey: string) => <Translate ns=\"sheet\" key18={strKey} />\r\n/**\r\n * @deprecated\r\n */\r\nexport const sgt = (strKey: string) => <Translate ns=\"sheet_gen\" key18={strKey} />\r\n\r\n//this template only works if there is no variation in normal attacks.(no multi hits)\r\n/**\r\n * @deprecated\r\n */\r\nexport const normalDocSection = (tr, formula, data) => ({\r\n  text: tr(`auto.fields.normal`),\r\n  fields: data.normal.hitArr.map((percentArr, i) =>\r\n  ({\r\n    text: sgt(`normal.hit${i + 1}`),\r\n    formulaText: stats => <span>{percentArr[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"normal\", stats), stats)}</span>,\r\n    formula: formula.normal[i],\r\n    variant: stats => getTalentStatKeyVariant(\"normal\", stats),\r\n  }))\r\n})\r\n/**\r\n * @deprecated\r\n */\r\nexport const chargedDocSection = (tr, formula, data, stamina = 25): DocumentSection => ({\r\n  text: tr(`auto.fields.charged`),\r\n  fields: [{\r\n    text: sgt(`charged.dmg`),\r\n    formulaText: stats => <span>{data.charged.dmg[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"charged\", stats), stats)}</span>,\r\n    formula: formula.charged.dmg,\r\n    variant: stats => getTalentStatKeyVariant(\"charged\", stats),\r\n  }, {\r\n    text: sgt(\"charged.stamina\"),\r\n    value: stamina,\r\n  }]\r\n})\r\n/**\r\n * @deprecated\r\n */\r\nexport const chargedHitsDocSection = (tr, formula, data, stamina = 20): DocumentSection => ({\r\n  text: tr(`auto.fields.charged`),\r\n  fields: [...data.charged.hitArr.map((percentArr, i) =>\r\n  ({\r\n    text: sgt(`normal.hit${i + 1}`),\r\n    formulaText: stats => <span>{percentArr[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"charged\", stats), stats)}</span>,\r\n    formula: formula.charged[i],\r\n    variant: stats => getTalentStatKeyVariant(\"charged\", stats),\r\n  })), {\r\n    text: sgt(\"charged.stamina\"),\r\n    value: stamina\r\n  }]\r\n})\r\n/**\r\n * @deprecated\r\n */\r\nexport const plungeDocSection = (tr, formula, data): DocumentSection => ({\r\n  text: tr`auto.fields.plunging`,\r\n  fields: [{\r\n    text: sgt(`plunging.dmg`),\r\n    formulaText: stats => <span>{data.plunging.dmg[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"plunging\", stats), stats)}</span>,\r\n    formula: formula.plunging.dmg,\r\n    variant: stats => getTalentStatKeyVariant(\"plunging\", stats),\r\n  }, {\r\n    text: sgt(\"plunging.low\"),\r\n    formulaText: stats => <span>{data.plunging.low[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"plunging\", stats), stats)}</span>,\r\n    formula: formula.plunging.low,\r\n    variant: stats => getTalentStatKeyVariant(\"plunging\", stats),\r\n  }, {\r\n    text: sgt(\"plunging.high\"),\r\n    formulaText: stats => <span>{data.plunging.high[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"plunging\", stats), stats)}</span>,\r\n    formula: formula.plunging.high,\r\n    variant: stats => getTalentStatKeyVariant(\"plunging\", stats),\r\n  }]\r\n})\r\n/**\r\n * @deprecated\r\n */\r\nexport const claymoreChargedDocSection = (tr, formula, data): DocumentSection => ({\r\n  text: tr(\"auto.fields.charged\"),\r\n  fields: [{\r\n    text: sgt(\"charged.spinning\"),\r\n    formulaText: stats => <span>{data.charged.spinning[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"charged\", stats), stats)}</span>,\r\n    formula: formula.charged.spinning,\r\n    variant: stats => getTalentStatKeyVariant(\"charged\", stats),\r\n  }, {\r\n    text: sgt(\"charged.final\"),\r\n    formulaText: stats => <span>{data.charged.final[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"charged\", stats), stats)}</span>,\r\n    formula: formula.charged.final,\r\n    variant: stats => getTalentStatKeyVariant(\"charged\", stats),\r\n  }, {\r\n    text: sgt(\"charged.stamina\"),\r\n    value: data.charged.stam ?? 40,\r\n    unit: \"/s\"\r\n  }, {\r\n    text: sgt(\"maxDuration\"),\r\n    value: data.charged.maxDuration ?? 5,\r\n    unit: \"s\"\r\n  }]\r\n})\r\n/**\r\n * @deprecated\r\n */\r\nexport const bowChargedDocSection = (tr, formula, data, elementKey: ElementKey): DocumentSection => ({\r\n  text: tr(\"auto.fields.charged\"),\r\n  fields: [{\r\n    text: sgt(\"charged.aimed\"),\r\n    formulaText: stats => <span>{data.charged.hit[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"charged\", stats), stats)}</span>,\r\n    formula: formula.charged.hit,\r\n    variant: stats => getTalentStatKeyVariant(\"charged\", stats),\r\n  }, {\r\n    text: sgt(\"charged.fullyAimed\"),\r\n    formulaText: stats => <span>{data.charged.full[stats.tlvl.auto]}% {Stat.printStat(getTalentStatKey(\"charged\", stats, elementKey), stats)}</span>,\r\n    formula: formula.charged.full,\r\n    variant: stats => getTalentStatKeyVariant(\"charged\", stats, elementKey),\r\n  }]\r\n})\r\ntype BoostKey = \"autoBoost\" | \"skillBoost\" | \"burstBoost\"\r\n/**\r\n * @deprecated\r\n */\r\nexport const talentTemplate = (talentKey: TalentSheetElementKey, tr: (string) => Displayable, img: string, boostKey?: BoostKey, boostAmt: number = 3): TalentSheetElement => ({\r\n  name: tr(`${talentKey}.name`),\r\n  img,\r\n  sections: [{\r\n    text: tr(`${talentKey}.description`),\r\n    ...(boostKey ? {\r\n      conditional: {\r\n        key: boostKey,\r\n        canShow: stats => stats.constellation >= parseInt(talentKey.split(\"constellation\")[1] ?? 3),\r\n        maxStack: 0,\r\n        stats: {\r\n          [boostKey]: boostAmt\r\n        }\r\n      }\r\n    } : {})\r\n  }],\r\n})\r\n\r\nconst talentStrMap: Record<TalentSheetElementKey, string> = {\r\n  auto: \"Auto\",\r\n  skill: \"Skill\",\r\n  burst: \"Burst\",\r\n  passive: \"Passive\",\r\n  passive1: \"Ascension 1\",\r\n  passive2: \"Ascension 4\",\r\n  passive3: \"Passive\",\r\n  sprint: \"Sprint\",\r\n  constellation1: \"C1\",\r\n  constellation2: \"C2\",\r\n  constellation3: \"C3\",\r\n  constellation4: \"C4\",\r\n  constellation5: \"C5\",\r\n  constellation6: \"C6\"\r\n}\r\n/**\r\n * @deprecated\r\n */\r\nexport const conditionalHeader = (talentKey: TalentSheetElementKey, tr: (string) => Displayable, img: string) => {\r\n  return {\r\n    title: tr(`${talentKey}.name`),\r\n    icon: <ImgIcon size={2} sx={{ m: -1 }} src={img} />,\r\n    action: <SqBadge color=\"success\">{talentStrMap[talentKey]}</SqBadge>,\r\n  }\r\n}\r\n/**\r\n * @deprecated\r\n */\r\nexport const normalSrc = (weaponKey: WeaponTypeKey) => Assets.weaponTypes[weaponKey]\r\n","import { Translate } from \"../Components/Translate\"\r\nimport { ReadNode } from \"../Formula/type\"\r\nimport { customStringRead } from \"../Formula/utils\"\r\nimport { ArtifactSetKey, CharacterKey, WeaponKey } from \"../Types/consts\"\r\n\r\nexport const st = (strKey: string, values?: object) => <Translate ns=\"sheet\" key18={strKey} values={values} />\r\nexport const sgt = (strKey: string) => <Translate ns=\"sheet_gen\" key18={strKey} />\r\n\r\nexport const condReadNode = (path: string[]) => customStringRead([\"conditional\", ...path])\r\nexport function cond(key: CharacterKey | WeaponKey | ArtifactSetKey, subKey: string): [path: string[], node: ReadNode<string>] {\r\n  const path = [key, subKey]\r\n  const node = condReadNode(path)\r\n  return [path, node]\r\n}\r\n\r\ntype Translated = [tr: ((i18key: string) => Displayable), tran: ((i18key: string, values?: object) => Displayable)]\r\nexport function trans(typeKey: \"char\", key: CharacterKey): Translated\r\nexport function trans(typeKey: \"weapon\", key: WeaponKey): Translated\r\nexport function trans(typeKey: \"artifact\", key: ArtifactSetKey): Translated\r\nexport function trans(typeKey: \"char\" | \"weapon\" | \"artifact\", key: CharacterKey | WeaponKey | ArtifactSetKey): Translated {\r\n  return [\r\n    (strKey: string) => <Translate ns={`${typeKey}_${key}_gen`} key18={strKey} />,\r\n    (strKey: string, values?: object) => <Translate ns={`${typeKey}_${key}`} key18={strKey} values={values} />\r\n  ]\r\n}\r\n","import { ExpandMore } from \"@mui/icons-material\"\r\nimport { Accordion, AccordionDetails, AccordionSummary, Box, CardContent, CardHeader, Collapse, Divider, Grid, Skeleton, Typography } from \"@mui/material\"\r\nimport { Suspense, useCallback, useContext, useState } from \"react\"\r\nimport { DataContext } from \"../DataContext\"\r\nimport { getDisplayHeader, getDisplaySections } from \"../Formula/DisplayUtil\"\r\nimport { DisplaySub } from \"../Formula/type\"\r\nimport { NodeDisplay } from \"../Formula/uiData\"\r\nimport KeyMap, { valueString } from \"../KeyMap\"\r\nimport usePromise from \"../ReactHooks/usePromise\"\r\nimport CardDark from \"./Card/CardDark\"\r\nimport CardLight from \"./Card/CardLight\"\r\nimport ColorText from \"./ColoredText\"\r\nimport ExpandButton from \"./ExpandButton\"\r\nimport ImgIcon from \"./Image/ImgIcon\"\r\n\r\nexport default function FormulaCalcCard() {\r\n  const [expanded, setexpanded] = useState(false)\r\n  const toggle = useCallback(() => setexpanded(!expanded), [setexpanded, expanded])\r\n  return <CardLight>\r\n    <CardContent>\r\n      <Grid container>\r\n        <Grid item flexGrow={1}>\r\n          <Typography>Formulas {\"&\"} Calculations</Typography>\r\n          <Typography variant=\"caption\" color=\"text.secondary\">Expand to see every formula and all their calculations.</Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <ExpandButton\r\n            expand={expanded}\r\n            onClick={toggle}\r\n            aria-expanded={expanded}\r\n            aria-label=\"show more\"\r\n          >\r\n            <ExpandMore />\r\n          </ExpandButton>\r\n        </Grid>\r\n      </Grid>\r\n    </CardContent>\r\n    <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n      <CardContent sx={{ pt: 0 }}>\r\n        <CalculationDisplay />\r\n      </CardContent>\r\n    </Collapse>\r\n  </CardLight>\r\n}\r\n\r\nfunction CalculationDisplay() {\r\n  const { data } = useContext(DataContext)\r\n  const sections = getDisplaySections(data)\r\n  return <Suspense fallback={<Skeleton variant=\"rectangular\" width=\"100%\" height={1000} />} >\r\n    <Box sx={{ mr: -1, mb: -1 }}>\r\n      {sections.map(([key, Nodes]) =>\r\n        <FormulaCalc key={key} displayNs={Nodes} sectionKey={key} />)}\r\n    </Box>\r\n  </Suspense>\r\n}\r\nfunction FormulaCalc({ sectionKey, displayNs }: { displayNs: DisplaySub<NodeDisplay>, sectionKey: string }) {\r\n  const { data } = useContext(DataContext)\r\n  const header = usePromise(getDisplayHeader(data, sectionKey), [data, sectionKey])\r\n  if (!header) return null\r\n  const { title, icon, action } = header\r\n  return <CardDark sx={{ mb: 1 }}>\r\n    <CardHeader avatar={icon && <ImgIcon size={2} sx={{ m: -1 }} src={icon} />} title={title} action={action} titleTypographyProps={{ variant: \"subtitle1\" }} />\r\n    <Divider />\r\n    <CardContent>\r\n      {Object.entries(displayNs).map(([key, node]) =>\r\n        !node.isEmpty && <Accordion sx={{ bgcolor: \"contentLight.main\" }} key={key}>\r\n          <AccordionSummary expandIcon={<ExpandMore />}>\r\n            <Typography><ColorText color={node.variant}>{KeyMap.get(node.key ?? \"\")}</ColorText> <strong>{valueString(node.value, node.unit)}</strong></Typography>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            {node.formulas.map((subform, i) => <Typography key={i}>{subform}</Typography>)}\r\n          </AccordionDetails>\r\n        </Accordion>)}\r\n    </CardContent>\r\n  </CardDark>\r\n}\r\n","import { Button, Card, CardContent, CardHeader, Divider, Grid, Typography } from '@mui/material';\r\nimport { useCallback, useContext, useEffect, useMemo } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport ArtifactCard from '../../PageArtifact/ArtifactCard';\r\nimport { ArtifactSheet } from '../../Data/Artifacts/ArtifactSheet';\r\nimport SetEffectDisplay from '../../Components/Artifact/SetEffectDisplay';\r\nimport CardLight from '../../Components/Card/CardLight';\r\nimport ImgIcon from '../../Components/Image/ImgIcon';\r\nimport { DatabaseContext } from '../../Database/Database';\r\nimport { DataContext } from '../../DataContext';\r\nimport { uiInput as input } from '../../Formula';\r\nimport useForceUpdate from '../../ReactHooks/useForceUpdate';\r\nimport usePromise from '../../ReactHooks/usePromise';\r\nimport { allSlotKeys, SlotKey } from '../../Types/consts';\r\nimport { objectKeyMap } from '../../Util/Util';\r\nimport StatDisplayComponent from '../../Components/Character/StatDisplayComponent';\r\nimport { ArtifactDisplayLocationState } from '../../Types/LocationState';\r\n\r\nfunction CharacterArtifactPane({ newBuild = false }: { newBuild?: boolean }) {\r\n  const { data, character, mainStatAssumptionLevel } = useContext(DataContext)\r\n\r\n  const { database } = useContext(DatabaseContext)\r\n  const history = useHistory()\r\n  const edit = useCallback(\r\n    artid => history.push({\r\n      pathname: \"/artifact\",\r\n      state: {\r\n        artToEditId: artid\r\n      } as ArtifactDisplayLocationState\r\n    } as any), [history])\r\n  const artifactSheets = usePromise(ArtifactSheet.getAll, [])\r\n\r\n  // TODO: We can also listen only to equipped artifacts\r\n  const [, updateArt] = useForceUpdate()\r\n  useEffect(() => database.followAnyArt(updateArt))\r\n\r\n  const equipArts = useCallback(() => {\r\n    if (!window.confirm(\"Do you want to equip this artifact build to this character?\")) return\r\n    const newBuild = Object.fromEntries(allSlotKeys.map(s => [s, data.get(input.art[s].id).value])) as Record<SlotKey, string>\r\n    database.equipArtifacts(character.key, newBuild)\r\n  }, [character, data, database])\r\n\r\n  const unequipArts = useCallback(() => {\r\n    if (!character) return\r\n    if (!window.confirm(\"Do you want to move all currently equipped artifacts to inventory?\")) return\r\n    database.equipArtifacts(character.key, objectKeyMap(allSlotKeys, _ => \"\"))\r\n  }, [character, database])\r\n  const artIds = allSlotKeys.map(slotKey => data.get(input.art[slotKey].id).value)\r\n  const setEffects = useMemo(() => artifactSheets && ArtifactSheet.setEffects(artifactSheets, data), [artifactSheets, data])\r\n  return <>\r\n    <CardLight sx={{ mb: 1 }}>\r\n      <CardContent>\r\n        <StatDisplayComponent />\r\n      </CardContent>\r\n      <Divider />\r\n      <CardContent sx={{ py: 1 }}>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            {newBuild ? <Button onClick={equipArts} className=\"mr-2\">Equip artifacts</Button> : <Button color=\"error\" onClick={unequipArts}>Unequip all artifacts</Button>}\r\n          </Grid>\r\n          <Grid item flexGrow={1}></Grid>\r\n          <Grid item>{!!mainStatAssumptionLevel && <Card sx={{ p: 1, bgcolor: t => t.palette.warning.dark }}><Typography><strong>Assume Main Stats are Level {mainStatAssumptionLevel}</strong></Typography></Card>}</Grid>\r\n        </Grid>\r\n      </CardContent>\r\n    </CardLight>\r\n    <Grid container spacing={1}>\r\n      <Grid item xs={12} sm={6} md={4} display=\"flex\" flexDirection=\"column\" gap={1}>\r\n        {artifactSheets && setEffects && Object.entries(setEffects).map(([setKey, setNumKeyArr]) =>\r\n          <CardLight key={setKey} sx={{ flexGrow: 1, }} >\r\n            <CardHeader avatar={<ImgIcon size={2} sx={{ m: -1 }} src={artifactSheets[setKey].defIconSrc} />} title={artifactSheets[setKey].name} titleTypographyProps={{ variant: \"subtitle1\" }} />\r\n            <Divider />\r\n            <CardContent >\r\n              <Grid container spacing={1} flexDirection=\"column\" height=\"100%\" >\r\n                <Grid item display=\"flex\" flexDirection=\"column\" gap={1}>\r\n                  {setNumKeyArr.map(setNumKey => <SetEffectDisplay key={setKey + setNumKey} setKey={setKey} setNumKey={setNumKey} />)}\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n          </CardLight>\r\n        )}\r\n      </Grid>\r\n      {artIds.map(id => !!id && <Grid item xs={6} md={4} key={id} >\r\n        <ArtifactCard artifactId={id} mainStatAssumptionLevel={mainStatAssumptionLevel} onEdit={edit} />\r\n      </Grid>)}\r\n    </Grid>\r\n  </>\r\n}\r\nexport default CharacterArtifactPane\r\n","import StatIcon from \"../Components/StatIcon\";\r\nimport { Translate } from \"../Components/Translate\";\r\nimport { tally } from \"../Formula\";\r\nimport { Data } from \"../Formula/type\";\r\nimport { UIData } from \"../Formula/uiData\";\r\nimport { equal, greaterEq, min, percent, sum } from \"../Formula/utils\";\r\nimport { allElements, allElementsWithPhy } from \"../Types/consts\";\r\nimport { DocumentSection } from \"../Types/sheet\";\r\nimport { objectKeyValueMap } from \"../Util/Util\";\r\nimport { condReadNode, sgt, st } from \"./SheetUtil\";\r\nconst tr = (strKey: string) => <Translate ns=\"resonance_gen\" key18={strKey} />\r\nconst trm = (strKey: string) => <Translate ns=\"resonance\" key18={strKey} />\r\n\r\ntype IResonance = {\r\n  name: Displayable,\r\n  icon: Displayable,\r\n  canShow: (data: UIData) => boolean\r\n  sections: DocumentSection[]\r\n}\r\n\r\n// TODO: need to create data object of all the resonance, and hook it up\r\n\r\n// Protective Canopy\r\nconst pcNodes = objectKeyValueMap(allElementsWithPhy, e => [`${e}_res_`,\r\ngreaterEq(4, sum(...allElementsWithPhy.map(i => min(1, tally[i]))), percent(0.15))])\r\n\r\nconst protectiveCanopy: IResonance = {\r\n  name: tr(\"ProtectiveCanopy.name\"),\r\n  icon: <span>{StatIcon.anemo} {StatIcon.geo} {StatIcon.pyro} {StatIcon.hydro} {StatIcon.cryo} {StatIcon.electro} x4</span>,\r\n  canShow: (data: UIData) => allElements.filter(e => data.get(tally[e]).value >= 1).length === 4,\r\n  sections: [{\r\n    teamBuff: true,\r\n    text: tr(\"ProtectiveCanopy.desc\"),\r\n    fields: Object.values(pcNodes).map(node => ({ node }))\r\n  }]\r\n}\r\n\r\n// Fervent Flames\r\nconst ffNode = greaterEq(2, tally.pyro, percent(0.25))\r\nconst ferventFlames: IResonance = {\r\n  name: tr(\"FerventFlames.name\"),\r\n  icon: <span>{StatIcon.pyro} {StatIcon.pyro}</span>,\r\n  canShow: (data: UIData) => data.get(tally.pyro).value >= 2,\r\n  sections: [{\r\n    teamBuff: true,\r\n    text: tr(\"FerventFlames.desc\"),\r\n    fields: [{\r\n      node: ffNode\r\n    }, {\r\n      text: st(\"affectDuration.cryo\"),\r\n      value: -40,\r\n      unit: \"%\"\r\n    }]\r\n  }]\r\n}\r\n\r\n// Soothing Waters\r\nconst swNode = greaterEq(2, tally.hydro, percent(0.25))\r\nconst soothingWaters: IResonance = {\r\n  name: tr(\"SoothingWater.name\"),\r\n  icon: <span>{StatIcon.hydro} {StatIcon.hydro}</span>,\r\n  canShow: (data: UIData) => data.get(tally.hydro).value >= 2,\r\n  sections: [{\r\n    teamBuff: true,\r\n    text: tr(\"SoothingWater.desc\"),\r\n    fields: [{\r\n      node: swNode\r\n    }, {\r\n      text: st(\"affectDuration.pyro\"),\r\n      value: -40,\r\n      unit: \"%\"\r\n    }]\r\n  }]\r\n}\r\n\r\n//ShatteringIce\r\nconst condSIPath = [\"resonance\", \"ShatteringIce\"]\r\nconst condSI = condReadNode(condSIPath)\r\nconst siNode = greaterEq(2, tally.cryo, equal(condSI, \"on\", percent(0.15)))\r\nconst shatteringIce: IResonance = {\r\n  name: tr(\"ShatteringIce.name\"),\r\n  icon: <span>{StatIcon.cryo} {StatIcon.cryo}</span>,\r\n  canShow: (data: UIData) => data.get(tally.cryo).value >= 2,\r\n  sections: [{\r\n    teamBuff: true,\r\n    text: tr(\"ShatteringIce.desc\"),\r\n    fields: [{\r\n      text: st(\"affectDuration.electro\"),\r\n      value: -40,\r\n      unit: \"%\"\r\n    }],\r\n    conditional: {\r\n      path: condSIPath,\r\n      value: condSI,\r\n      name: trm(\"ShatteringIce.cond\"),\r\n      states: {\r\n        on: {\r\n          fields: [{\r\n            node: siNode\r\n          }]\r\n        }\r\n      }\r\n    }\r\n  }]\r\n}\r\n\r\n// High Voltage\r\nconst highVoltage: IResonance = {\r\n  name: tr(\"HighVoltage.name\"),\r\n  icon: <span>{StatIcon.electro} {StatIcon.electro}</span>,\r\n  canShow: (data: UIData) => data.get(tally.electro).value >= 2,\r\n  sections: [{\r\n    teamBuff: true,\r\n    text: tr(\"HighVoltage.desc\"),\r\n    fields: [{\r\n      text: st(\"affectDuration.hydro\"),\r\n      value: -40,\r\n      unit: \"%\"\r\n    }]\r\n  }]\r\n}\r\n\r\n// Impetuous Winds\r\nconst swNodeStam = greaterEq(2, tally.anemo, percent(-0.15))\r\nconst swNodeMove = greaterEq(2, tally.anemo, percent(0.1))\r\nconst swNodeCD = greaterEq(2, tally.anemo, percent(-0.05))\r\nconst impetuousWinds: IResonance = {\r\n  name: tr(\"ImpetuousWinds.name\"),\r\n  icon: <span>{StatIcon.hydro} {StatIcon.hydro}</span>,\r\n  canShow: (data: UIData) => data.get(tally.hydro).value >= 2,\r\n  sections: [{\r\n    teamBuff: true,\r\n    text: tr(\"ImpetuousWinds.desc\"),\r\n    fields: [{\r\n      node: swNodeStam\r\n    }, {\r\n      node: swNodeMove\r\n    }, {\r\n      node: swNodeCD\r\n    }]\r\n  }]\r\n}\r\n\r\n// Enduring Rock\r\nconst condERPath = [\"resonance\", \"EnduringRock\"]\r\nconst condER = condReadNode(condSIPath)\r\nconst erNodeshield_ = greaterEq(2, tally.anemo, percent(0.15))\r\nconst erNodeDMG_ = greaterEq(2, tally.anemo, percent(0.15))\r\nconst erNodeRes_ = greaterEq(2, tally.anemo, percent(0.2))\r\nconst enduringRock: IResonance = {\r\n  name: tr(\"EnduringRock.name\"),\r\n  icon: <span>{StatIcon.geo} {StatIcon.geo}</span>,\r\n  canShow: (data: UIData) => data.get(tally.geo).value >= 2,\r\n  sections: [{\r\n    teamBuff: true,\r\n    text: tr(\"EnduringRock.desc\"),\r\n    fields: [{\r\n      node: erNodeshield_\r\n    }],\r\n    conditional: {\r\n      path: condERPath,\r\n      value: condER,\r\n      name: st(\"protectedByShield\"),\r\n      states: {\r\n        on: {\r\n          fields: [{\r\n            node: erNodeDMG_\r\n          }, {\r\n            node: erNodeRes_\r\n          }, {\r\n            text: sgt(\"duration\"),\r\n            value: 15,\r\n            unit: \"s\"\r\n          }]\r\n        }\r\n      }\r\n    }\r\n  }]\r\n}\r\n\r\nexport const resonanceSheets: IResonance[] = [\r\n  protectiveCanopy,\r\n  ferventFlames,\r\n  soothingWaters,\r\n  shatteringIce,\r\n  highVoltage,\r\n  impetuousWinds,\r\n  enduringRock,\r\n]\r\n\r\nexport const resonanceData: Data = {\r\n  premod: {\r\n    ...pcNodes,\r\n    atk_: ffNode,\r\n    incHeal_: swNode,\r\n    staminaDec_: swNodeStam,\r\n    moveSPD_: swNodeMove,\r\n    cdRed_: swNodeCD,\r\n    shield_: erNodeshield_,\r\n    all_dmg_: erNodeDMG_,\r\n    geo_enemyRes_: erNodeRes_,\r\n  },\r\n  total: {\r\n    critRate_: siNode\r\n  }\r\n}\r\n","import { PersonAdd } from \"@mui/icons-material\";\r\nimport { CardContent, CardHeader, Divider, Grid } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport React, { useContext, useMemo } from 'react';\r\nimport CardDark from \"../../Components/Card/CardDark\";\r\nimport CardLight from \"../../Components/Card/CardLight\";\r\nimport CharacterDropdownButton from \"../../Components/Character/CharacterDropdownButton\";\r\nimport DocumentDisplay from \"../../Components/DocumentDisplay\";\r\nimport { NodeFieldDisplay } from \"../../Components/FieldDisplay\";\r\nimport { ArtifactSheet } from \"../../Data/Artifacts/ArtifactSheet\";\r\nimport { resonanceSheets } from \"../../Data/Resonance\";\r\nimport { DataContext, dataContextObj } from \"../../DataContext\";\r\nimport { uiInput as input } from \"../../Formula\";\r\nimport { NodeDisplay } from \"../../Formula/uiData\";\r\nimport useCharacterReducer from \"../../ReactHooks/useCharacterReducer\";\r\nimport useCharSelectionCallback from \"../../ReactHooks/useCharSelectionCallback\";\r\nimport usePromise from \"../../ReactHooks/usePromise\";\r\nimport { ElementKey } from \"../../Types/consts\";\r\nimport { objPathValue, range } from \"../../Util/Util\";\r\nimport CharacterCard from \"../CharacterCard\";\r\n\r\nexport default function CharacterTeamBuffsPane() {\r\n  return <Box display=\"flex\" flexDirection=\"column\" gap={1} alignItems=\"stretch\">\r\n    <TeamBuffDisplay />\r\n    {/* <ResonanceDisplay /> */}\r\n    <Grid container spacing={1}>\r\n      {range(0, 2).map(i => <Grid item xs={12} md={6} lg={4} key={i}>\r\n        <TeammateDisplay index={i} />\r\n      </Grid>)}\r\n    </Grid>\r\n  </Box>\r\n}\r\nconst statBreakpoint = {\r\n  xs: 12, sm: 6, md: 6, lg: 4,\r\n} as const\r\nexport function TeamBuffDisplay() {\r\n  const { data, oldData } = useContext(DataContext)\r\n  const teamBuffs = data.getTeamBuff()\r\n  const nodes: Array<[string[], NodeDisplay<number>]> = []\r\n  Object.entries(teamBuffs.total ?? {}).forEach(([key, node]) =>\r\n    !node.isEmpty && node.value !== 0 && nodes.push([[\"total\", key], node]))\r\n  Object.entries(teamBuffs.premod ?? {}).forEach(([key, node]) =>\r\n    !node.isEmpty && node.value !== 0 && nodes.push([[\"premod\", key], node]))\r\n  Object.entries(teamBuffs.enemy ?? {}).forEach(([key, node]) =>\r\n    !node.isEmpty && node.value !== 0 && nodes.push([[\"enemy\", key], node]))\r\n  if (!nodes.length) return null\r\n  return <CardLight>\r\n    <CardContent>\r\n      Team Buffs\r\n    </CardContent>\r\n    <Divider />\r\n    <CardContent>\r\n      <Grid container columnSpacing={2} rowSpacing={1}>\r\n        {nodes.map(([path, n], i) => n && <Grid item {...statBreakpoint} key={n.key} >\r\n          <NodeFieldDisplay node={n} oldValue={objPathValue(oldData?.getTeamBuff(), path)?.value} />\r\n        </Grid>)}\r\n      </Grid>\r\n    </CardContent>\r\n  </CardLight>\r\n}\r\nfunction ResonanceDisplay() {\r\n  const { data } = useContext(DataContext)\r\n  return <CardLight>\r\n    <CardContent>\r\n      Team Resonance\r\n    </CardContent>\r\n    <Divider />\r\n    <CardContent>\r\n      <Grid container spacing={1}>\r\n        {resonanceSheets.map((res, i) =>\r\n          <Grid item key={i} xs={12} md={6} lg={4} >\r\n            <CardDark sx={{ opacity: res.canShow(data) ? 1 : 0.5, height: \"100%\" }}>\r\n              <CardHeader title={res.name} action={res.icon} titleTypographyProps={{ variant: \"subtitle2\" }} />\r\n              {res.canShow(data) && <CardContent>\r\n                <DocumentDisplay sections={res.sections} teamBuffOnly={true} />\r\n              </CardContent>}\r\n            </CardDark>\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n    </CardContent>\r\n  </CardLight>\r\n}\r\nfunction TeammateDisplay({ index }: { index: number }) {\r\n  const dataContext = useContext(DataContext)\r\n  const { character: active, teamData, characterDispatch: activeCharacterDispatch } = dataContext\r\n  const activeCharacterKey = active.key\r\n  const characterKey = active.team[index]\r\n  const characterDispatch = useCharacterReducer(characterKey)\r\n  // TODO: this UIData should be fed from the main CharacterDisplayCard for teams.\r\n  const onClickHandler = useCharSelectionCallback()\r\n\r\n  const dataBundle = teamData[characterKey]\r\n  const teamMateDataContext: dataContextObj | undefined = dataBundle && characterDispatch && {\r\n    character: dataBundle.character,\r\n    characterSheet: dataBundle.characterSheet,\r\n    data: dataBundle.target,\r\n    teamData: teamData,\r\n    mainStatAssumptionLevel: 0,\r\n    characterDispatch\r\n  }\r\n  return <CardLight>\r\n    <CardContent>\r\n      <CharacterDropdownButton fullWidth value={characterKey}\r\n        onChange={charKey => activeCharacterDispatch({ type: \"team\", index, charKey })}\r\n        filter={(_, ck) => ck !== activeCharacterKey && !active.team.includes(ck)} unSelectText={`Teammate ${index + 1}`} unSelectIcon={<PersonAdd />} />\r\n    </CardContent>\r\n    {teamMateDataContext && <DataContext.Provider value={teamMateDataContext}>\r\n      <CharacterCard characterKey={characterKey}\r\n        onClickHeader={onClickHandler}\r\n        artifactChildren={<CharArtifactCondDisplay />}\r\n        weaponChildren={<CharWeaponCondDisplay />}\r\n        characterChildren={<CharTalentCondDisplay />}\r\n      />\r\n    </DataContext.Provider>}\r\n  </CardLight>\r\n\r\n}\r\nfunction CharArtifactCondDisplay() {\r\n  const { data, } = useContext(DataContext)\r\n  const artifactSheets = usePromise(ArtifactSheet.getAll, [])\r\n  const sections = useMemo(() => artifactSheets &&\r\n    Object.entries(ArtifactSheet.setEffects(artifactSheets, data))\r\n      .flatMap(([setKey, setNums]) =>\r\n        setNums.flatMap(sn => artifactSheets[setKey]!.setEffectDocument(sn)!))\r\n    , [artifactSheets, data])\r\n  if (!sections) return null\r\n  return <DocumentDisplay sections={sections} teamBuffOnly={true} />\r\n}\r\nfunction CharWeaponCondDisplay() {\r\n  const { teamData, character: { key: charKey } } = useContext(DataContext)\r\n  const weaponSheet = teamData[charKey]!.weaponSheet\r\n  return <DocumentDisplay sections={weaponSheet.document} teamBuffOnly={true} />\r\n}\r\nfunction CharTalentCondDisplay() {\r\n  const { data, teamData, character: { key: charKey } } = useContext(DataContext)\r\n  const characterSheet = teamData[charKey]!.characterSheet\r\n  const talent = characterSheet.getTalent(data.get(input.charEle).value as ElementKey)!\r\n  const sections = Object.values(talent.sheets).flatMap(sts => sts.sections)\r\n  return <DocumentDisplay sections={sections} teamBuffOnly={true} />\r\n}\r\n","import { faEdit, faSave } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Badge, Box, Button, CardContent, CardMedia, Divider, Grid, Typography } from \"@mui/material\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport Assets from \"../../Assets/Assets\";\r\nimport CardLight from \"../../Components/Card/CardLight\";\r\nimport ColorText from \"../../Components/ColoredText\";\r\nimport { NodeFieldDisplay } from \"../../Components/FieldDisplay\";\r\nimport ImgIcon from \"../../Components/Image/ImgIcon\";\r\nimport { Stars } from \"../../Components/StarDisplay\";\r\nimport StatIcon from \"../../Components/StatIcon\";\r\nimport { DataContext } from \"../../DataContext\";\r\nimport { uiInput as input } from \"../../Formula\";\r\nimport { ReadNode } from \"../../Formula/type\";\r\nimport KeyMap, { valueString } from \"../../KeyMap\";\r\nimport useCharacterReducer from \"../../ReactHooks/useCharacterReducer\";\r\nimport { amplifyingReactions, transformativeReactions } from \"../../StatConstants\";\r\nimport { TalentSheetElementKey } from \"../../Types/character\";\r\nimport { allElementsWithPhy, ElementKey } from \"../../Types/consts\";\r\nimport WeaponDisplayCard from \"../../PageWeapon/WeaponDisplayCard\";\r\nimport CharacterSheet from \"../../Data/Characters/CharacterSheet\";\r\nimport StatInput from \"../StatInput\";\r\nimport { TeamBuffDisplay } from \"./CharacterTeamBuffsPane\";\r\nimport { range } from \"../../Util/Util\";\r\nexport default function CharacterOverviewPane() {\r\n  const { data, characterSheet, character, character: { key: characterKey } } = useContext(DataContext)\r\n  const characterDispatch = useCharacterReducer(characterKey)\r\n  const charEle = data.get(input.charEle).value as ElementKey\r\n  const weaponTypeKey = characterSheet.weaponTypeKey\r\n  const level = data.get(input.lvl).value\r\n  const ascension = data.get(input.asc).value\r\n  const constellation = data.get(input.constellation).value\r\n  const tlvl = {\r\n    auto: data.get(input.total.auto).value,\r\n    skill: data.get(input.total.skill).value,\r\n    burst: data.get(input.total.burst).value,\r\n  }\r\n  const tBoost = {\r\n    auto: data.get(input.bonus.auto).value,\r\n    skill: data.get(input.bonus.skill).value,\r\n    burst: data.get(input.bonus.burst).value,\r\n  }\r\n  return <Grid container spacing={1}>\r\n    <Grid item xs={12} md={3}  >\r\n      {/* Image card with star and name and level */}\r\n      <CardLight >\r\n        <CardMedia src={characterSheet.cardImg} component=\"img\" width=\"100%\" height=\"auto\" />\r\n        <CardContent>\r\n          <Typography variant=\"h4\" >{characterSheet.name} <ImgIcon src={Assets.weaponTypes?.[weaponTypeKey]} /> {StatIcon[charEle]} </Typography>\r\n          <Typography variant=\"h6\"><Stars stars={characterSheet.rarity} colored /></Typography>\r\n          <Typography variant=\"h5\">Lvl. {CharacterSheet.getLevelString(level, ascension)}</Typography>\r\n          <Grid container spacing={1} mt={1}>\r\n            {([\"auto\", \"skill\", \"burst\"] as TalentSheetElementKey[]).map(tKey =>\r\n              <Grid item xs={4} key={tKey}>\r\n                <Badge badgeContent={tlvl[tKey]} color={tBoost[tKey] ? \"info\" : \"secondary\"}\r\n                  overlap=\"circular\"\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'right',\r\n                  }}\r\n                  sx={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    \"& > .MuiBadge-badge\": {\r\n                      fontSize: \"1.25em\",\r\n                      padding: \".25em .4em\",\r\n                      borderRadius: \".5em\",\r\n                      lineHeight: 1,\r\n                      height: \"1.25em\"\r\n                    }\r\n                  }}>\r\n                  <Box component=\"img\" src={characterSheet.getTalentOfKey(tKey, charEle)?.img} width=\"100%\" height=\"auto\" />\r\n                </Badge>\r\n              </Grid>)}\r\n          </Grid>\r\n          <Typography sx={{ textAlign: \"center\", mt: 1 }} variant=\"h6\">{characterSheet.constellationName}</Typography>\r\n          <Grid container spacing={1}>\r\n            {range(1, 6).map(i =>\r\n              <Grid item xs={4} key={i}>\r\n                <Box component=\"img\" src={characterSheet.getTalentOfKey(`constellation${i}` as TalentSheetElementKey, charEle)?.img}\r\n                  sx={{\r\n                    cursor: \"pointer\",\r\n                    ...(constellation >= i ? {} : { filter: \"brightness(50%)\" })\r\n                  }}\r\n                  width=\"100%\" height=\"auto\"\r\n                  onClick={() => characterDispatch({ constellation: i === constellation ? i - 1 : i })} />\r\n              </Grid>)}\r\n          </Grid>\r\n        </CardContent>\r\n      </CardLight>\r\n    </Grid>\r\n    <Grid item xs={12} md={9} sx={{\r\n      \"> div:not(:last-child)\": { mb: 1 }\r\n    }} >\r\n      <WeaponDisplayCard weaponId={character.equippedWeapon} />\r\n      <MainStatsCards />\r\n    </Grid>\r\n  </Grid >\r\n}\r\nconst EDIT = \"Edit Stats\"\r\nconst EXIT = \"EXIT\"\r\n\r\nconst mainBaseKeys = [\"atk\", \"hp\", \"def\"] as const\r\nconst mainSubKeys = [\"eleMas\", \"critRate_\", \"critDMG_\", \"enerRech_\", \"heal_\"] as const\r\nconst mainReadNodes = [...mainBaseKeys, ...mainSubKeys].map(k => input.total[k])\r\nconst mainEditKeys = [\"atk_\", \"atk\", \"hp_\", \"hp\", \"def_\", \"def\", ...mainSubKeys] as const\r\n\r\nconst otherStatReadNodes = [\r\n  ...allElementsWithPhy.map(ele => input.total[`${ele}_dmg_`]),\r\n  ...allElementsWithPhy.map(ele => input.total[`${ele}_res_`]),\r\n  ...([\"stamina\", \"incHeal_\", \"shield_\", \"cdRed_\"] as const).map(x => input.total[x])\r\n]\r\nconst otherStatKeys = otherStatReadNodes.map(x => x.info!.key!)\r\n\r\nconst miscStatReadNodes = [\r\n  input.total.all_dmg_,\r\n  ...allElementsWithPhy.map(x => input.total[`${x}_enemyRes_`]),\r\n  input.total.normal_dmg_, input.total.normal_critRate_,\r\n  input.total.charged_dmg_, input.total.charged_critRate_,\r\n  input.total.plunging_dmg_, input.total.plunging_critRate_,\r\n  input.total.skill_dmg_, input.total.skill_critRate_,\r\n  input.total.burst_dmg_, input.total.burst_critRate_,\r\n  ...Object.keys(transformativeReactions).map(x => input.total[`${x}_dmg_`]),\r\n  ...Object.keys(amplifyingReactions).map(x => input.total[`${x}_dmg_`]),\r\n  ...([\"moveSPD_\", \"atkSPD_\", \"weakspotDMG_\"] as const).map(x => input.total[x]),\r\n  input.total.dmgRed_\r\n]\r\nconst miscStatkeys = miscStatReadNodes.map(x => x.info!.key!)\r\n\r\nconst statBreakpoint = {\r\n  xs: 12, sm: 6, md: 6, lg: 4,\r\n} as const\r\n\r\nfunction StatDisplayContent({ nodes, statBreakpoint, extra }: { nodes: ReadNode<number>[], statBreakpoint: object, extra?: Displayable }) {\r\n  const { data, oldData } = useContext(DataContext)\r\n  return <Grid container columnSpacing={{ xs: 2, lg: 3 }} rowSpacing={1}>\r\n    {nodes.map(rn => <Grid item key={rn.info?.key} {...statBreakpoint} >\r\n      {<NodeFieldDisplay node={data.get(rn)} oldValue={oldData?.get(rn)?.value} />}\r\n    </Grid>)}\r\n    {extra}\r\n  </Grid>\r\n}\r\n\r\nfunction MainStatsCards() {\r\n  const { data, character, character: { key: characterKey } } = useContext(DataContext)\r\n  const characterDispatch = useCharacterReducer(characterKey)\r\n  const specialNode = data.get(input.special)\r\n\r\n  return <>\r\n    <TeamBuffDisplay />\r\n    <StatDisplayCard\r\n      title=\"Main Stats\"\r\n      content={<StatDisplayContent statBreakpoint={statBreakpoint} nodes={mainReadNodes}\r\n        extra={specialNode && <Grid item {...statBreakpoint} display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\">\r\n          <span><b>Special:</b> <ColorText color={specialNode.variant}>{specialNode.key && StatIcon[specialNode.key]} {specialNode.key && KeyMap.get(specialNode.key)}</ColorText></span>\r\n          <span >{valueString(specialNode.value, specialNode.unit)}</span>\r\n        </Grid>}\r\n      />}\r\n      editContent={<Grid container columnSpacing={2} rowSpacing={1}>\r\n        {mainEditKeys.map(statKey => {\r\n          const statName = KeyMap.get(statKey)\r\n          return <Grid item xs={12} lg={6} key={statKey}>\r\n            <StatInput\r\n              name={<span>{StatIcon[statKey]} {statName}</span>}\r\n              placeholder={KeyMap.getStr(statKey)}\r\n              value={character.bonusStats[statKey] ?? 0}\r\n              percent={KeyMap.unit(statKey) === \"%\"}\r\n              onValueChange={value => characterDispatch({ type: \"editStats\", statKey, value })}\r\n            />\r\n          </Grid>\r\n        })}\r\n      </Grid>}\r\n    />\r\n    <StatDisplayCard\r\n      title=\"Other Stats\"\r\n      content={<StatDisplayContent statBreakpoint={statBreakpoint} nodes={otherStatReadNodes} />}\r\n      editContent={<Grid container columnSpacing={2} rowSpacing={1}>\r\n        {otherStatKeys.map(statKey => {\r\n          const statName = KeyMap.get(statKey)\r\n          return <Grid item xs={12} lg={6} key={statKey}>\r\n            <StatInput\r\n              name={<span>{StatIcon[statKey]} {statName}</span>}\r\n              placeholder={KeyMap.getStr(statKey)}\r\n              value={character.bonusStats[statKey] ?? 0}\r\n              percent={KeyMap.unit(statKey) === \"%\"}\r\n              defaultValue={undefined}\r\n              onValueChange={value => characterDispatch({ type: \"editStats\", statKey, value })}\r\n            />\r\n          </Grid>\r\n        })}\r\n      </Grid>}\r\n    />\r\n    <StatDisplayCard\r\n      title=\"Misc Stats\"\r\n      content={<StatDisplayContent statBreakpoint={{\r\n        xs: 12, sm: 6, md: 6,\r\n      }} nodes={miscStatReadNodes} />}\r\n      editContent={<Grid container columnSpacing={2} rowSpacing={1}>\r\n        {miscStatkeys.map(statKey => {\r\n          const statName = KeyMap.get(statKey)\r\n          return <Grid item xs={12} lg={6} key={statKey}>\r\n            <StatInput\r\n              name={<span>{StatIcon[statKey]} {statName}</span>}\r\n              placeholder={KeyMap.getStr(statKey)}\r\n              value={character.bonusStats[statKey] ?? 0}\r\n              percent={KeyMap.unit(statKey) === \"%\"}\r\n              onValueChange={value => characterDispatch({ type: \"editStats\", statKey, value })}\r\n            />\r\n          </Grid>\r\n        })}\r\n      </Grid>}\r\n    />\r\n  </>\r\n}\r\nfunction StatDisplayCard({ title, content, editContent }) {\r\n  const [edit, setedit] = useState(false)\r\n  return <CardLight>\r\n    <CardContent sx={{ py: 1 }}>\r\n      <Box display=\"flex\" justifyContent=\"space-between\">\r\n        <Typography variant=\"subtitle1\">{title}</Typography>\r\n        <Button size=\"small\" color={edit ? \"error\" : \"info\"} onClick={() => setedit(!edit)} >\r\n          <span><FontAwesomeIcon icon={edit ? faSave : faEdit} /> {edit ? EXIT : EDIT}</span>\r\n        </Button>\r\n      </Box>\r\n    </CardContent>\r\n    <Divider />\r\n    <CardContent>\r\n      {edit ? editContent : content}\r\n    </CardContent>\r\n  </CardLight>\r\n}\r\n","import { faQuestionCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Box, CardActionArea, CardContent, Divider, Grid, MenuItem, Typography } from \"@mui/material\";\r\nimport React, { useCallback, useContext, useState } from 'react';\r\nimport BootstrapTooltip from \"../../Components/BootstrapTooltip\";\r\nimport CardDark from \"../../Components/Card/CardDark\";\r\nimport CardLight from \"../../Components/Card/CardLight\";\r\nimport ColorText from \"../../Components/ColoredText\";\r\nimport ConditionalWrapper from \"../../Components/ConditionalWrapper\";\r\nimport DocumentDisplay from \"../../Components/DocumentDisplay\";\r\nimport DropdownButton from \"../../Components/DropdownMenu/DropdownButton\";\r\nimport StatIcon from \"../../Components/StatIcon\";\r\nimport useCharacterReducer from \"../../ReactHooks/useCharacterReducer\";\r\nimport { TalentSheetElementKey } from \"../../Types/character\";\r\nimport { DataContext } from '../../DataContext';\r\nimport { uiInput as input } from \"../../Formula\";\r\nimport { ElementKey } from \"../../Types/consts\";\r\nimport KeyMap, { valueString } from '../../KeyMap'\r\nimport { NodeDisplay } from '../../Formula/uiData'\r\nimport { NumNode } from \"../../Formula/type\";\r\nimport { range } from \"../../Util/Util\";\r\nexport default function CharacterTalentPane() {\r\n  const { data, character, characterSheet } = useContext(DataContext)\r\n  const characterDispatch = useCharacterReducer(character.key)\r\n  const skillBurstList = [[\"auto\", \"Normal/Charged Attack\"], [\"skill\", \"Elemental Skill\"], [\"burst\", \"Elemental Burst\"]] as [TalentSheetElementKey, string][]\r\n  const passivesList: [tKey: TalentSheetElementKey, tText: string, asc: number][] = [[\"passive1\", \"Unlocked at Ascension 1\", 1], [\"passive2\", \"Unlocked at Ascension 4\", 4], [\"passive3\", \"Unlocked by Default\", 0]]\r\n  const charEle = data.get(input.charEle).value as ElementKey | undefined\r\n  const ascension = data.get(input.asc).value\r\n  const constellation = data.get(input.constellation).value\r\n  return <>\r\n    <ReactionDisplay />\r\n    <Grid container spacing={1} sx={{ mb: 1 }}>\r\n      {/* auto, skill, burst */}\r\n      {skillBurstList.map(([tKey, tText]) =>\r\n        <Grid item key={tKey} xs={12} md={6} lg={4} >\r\n          <SkillDisplayCard\r\n            talentKey={tKey}\r\n            subtitle={tText}\r\n          />\r\n        </Grid>)}\r\n      {!!characterSheet.getTalentOfKey(\"sprint\", charEle) && <Grid item xs={12} md={6} lg={4} >\r\n        <SkillDisplayCard\r\n          talentKey=\"sprint\"\r\n          subtitle=\"Alternative Sprint\"\r\n        />\r\n      </Grid>}\r\n      {!!characterSheet.getTalentOfKey(\"passive\", charEle) && <Grid item xs={12} md={6} lg={4} >\r\n        <SkillDisplayCard\r\n          talentKey=\"passive\"\r\n          subtitle=\"Passive\"\r\n        />\r\n      </Grid>}\r\n    </Grid>\r\n    <Grid container spacing={1}>\r\n      {/* passives */}\r\n      {passivesList.map(([tKey, tText, asc]) => {\r\n        let enabled = ascension >= asc\r\n        if (!characterSheet.getTalentOfKey(tKey, charEle)) return null\r\n        return <Grid item key={tKey} style={{ opacity: enabled ? 1 : 0.5 }} xs={12} md={4} >\r\n          <SkillDisplayCard\r\n            talentKey={tKey}\r\n            subtitle={tText}\r\n          />\r\n        </Grid>\r\n      })}\r\n    </Grid>\r\n    <Typography variant=\"h6\" sx={{ textAlign: \"center\" }}>Constellation Lv. {constellation}</Typography>\r\n    <Grid container spacing={1}>\r\n      {/* constellations */}\r\n      {range(1, 6).map(i => {\r\n        let tKey = `constellation${i}` as TalentSheetElementKey\r\n        return <Grid item key={i} xs={12} md={4}\r\n          sx={{ opacity: constellation >= i ? 1 : 0.5 }}>\r\n          <SkillDisplayCard\r\n            talentKey={tKey}\r\n            subtitle={`Contellation Lv. ${i}`}\r\n            onClickTitle={() => characterDispatch({ constellation: i === constellation ? i - 1 : i })}\r\n          />\r\n        </Grid>\r\n      })}\r\n    </Grid>\r\n  </>\r\n}\r\nconst ReactionComponents = {\r\n  superconduct: SuperConductCard,\r\n  electrocharged: ElectroChargedCard,\r\n  overloaded: OverloadedCard,\r\n  pyroSwirl: SwirlCard,// TODO: Assumes if character can pyro swirl, it can swirl every element. This behaviour will need to be changed for characters that can only swirl specific elements.\r\n  shattered: ShatteredCard,\r\n  crystallize: CrystallizeCard,\r\n}\r\nfunction ReactionDisplay() {\r\n  const { data } = useContext(DataContext)\r\n  const reaction = data.getDisplay().reaction as { [key: string]: NodeDisplay }\r\n  return <CardLight sx={{ mb: 1 }}>\r\n    <CardContent>\r\n      <Grid container spacing={1}>\r\n        {Object.entries(reaction).map(([key, node]) => {\r\n          const Ele = ReactionComponents[key]\r\n          if (!Ele) return null\r\n          return <Grid item key={key}><Ele node={node} /></Grid>\r\n        })}\r\n      </Grid>\r\n    </CardContent>\r\n  </CardLight>\r\n}\r\nfunction SuperConductCard({ node }: { node: NodeDisplay }) {\r\n  return <CardDark><CardContent sx={{ p: 1 }}>\r\n    <Typography color=\"superconduct.main\">{KeyMap.get(node.key!)} {StatIcon.electro}+{StatIcon.cryo} <strong>{valueString(node.value, node.unit)}</strong></Typography>\r\n  </CardContent></CardDark>\r\n}\r\nfunction ElectroChargedCard({ node }: { node: NodeDisplay }) {\r\n  return <CardDark><CardContent sx={{ p: 1 }}>\r\n    <Typography color=\"electrocharged.main\">{KeyMap.get(node.key!)} {StatIcon.electro}+{StatIcon.hydro} <strong>{valueString(node.value, node.unit)}</strong></Typography>\r\n  </CardContent></CardDark>\r\n}\r\nfunction OverloadedCard({ node }: { node: NodeDisplay }) {\r\n  return <CardDark><CardContent sx={{ p: 1 }}>\r\n    <Typography color=\"overloaded.main\" >{KeyMap.get(node.key!)} {StatIcon.electro}+{StatIcon.pyro} <strong>{valueString(node.value, node.unit)}</strong></Typography>\r\n  </CardContent></CardDark>\r\n}\r\n\r\nconst swirlEleToDisplay = {\r\n  \"pyro\": <span><ColorText color=\"pyro\">{KeyMap.get(\"pyro_swirl_hit\")}</ColorText> {StatIcon.pyro} + {StatIcon.anemo}</span>,\r\n  \"electro\": <span><ColorText color=\"electro\">{KeyMap.get(\"electro_swirl_hit\")}</ColorText> {StatIcon.electro}+{StatIcon.anemo}</span>,\r\n  \"cryo\": <span><ColorText color=\"cryo\">{KeyMap.get(\"cryo_swirl_hit\")}</ColorText> {StatIcon.cryo} + {StatIcon.anemo}</span>,\r\n  \"hydro\": <span><ColorText color=\"hydro\">{KeyMap.get(\"hydro_swirl_hit\")}</ColorText> {StatIcon.hydro} + {StatIcon.anemo}</span>\r\n} as const\r\n\r\nfunction SwirlCard() {\r\n  const [ele, setele] = useState(Object.keys(swirlEleToDisplay)[0])\r\n  const { data } = useContext(DataContext)\r\n  const node = data.getDisplay().reaction![`${ele}Swirl`]!\r\n  return <CardDark sx={{ display: \"flex\" }}>\r\n    <DropdownButton size=\"small\" title={swirlEleToDisplay[ele]} color=\"success\">\r\n      {Object.entries(swirlEleToDisplay).map(([key, element]) => <MenuItem key={key} selected={ele === key} disabled={ele === key} onClick={() => setele(key)}>{element}</MenuItem>)}\r\n    </DropdownButton>\r\n    <Box sx={{ color: `${ele}.main`, p: 1 }}><strong>{valueString(node.value, node.unit)}</strong></Box>\r\n  </CardDark>\r\n}\r\n\r\nfunction ShatteredCard({ node }: { node: NodeDisplay }) {\r\n  const information = <BootstrapTooltip placement=\"top\" title={<Typography>Claymores, Plunging Attacks and <ColorText color=\"geo\">Geo DMG</ColorText></Typography>}>\r\n    <Box component=\"span\" sx={{ cursor: \"help\" }}><FontAwesomeIcon icon={faQuestionCircle} /></Box>\r\n  </BootstrapTooltip>\r\n\r\n  return <CardDark><CardContent sx={{ p: 1 }}>\r\n    <ColorText color=\"shattered\">{KeyMap.get(node.key!)} {StatIcon.hydro}+{StatIcon.cryo}+ <ColorText color=\"physical\"><small>Heavy Attack{information} </small></ColorText> <strong>{valueString(node.value, node.unit)}</strong></ColorText>\r\n  </CardContent></CardDark>\r\n}\r\n\r\nconst crystallizeEleToDisplay = {\r\n  \"geo\": <ColorText color=\"crystallize\">{KeyMap.get(\"crystallize\")} {StatIcon.electro}/{StatIcon.hydro}/{StatIcon.pyro}/{StatIcon.cryo}+{StatIcon.geo}</ColorText>,\r\n  \"pyro\": <span><ColorText color=\"pyro\">{KeyMap.get(\"pyro_crystallize\")}</ColorText> {StatIcon.pyro}+{StatIcon.geo}</span>,\r\n  \"electro\": <span><ColorText color=\"electro\">{KeyMap.get(\"electro_crystallize\")}</ColorText> {StatIcon.electro}+{StatIcon.geo}</span>,\r\n  \"cryo\": <span><ColorText color=\"cryo\">{KeyMap.get(\"cryo_crystallize\")}</ColorText> {StatIcon.cryo}+{StatIcon.geo}</span>,\r\n  \"hydro\": <span><ColorText color=\"hydro\">{KeyMap.get(\"hydro_crystallize\")}</ColorText> {StatIcon.hydro}+{StatIcon.geo}</span>\r\n} as const\r\n\r\nfunction CrystallizeCard() {\r\n  const [ele, setele] = useState(Object.keys(crystallizeEleToDisplay)[0])\r\n  const { data } = useContext(DataContext)\r\n  const node = ele === \"geo\" ? data.getDisplay().reaction!.crystallize! : data.getDisplay().reaction![`${ele}Crystallize`]!\r\n  return <CardDark sx={{ display: \"flex\" }}>\r\n    <DropdownButton size=\"small\" title={crystallizeEleToDisplay[ele]} color=\"success\">\r\n      {Object.entries(crystallizeEleToDisplay).map(([key, element]) => <MenuItem key={key} selected={ele === key} disabled={ele === key} onClick={() => setele(key)}>{element}</MenuItem>)}\r\n    </DropdownButton>\r\n    <Box sx={{ color: `${ele}.main`, p: 1 }}><strong>{valueString(node.value, node.unit)}</strong></Box>\r\n  </CardDark>\r\n}\r\n\r\nconst talentLimits = [1, 1, 2, 4, 6, 8, 10]\r\ntype SkillDisplayCardProps = {\r\n  talentKey: TalentSheetElementKey,\r\n  subtitle: string,\r\n  onClickTitle?: (any) => any\r\n}\r\nfunction SkillDisplayCard({ talentKey, subtitle, onClickTitle }: SkillDisplayCardProps) {\r\n  const { data, character: { talent }, characterSheet, characterDispatch } = useContext(DataContext)\r\n\r\n  const actionWrapeprFunc = useCallback(\r\n    children => <CardActionArea onClick={onClickTitle}>{children}</CardActionArea>,\r\n    [onClickTitle],\r\n  )\r\n\r\n  let header: Displayable | null = null\r\n\r\n  if (talentKey in talent) {\r\n    const levelBoost = data.get(input.bonus[talentKey] as NumNode).value\r\n    const level = data.get(input.total[talentKey]).value\r\n    const asc = data.get(input.asc).value\r\n    const setTalentLevel = (tKey, newTalentLevelKey) => {\r\n      talent[tKey] = newTalentLevelKey\r\n      characterDispatch({ talent })\r\n    }\r\n    header = <>\r\n      <CardContent sx={{ py: 1 }}>\r\n        <DropdownButton fullWidth title={`Talent Lv. ${level}`} color={levelBoost ? \"info\" : \"primary\"}>\r\n          {range(1, talentLimits[asc]).map(i =>\r\n            <MenuItem key={i} selected={talent[talentKey] === (i)} disabled={talent[talentKey] === (i)} onClick={() => setTalentLevel(talentKey, i)}>Talent Lv. {i + levelBoost}</MenuItem>)}\r\n        </DropdownButton>\r\n      </CardContent>\r\n      <Divider />\r\n    </>\r\n  }\r\n  const talentSheet = characterSheet.getTalentOfKey(talentKey, data.get(input.charEle).value as ElementKey | undefined)\r\n\r\n  return <CardLight sx={{ height: \"100%\" }}>\r\n    {header}\r\n    <CardContent>\r\n      <ConditionalWrapper condition={!!onClickTitle} wrapper={actionWrapeprFunc} >\r\n        <Grid container sx={{ flexWrap: \"nowrap\" }}>\r\n          <Grid item>\r\n            <Box component=\"img\" src={talentSheet?.img} sx={{ width: 60, height: \"auto\" }} />\r\n          </Grid>\r\n          <Grid item flexGrow={1} sx={{ pl: 1 }}>\r\n            <Typography variant=\"h6\">{talentSheet?.name}</Typography>\r\n            <Typography variant=\"subtitle1\">{subtitle}</Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </ConditionalWrapper>\r\n      {/* Display document sections */}\r\n      {talentSheet?.sections ? <DocumentDisplay sections={talentSheet.sections} /> : null}\r\n    </CardContent>\r\n  </CardLight>\r\n}\r\n","import { Button, ButtonGroup, Card, CardContent, Divider, Grid, MenuItem, Skeleton, Tab, Tabs, ToggleButton, Typography } from '@mui/material';\r\nimport { Suspense, useCallback, useContext, useMemo, useState } from 'react';\r\nimport CardDark from '../Components/Card/CardDark';\r\nimport CardLight from '../Components/Card/CardLight';\r\nimport { CharacterSelectionModal } from '../Components/Character/CharacterSelectionModal';\r\nimport ThumbSide from '../Components/Character/ThumbSide';\r\nimport CloseButton from '../Components/CloseButton';\r\nimport ColorText from '../Components/ColoredText';\r\nimport CustomNumberInput, { CustomNumberInputButtonGroupWrapper } from '../Components/CustomNumberInput';\r\nimport DropdownButton from '../Components/DropdownMenu/DropdownButton';\r\nimport { EnemyExpandCard } from '../Components/EnemyEditor';\r\nimport FormulaCalcCard from '../Components/FormulaCalcCard';\r\nimport { DamageOptionsCard } from '../Components/HitModeEditor';\r\nimport SolidToggleButtonGroup from '../Components/SolidToggleButtonGroup';\r\nimport { sgt } from '../Data/Characters/SheetUtil';\r\nimport { ambiguousLevel, ascensionMaxLevel, milestoneLevels } from '../Data/LevelData';\r\nimport { DataContext, dataContextObj, TeamData } from '../DataContext';\r\nimport useCharacterReducer from '../ReactHooks/useCharacterReducer';\r\nimport useCharSelectionCallback from '../ReactHooks/useCharSelectionCallback';\r\nimport useTeamData from '../ReactHooks/useTeamData';\r\nimport { CharacterKey } from '../Types/consts';\r\nimport { clamp } from '../Util/Util';\r\nimport CharacterArtifactPane from './CharacterDisplay/CharacterArtifactPane';\r\nimport CharacterOverviewPane from './CharacterDisplay/CharacterOverviewPane';\r\nimport CharacterTalentPane from './CharacterDisplay/CharacterTalentPane';\r\nimport CharacterTeamBuffsPane from './CharacterDisplay/CharacterTeamBuffsPane';\r\n\r\ninterface TabPanelProps {\r\n  children?: React.ReactNode;\r\n  value: string;\r\n  current: string | boolean;\r\n}\r\n\r\nfunction TabPanel({ children, current, value, ...other }: TabPanelProps) {\r\n  if (value !== current) return null\r\n  return <Suspense fallback={<Skeleton variant=\"rectangular\" width=\"100%\" height={1000} />}>\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== current}\r\n      id={`simple-tabpanel-${value}`}\r\n      aria-labelledby={`simple-tab-${value}`}\r\n      {...other}\r\n    >\r\n      {children}\r\n    </div>\r\n  </Suspense>\r\n}\r\n\r\ntype CharacterDisplayCardProps = {\r\n  characterKey: CharacterKey,\r\n  footer?: JSX.Element\r\n  newteamData?: TeamData,\r\n  mainStatAssumptionLevel?: number,\r\n  onClose?: (any) => void,\r\n  tabName?: string,\r\n}\r\nexport default function CharacterDisplayCard({ characterKey, footer, newteamData, mainStatAssumptionLevel = 0, onClose, tabName }: CharacterDisplayCardProps) {\r\n  const teamData = useTeamData(characterKey, mainStatAssumptionLevel)\r\n  const { character, characterSheet, target: charUIData } = teamData?.[characterKey] ?? {}\r\n\r\n  // set initial state to false, because it fails to check validity of the tab values on 1st load\r\n  const [tab, settab] = useState<string | boolean>(tabName ? tabName : (newteamData ? \"newartifacts\" : \"character\"))\r\n  const onTab = useCallback((e, v) => settab(v), [settab])\r\n\r\n  const characterDispatch = useCharacterReducer(character?.key ?? \"\")\r\n  const { compareData } = character ?? {}\r\n\r\n  const dataContextValue: dataContextObj | undefined = useMemo(() => {\r\n    if (!teamData || !character || !characterSheet || !charUIData) return undefined\r\n    return {\r\n      character,\r\n      characterSheet,\r\n      mainStatAssumptionLevel,\r\n      data: (newteamData ? newteamData[characterKey]!.target : charUIData),\r\n      teamData: (newteamData ? newteamData : teamData),\r\n      oldData: (compareData && newteamData) ? charUIData : undefined,\r\n      characterDispatch\r\n    }\r\n  }, [character, characterSheet, mainStatAssumptionLevel, newteamData, charUIData, teamData, characterDispatch, characterKey, compareData])\r\n\r\n  if (!teamData || !character || !characterSheet || !charUIData || !dataContextValue) return <></>\r\n\r\n  return <CardDark >\r\n    <DataContext.Provider value={dataContextValue}>\r\n      <CardContent sx={{\r\n        \"> div:not(:last-child)\": { mb: 1 },\r\n      }}>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            <CharSelectDropdown />\r\n          </Grid>\r\n          <Grid item>\r\n            {/* Compare against new build toggle */}\r\n            {!!newteamData && <SolidToggleButtonGroup exclusive value={compareData} onChange={(e, v) => characterDispatch({ compareData: v })} size=\"small\">\r\n              <ToggleButton value={false} disabled={!compareData}>\r\n                <small>Show New artifact Stats</small>\r\n              </ToggleButton>\r\n              <ToggleButton value={true} disabled={compareData}>\r\n                <small>Compare against equipped artifacts</small>\r\n              </ToggleButton>\r\n            </SolidToggleButtonGroup>}\r\n          </Grid>\r\n          <Grid item flexGrow={1} />\r\n          {!!mainStatAssumptionLevel && <Grid item><Card sx={{ p: 1, bgcolor: t => t.palette.warning.dark }}><Typography><strong>Assume Main Stats are Level {mainStatAssumptionLevel}</strong></Typography></Card></Grid>}\r\n          {!!onClose && <Grid item>\r\n            <CloseButton onClick={onClose} />\r\n          </Grid>}\r\n        </Grid>\r\n        <CardLight>\r\n          <Tabs\r\n            onChange={onTab}\r\n            value={tab}\r\n            variant=\"fullWidth\"\r\n          >\r\n            <Tab value=\"character\" label=\"Character\" />\r\n            {!!newteamData && <Tab value=\"newartifacts\" label=\"New Artifacts\" />}\r\n            <Tab value=\"artifacts\" label={newteamData ? \"Current Artifacts\" : \"Artifacts\"} />\r\n            <Tab value=\"buffs\" label=\"Team Buffs\" />\r\n            <Tab value=\"talent\" label=\"Talents\" />\r\n          </Tabs>\r\n        </CardLight>\r\n        <DamageOptionsCard />\r\n        <FormulaCalcCard />\r\n        <EnemyExpandCard />\r\n\r\n        {/* Character Panel */}\r\n        <TabPanel value=\"character\" current={tab}><CharacterOverviewPane /></TabPanel >\r\n        {/* Artifacts Panel */}\r\n        <DataContext.Provider value={{ ...dataContextValue, data: charUIData, oldData: undefined }}>\r\n          <TabPanel value=\"artifacts\" current={tab} ><CharacterArtifactPane /></TabPanel >\r\n        </DataContext.Provider>\r\n        {/* new build panel */}\r\n        <TabPanel value=\"newartifacts\" current={tab} ><CharacterArtifactPane newBuild /></TabPanel >\r\n        {/* Buffs panel */}\r\n        <TabPanel value=\"buffs\" current={tab}><CharacterTeamBuffsPane /></TabPanel >\r\n        {/* talent panel */}\r\n        <TabPanel value=\"talent\" current={tab}>\r\n          <CharacterTalentPane />\r\n        </TabPanel >\r\n      </CardContent>\r\n      {!!footer && <Divider />}\r\n      {footer && <CardContent >\r\n        {footer}\r\n      </CardContent>}\r\n    </DataContext.Provider>\r\n  </CardDark>\r\n}\r\n\r\n\r\nfunction CharSelectDropdown() {\r\n  const { character, characterSheet, characterDispatch } = useContext(DataContext)\r\n  const [showModal, setshowModal] = useState(false)\r\n  const setCharacter = useCharSelectionCallback()\r\n  const setLevel = useCallback((level) => {\r\n    level = clamp(level, 1, 90)\r\n    const ascension = ascensionMaxLevel.findIndex(ascenML => level <= ascenML)\r\n    characterDispatch({ level, ascension })\r\n  }, [characterDispatch])\r\n  const setAscension = useCallback(() => {\r\n    if (!character) return\r\n    const { level = 1, ascension = 0 } = character\r\n    const lowerAscension = ascensionMaxLevel.findIndex(ascenML => level !== 90 && level === ascenML)\r\n    if (ascension === lowerAscension) characterDispatch({ ascension: ascension + 1 })\r\n    else characterDispatch({ ascension: lowerAscension })\r\n  }, [characterDispatch, character])\r\n  const { elementKey = \"anemo\", level = 1, ascension = 0 } = character\r\n  return <>\r\n    <CharacterSelectionModal show={showModal} onHide={() => setshowModal(false)} onSelect={setCharacter} />\r\n    <Grid container spacing={1}>\r\n      <Grid item>\r\n        <Button onClick={() => setshowModal(true)} startIcon={<ThumbSide src={characterSheet?.thumbImgSide} />} >{characterSheet?.name ?? \"Select a Character\"}</Button>\r\n      </Grid>\r\n      <Grid item>\r\n        <ButtonGroup sx={{ bgcolor: t => t.palette.contentDark.main }} >\r\n          {characterSheet?.sheet && \"talents\" in characterSheet?.sheet && <DropdownButton title={<strong><ColorText color={elementKey}>{sgt(`element.${elementKey}`)}</ColorText></strong>}>\r\n            {Object.keys(characterSheet.sheet.talents).map(eleKey =>\r\n              <MenuItem key={eleKey} selected={elementKey === eleKey} disabled={elementKey === eleKey} onClick={() => characterDispatch({ elementKey: eleKey })}>\r\n                <strong><ColorText color={eleKey}>{sgt(`element.${eleKey}`)}</ColorText></strong></MenuItem>)}\r\n          </DropdownButton>}\r\n          <CustomNumberInputButtonGroupWrapper >\r\n            <CustomNumberInput onChange={setLevel} value={level}\r\n              startAdornment=\"Lvl. \"\r\n              inputProps={{ min: 1, max: 90, sx: { textAlign: \"center\" } }}\r\n              sx={{ width: \"100%\", height: \"100%\", pl: 2 }}\r\n              disabled={!characterSheet} />\r\n          </CustomNumberInputButtonGroupWrapper>\r\n          <Button sx={{ pl: 1 }} disabled={!ambiguousLevel(level) || !characterSheet} onClick={setAscension}><strong>/ {ascensionMaxLevel[ascension]}</strong></Button>\r\n          <DropdownButton title={\"Select Level\"} disabled={!characterSheet}>\r\n            {milestoneLevels.map(([lv, as]) => {\r\n              const sameLevel = lv === ascensionMaxLevel[as]\r\n              const lvlstr = sameLevel ? `Lv. ${lv}` : `Lv. ${lv}/${ascensionMaxLevel[as]}`\r\n              const selected = lv === level && as === ascension\r\n              return <MenuItem key={`${lv}/${as}`} selected={selected} disabled={selected} onClick={() => characterDispatch({ level: lv, ascension: as })}>{lvlstr}</MenuItem>\r\n            })}\r\n          </DropdownButton>\r\n        </ButtonGroup>\r\n      </Grid>\r\n    </Grid>\r\n  </>\r\n}\r\n","import { BusinessCenter, Replay } from \"@mui/icons-material\";\r\nimport { Divider, ListItemIcon, MenuItem, Typography } from \"@mui/material\";\r\nimport { useContext } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport CharacterSheet from \"../../Data/Characters/CharacterSheet\";\r\nimport { DatabaseContext } from \"../../Database/Database\";\r\nimport usePromise from \"../../ReactHooks/usePromise\";\r\nimport { CharacterKey } from \"../../Types/consts\";\r\nimport DropdownButton, { DropdownButtonProps } from \"../DropdownMenu/DropdownButton\";\r\nimport ThumbSide from \"./ThumbSide\";\r\n\r\nexport type CharacterDropdownButtonProps = Omit<DropdownButtonProps, \"title\" | \"onChange\" | \"children\"> & {\r\n  value: CharacterKey | \"\"\r\n  onChange: (ck: CharacterKey | \"\") => void\r\n  filter?: (cs: CharacterSheet, ck: CharacterKey) => boolean\r\n  inventory?: boolean\r\n  noUnselect?: boolean,\r\n  unSelectText?: Displayable,\r\n  unSelectIcon?: Displayable,\r\n}\r\n\r\nexport default function CharacterDropdownButton({ value, onChange, unSelectText, unSelectIcon, inventory = false, noUnselect = false, filter = () => true, ...props }: CharacterDropdownButtonProps) {\r\n  const { t } = useTranslation(\"ui\");\r\n  const { database } = useContext(DatabaseContext)\r\n  const characterSheets = usePromise(CharacterSheet.getAll, [])\r\n  const characterSheet = usePromise(CharacterSheet.get(value), [value])\r\n  const characterKeys = database._getCharKeys().filter(ck => characterSheets?.[ck] && filter(characterSheets[ck], ck)).sort()\r\n  return <DropdownButton\r\n    {...props}\r\n    title={characterSheet?.name ?? (inventory ? t`inventory` : (unSelectText ?? t`unselect`))}\r\n    color={value ? \"success\" : \"primary\"}\r\n    startIcon={characterSheet?.thumbImg ? <ThumbSide src={characterSheet.thumbImgSide} /> : (inventory ? <BusinessCenter /> : (unSelectIcon ?? <Replay />))}>\r\n    {!noUnselect && (inventory ? <MenuItem onClick={() => onChange(\"\")} selected={value === \"\"} disabled={value === \"\"}>\r\n      <ListItemIcon>\r\n        <BusinessCenter />\r\n      </ListItemIcon>\r\n      <Typography variant=\"inherit\" noWrap>\r\n        {t`inventory`}\r\n      </Typography>\r\n    </MenuItem> : <MenuItem onClick={() => onChange(\"\")} selected={value === \"\"} disabled={value === \"\"}>\r\n      <ListItemIcon>\r\n        <Replay />\r\n      </ListItemIcon>\r\n      <Typography variant=\"inherit\" noWrap>\r\n        {t`unselect`}\r\n      </Typography>\r\n    </MenuItem>)}\r\n    {!noUnselect && <Divider key=\"div\" />}\r\n    {!!characterSheets && CharacterMenuItemArray(characterSheets, characterKeys, onChange, value)}\r\n  </DropdownButton >\r\n}\r\n\r\n// Returning an array instead of Fragment because MUI Menu doesn't like fragments.\r\nexport function CharacterMenuItemArray(characterSheets: StrictDict<CharacterKey, CharacterSheet>, characterKeys: CharacterKey[], onChange: (ck: CharacterKey) => void, selectedCharacterKey: CharacterKey | \"\" = \"\") {\r\n  return characterKeys.map(characterKey =>\r\n    <MenuItem onClick={() => onChange(characterKey)} key={characterKey} selected={selectedCharacterKey === characterKey} disabled={selectedCharacterKey === characterKey} >\r\n      <ListItemIcon>\r\n        <ThumbSide src={characterSheets[characterKey].thumbImgSide} />\r\n      </ListItemIcon>\r\n      <Typography variant=\"inherit\" noWrap>\r\n        {characterSheets?.[characterKey]?.name}\r\n      </Typography>\r\n    </MenuItem>)\r\n}\r\n","import { faEdit, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { Lock, LockOpen } from \"@mui/icons-material\"\r\nimport { Box, Button, ButtonGroup, CardActionArea, CardContent, CardHeader, Grid, IconButton, Skeleton, Typography } from \"@mui/material\"\r\nimport { Suspense, useCallback, useContext, useMemo } from \"react\"\r\nimport Assets from \"../Assets/Assets\"\r\nimport CharacterSheet from \"../Data/Characters/CharacterSheet\"\r\nimport CardLight from \"../Components/Card/CardLight\"\r\nimport CharacterDropdownButton from '../Components/Character/CharacterDropdownButton_WR'\r\nimport LocationName from \"../Components/Character/LocationName\"\r\nimport ConditionalWrapper from \"../Components/ConditionalWrapper\"\r\nimport ImgIcon from \"../Components/Image/ImgIcon\"\r\nimport { Stars } from \"../Components/StarDisplay\"\r\nimport StatIcon from \"../Components/StatIcon\"\r\nimport { ascensionMaxLevel } from \"../Data/LevelData\"\r\nimport { DatabaseContext } from \"../Database/Database\"\r\nimport { uiInput as input } from \"../Formula\"\r\nimport { computeUIData, dataObjForWeapon } from \"../Formula/api\"\r\nimport usePromise from \"../ReactHooks/usePromise\"\r\nimport useWeapon from \"../ReactHooks/useWeapon\"\r\nimport KeyMap, { valueString } from \"../KeyMap\"\r\nimport { CharacterKey } from \"../Types/consts\"\r\nimport WeaponSheet from \"../Data/Weapons/WeaponSheet\"\r\n\r\ntype WeaponCardProps = { weaponId: string, onClick?: (weaponId: string) => void, onEdit?: (weaponId: string) => void, onDelete?: (weaponId: string) => void, canEquip?: boolean }\r\nexport default function WeaponCard({ weaponId, onClick, onEdit, onDelete, canEquip = false }: WeaponCardProps) {\r\n  const { database } = useContext(DatabaseContext)\r\n  const databaseWeapon = useWeapon(weaponId)\r\n  const weapon = databaseWeapon\r\n  const weaponSheet = usePromise(weapon?.key ? WeaponSheet.get(weapon.key) : undefined, [weapon?.key])\r\n\r\n  const filter = useCallback(\r\n    (cs: CharacterSheet) => cs.weaponTypeKey === weaponSheet?.weaponType,\r\n    [weaponSheet],\r\n  )\r\n\r\n  const actionWrapperFunc = useCallback(\r\n    children => <CardActionArea onClick={() => onClick?.(weaponId)} sx={{ height: \"100%\" }}>{children}</CardActionArea>,\r\n    [onClick, weaponId],\r\n  )\r\n\r\n  const equipOnChar = useCallback((charKey: CharacterKey | \"\") => database.setWeaponLocation(weaponId, charKey), [database, weaponId],)\r\n\r\n  const UIData = useMemo(() => weaponSheet && weapon && computeUIData([weaponSheet.data, dataObjForWeapon(weapon)]), [weaponSheet, weapon])\r\n\r\n  if (!weapon || !weaponSheet || !UIData) return null;\r\n  const { level, ascension, refinement, id, location = \"\", lock } = weapon\r\n  const weaponTypeKey = UIData.get(input.weapon.type).value!\r\n  const stats = [input.weapon.main, input.weapon.sub, input.weapon.sub2].map(x => UIData.get(x))\r\n  const img = ascension < 2 ? weaponSheet?.img : weaponSheet?.imgAwaken\r\n\r\n  return <Suspense fallback={<Skeleton variant=\"rectangular\" sx={{ width: \"100%\", height: \"100%\", minHeight: 300 }} />}>\r\n    <ConditionalWrapper condition={!!onClick} wrapper={actionWrapperFunc}>\r\n      <CardLight sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n        <div className={`grad-${weaponSheet.rarity}star`} >\r\n          <CardHeader title={weaponSheet.name} avatar={<ImgIcon sx={{ fontSize: \"2em\" }} src={Assets.weaponTypes?.[weaponTypeKey]} />} titleTypographyProps={{ variant: \"h6\" }}\r\n            action={!onClick && <IconButton color=\"primary\" onClick={() => database.updateWeapon({ lock: !lock }, id)}>\r\n              {lock ? <Lock /> : <LockOpen />}\r\n            </IconButton>} />\r\n          <Grid container sx={{ flexWrap: \"nowrap\", pl: 2 }}>\r\n            <Grid item flexGrow={1}>\r\n              <Typography component=\"span\" variant=\"h4\">Lv. {level}</Typography>\r\n              <Typography component=\"span\" variant=\"h4\" color=\"text.secondary\">/{ascensionMaxLevel[ascension]}</Typography>\r\n              <Typography variant=\"h6\">Refinement <strong>{refinement}</strong></Typography>\r\n              <Typography><Stars stars={weaponSheet.rarity} colored /></Typography>\r\n            </Grid>\r\n            {/* use flex-end here to align the image to the bottom. */}\r\n            <Grid item container maxWidth=\"40%\" alignContent=\"flex-end\" sx={{ mt: -3 }}>\r\n              <Box component=\"img\" src={img} width=\"100%\" height=\"auto\" />\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n        <CardContent>\r\n          {stats.map(node => {\r\n            if (!node.key) return null\r\n            const displayVal = valueString(node.value, node.unit, node.unit === \"flat\" ? 0 : undefined)\r\n            return <Box key={node.key} sx={{ display: \"flex\" }}>\r\n              <Typography flexGrow={1}>{StatIcon[node.key]} {KeyMap.get(node.key)}</Typography>\r\n              <Typography>{displayVal}</Typography>\r\n            </Box>\r\n          })}\r\n        </CardContent>\r\n        {/* grow to fill the 100% heigh */}\r\n        <Box flexGrow={1} />\r\n        <CardContent sx={{ py: 1 }}>\r\n          <Grid container sx={{ flexWrap: \"nowrap\" }} >\r\n            <Grid item xs=\"auto\" flexShrink={1}>\r\n              {canEquip ? <CharacterDropdownButton size=\"small\" noUnselect inventory value={location} onChange={equipOnChar} filter={filter} /> : <LocationName location={location} />}\r\n            </Grid>\r\n            <Grid item flexGrow={1} sx={{ mr: 1 }} />\r\n            <Grid item xs=\"auto\">\r\n              <ButtonGroup sx={{ height: \"100%\" }}>\r\n                {!!onEdit && <Button color=\"info\" size=\"small\" onClick={() => onEdit(id)} >\r\n                  <FontAwesomeIcon icon={faEdit} className=\"fa-fw\" />\r\n                </Button>}\r\n                {!!onDelete && <Button color=\"error\" size=\"small\" onClick={() => onDelete(id)} disabled={!!location || lock} >\r\n                  <FontAwesomeIcon icon={faTrashAlt} className=\"fa-fw\" />\r\n                </Button>}\r\n              </ButtonGroup>\r\n            </Grid>\r\n          </Grid>\r\n        </CardContent>\r\n\r\n      </CardLight>\r\n    </ConditionalWrapper>\r\n  </Suspense>\r\n}\r\n","import { Lock, LockOpen, SwapHoriz } from \"@mui/icons-material\"\r\nimport { Box, Button, ButtonGroup, CardContent, CardHeader, Divider, Grid, ListItem, MenuItem, Typography } from \"@mui/material\"\r\nimport { useCallback, useContext, useEffect, useMemo, useState } from \"react\"\r\nimport Assets from \"../Assets/Assets\"\r\nimport CardDark from \"../Components/Card/CardDark\"\r\nimport CardLight from \"../Components/Card/CardLight\"\r\nimport CharacterDropdownButton from \"../Components/Character/CharacterDropdownButton\"\r\nimport CloseButton from \"../Components/CloseButton\"\r\nimport ColorText from \"../Components/ColoredText\"\r\nimport CustomNumberInput, { CustomNumberInputButtonGroupWrapper } from \"../Components/CustomNumberInput\"\r\nimport DocumentDisplay from \"../Components/DocumentDisplay\"\r\nimport DropdownButton from \"../Components/DropdownMenu/DropdownButton\"\r\nimport { FieldDisplayList, NodeFieldDisplay } from \"../Components/FieldDisplay\"\r\nimport ImgIcon from \"../Components/Image/ImgIcon\"\r\nimport ModalWrapper from \"../Components/ModalWrapper\"\r\nimport SqBadge from \"../Components/SqBadge\"\r\nimport { Stars } from \"../Components/StarDisplay\"\r\nimport WeaponSelectionModal from \"../Components/Weapon/WeaponSelectionModal\"\r\nimport CharacterSheet from \"../Data/Characters/CharacterSheet\"\r\nimport { ascensionMaxLevel, lowRarityMilestoneLevels } from \"../Data/LevelData\"\r\nimport WeaponSheet from \"../Data/Weapons/WeaponSheet\"\r\nimport { DatabaseContext } from \"../Database/Database\"\r\nimport { DataContext } from \"../DataContext\"\r\nimport { uiInput as input } from \"../Formula\"\r\nimport { computeUIData, dataObjForWeapon } from \"../Formula/api\"\r\nimport usePromise from \"../ReactHooks/usePromise\"\r\nimport useWeapon from \"../ReactHooks/useWeapon\"\r\nimport { CharacterKey } from \"../Types/consts\"\r\nimport { ICachedWeapon } from \"../Types/weapon\"\r\nimport { clamp } from \"../Util/Util\"\r\nimport WeaponCard from \"./WeaponCard\"\r\n\r\ntype WeaponStatsEditorCardProps = {\r\n  weaponId: string\r\n  footer?: boolean\r\n  onClose?: () => void\r\n}\r\nexport default function WeaponDisplayCard({\r\n  weaponId: propWeaponId,\r\n  footer = false,\r\n  onClose\r\n}: WeaponStatsEditorCardProps) {\r\n  const { data } = useContext(DataContext)\r\n\r\n  const { database } = useContext(DatabaseContext)\r\n  const weapon = useWeapon(propWeaponId)\r\n  const { key = \"\", level = 0, refinement = 0, ascension = 0, lock, location = \"\", id } = weapon ?? {}\r\n  const weaponSheet = usePromise(WeaponSheet.get(key), [key])\r\n  const weaponTypeKey = weaponSheet?.weaponType\r\n\r\n  const weaponDispatch = useCallback((newWeapon: Partial<ICachedWeapon>) => {\r\n    database.updateWeapon(newWeapon, propWeaponId)\r\n  }, [propWeaponId, database])\r\n\r\n  const setLevel = useCallback(level => {\r\n    level = clamp(level, 1, 90)\r\n    const ascension = ascensionMaxLevel.findIndex(ascenML => level <= ascenML)\r\n    weaponDispatch({ level, ascension })\r\n  }, [weaponDispatch])\r\n\r\n  const setAscension = useCallback(() => {\r\n    const lowerAscension = ascensionMaxLevel.findIndex(ascenML => level !== 90 && level === ascenML)\r\n    if (ascension === lowerAscension) weaponDispatch({ ascension: ascension + 1 })\r\n    else weaponDispatch({ ascension: lowerAscension })\r\n  }, [weaponDispatch, ascension, level])\r\n\r\n  const characterSheet = usePromise(location ? CharacterSheet.get(location) : undefined, [location])\r\n  const weaponFilter = characterSheet ? (ws) => ws.weaponType === characterSheet.weaponTypeKey : undefined\r\n  const initialWeaponFilter = characterSheet && characterSheet.weaponTypeKey\r\n\r\n  const equipOnChar = useCallback((charKey: CharacterKey | \"\") => id && database.setWeaponLocation(id, charKey), [database, id])\r\n  const filter = useCallback(\r\n    (cs: CharacterSheet) => cs.weaponTypeKey === weaponSheet?.weaponType,\r\n    [weaponSheet],\r\n  )\r\n\r\n  const [showModal, setshowModal] = useState(false)\r\n  const img = ascension < 2 ? weaponSheet?.img : weaponSheet?.imgAwaken\r\n\r\n  //check the levels when switching from a 5* to a 1*, for example.\r\n  useEffect(() => {\r\n    if (!weaponSheet || !weaponDispatch || weaponSheet.key !== weapon?.key) return\r\n    if (weaponSheet.rarity <= 2 && (level > 70 || ascension > 4)) {\r\n      const [level, ascension] = lowRarityMilestoneLevels[0]\r\n      weaponDispatch({ level, ascension })\r\n    }\r\n  }, [weaponSheet, weapon, weaponDispatch, level, ascension])\r\n\r\n\r\n  const weaponUIData = useMemo(() => weaponSheet && weapon && computeUIData([weaponSheet.data, dataObjForWeapon(weapon)]), [weaponSheet, weapon])\r\n  return <CardLight>\r\n    <CardContent sx={{ py: 1 }}>\r\n      <Grid container spacing={1}>\r\n        <Grid item flexGrow={1}>\r\n          <Grid container spacing={1}>\r\n            <Grid item >\r\n              <WeaponSelectionModal show={showModal} onHide={() => setshowModal(false)} onSelect={k => weaponDispatch({ key: k })} filter={weaponFilter} weaponFilter={initialWeaponFilter} />\r\n              <ButtonGroup>\r\n                <Button onClick={() => setshowModal(true)} >{weaponSheet?.name ?? \"Select a Weapon\"}</Button>\r\n                {weaponSheet?.hasRefinement && <DropdownButton title={`Refinement ${refinement}`}>\r\n                  <MenuItem>Select Weapon Refinement</MenuItem>\r\n                  <Divider />\r\n                  {[...Array(5).keys()].map(key =>\r\n                    <MenuItem key={key} onClick={() => weaponDispatch({ refinement: key + 1 })} selected={refinement === (key + 1)} disabled={refinement === (key + 1)}>\r\n                      {`Refinement ${key + 1}`}\r\n                    </MenuItem>)}\r\n                </DropdownButton>}\r\n              </ButtonGroup>\r\n            </Grid>\r\n            <Grid item >\r\n              <ButtonGroup sx={{ bgcolor: t => t.palette.contentLight.main }} >\r\n                <CustomNumberInputButtonGroupWrapper >\r\n                  <CustomNumberInput onChange={setLevel} value={level}\r\n                    startAdornment=\"Lvl. \"\r\n                    inputProps={{ min: 1, max: 90, sx: { textAlign: \"center\" } }}\r\n                    sx={{ width: \"100%\", height: \"100%\", pl: 2 }}\r\n                  />\r\n                </CustomNumberInputButtonGroupWrapper>\r\n                {weaponSheet && <Button sx={{ pl: 1 }} disabled={!weaponSheet.ambiguousLevel(level)} onClick={setAscension}><strong>/ {ascensionMaxLevel[ascension]}</strong></Button>}\r\n                {weaponSheet && <DropdownButton title={\"Select Level\"} >\r\n                  {weaponSheet.milestoneLevels.map(([lv, as]) => {\r\n                    const sameLevel = lv === ascensionMaxLevel[as]\r\n                    const lvlstr = sameLevel ? `Lv. ${lv}` : `Lv. ${lv}/${ascensionMaxLevel[as]}`\r\n                    const selected = lv === level && as === ascension\r\n                    return <MenuItem key={`${lv}/${as}`} selected={selected} disabled={selected} onClick={() => weaponDispatch({ level: lv, ascension: as })}>{lvlstr}</MenuItem>\r\n                  })}\r\n                </DropdownButton>}\r\n              </ButtonGroup>\r\n            </Grid>\r\n            <Grid item>\r\n              <Button color=\"error\" onClick={() => id && database.updateWeapon({ lock: !lock }, id)} startIcon={lock ? <Lock /> : <LockOpen />}>\r\n                {lock ? \"Locked\" : \"Unlocked\"}\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        {!!onClose && <Grid item  >\r\n          <CloseButton onClick={onClose} />\r\n        </Grid>}\r\n        <Grid item >\r\n          <SwapBtn weaponTypeKey={weaponTypeKey} onChangeId={id => database.setWeaponLocation(id, data.get(input.charKey).value as CharacterKey)} />\r\n        </Grid>\r\n      </Grid>\r\n    </CardContent>\r\n    <Divider />\r\n    <CardContent >\r\n      {weaponSheet && weaponUIData && <Box display=\"flex\" gap={{ xs: 1, md: 1.5, lg: 2 }} >\r\n        <Box sx={{ maxWidth: 256 }} flexShrink={1} minWidth=\"25%\">\r\n          <Box component=\"img\" src={img} className={`grad-${weaponSheet.rarity}star`} sx={{ maxWidth: 256, width: \"100%\", height: \"auto\", borderRadius: 1 }} />\r\n          <Typography><small>{weaponSheet.description}</small></Typography>\r\n        </Box>\r\n        <Box sx={{ mb: -1 }} flexGrow={1} >\r\n          <Typography variant=\"h6\" >{process.env.NODE_ENV === \"development\" && <ColorText color=\"warning\">{id || `\"\"`} </ColorText>}{weaponSheet.name} Lv. {weapon && WeaponSheet.getLevelString(weapon)} {weaponSheet.rarity > 2 && <SqBadge color=\"info\">Refinement {refinement}</SqBadge>}</Typography>\r\n          <Typography><Stars stars={weaponSheet.rarity} /></Typography>\r\n          <Typography variant=\"subtitle1\">{weaponSheet.passiveName}</Typography>\r\n          <Typography gutterBottom>{weaponSheet.passiveName && weaponSheet.passiveDescription(weaponUIData.get(input.weapon.refineIndex).value)}</Typography>\r\n          <Box display=\"flex\" flexDirection=\"column\" gap={1}>\r\n            <CardDark >\r\n              <CardHeader title={\"Main Stats\"} titleTypographyProps={{ variant: \"subtitle2\" }}/>\r\n              <Divider />\r\n              <FieldDisplayList>\r\n                {[input.weapon.main, input.weapon.sub, input.weapon.sub2].map((node, i) => {\r\n                  const n = weaponUIData.get(node)\r\n                  if (n.isEmpty || !n.value) return null\r\n                  return <NodeFieldDisplay key={n.key} node={n} component={ListItem} />\r\n                })}\r\n              </FieldDisplayList>\r\n            </CardDark>\r\n            {data && weaponSheet.document && <DocumentDisplay sections={weaponSheet.document} />}\r\n          </Box>\r\n        </Box>\r\n      </Box>}\r\n    </CardContent>\r\n    {footer && id && <CardContent sx={{ py: 1 }}>\r\n      <Grid container>\r\n        <Grid item flexGrow={1}>\r\n          <CharacterDropdownButton noUnselect inventory value={location} onChange={equipOnChar} filter={filter} />\r\n        </Grid>\r\n        {!!onClose && <Grid item><CloseButton large onClick={onClose} /></Grid>}\r\n      </Grid>\r\n    </CardContent>}\r\n  </CardLight>\r\n}\r\nfunction SwapBtn({ onChangeId, weaponTypeKey }) {\r\n  const { database } = useContext(DatabaseContext)\r\n  const [show, setShow] = useState(false)\r\n  const open = () => setShow(true)\r\n  const close = () => setShow(false)\r\n\r\n  const clickHandler = (id) => {\r\n    onChangeId(id)\r\n    close()\r\n  }\r\n\r\n  const weaponSheets = usePromise(WeaponSheet.getAll, [])\r\n\r\n  const weaponIdList = database.weapons.keys.filter(wKey => {\r\n    const dbWeapon = database._getWeapon(wKey)\r\n    if (!dbWeapon) return false\r\n    if (weaponTypeKey && weaponTypeKey !== weaponSheets?.[dbWeapon.key]?.weaponType) return false\r\n    return true\r\n  })\r\n\r\n\r\n  return <>\r\n    <Button color=\"info\" onClick={open} startIcon={<SwapHoriz />} >SWAP WEAPON</Button>\r\n    <ModalWrapper open={show} onClose={close} >\r\n      <CardDark>\r\n        <CardContent sx={{ py: 1 }}>\r\n          <Grid container>\r\n            <Grid item flexGrow={1}>\r\n              <Typography variant=\"h6\">{weaponTypeKey ? <ImgIcon src={Assets.weaponTypes[weaponTypeKey]} /> : null} Swap Weapon</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <CloseButton onClick={close} />\r\n            </Grid>\r\n          </Grid>\r\n        </CardContent>\r\n        <Divider />\r\n        <CardContent>\r\n          <Grid container spacing={1}>\r\n            {weaponIdList.map(weaponId =>\r\n              <Grid item key={weaponId} xs={6} sm={6} md={4} lg={3} >\r\n                <WeaponCard\r\n                  weaponId={weaponId}\r\n                  onClick={clickHandler}\r\n                />\r\n              </Grid>)}\r\n          </Grid>\r\n        </CardContent>\r\n      </CardDark>\r\n    </ModalWrapper>\r\n  </>\r\n}\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\n\r\nexport default function useWeapon(weaponID: string | undefined = \"\") {\r\n  const { database } = useContext(DatabaseContext)\r\n  const [weapon, setWeapon] = useState(database._getWeapon(weaponID))\r\n  useEffect(() => setWeapon(database._getWeapon(weaponID)), [database, weaponID])\r\n  useEffect(() =>\r\n    weaponID ? database.followWeapon(weaponID, setWeapon) : undefined,\r\n    [weaponID, setWeapon, database])\r\n  return weapon\r\n}\r\n"],"names":["WeaponSelectionModal","show","onHide","onSelect","filter","propWeaponFilter","weaponFilter","weaponSheets","usePromise","WeaponSheet","useState","setWeaponfilter","useEffect","weaponIdList","Set","allWeaponKeys","wKey","weaponType","sort","a","b","rarity","open","onClose","sx","py","container","item","flexGrow","value","onChange","disabled","size","onClick","spacing","map","weaponKey","weaponSheet","lg","md","height","display","component","src","img","width","className","px","variant","name","Assets","stars","colored","large","Stat","this","Error","printStat","statKey","stats","sgt","strKey","ns","key18","st","values","condReadNode","path","customStringRead","cond","key","subKey","trans","typeKey","FormulaCalcCard","expanded","setexpanded","toggle","useCallback","Typography","color","ExpandButton","expand","ExpandMore","Collapse","in","timeout","unmountOnExit","pt","CalculationDisplay","data","useContext","DataContext","sections","getDisplaySections","Suspense","fallback","Skeleton","Box","mr","mb","Nodes","FormulaCalc","displayNs","sectionKey","header","getDisplayHeader","title","icon","action","avatar","ImgIcon","m","titleTypographyProps","Object","entries","node","isEmpty","Accordion","bgcolor","AccordionSummary","expandIcon","KeyMap","valueString","unit","AccordionDetails","formulas","subform","i","newBuild","character","mainStatAssumptionLevel","database","DatabaseContext","history","useHistory","edit","artid","push","pathname","state","artToEditId","artifactSheets","ArtifactSheet","useForceUpdate","updateArt","followAnyArt","equipArts","window","confirm","fromEntries","allSlotKeys","s","get","input","id","equipArtifacts","unequipArts","objectKeyMap","_","artIds","slotKey","setEffects","useMemo","StatDisplayComponent","Button","Card","p","t","palette","warning","dark","xs","sm","flexDirection","gap","setKey","setNumKeyArr","defIconSrc","setNumKey","SetEffectDisplay","ArtifactCard","artifactId","onEdit","tr","Translate","pcNodes","objectKeyValueMap","allElementsWithPhy","e","greaterEq","sum","min","tally","percent","protectiveCanopy","StatIcon","canShow","allElements","length","teamBuff","text","fields","ffNode","ferventFlames","swNode","soothingWaters","condSIPath","condSI","siNode","equal","shatteringIce","conditional","states","on","highVoltage","swNodeStam","swNodeMove","swNodeCD","impetuousWinds","condER","erNodeshield_","erNodeDMG_","erNodeRes_","atk_","incHeal_","staminaDec_","moveSPD_","cdRed_","shield_","all_dmg_","geo_enemyRes_","CharacterTeamBuffsPane","alignItems","TeamBuffDisplay","range","TeammateDisplay","index","statBreakpoint","oldData","teamBuffs","getTeamBuff","nodes","total","forEach","premod","enemy","columnSpacing","rowSpacing","n","oldValue","objPathValue","dataContext","active","teamData","activeCharacterDispatch","characterDispatch","activeCharacterKey","characterKey","team","useCharacterReducer","onClickHandler","useCharSelectionCallback","dataBundle","teamMateDataContext","characterSheet","target","CharacterDropdownButton","fullWidth","charKey","type","ck","includes","unSelectText","unSelectIcon","PersonAdd","CharacterCard","onClickHeader","artifactChildren","CharArtifactCondDisplay","weaponChildren","CharWeaponCondDisplay","characterChildren","CharTalentCondDisplay","flatMap","sn","setEffectDocument","teamBuffOnly","document","talent","getTalent","sheets","sts","CharacterOverviewPane","charEle","weaponTypeKey","level","ascension","constellation","tlvl","auto","skill","burst","tBoost","CardMedia","cardImg","CharacterSheet","mt","tKey","Badge","badgeContent","overlap","anchorOrigin","vertical","horizontal","fontSize","padding","borderRadius","lineHeight","getTalentOfKey","textAlign","constellationName","cursor","WeaponDisplayCard","weaponId","equippedWeapon","MainStatsCards","mainSubKeys","mainReadNodes","k","mainEditKeys","otherStatReadNodes","ele","x","otherStatKeys","info","miscStatReadNodes","keys","transformativeReactions","amplifyingReactions","miscStatkeys","StatDisplayContent","extra","rn","specialNode","StatDisplayCard","content","justifyContent","editContent","statName","StatInput","placeholder","bonusStats","onValueChange","defaultValue","undefined","setedit","faSave","faEdit","CharacterTalentPane","ReactionDisplay","tText","SkillDisplayCard","talentKey","subtitle","asc","enabled","style","opacity","onClickTitle","ReactionComponents","superconduct","electrocharged","overloaded","pyroSwirl","swirlEleToDisplay","setele","getDisplay","reaction","DropdownButton","element","MenuItem","selected","shattered","information","BootstrapTooltip","placement","faQuestionCircle","crystallize","crystallizeEleToDisplay","Ele","talentLimits","actionWrapeprFunc","children","CardActionArea","levelBoost","newTalentLevelKey","talentSheet","ConditionalWrapper","condition","wrapper","flexWrap","pl","TabPanel","current","other","role","hidden","CharacterDisplayCard","footer","newteamData","tabName","useTeamData","charUIData","tab","settab","onTab","v","compareData","dataContextValue","CharSelectDropdown","SolidToggleButtonGroup","exclusive","ToggleButton","CloseButton","Tabs","Tab","label","showModal","setshowModal","setCharacter","setLevel","clamp","ascensionMaxLevel","ascenML","setAscension","lowerAscension","elementKey","CharacterSelectionModal","startIcon","ThumbSide","thumbImgSide","ButtonGroup","contentDark","main","sheet","talents","eleKey","CustomNumberInput","startAdornment","inputProps","max","ambiguousLevel","milestoneLevels","lv","as","lvlstr","inventory","noUnselect","props","useTranslation","characterSheets","characterKeys","_getCharKeys","thumbImg","BusinessCenter","Replay","ListItemIcon","noWrap","Divider","CharacterMenuItemArray","selectedCharacterKey","WeaponCard","onDelete","canEquip","weapon","useWeapon","cs","actionWrapperFunc","equipOnChar","setWeaponLocation","UIData","computeUIData","dataObjForWeapon","refinement","location","lock","imgAwaken","minHeight","CardLight","CardHeader","IconButton","updateWeapon","Lock","LockOpen","Grid","maxWidth","alignContent","CardContent","displayVal","flexShrink","LocationName","faTrashAlt","propWeaponId","weaponDispatch","newWeapon","ws","initialWeaponFilter","lowRarityMilestoneLevels","weaponUIData","hasRefinement","Array","contentLight","SwapBtn","onChangeId","minWidth","description","process","passiveName","gutterBottom","passiveDescription","ListItem","setShow","close","clickHandler","weapons","dbWeapon","_getWeapon","weaponID","setWeapon","followWeapon"],"sourceRoot":""}