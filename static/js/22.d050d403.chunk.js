(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[22],{292:function(e,n,t){"use strict";var c=t(361),a=Object(c.a)("img")((function(e){var n=e.theme;return{display:"inline-block",width:"auto",height:"2.3em",lineHeight:1,verticalAlign:"text-bottom",marginTop:n.spacing(-3),marginLeft:n.spacing(-1.25),marginRight:n.spacing(-1),marginBottom:n.spacing(-1)}}));n.a=a},299:function(e,n,t){"use strict";t.d(n,"a",(function(){return j}));var c,a=t(38),i=t(362),r=t(71),o=t(124),s=t(271),l=t(264),u=t(1);function j(e){var n=e.location,t=Object(o.a)("ui").t,j=Object(l.a)(s.b.get(null!==n&&void 0!==n?n:""),[n]);return Object(u.jsx)(r.a,{component:"span",children:null!==j&&void 0!==j&&j.name?j.nameWIthIcon:Object(u.jsxs)("span",{children:[Object(u.jsx)(i.a,{sx:{verticalAlign:"text-bottom"}})," ",t(c||(c=Object(a.a)(["inventory"])))]})})}},300:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var c=t(10),a=t(125),i=t(791),r=t(0),o=t(272),s=t(19),l=t(267),u=t(288),j=t(1),d=["value","onChange"];function b(e){var n=e.value,t=e.onChange,b=Object(a.a)(e,d),x=Object(r.useCallback)((function(e,n){return t(n||"")}),[t]);return Object(j.jsx)(u.a,Object(c.a)(Object(c.a)({exclusive:!0,onChange:x,value:n||s.l},b),{},{children:s.l.map((function(e){var n;return Object(j.jsx)(i.a,{value:e,children:Object(j.jsx)(l.a,{src:null===(n=o.a.weaponTypes)||void 0===n?void 0:n[e],size:2})},e)}))}))}},302:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var c=t(8),a=t(0),i=t(158);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Object(a.useContext)(i.b),t=Object(a.useState)(n._getWeapon(e)),r=Object(c.a)(t,2),o=r[0],s=r[1];return Object(a.useEffect)((function(){return s(n._getWeapon(e))}),[n,e]),Object(a.useEffect)((function(){return e?n.followWeapon(e,s):void 0}),[e,s,n]),o}},308:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return i}));var c=t(8);function a(e,n,t){function c(e,n,t,c){var a=c.getValue(e),i=c.getValue(n);return(t?-1:1)*("string"===typeof a&&"string"===typeof i?a.localeCompare(i):i-a)}return function(a,i){if(!t[e])return 0;var r=t[e],o=c(a,i,n,r);return!o&&r.tieBreaker&&t[r.tieBreaker]&&(o=c(a,i,n,t[r.tieBreaker])),o}}function i(e,n){return function(t){return Object.entries(e).every((function(e){var a=Object(c.a)(e,2),i=a[0],r=a[1];return n[i](t,r)}))}}},310:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var c=t(10),a=t(125),i=t(53),r=t(52),o=t(740),s=t(790),l=t(257),u=t(124),j=t(70),d=t(270),b=t(1),x=["sortKeys","value","onChange","ascending","onChangeAsc"];function O(e){var n=e.sortKeys,t=e.value,O=e.onChange,h=e.ascending,f=e.onChangeAsc,v=Object(a.a)(e,x),p=Object(u.a)("ui").t;return Object(b.jsxs)(o.a,Object(c.a)(Object(c.a)({},v),{},{children:[Object(b.jsx)(d.a,{title:Object(b.jsxs)(j.a,{t:p,i18nKey:"sortByFormat",value:p("sortMap.".concat(t)),children:["Sort By: ",{value:p("sortMap.".concat(t))}]}),children:n.map((function(e){return Object(b.jsx)(s.a,{selected:t===e,disabled:t===e,onClick:function(){return O(e)},children:p("sortMap.".concat(e))},e)}))}),Object(b.jsx)(l.a,{onClick:function(){return f(!h)},startIcon:Object(b.jsx)(r.a,{icon:h?i.x:i.y,className:"fa-fw"}),children:h?Object(b.jsx)(j.a,{t:p,i18nKey:"ascending",children:"Ascending"}):Object(b.jsx)(j.a,{t:p,i18nKey:"descending",children:"Descending"})})]}))}},321:function(e,n,t){"use strict";t.d(n,"a",(function(){return k}));var c=t(14),a=t(8),i=t(443),r=t(250),o=t(239),s=t(406),l=t(232),u=t(71),j=t(0),d=t(272),b=t(264),x=t(19),O=t(273),h=t(266),f=t(262),v=t(279),p=t(267),m=t(282),g=t(274),y=t(300),w=t(1);function k(e){var n=e.show,t=e.onHide,k=e.onSelect,C=e.filter,W=void 0===C?function(){return!0}:C,I=e.weaponFilter,T=Object(b.a)(O.c.getAll,[]),S=Object(j.useState)(null!==I&&void 0!==I?I:""),N=Object(a.a)(S,2),A=N[0],D=N[1];Object(j.useEffect)((function(){return I&&D(I)}),[I]);var z=T?Object(c.a)(new Set(x.k)).filter((function(e){return W(T[e])})).filter((function(e){var n;return!A||A===(null===T||void 0===T||null===(n=T[e])||void 0===n?void 0:n.weaponType)})).sort((function(e,n){var t,c,a,i;return(null!==(t=null===T||void 0===T||null===(c=T[n])||void 0===c?void 0:c.rarity)&&void 0!==t?t:0)-(null!==(a=null===T||void 0===T||null===(i=T[e])||void 0===i?void 0:i.rarity)&&void 0!==a?a:0)})):[];return T?Object(w.jsx)(m.a,{open:n,onClose:t,children:Object(w.jsxs)(h.a,{children:[Object(w.jsx)(i.a,{sx:{py:1},children:Object(w.jsxs)(r.a,{container:!0,children:[Object(w.jsx)(r.a,{item:!0,flexGrow:1,children:Object(w.jsx)(y.a,{value:A,onChange:D,disabled:!!I,size:"small"})}),Object(w.jsx)(r.a,{item:!0,children:Object(w.jsx)(v.a,{onClick:t})})]})}),Object(w.jsx)(o.a,{}),Object(w.jsx)(i.a,{children:Object(w.jsx)(r.a,{container:!0,spacing:1,children:z.map((function(e){var n,c=T[e];return Object(w.jsx)(r.a,{item:!0,lg:3,md:4,children:Object(w.jsx)(f.a,{sx:{height:"100%"},children:Object(w.jsxs)(s.a,{onClick:function(){t(),k(e)},sx:{display:"flex"},children:[Object(w.jsx)(l.a,{component:"img",src:c.img,sx:{width:100,height:"auto"},className:" grad-".concat(c.rarity,"star")}),Object(w.jsxs)(l.a,{sx:{flexGrow:1,px:1},children:[Object(w.jsx)(u.a,{variant:"subtitle1",children:c.name}),Object(w.jsxs)(u.a,{children:[Object(w.jsx)(p.a,{src:null===(n=d.a.weaponTypes)||void 0===n?void 0:n[c.weaponType]})," ",Object(w.jsx)(g.a,{stars:c.rarity,colored:!0})]})]})]})})},e)}))})}),Object(w.jsx)(o.a,{}),Object(w.jsx)(i.a,{sx:{py:1},children:Object(w.jsx)(v.a,{large:!0,onClick:t})})]})}):null}},323:function(e,n,t){"use strict";t.d(n,"a",(function(){return $}));var c,a,i,r,o=t(53),s=t(52),l=t(381),u=t(382),j=t(406),d=t(156),b=t(353),x=t(258),O=t(250),h=t(71),f=t(232),v=t(443),p=t(740),m=t(257),g=t(0),y=t(272),w=t(262),k=t(10),C=t(38),W=t(125),I=t(362),T=t(363),S=t(790),N=t(238),A=t(239),D=t(124),z=t(271),E=t(158),G=t(264),M=t(270),B=t(292),K=t(1),_=["value","onChange","unSelectText","unSelectIcon","inventory","noUnselect","filter"];function H(e){var n,t=e.value,o=e.onChange,s=e.unSelectText,l=e.unSelectIcon,u=e.inventory,j=void 0!==u&&u,d=e.noUnselect,b=void 0!==d&&d,x=e.filter,O=void 0===x?function(){return!0}:x,f=Object(W.a)(e,_),v=Object(D.a)("ui").t,p=Object(g.useContext)(E.b),m=Object(G.a)(z.b.getAll,[]),y=Object(G.a)(z.b.get(t),[t]),w=p._getCharKeys().filter((function(e){return(null===m||void 0===m?void 0:m[e])&&O(m[e],e)})).sort();return Object(K.jsxs)(M.a,Object(k.a)(Object(k.a)({},f),{},{title:null!==(n=null===y||void 0===y?void 0:y.name)&&void 0!==n?n:j?v(c||(c=Object(C.a)(["inventory"]))):null!==s&&void 0!==s?s:v(a||(a=Object(C.a)(["unselect"]))),color:t?"success":"primary",startIcon:null!==y&&void 0!==y&&y.thumbImg?Object(K.jsx)(B.a,{src:y.thumbImgSide}):j?Object(K.jsx)(I.a,{}):null!==l&&void 0!==l?l:Object(K.jsx)(T.a,{}),children:[!b&&(j?Object(K.jsxs)(S.a,{onClick:function(){return o("")},selected:""===t,disabled:""===t,children:[Object(K.jsx)(N.a,{children:Object(K.jsx)(I.a,{})}),Object(K.jsx)(h.a,{variant:"inherit",noWrap:!0,children:v(i||(i=Object(C.a)(["inventory"])))})]}):Object(K.jsxs)(S.a,{onClick:function(){return o("")},selected:""===t,disabled:""===t,children:[Object(K.jsx)(N.a,{children:Object(K.jsx)(T.a,{})}),Object(K.jsx)(h.a,{variant:"inherit",noWrap:!0,children:v(r||(r=Object(C.a)(["unselect"])))})]})),!b&&Object(K.jsx)(A.a,{},"div"),!!m&&L(m,w,o,t)]}))}function L(e,n,t){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n.map((function(n){var a;return Object(K.jsxs)(S.a,{onClick:function(){return t(n)},selected:c===n,disabled:c===n,children:[Object(K.jsx)(N.a,{children:Object(K.jsx)(B.a,{src:e[n].thumbImgSide})}),Object(K.jsx)(h.a,{variant:"inherit",noWrap:!0,children:null===e||void 0===e||null===(a=e[n])||void 0===a?void 0:a.name})]},n)}))}var P=t(299),R=t(298),V=t(267),U=t(274),q=t(276),F=t(45),J=t(261),Q=t(275),X=t(302),Y=t(102),Z=t(273);function $(e){var n,t=e.weaponId,c=e.onClick,a=e.onEdit,i=e.onDelete,r=e.canEquip,k=void 0!==r&&r,C=Object(g.useContext)(E.b),W=Object(X.a)(t),I=Object(G.a)(null!==W&&void 0!==W&&W.key?Z.c.get(W.key):void 0,[null===W||void 0===W?void 0:W.key]),T=Object(g.useCallback)((function(e){return e.weaponTypeKey===(null===I||void 0===I?void 0:I.weaponType)}),[I]),S=Object(g.useCallback)((function(e){return Object(K.jsx)(j.a,{onClick:function(){return null===c||void 0===c?void 0:c(t)},sx:{height:"100%"},children:e})}),[c,t]),N=Object(g.useCallback)((function(e){return C.setWeaponLocation(t,e)}),[C,t]),A=Object(g.useMemo)((function(){return I&&W&&Object(Q.a)([I.data,Object(Q.d)(W)])}),[I,W]);if(!W||!I||!A)return null;var D=W.level,z=W.ascension,M=W.refinement,B=W.id,_=W.location,L=void 0===_?"":_,$=W.lock,ee=A.get(J.e.weapon.type).value,ne=[J.e.weapon.main,J.e.weapon.sub,J.e.weapon.sub2].map((function(e){return A.get(e)})),te=z<2?null===I||void 0===I?void 0:I.img:null===I||void 0===I?void 0:I.imgAwaken;return Object(K.jsx)(g.Suspense,{fallback:Object(K.jsx)(d.a,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:Object(K.jsx)(R.a,{condition:!!c,wrapper:S,children:Object(K.jsxs)(w.a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(K.jsxs)("div",{className:"grad-".concat(I.rarity,"star"),children:[Object(K.jsx)(b.a,{title:I.name,avatar:Object(K.jsx)(V.a,{sx:{fontSize:"2em"},src:null===(n=y.a.weaponTypes)||void 0===n?void 0:n[ee]}),titleTypographyProps:{variant:"h6"},action:!c&&Object(K.jsx)(x.a,{color:"primary",onClick:function(){return C.updateWeapon({lock:!$},B)},children:$?Object(K.jsx)(l.a,{}):Object(K.jsx)(u.a,{})})}),Object(K.jsxs)(O.a,{container:!0,sx:{flexWrap:"nowrap",pl:2},children:[Object(K.jsxs)(O.a,{item:!0,flexGrow:1,children:[Object(K.jsxs)(h.a,{component:"span",variant:"h4",children:["Lv. ",D]}),Object(K.jsxs)(h.a,{component:"span",variant:"h4",color:"text.secondary",children:["/",F.b[z]]}),Object(K.jsxs)(h.a,{variant:"h6",children:["Refinement ",Object(K.jsx)("strong",{children:M})]}),Object(K.jsx)(h.a,{children:Object(K.jsx)(U.a,{stars:I.rarity,colored:!0})})]}),Object(K.jsx)(O.a,{item:!0,container:!0,maxWidth:"40%",alignContent:"flex-end",sx:{mt:-3},children:Object(K.jsx)(f.a,{component:"img",src:te,width:"100%",height:"auto"})})]})]}),Object(K.jsx)(v.a,{children:ne.map((function(e){if(!e.key)return null;var n=Object(Q.h)(e.value,e.unit,"flat"===e.unit?0:void 0);return Object(K.jsxs)(f.a,{sx:{display:"flex"},children:[Object(K.jsxs)(h.a,{flexGrow:1,children:[q.a[e.key]," ",Y.b.get(e.key)]}),Object(K.jsx)(h.a,{children:n})]},e.key)}))}),Object(K.jsx)(f.a,{flexGrow:1}),Object(K.jsx)(v.a,{sx:{py:1},children:Object(K.jsxs)(O.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(K.jsx)(O.a,{item:!0,xs:"auto",flexShrink:1,children:k?Object(K.jsx)(H,{size:"small",noUnselect:!0,inventory:!0,value:L,onChange:N,filter:T}):Object(K.jsx)(P.a,{location:L})}),Object(K.jsx)(O.a,{item:!0,flexGrow:1,sx:{mr:1}}),Object(K.jsx)(O.a,{item:!0,xs:"auto",children:Object(K.jsxs)(p.a,{sx:{height:"100%"},children:[!!a&&Object(K.jsx)(m.a,{color:"info",size:"small",onClick:function(){return a(B)},children:Object(K.jsx)(s.a,{icon:o.m,className:"fa-fw"})}),!!i&&Object(K.jsx)(m.a,{color:"error",size:"small",onClick:function(){return i(B)},disabled:!!L||$,children:Object(K.jsx)(s.a,{icon:o.D,className:"fa-fw"})})]})})]})})]})})})}},788:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return R}));var c=t(291),a=t(8),i=t(10),r=t(103),o=t.n(r),s=t(53),l=t(52),u=t(232),j=t(250),d=t(791),b=t(737),x=t(71),O=t(156),h=t(443),f=t(257),v=t(112),p=t(0),m=t(74),g=t(266),y=t(288),w=t(310),k=t(274),C=t(300),W=t(321),I=t(158),T=t(73),S=t(293),N=t(264),A=t(19),D=t(308),z=t(25),E=["level","rarity"];var G=t(323),M=t(273),B=t(133),K=t(1),_=Object(p.lazy)((function(){return Promise.all([t.e(1),t.e(2),t.e(20)]).then(t.bind(null,344))})),H=function(){return{editWeaponId:"",sortType:E[0],ascending:!1,rarity:[5,4],weaponType:"",maxNumToDisplay:30}};function L(e,n){return Object(i.a)(Object(i.a)({},e),n)}function P(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return Object(i.a)(Object(i.a)({},n),null!==(e=T.b.get("WeaponDisplay.state"))&&void 0!==e?e:{})}function R(e){var n=Object(p.useContext)(I.b),t=Object(p.useReducer)(L,H(),P),i=Object(a.a)(t,2),r=i[0],R=i[1],V=Object(p.useState)(!1),U=Object(a.a)(V,2),q=U[0],F=U[1],J=Object(S.a)(),Q=Object(a.a)(J,2),X=Q[0],Y=Q[1],Z=Object(p.useRef)(null),$=Object(p.useRef)(null),ee=Object(p.useState)(0),ne=Object(a.a)(ee,2),te=ne[0],ce=ne[1];Object(p.useEffect)((function(){return m.a.pageview("/weapon"),n.followAnyWeapon(Y)}),[Y,n]),Object(p.useEffect)((function(){T.b.set("WeaponDisplay.state",r)}),[r]);var ae=Object(N.a)(M.c.getAll,[]),ie=Object(p.useCallback)(function(){var e=Object(c.a)(o.a.mark((function e(t){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n._getWeapon(t)){e.next=3;break}return e.abrupt("return");case 3:if(a=v.a.t("weapon_".concat(c.key,"_gen:name")),window.confirm("Are you sure you want to remove ".concat(a,"?"))){e.next=6;break}return e.abrupt("return");case 6:n.removeWeapon(t),r.editWeaponId===t&&R({editWeaponId:""});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r.editWeaponId,R,n]),re=Object(p.useCallback)((function(e){R({editWeaponId:e}),setTimeout((function(){var e;null===(e=Z.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)}),[R,Z]),oe=Object(p.useCallback)((function(e){re(n.createWeapon(Object(B.b)(e)))}),[n,re]),se=r.sortType,le=r.ascending,ue=r.weaponType,je=r.rarity,de=Object(p.useMemo)((function(){return ae&&function(e){return{level:{getValue:function(e){var n;return null!==(n=e.level)&&void 0!==n?n:0},tieBreaker:"rarity"},rarity:{getValue:function(n){var t;return null===e||void 0===e||null===(t=e[n.key])||void 0===t?void 0:t.rarity},tieBreaker:"level"}}}(ae)}),[ae]),be=Object(p.useMemo)((function(){return ae&&function(e){return{rarity:function(n,t){var c;return t.includes(null===e||void 0===e||null===(c=e[n.key])||void 0===c?void 0:c.rarity)},weaponType:function(n,t){var c;return!t||t===(null===e||void 0===e||null===(c=e[n.key])||void 0===c?void 0:c.weaponType)}}}(ae)}),[ae]),xe=Object(p.useMemo)((function(){var e=n._getWeapons(),t=e.length;if(!de||!be)return{weaponIdList:[],totalWeaponNum:t};var c=e.filter(Object(D.a)({weaponType:ue,rarity:je},be)).sort(Object(D.b)(se,le,de)).map((function(e){return e.id}));return X&&{weaponIdList:c,totalWeaponNum:t}}),[X,n,de,be,se,le,je,ue]),Oe=xe.weaponIdList,he=xe.totalWeaponNum,fe=Object(p.useMemo)((function(){var e=Math.ceil(Oe.length/r.maxNumToDisplay),n=Object(z.b)(te,0,e-1);return{weaponIdsToShow:Oe.slice(n*r.maxNumToDisplay,(n+1)*r.maxNumToDisplay),numPages:e,currentPageIndex:n}}),[Oe,te,r.maxNumToDisplay]),ve=fe.weaponIdsToShow,pe=fe.numPages,me=fe.currentPageIndex,ge=Oe.length!==he?"".concat(Oe.length,"/").concat(he):"".concat(he),ye=Object(p.useCallback)((function(e,n){var t;null===(t=$.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),ce(n-1)}),[ce,$]),we=Object(p.useCallback)((function(){return R({editWeaponId:""})}),[R]),ke=r.editWeaponId;return Object(K.jsxs)(u.a,{sx:{mt:1,"> div":{mb:1}},children:[!!ke&&Object(K.jsx)(u.a,{ref:Z,children:Object(K.jsx)(_,{weaponId:ke,footer:!0,onClose:we})}),Object(K.jsxs)(g.a,{ref:$,sx:{p:2,pb:1},children:[Object(K.jsxs)(j.a,{container:!0,spacing:1,sx:{mb:1},children:[Object(K.jsx)(j.a,{item:!0,children:Object(K.jsx)(C.a,{sx:{height:"100%"},onChange:function(e){return R({weaponType:e})},value:ue,size:"small"})}),Object(K.jsx)(j.a,{item:!0,flexGrow:1,children:Object(K.jsx)(y.a,{sx:{height:"100%"},onChange:function(e,n){return R({rarity:n})},value:je,size:"small",children:A.g.map((function(e){return Object(K.jsxs)(d.a,{value:e,children:[Object(K.jsxs)("strong",{children:[e," "]}),Object(K.jsx)(k.a,{stars:1})]},e)}))})}),Object(K.jsx)(j.a,{item:!0,children:Object(K.jsx)(w.a,{sx:{height:"100%"},sortKeys:E,value:se,onChange:function(e){return R({sortType:e})},ascending:le,onChangeAsc:function(e){return R({ascending:e})}})})]}),Object(K.jsxs)(j.a,{container:!0,alignItems:"flex-end",children:[Object(K.jsx)(j.a,{item:!0,flexGrow:1,children:Object(K.jsx)(b.a,{count:pe,page:me+1,onChange:ye})}),Object(K.jsx)(j.a,{item:!0,children:Object(K.jsxs)(x.a,{color:"text.secondary",children:["Showing ",Object(K.jsx)("b",{children:ve.length})," out of ",ge," Weapons"]})})]})]}),Object(K.jsx)(j.a,{container:!0,spacing:1,children:Object(K.jsxs)(p.Suspense,{fallback:Object(K.jsx)(j.a,{item:!0,xs:12,children:Object(K.jsx)(O.a,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:500}})}),children:[!ke&&Object(K.jsx)(j.a,{item:!0,xs:6,md:4,lg:4,xl:3,children:Object(K.jsxs)(g.a,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[Object(K.jsx)(h.a,{children:Object(K.jsx)(x.a,{sx:{textAlign:"center"},children:"Add New Weapon"})}),Object(K.jsx)(W.a,{show:q,onHide:function(){return F(!1)},onSelect:oe}),Object(K.jsx)(u.a,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(K.jsx)(f.a,{onClick:function(){return F(!0)},sx:{borderRadius:"1em"},children:Object(K.jsx)(x.a,{variant:"h1",children:Object(K.jsx)(l.a,{icon:s.u,className:"fa-fw"})})})})]})}),ve.map((function(e){return Object(K.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,children:Object(K.jsx)(G.a,{weaponId:e,onDelete:ie,onEdit:re,canEquip:!0})},e)}))]})})]})}}}]);
//# sourceMappingURL=22.d050d403.chunk.js.map