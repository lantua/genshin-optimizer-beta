"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[314],{21977:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(29439),a=t(57621),i=t(10889),s=t(72791),c=t(60393),l=t(10600),u=t(80184);function o(e){var n=e.levelLow,t=e.levelHigh,o=e.setLow,d=e.setHigh,f=e.setBoth,h=e.dark,x=void 0!==h&&h,v=(0,s.useState)(n),m=(0,r.Z)(v,2),p=m[0],Z=m[1],j=(0,s.useState)(t),g=(0,r.Z)(j,2),b=g[0],y=g[1],k=(0,s.useCallback)((function(e,n){var t=(0,r.Z)(n,2),a=t[0],i=t[1];Z(a),y(i)}),[Z,y]);return(0,s.useEffect)((function(){return Z(n)}),[Z,n]),(0,s.useEffect)((function(){return y(t)}),[y,t]),(0,u.jsxs)(a.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:x?"contentDark.main":"contentLight.main"},children:[(0,u.jsx)(l.ZP,{value:p,onChange:function(e){return o((0,c.uZ)(e,0,t))},sx:{pl:2,width:100},inputProps:{sx:{textAlign:"center"}},startAdornment:"Level: "}),(0,u.jsx)(i.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:function(){return"Arifact Level Range"},value:[p,b],onChange:k,onChangeCommitted:function(e,n){return f(n[0],n[1])},valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0}),(0,u.jsx)(l.ZP,{value:b,onChange:function(e){return d((0,c.uZ)(e,n,20))},sx:{px:1,width:50},inputProps:{sx:{textAlign:"center"}}})]})}},8375:function(e,n,t){t.d(n,{Z:function(){return C}});var r,a=t(1413),i=t(93433),s=t(29439),c=t(30168),l=t(45987),u=t(49670),o=t(23786),d=t(57064),f=t(49900),h=t(94721),x=t(20890),v=t(72791),m=t(22020),p=t(76899),Z=t(31148),j=t(42320),g=t(33890),b=t(55942),y=t(10157),k=t(80184),w=["selectedSetKey","onChange","artifactSetsByRarity","hasUnselect"];function C(e){var n,t=e.selectedSetKey,C=void 0===t?"":t,S=e.onChange,P=e.artifactSetsByRarity,O=e.hasUnselect,E=void 0!==O&&O,D=(0,l.Z)(e,w),K=(0,m.$)("artifact").t,A=(0,j.Z)(Z.y.getAll,[]),M=null===A||void 0===A?void 0:A[C],B=(0,v.useMemo)((function(){return P||(A?Z.y.setKeysByRarities(A):{})}),[A,P]);return(0,k.jsxs)(g.Z,(0,a.Z)((0,a.Z)({},D),{},{title:null!==(n=null===M||void 0===M?void 0:M.name)&&void 0!==n?n:K(r||(r=(0,c.Z)(["editor.set.artifactSet"]))),startIcon:(null===M||void 0===M?void 0:M.defIconSrc)&&(0,k.jsx)(b.Z,{src:null===M||void 0===M?void 0:M.defIconSrc}),color:M?"success":"primary",children:[E&&(0,k.jsxs)(o.Z,{onClick:function(){return S("")},selected:""===C,disabled:""===C,children:[(0,k.jsx)(d.Z,{children:(0,k.jsx)(u.Z,{})}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.c,{t:K,i18nKey:"ui:unselect",children:"Unselect"})})]}),!!Object.keys(B).length&&Object.entries(B).reverse().flatMap((function(e,n){var t=(0,s.Z)(e,2),r=t[0],a=t[1];return[].concat((0,i.Z)((n>0||E)&&a.length?[(0,k.jsx)(h.Z,{},"".concat(r,"divi"))]:[]),(0,i.Z)(a.length?[(0,k.jsx)(o.Z,{children:(0,k.jsx)(x.Z,{children:(0,k.jsxs)(p.c,{t:K,i18nKey:"editor.set.maxRarity",children:["Max Rarity ",(0,k.jsx)(y.t,{stars:parseInt(r)})]})})},"".concat(r,"header"))]:[]),(0,i.Z)(a.map((function(e){var n,t;return(0,k.jsxs)(o.Z,{onClick:function(){return S(e)},selected:C===e,disabled:C===e,children:[(0,k.jsx)(d.Z,{children:(0,k.jsx)(b.Z,{src:null===A||void 0===A||null===(n=A[e])||void 0===n?void 0:n.defIconSrc,sx:{fontSize:"1.5em"}})}),(0,k.jsx)(f.Z,{children:null===A||void 0===A||null===(t=A[e])||void 0===t?void 0:t.name})]},e)}))))}))]}))}},43568:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(4942),a=t(29439),i=t(53174),s=t(54483),c=t(61889),l=t(20890),u=t(24518),o=t(39504),d=t(94721),f=t(47047),h=t(72791),x=t(17278),v=t(60393),m=t(3992),p=t(68198),Z=t(9321),j=t(66624),g=t(80184);function b(){return{artifactPage:!0,buildPage:!0,characterPage:!0}}function y(e){var n=e.pageKey,t=e.text,y=void 0===t?"":t,k=e.modalTitle,w=void 0===k?"":k,C=e.children,S=(0,x.Z)("InfoShown",b),P=(0,a.Z)(S,2),O=P[0],E=P[1],D=O[n],K=(0,h.useCallback)((function(e){return E((0,r.Z)({},n,e))}),[E,n]),A=(0,h.useState)(Array.isArray(y)?(0,v.F_)(y):y),M=(0,a.Z)(A,1)[0],B=function(){return K(!1)};return(0,g.jsxs)(m.Z,{children:[(0,g.jsxs)(c.ZP,{container:!0,children:[(0,g.jsx)(c.ZP,{item:!0,flexGrow:1,children:(0,g.jsx)(l.Z,{variant:"caption",pl:1,children:M})}),(0,g.jsx)(c.ZP,{item:!0,xs:"auto",children:(0,g.jsx)(u.Z,{size:"small",color:"info",variant:"contained",onClick:function(){return K(!0)},startIcon:(0,g.jsx)(s.G,{icon:i.sph}),children:(0,g.jsx)(j.v,{ns:"ui",key18:"info"})})})]}),(0,g.jsx)(Z.Z,{containerProps:{maxWidth:"xl"},open:D,onClose:function(){return B()},children:(0,g.jsxs)(m.Z,{children:[(0,g.jsx)(o.Z,{sx:{py:1},children:(0,g.jsxs)(c.ZP,{container:!0,children:[(0,g.jsx)(c.ZP,{item:!0,flexGrow:1,children:(0,g.jsx)(l.Z,{variant:"h6",children:w})}),(0,g.jsx)(c.ZP,{item:!0,children:(0,g.jsx)(p.Z,{onClick:B})})]})}),(0,g.jsx)(d.Z,{}),(0,g.jsx)(o.Z,{children:(0,g.jsx)(h.Suspense,{fallback:(0,g.jsx)(f.Z,{variant:"rectangular",width:"100%",height:500}),children:C})}),(0,g.jsx)(d.Z,{}),(0,g.jsx)(o.Z,{sx:{py:1},children:(0,g.jsx)(p.Z,{large:!0,onClick:B})})]})})]})}},14525:function(e,n,t){t.d(n,{Z:function(){return k},b:function(){return w}});var r=t(29439),a=t(4942),i=t(1413),s=t(53174),c=t(54483),l=t(39504),u=t(20890),o=t(94721),d=t(61889),f=t(2199),h=t(23786),x=t(24518),v=t(72791),m=t(71310),p=t(10600),Z=t(33890),j=t(2693),g=t(26138),b=t(44297),y=t(80184);function k(e){var n=e.statFilters,t=void 0===n?{}:n,s=e.setStatFilters,c=e.disabled,f=void 0!==c&&c,h=(0,v.useContext)(j.R).data,x=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==h.get(g.ri.weaponType).value&&x.push("physical_dmg_");var p=h.get(g.ri.charEle).value;x.push("".concat(p,"_dmg_"));var Z=x.filter((function(e){return!Object.keys(t).some((function(n){return n===e}))})),b=(0,v.useCallback)((function(e,n){return s((0,i.Z)((0,i.Z)({},t),{},(0,a.Z)({},e,n)))}),[t,s]);return(0,y.jsxs)(m.Z,{children:[(0,y.jsx)(l.Z,{sx:{py:1},children:(0,y.jsx)(u.Z,{children:"Minimum Final Stat Filter"})}),(0,y.jsx)(o.Z,{}),(0,y.jsx)(l.Z,{children:(0,y.jsxs)(d.ZP,{container:!0,spacing:1,children:[Object.entries(t).map((function(e){var n=(0,r.Z)(e,2),a=n[0],c=n[1];return(0,y.jsx)(d.ZP,{item:!0,xs:12,children:(0,y.jsx)(w,{statKey:a,statKeys:Z,setFilter:b,disabled:f,value:c,close:function(){delete t[a],s((0,i.Z)({},t))}})},a)})),(0,y.jsx)(d.ZP,{item:!0,xs:12,children:(0,y.jsx)(w,{value:void 0,close:void 0,statKeys:Z,setFilter:b,disabled:f})})]})})]})}function w(e){var n=e.statKey,t=e.statKeys,r=void 0===t?[]:t,a=e.value,i=void 0===a?0:a,l=e.close,u=e.setFilter,o=e.disabled,d=void 0!==o&&o,m="%"===b.ZP.unit(n),j=(0,v.useCallback)((function(e){return n&&u(n,e)}),[u,n]);return(0,y.jsxs)(f.Z,{sx:{width:"100%"},children:[(0,y.jsx)(Z.Z,{title:n?b.ZP.get(n):"New Stat",disabled:d,children:r.map((function(e){return(0,y.jsx)(h.Z,{onClick:function(){null===l||void 0===l||l(),u(e,i)},children:b.ZP.get(e)},e)}))}),(0,y.jsx)(p.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,y.jsx)(p.ZP,{disabled:!n,float:m,value:i,placeholder:"Min Value",onChange:j,sx:{px:2}})}),!!l&&(0,y.jsx)(x.Z,{color:"error",onClick:l,disabled:d,children:(0,y.jsx)(c.G,{icon:s.I7k})})]})}},20323:function(e,n,t){function r(){return{tcMode:!1}}t.d(n,{c:function(){return r}})},29314:function(e,n,t){t.r(n),t.d(n,{default:function(){return Qn}});var r=t(45987),a=t(15861),i=t(29439),s=t(93433),c=t(1413),l=t(87757),u=t.n(l),o=t(53174),d=t(54483),f=t(72247),h=t(9912),x=t(96739),v=t(68870),m=t(19658),p=t(23060),Z=t(39504),j=t(20890),g=t(94721),b=t(61889),y=t(24518),k=t(2199),w=t(23786),C=t(90388),S=t(47047),P=t(72791),O=t(16129),E=t(91523);function D(){return new Worker(t.p+"static/js/BackgroundWorker.3be35dd3.worker.js")}var K=t(21977),A=t(3992),M=t(71310),B=t(36944),R=t(68198),T=t(33890),F=t(43568),_=t(9321),I=t(91839),z=t(14525),G=t(3997),L=t(2693),N=t(87234),V=t(26138),H=t(69292),W=t(20323),q=t(44297),U=t(16134);var Y=t(50920),J=t(53561),Q=t(17278),$=t(68544),X=t(42320),ee=t(47639),ne=t(60393),te=t(77474),re=t(39738),ae=t(37762),ie=t(94294),se=t(72456),ce=t(18455),le=t(56125),ue=t(66934),oe=t(19913),de=t(37389),fe=t(82839),he=t(90466),xe=t(12891),ve=t(42633),me=t(27281),pe=t(64694),Ze=t(62066),je=t(80184);function ge(e){var n=e.chartData,t=e.plotBase,r=e.setPlotBase,a=e.disabled,s=void 0!==a&&a,c=(0,P.useState)(!1),l=(0,i.Z)(c,2),u=l[0],o=l[1],d=(0,P.useState)(!0),x=(0,i.Z)(d,2),v=x[0],m=x[1],p=(0,P.useContext)(L.R).data,k=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==p.get(V.ri.weaponType).value&&k.push("physical_dmg_"),k.push("".concat(p.get(V.ri.charEle).value,"_dmg_"));var C=(0,P.useMemo)((function(){if(!n)return{displayData:null,downloadData:null};var e,t=n.map((function(e){var n=e.value;return{x:e.plot,y:n}})).sort((function(e,n){return e.x-n.x})),r=[],a=(0,ae.Z)(t);try{for(a.s();!(e=a.n()).done;){for(var i=e.value,s=void 0;s=r.pop();)if(s.y>i.y){r.push(s);break}r.push(i)}}catch(l){a.e(l)}finally{a.f()}r[0].x!==t[0].x&&(t[0].min=r[0].y),r.forEach((function(e){e.min=e.y}));var c={minimum:r.map((function(e){return[e.x,e.y]})),allData:t.map((function(e){return[e.x,e.y]}))};return{displayData:t,downloadData:c}}),[n]),S=C.displayData,O=C.downloadData;return(0,je.jsxs)(M.Z,{children:[(0,je.jsx)(Z.Z,{children:(0,je.jsxs)(b.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(j.Z,{variant:"h6",children:"Optimization Target vs"})}),(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsxs)(T.Z,{title:t?q.ZP.get(t):"Not Selected",color:t?"success":"primary",disabled:s,children:[(0,je.jsx)(w.Z,{onClick:function(){r("")},children:"Unselect"}),(0,je.jsx)(g.Z,{}),k.map((function(e){return(0,je.jsx)(w.Z,{onClick:function(){r(e)},children:q.ZP.get(e)},e)}))]})}),(0,je.jsx)(b.ZP,{item:!0,flexGrow:1,children:(0,je.jsx)(ce.Z,{placement:"top",title:"Using data from the builder, this will generate a graph to visualize Optimization Target vs. a selected stat. The graph will show the maximum Optimization Target value per 0.01 of the selected stat.",children:(0,je.jsx)(ie.Z,{})})}),!!O&&(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(y.Z,{startIcon:v?(0,je.jsx)(f.Z,{}):(0,je.jsx)(h.Z,{}),color:v?"success":"secondary",onClick:function(){return m(!v)},children:"Show Min Stat Threshold"})}),!!O&&(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(y.Z,{color:"info",startIcon:(0,je.jsx)(se.Z,{}),onClick:function(){return o(!u)},children:"Download Data"})})]})}),!!S&&(0,je.jsx)(g.Z,{}),!!S&&(0,je.jsxs)(Z.Z,{children:[(0,je.jsx)(le.Z,{in:!!O&&u,children:(0,je.jsx)(A.Z,{sx:{mb:2},children:(0,je.jsxs)(Z.Z,{children:[(0,je.jsx)(j.Z,{children:"Min Data"}),(0,je.jsx)(ye,{data:null===O||void 0===O?void 0:O.minimum}),(0,je.jsx)(j.Z,{children:"All Data"}),(0,je.jsx)(ye,{data:null===O||void 0===O?void 0:O.allData})]})})}),(0,je.jsx)(ke,{displayData:S,plotBase:t,showMin:v})]})]})}var be=(0,ue.ZP)("textarea")({width:"100%",fontFamily:"monospace",resize:"vertical",minHeight:"5em"});function ye(e){var n=e.data;return(0,je.jsx)(be,{readOnly:!0,value:JSON.stringify(n),onClick:function(e){var n=e.target;n.selectionStart=0,n.selectionEnd=n.value.length}})}function ke(e){var n=e.displayData,t=e.plotBase,r=e.showMin,a=q.ZP.unitStr(t);return(0,je.jsx)(oe.h,{width:"100%",height:600,children:(0,je.jsxs)(de.c,{data:n,children:[(0,je.jsx)(fe.q,{strokeDasharray:"3 3"}),(0,je.jsx)(he.K,{dataKey:"x",scale:"linear",unit:"flat"===a?void 0:a,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:function(e){return e>1e4?e.toFixed():e.toFixed(1)}}),(0,je.jsx)(xe.B,{name:"DMG",domain:["auto","auto"],allowDecimals:!1,tick:{fill:"white"},type:"number"}),(0,je.jsx)(ve.d,{dataKey:"y",range:[3,25]}),(0,je.jsx)(me.D,{}),(0,je.jsx)(pe.b,{name:"Optimization Target",dataKey:"y",fill:"#8884d8",line:!0,lineType:"fitting",isAnimationActive:!1}),r&&(0,je.jsx)(Ze.x,{name:"Minimum Stat Requirement Threshold",dataKey:"min",stroke:"#ff7300",type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1})]})})}var we=t(64737),Ce=t(78661),Se=t(24351);function Pe(e,n,t,r,a,i){for(var s=i,l={pruneNodeRange:!0},u={pruneNodeRange:!0},o={reaffine:!0},d={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0},f=0;Object.values(s).some((function(e){return e}))&&f++<20;){if(s.pruneOrder){delete s.pruneOrder;var h=Ee(t,r,a);t!==h&&(t=h,s=(0,c.Z)((0,c.Z)({},s),l))}if(s.pruneArtRange){delete s.pruneArtRange;var x=De(e,t,n);t!==x&&(t=x,s=(0,c.Z)((0,c.Z)({},s),u))}if(s.pruneNodeRange){delete s.pruneNodeRange;var v=Ke(e,t);e!==v&&(e=v,s=(0,c.Z)((0,c.Z)({},s),o))}if(s.reaffine){delete s.reaffine;var m=Oe(e,t),p=m.nodes,Z=m.arts;e===p&&t===Z||(e=p,t=Z,s=(0,c.Z)((0,c.Z)({},s),d))}}return{nodes:e,arts:t}}function Oe(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set,a=new Set;function l(e,n){n?r.add(e):e.operands.forEach((function(e){var n=e;r.has(n)&&a.add(n)}))}var u=new Set;if((0,we.aD)(e,(function(e){}),(function(e){var n=e.operation;switch(n){case"read":if("number"!==e.type||"dyn"!==e.path[0]||"add"!==e.accu)throw new Error("Found unsupported ".concat(n," node at path ").concat(e.path," when computing affine nodes"));u.add(e.path[1]),l(e,!0);break;case"add":l(e,e.operands.every((function(e){return r.has(e)})));break;case"mul":var t=e.operands.filter((function(e){return"const"!==e.operation}));l(e,0===t.length||1===t.length&&r.has(t[0]));break;case"const":if("string"===typeof e.value||void 0===e.value)throw new Error("Found constant ".concat(e.value," while compacting"));l(e,!0);break;case"res":case"threshold":case"sum_frac":case"max":case"min":l(e,!1);break;case"data":case"subscript":case"lookup":case"match":case"prio":throw new Error("Found unsupported ".concat(n," node when computing affine nodes"));default:(0,ne.UT)(n)}})),(0,s.Z)(a).every((function(e){var n=e.operation;return"read"===n||"const"===n})))return{nodes:e,arts:n};var o=-1;function d(){for(;u.has("".concat(++o)););return"".concat(o)}e.forEach((function(e){return r.has(e)&&a.add(e)}));var f=(0,s.Z)(a).filter((function(e){return"const"!==e.operation})),h=new Map(f.map((function(e){return[e,t||"read"!==e.operation||"dyn"!==e.path[0]?(0,c.Z)((0,c.Z)({},(0,Ce.UF)(["dyn","".concat(d())])),{},{accu:"add"}):e]})));function x(e){var n=(0,H.CG)((0,s.Z)(h.keys()),{dyn:(0,ne.xh)(e,(function(e){return(0,Ce.a9)(e)}))},(function(e){return!0}));return Object.fromEntries((0,s.Z)(h.values()).map((function(e,t){return[e.path[1],n[t].value]})))}for(var v={nodes:e=(0,we.uW)(e,(function(e){var n;return null!==(n=h.get(e))&&void 0!==n?n:e}),(function(e){return e})),arts:{base:x(n.base),values:(0,ne.O)(Se.eV,(function(e){return n.values[e].map((function(e){return{id:e.id,set:e.set,values:x(e.values)}}))}))}},m=Object.entries(x({})),p=0,Z=Object.values(v.arts.values);p<Z.length;p++){var j,g=Z[p],b=(0,ae.Z)(g);try{for(b.s();!(j=b.n()).done;){var y,k=j.value.values,w=(0,ae.Z)(m);try{for(w.s();!(y=w.n()).done;){var C=(0,i.Z)(y.value,2),S=C[0],P=C[1];k[S]-=P}}catch(O){w.e(O)}finally{w.f()}}}catch(O){b.e(O)}finally{b.f()}}return v}function Ee(e,n,t){var r=!1,a=(0,ne.O)(Se.eV,(function(a){var s=e.values[a],c=s.filter((function(e){var r=0;return s.every((function(a){var s=Object.entries(a.values).every((function(n){var t=(0,i.Z)(n,2),r=t[0];return t[1]>=e.values[r]})),c=Object.entries(a.values).some((function(n){var t=(0,i.Z)(n,2),r=t[0];return t[1]>e.values[r]}));return s&&(c||a.id>e.id)&&(!t.has(e.set)||t.has(a.set))&&r++,r<n}))}));return c.length!==s.length&&(r=!0),c}));return r?{base:e.base,values:a}:e}function De(e,n,t){for(var r=Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[t,{min:r,max:r}]}))),a={arts:n},s=function(){var n=(0,ne.O)(Se.eV,(function(e){return Me(a.arts.values[e])})),i=(0,ne.O)(Se.eV,(function(e){return Ae(Object.entries(n).map((function(n){return n[0]===e?r:n[1]})).filter((function(e){return e})))})),s=!1,c=(0,ne.O)(Se.eV,(function(n){var r=a.arts.values[n].filter((function(r){var a=Ae([Me([r]),i[n]]),s=Be(e,a);return e.every((function(e,n){var r;return s.get(e).max>=(null!==(r=t[n])&&void 0!==r?r:-1/0)}))}));return r.length!==a.arts.values[n].length&&(s=!0),r}));if(!s)return"break";a.arts={base:a.arts.base,values:c}};;){if("break"===s())break}return a.arts}function Ke(e,n){var t=Be(e,Ae([Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[t,{min:r,max:r}]})))].concat((0,s.Z)(Object.values(n.values).map((function(e){return Me(e)}))))));return(0,we.uW)(e,(function(e){var n=e.operation,r=e.operands.map((function(e){return t.get(e)}));switch(n){case"threshold":var a=(0,i.Z)(r,4),c=a[0],l=a[1],u=a[2],o=a[3];if(c.min>=l.max)return e.operands[2];if(c.max<l.min)return(0,Ce.a9)(0);if(u.max===u.min&&o.max===o.min&&u.min===o.min&&isFinite(u.min))return(0,Ce.a9)(u.max);break;case"min":var d=e.operands.filter((function(e,n){var t=r[n];return r.every((function(e,n){return t.min<=e.max}))}));if(d.length<r.length)return Ce.VV.apply(void 0,(0,s.Z)(d));break;case"max":var f=e.operands.filter((function(e,n){var t=r[n];return r.every((function(e){return t.max>=e.min}))}));if(f.length<r.length)return Ce.Fp.apply(void 0,(0,s.Z)(f))}return e}),(function(e){return e}))}function Ae(e){var n={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],a=t[1];n[r]?(n[r].min+=a.min,n[r].max+=a.max):n[r]=(0,c.Z)({},a)}))})),n}function Me(e){var n={},t=new Set;return e.forEach((function(e){var r=e.values;Object.keys(r).forEach((function(e){return t.add(e)}));var a,i=(0,ae.Z)(t);try{for(i.s();!(a=i.n()).done;){var s,c=a.value,l=null!==(s=r[c])&&void 0!==s?s:0;n[c]?(n[c].max<l&&(n[c].max=l),n[c].min>l&&(n[c].min=l)):n[c]={min:l,max:l}}}catch(u){i.e(u)}finally{i.f()}})),n}function Be(e,n){var t=new Map;return(0,we.aD)(e,(function(e){}),(function(e){var r,a,s=e,c=s.operation,l=s.operands.map((function(e){return t.get(e)}));switch(c){case"read":if("dyn"!==s.path[0])throw new Error("Found non-dyn path ".concat(s.path," while computing range"));a=null!==(r=n[s.path[1]])&&void 0!==r?r:{min:0,max:0};break;case"const":a=Re([s.value]);break;case"subscript":a=Re(s.list);break;case"add":case"min":case"max":a={min:H.aj[c](l.map((function(e){return e.min}))),max:H.aj[c](l.map((function(e){return e.max})))};break;case"res":a={min:H.aj[c]([l[0].max]),max:H.aj[c]([l[0].min])};break;case"mul":a=l.reduce((function(e,n){return Re([e.min*n.min,e.min*n.max,e.max*n.min,e.max*n.max])}));break;case"threshold":a=l[0].min>=l[1].max?l[2]:l[0].max<l[1].min?Re([0]):Re([0],[l[2]]);break;case"sum_frac":var u=(0,i.Z)(l,2),o=u[0],d=u[1],f={min:o.min+d.min,max:o.max+d.max};a=f.min<=0&&f.max>=0?o.min<=0&&o.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:Re([o.min/f.min,o.min/f.max,o.max/f.min,o.max/f.max]);break;case"data":case"lookup":case"match":throw new Error("Unsupported ".concat(c," node"));default:(0,ne.UT)(c)}t.set(s,a)})),t}function Re(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Math.max.apply(Math,(0,s.Z)(e).concat((0,s.Z)(n.map((function(e){return e.max}))))),r=Math.min.apply(Math,(0,s.Z)(e).concat((0,s.Z)(n.map((function(e){return e.min})))));return{min:r,max:t}}function Te(e,n){return{base:e.base,values:(0,ne.O)(Se.eV,(function(t){var r=n[t];switch(r.kind){case"id":return e.values[t].filter((function(e){return r.ids.has(e.id)}));case"exclude":return e.values[t].filter((function(e){return!r.sets.has(e.set)}));case"required":return e.values[t].filter((function(e){return r.sets.has(e.set)}))}}))}}function Fe(e,n){return e.flatMap((function(e){return e})).sort((function(e,n){return n.value-e.value})).slice(0,n)}function _e(e){for(var n=.01,t=new Set(e.flatMap((function(e){return Object.values(e).map((function(e){return Math.round(e.plot/n)}))})));t.size>1500;)n*=2,t=new Set((0,s.Z)(t).map((function(e){return Math.round(e/2)})));var r,a={},i=(0,ae.Z)(e);try{for(i.s();!(r=i.n()).done;)for(var c=r.value,l=0,u=Object.values(c);l<u.length;l++){var o=u[l],d=Math.round(o.plot/n)*n;(!a[d]||a[d].value<o.value)&&(a[d]=o)}}catch(f){i.e(f)}finally{i.f()}return a}function Ie(e){return Se.eV.reduce((function(n,t){return n*e.values[t].length}),1)}var ze=t(66647),Ge=t(31148),Le=t(25617),Ne=t(95614),Ve=t(71946);function He(e){var n=e.index,t=e.onClick,r=e.compareBuild,a=e.disabled,s=(0,P.useContext)(L.R),l=s.character,u=s.data,o=s.oldData,d=(0,X.Z)(Ge.y.getAll,[]);if(!l||!d||!o)return null;var f=Se.eV.every((function(e){return u.get(V.ri.art[e].id).value===o.get(V.ri.art[e].id).value})),h=(0,c.Z)({},s);r||(h.oldData=void 0);var x={};return Se.eV.forEach((function(e){var n=u.get(V.ri.art[e].set).value;n&&(x[n]?x[n].push(e):x[n]=[e])})),(0,je.jsx)(M.Z,{children:(0,je.jsx)(P.Suspense,{fallback:(0,je.jsx)(S.Z,{variant:"rectangular",width:"100%",height:600}),children:(0,je.jsx)(ze.Z,{onClick:t,disabled:a,children:(0,je.jsxs)(Z.Z,{children:[(0,je.jsxs)(b.ZP,{container:!0,spacing:1,sx:{pb:1},children:[(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(j.Z,{variant:"h6",children:(0,je.jsx)(Le.Z,{color:"info",children:(0,je.jsxs)("strong",{children:["#",n+1,f?" (Equipped)":""]})})})}),Object.entries(x).sort((function(e,n){var t=(0,i.Z)(e,2),r=(t[0],t[1]),a=(0,i.Z)(n,2);a[0];return a[1].length-r.length})).map((function(e){var n,t=(0,i.Z)(e,2),r=t[0],a=t[1];return(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(j.Z,{variant:"h6",children:(0,je.jsxs)(Le.Z,{color:f?"success":"primary",children:[a.map((function(e){return(0,Ne.Ir)(e)}))," ",null!==(n=null===d||void 0===d?void 0:d[r].name)&&void 0!==n?n:""]})})},r)}))]}),(0,je.jsx)(L.R.Provider,{value:h,children:(0,je.jsx)(Ve.Z,{})})]})})})})}var We=t(49670),qe=t(10157),Ue=t(31284);function Ye(e){var n=e.disabled,t=(0,P.useContext)(L.R).character,r=(0,P.useState)(!1),a=(0,i.Z)(r,2),s=a[0],c=a[1],l=(0,P.useCallback)((function(){return c(!0)}),[c]),u=(0,P.useCallback)((function(){return c(!1)}),[c]),o=(0,P.useMemo)((function(){return Object.keys(t.conditional).filter((function(e){return Se.q2.includes(e)})).length}),[t]);return(0,je.jsx)(M.Z,{children:(0,je.jsxs)(Z.Z,{children:[(0,je.jsx)(y.Z,{fullWidth:!0,onClick:l,disabled:n,children:(0,je.jsxs)("span",{children:["Default Artifact Set Effects Conditionals ",!!o&&(0,je.jsxs)(Le.Z,{color:"success",children:[o," Selected"]})]})}),(0,je.jsx)(Je,{open:s,onClose:u,artifactCondCount:o})]})})}function Je(e){var n=e.open,t=e.onClose,r=e.artifactCondCount,a=(0,P.useContext)(L.R),s=a.character,c=a.characterDispatch,l=(0,X.Z)(Ge.y.getAll,[]),u=(0,P.useCallback)((function(){var e=Object.fromEntries(Object.entries(s.conditional).filter((function(e){var n=(0,i.Z)(e,2),t=n[0];n[1];return!Se.q2.includes(t)})));c({conditional:e})}),[s,c]);if(!l)return null;var o=Object.entries(Ge.y.setKeysByRarities(l)).reverse().flatMap((function(e){return(0,i.Z)(e,2)[1]}));return(0,je.jsx)(_.Z,{open:n,onClose:t,children:(0,je.jsxs)(A.Z,{children:[(0,je.jsx)(Z.Z,{children:(0,je.jsxs)(b.ZP,{container:!0,spacing:1,children:[(0,je.jsx)(b.ZP,{item:!0,flexGrow:1,children:(0,je.jsxs)(j.Z,{variant:"h6",children:["Default Artifact Set Effects ",!!r&&(0,je.jsxs)(Le.Z,{color:"success",children:[r," Selected"]})]})}),(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(y.Z,{onClick:u,startIcon:(0,je.jsx)(We.Z,{}),children:"Reset All"})}),(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(R.Z,{onClick:t})})]})}),(0,je.jsx)(g.Z,{}),(0,je.jsxs)(Z.Z,{children:[(0,je.jsx)(M.Z,{sx:{mb:1},children:(0,je.jsx)(Z.Z,{children:(0,je.jsx)(j.Z,{children:"Some artifacts provide conditional stats. This windows allows you to select those stats, so they can take effect during build calculation, when artifact sets are not specified."})})}),(0,je.jsx)(b.ZP,{container:!0,spacing:1,children:o.map((function(e){var n,t=l[e];return Object.values(t.setEffects).some((function(e){return e.document&&e.document.some((function(e){return e.conditional}))}))?(0,je.jsx)(b.ZP,{item:!0,xs:6,lg:4,children:(0,je.jsxs)(M.Z,{sx:{height:"100%"},children:[(0,je.jsxs)(v.Z,{className:"grad-".concat(t.rarity[0],"star"),width:"100%",sx:{display:"flex"},children:[(0,je.jsx)(v.Z,{component:"img",src:t.defIconSrc,sx:{height:100,width:"auto"}}),(0,je.jsxs)(v.Z,{sx:{flexGrow:1,px:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,je.jsx)(j.Z,{variant:"h6",children:null!==(n=null===l||void 0===l?void 0:l[e].name)&&void 0!==n?n:""}),(0,je.jsx)(j.Z,{variant:"subtitle1",children:t.rarity.map((function(e,n){return(0,je.jsxs)("span",{children:[e,(0,je.jsx)(qe.t,{stars:1})," ",n<t.rarity.length-1?"/ ":null]},e)}))})]})]}),(0,je.jsx)(Z.Z,{children:(0,je.jsx)(b.ZP,{item:!0,display:"flex",flexDirection:"column",gap:1,children:Object.keys(t.setEffects).map((function(n){return(0,je.jsx)(Ue.Z,{setKey:e,setNumKey:parseInt(n)},n)}))})})]})},e):null}))})]}),(0,je.jsx)(g.Z,{}),(0,je.jsx)(Z.Z,{sx:{py:1},children:(0,je.jsx)(R.Z,{large:!0,onClick:t})})]})})}var Qe=t(8375);function $e(e){var n,t,r,a=e.index,s=e.setFilters,c=e.onChange,l=e.disabled,u=void 0!==l&&l,o=s[a],d=o.key,f=o.num,h=(0,X.Z)(Ge.y.getAll,[]),x=(0,P.useMemo)((function(){if(h){var e=Object.fromEntries(Object.entries(Ge.y.setKeysByRarities(h)).map((function(e){var n=(0,i.Z)(e,2);return[n[0],n[1].filter((function(e){var n,t;if(s.some((function(n){return n.key===e})))return!1;var r=Object.keys(null!==(n=null===h||void 0===h||null===(t=h[e])||void 0===t?void 0:t.setEffects)&&void 0!==n?n:{}),i=s.reduce((function(e,n,t){return n.key&&t!==a?e+n.num:e}),0);return!r.every((function(e){return parseInt(e)+i>5}))}))]})));return e}}),[h,s,a]),v=s.reduce((function(e,n){return n.key?e+n.num:e}),0);return(0,je.jsxs)(M.Z,{children:[(0,je.jsx)(Z.Z,{children:(0,je.jsxs)(k.Z,{children:[h&&(0,je.jsx)(Qe.Z,{hasUnselect:!0,selectedSetKey:d,artifactSetsByRarity:x,disabled:u,onChange:function(e){var n,t,r;return c(a,e,null!==(n=parseInt(Object.keys(null!==(t=null===(r=h[e])||void 0===r?void 0:r.setEffects)&&void 0!==t?t:{})[0]))&&void 0!==n?n:0)}}),(0,je.jsx)(T.Z,{title:"".concat(f,"-set"),disabled:u||!d||v>=5,children:Object.keys(null!==(n=null===h||void 0===h||null===(t=h[d])||void 0===t?void 0:t.setEffects)&&void 0!==n?n:{}).map((function(e){var n=s.reduce((function(e,n){return n.key&&n.key!==d?e+n.num:e}),0);return parseInt(e)+n<=5&&(0,je.jsx)(w.Z,{onClick:function(){var n;return c(a,s[a].key,null!==(n=parseInt(e))&&void 0!==n?n:0)},children:"".concat(e,"-set")},e)}))})]})}),!!d&&(0,je.jsx)(g.Z,{}),!!d&&(0,je.jsx)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:Object.keys(null!==(r=null===h||void 0===h?void 0:h[d].setEffects)&&void 0!==r?r:{}).map((function(e){return parseInt(e)})).filter((function(e){return e<=f})).map((function(e){return(0,je.jsx)(Ue.Z,{setKey:d,setNumKey:e},d+e)}))})]})}var Xe=t(15021),en=t(14763);function nn(){var e=(0,P.useContext)(L.R),n=e.data,t=e.character,r=Object.keys(null===t||void 0===t?void 0:t.bonusStats);if(!r.length)return null;var a=r.map((function(e){return n.get(V.ri.total[e])}));return(0,je.jsxs)(M.Z,{children:[(0,je.jsx)(Z.Z,{sx:{py:1},children:(0,je.jsx)(j.Z,{children:"Bonus Stats"})}),(0,je.jsx)(g.Z,{}),(0,je.jsx)(Z.Z,{children:(0,je.jsx)(en.lD,{sx:{my:0},children:a.map((function(e){return(0,je.jsx)(Xe.ZP,{children:(0,je.jsx)(en.JW,{node:e})},e.key)}))})})]})}var tn=t(57482),rn=t(52771),an=1e7,sn=(0,ue.ZP)("strong")({fontFamily:"monospace"}),cn=(0,ue.ZP)(tn.Z)((function(e){e.theme;return{height:10,borderRadius:5}}));function ln(e){var n,t,r,a,i=e.totBuildNumber,s=e.generatingBuilds,c=e.generationSkipped,l=e.generationProgress,u=e.generationDuration,o=e.characterName,d=e.maxBuildsToShow,f=null!==(n=null===i||void 0===i?void 0:i.toLocaleString())&&void 0!==n?n:i,h=i-c,x=null!==(t=null===l||void 0===l?void 0:l.toLocaleString())&&void 0!==t?t:l,v=null!==(r=null===c||void 0===c?void 0:c.toLocaleString())&&void 0!==r?r:c,p=null!==(a=null===h||void 0===h?void 0:h.toLocaleString())&&void 0!==a?a:h,Z=!!c&&(0,je.jsxs)("span",{children:["(",(0,je.jsx)("b",{children:v})," skipped)"]}),g="success",y="",k="",w=void 0;return s?(w=100*l/h,y=(0,je.jsxs)(j.Z,{children:["Generating and testing ",(0,je.jsxs)(sn,{children:[x,"/",p]})," build configurations against the criteria for ",(0,je.jsx)("b",{children:o}),". ",Z]}),k=(0,je.jsxs)(j.Z,{children:["Time elapsed: ",(0,je.jsx)(sn,{children:(0,rn.e6)(Math.round(u))})]})):!s&&l?(w=100,y=(0,je.jsxs)(j.Z,{children:["Generated and tested ",(0,je.jsx)(sn,{children:p})," Build configurations against the criteria for ",(0,je.jsx)("b",{children:o}),". ",Z]}),k=(0,je.jsxs)(j.Z,{children:["Total duration: ",(0,je.jsx)(sn,{children:(0,rn.e6)(Math.round(u))})]})):0===i?(y=(0,je.jsxs)(j.Z,{children:["Current configuration will not generate any builds for ",(0,je.jsx)("b",{children:o}),". Please change your Artifact configurations, or add/include more Artifacts."]}),g="error"):i>an?(y=(0,je.jsxs)(j.Z,{children:["Current configuration will generate ",(0,je.jsx)(sn,{children:f})," potential builds for ",(0,je.jsx)("b",{children:o}),". This might take quite a while to generate..."]}),g="warning"):y=(0,je.jsxs)(j.Z,{children:["Current configuration ",i<=d?"generated":"will generate"," ",(0,je.jsx)(sn,{children:f})," builds for ",(0,je.jsx)("b",{children:o}),"."]}),(0,je.jsxs)(m.Z,{severity:g,variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[y&&y,k&&k,void 0!==w&&(0,je.jsxs)(b.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(j.Z,{children:"".concat(w.toFixed(1),"%")})}),(0,je.jsx)(b.ZP,{item:!0,flexGrow:1,children:(0,je.jsx)(cn,{variant:"determinate",value:w,color:"primary"})})]})]})}var un=t(37355),on=t(9585),dn=t(66887),fn=t(91732);function hn(){var e=(0,P.useState)(!1),n=(0,i.Z)(e,2),t=n[0],r=n[1],a=(0,P.useContext)(L.R).data,s=a.get(V.ri.enemy.level),c=a.get(V.ri.enemy.defRed),l=a.get(V.ri.enemy.defIgn);return(0,je.jsxs)(M.Z,{children:[(0,je.jsx)(on.Z,{action:(0,je.jsx)(fn.Z,{expand:t,onClick:function(){return r(!t)},"aria-expanded":t,"aria-label":"show more",size:"small",children:(0,je.jsx)(un.Z,{})}),title:(0,je.jsxs)(j.Z,{children:[q.ZP.get(s.key)," ",(0,je.jsx)("strong",{children:(0,q.EC)(s.value,s.unit,0)})]})}),(0,je.jsx)(g.Z,{}),(0,je.jsx)(Z.Z,{children:(0,je.jsxs)(b.ZP,{container:!0,spacing:1,children:[Se.Kj.map((function(e){return(0,je.jsx)(b.ZP,{item:!0,xs:3,children:(0,je.jsx)(dn.Q2,{element:e})},e)})),(0,je.jsx)(b.ZP,{item:!0,xs:4,children:(0,je.jsxs)(j.Z,{children:["DEF Reduction ",(0,q.EC)(c.value,c.unit)]})}),(0,je.jsx)(b.ZP,{item:!0,xs:4,children:(0,je.jsxs)(j.Z,{children:["DEF Reduction ",(0,q.EC)(l.value,l.unit)]})})]})}),(0,je.jsx)(le.Z,{in:t,timeout:"auto",unmountOnExit:!0,children:(0,je.jsx)(Z.Z,{sx:{pt:0},children:(0,je.jsx)(dn.$r,{bsProps:{xs:12}})})})]})}var xn=t(32490);function vn(e){var n=e.disabled;return(0,je.jsxs)(M.Z,{children:[(0,je.jsx)(Z.Z,{sx:{py:1},children:(0,je.jsxs)(b.ZP,{container:!0,children:[(0,je.jsx)(b.ZP,{item:!0,flexGrow:1,children:(0,je.jsx)(j.Z,{children:"Hit Mode Options"})}),(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(xn.pg,{size:"small",disabled:n})})]})}),(0,je.jsx)(g.Z,{}),(0,je.jsxs)(Z.Z,{children:[(0,je.jsx)(xn.Hn,{fullWidth:!0,size:"small",disabled:n}),(0,je.jsx)(xn.oX,{fullWidth:!0,size:"small",disabled:n,sx:{mt:1}})]})]})}var mn=t(96106),pn=t(75545),Zn=t(19272),jn=["sands","goblet","circlet"];function gn(e){var n=e.mainStatAssumptionLevel,t=e.mainStatKeys,r=e.onChangeMainStatKey,a=e.onChangeAssLevel,i=e.disabled,s=void 0!==i&&i;return(0,je.jsxs)(M.Z,{children:[(0,je.jsx)(Z.Z,{sx:{py:1},children:(0,je.jsxs)(b.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,je.jsx)(b.ZP,{item:!0,flexGrow:1,children:(0,je.jsx)(j.Z,{children:"Artifact Main Stat"})}),(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(mn.Z,{placement:"top",title:(0,je.jsxs)(j.Z,{children:[(0,je.jsx)("strong",{children:"Level Assumption"})," changes mainstat value to be at least a specific level. Does not change substats."]}),children:(0,je.jsx)(ie.Z,{})})}),(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(yn,{mainStatAssumptionLevel:n,setmainStatAssumptionLevel:function(e){return a(e)},disabled:s})})]})}),(0,je.jsx)(g.Z,{}),(0,je.jsx)(Z.Z,{sx:{"> div:nth-last-of-type(n+2)":{mb:1}},children:jn.map((function(e){var n=t[e].length;return(0,je.jsxs)(A.Z,{children:[(0,je.jsx)(Z.Z,{sx:{py:1},children:(0,je.jsxs)(b.ZP,{container:!0,spacing:1,children:[(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(Ne.ZP,{slotKey:e})}),(0,je.jsx)(b.ZP,{item:!0,flexGrow:1,children:(0,je.jsx)(Le.Z,{color:"info",children:n?"".concat(n," Selected"):"Any"})}),(0,je.jsx)(b.ZP,{item:!0,children:(0,je.jsx)(y.Z,{color:"error",size:"small",disabled:!t[e].length||s,onClick:function(){return r(e)},children:(0,je.jsx)(We.Z,{})})})]})}),(0,je.jsx)(g.Z,{}),(0,je.jsx)(Z.Z,{children:(0,je.jsx)(b.ZP,{container:!0,spacing:1,children:Zn.Z.slotMainStats(e).map((function(n,a){var i=t[e].includes(n);return(0,je.jsx)(b.ZP,{item:!0,xs:a<3?4:6,children:(0,je.jsx)(y.Z,{fullWidth:!0,size:"small",color:i?"success":"secondary",disabled:s,sx:{height:"100%"},onClick:function(){return r(e,n)},startIcon:pn.Z[n],children:q.ZP.get(n)})},n)}))})})]},e)}))})]})}var bn={0:(0,je.jsx)("span",{children:"No level assumption"}),4:(0,je.jsx)("span",{children:"Assume at least level 4"}),8:(0,je.jsx)("span",{children:"Assume at least level 8"}),12:(0,je.jsx)("span",{children:"Assume at least level 12"}),16:(0,je.jsx)("span",{children:"Assume at least level 16"}),20:(0,je.jsx)("span",{children:"Assume at least level 20"})};function yn(e){var n=e.mainStatAssumptionLevel,t=void 0===n?0:n,r=e.setmainStatAssumptionLevel,a=e.disabled;return(0,je.jsx)(T.Z,{color:t?"warning":"primary",disabled:a,title:bn[t],children:Object.entries(bn).map((function(e){var n=(0,i.Z)(e,2),t=n[0],a=n[1];return(0,je.jsx)(w.Z,{onClick:function(){return r(parseInt(t))},children:a},t)}))})}var kn=t(78593),wn=t(25028),Cn=t(91702),Sn=t(55942),Pn=t(8430),On=(0,ue.ZP)(y.Z)({color:"black",backgroundColor:"white","&:hover":{backgroundColor:"#e1e1e1"}});function En(e){var n=e.optimizationTarget,t=e.setTarget,r=e.disabled,a=void 0!==r&&r,s=(0,P.useState)(!1),c=(0,i.Z)(s,2),l=c[0],u=c[1],o=(0,P.useCallback)((function(){return!a&&u(!0)}),[u,a]),d=(0,P.useCallback)((function(){return u(!1)}),[u]),f=(0,P.useCallback)((function(e){d(),t(e)}),[d,t]),h=(0,P.useContext)(L.R).data,x=(0,Pn.U)(h);return(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)(On,{onClick:o,disabled:a,children:(0,je.jsx)(An,{optimizationTarget:n})}),(0,je.jsx)(_.Z,{open:l,onClose:d,children:(0,je.jsx)(A.Z,{children:(0,je.jsx)(Z.Z,{children:(0,je.jsx)(kn.ZP,{columns:{xs:1,sm:2,md:3},spacing:1,children:x.map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return(0,je.jsx)(Dn,{displayNs:r,sectionKey:t,setTarget:f},t)}))})})})})]})}function Dn(e){var n=e.displayNs,t=e.sectionKey,r=e.setTarget,a=(0,P.useContext)(L.R).data,s=(0,X.Z)((0,Pn.f)(a,t),[a,t]);return!s||Object.values(n).every((function(e){return e.isEmpty}))?null:(0,je.jsxs)(M.Z,{children:[(0,je.jsx)(on.Z,{avatar:s.icon&&(0,je.jsx)(Sn.Z,{size:2,sx:{m:-1},src:s.icon}),title:s.title,action:s.action,titleTypographyProps:{variant:"subtitle1"}}),(0,je.jsx)(g.Z,{}),(0,je.jsx)(wn.Z,{children:Object.entries(n).map((function(e){var n=(0,i.Z)(e,2),a=n[0],s=n[1];return(0,je.jsx)(Mn,{node:s,onClick:function(){return r([t,a])}},a)}))})]},t)}function Kn(){return(0,je.jsx)("b",{children:"Please select an Optimization Target"})}function An(e){var n=e.optimizationTarget,t=(0,P.useContext)(L.R).data,r=(0,X.Z)(n&&(0,Pn.f)(t,n[0]),[t,n]);if(!n||!r)return(0,je.jsx)(Kn,{});var a=(0,ne.Hm)(t.getDisplay(),n);return a?(0,je.jsxs)("b",{children:[r.title," : ",(0,je.jsx)(Cn.Z,{color:a.variant,children:q.ZP.get(a.key)})]}):(0,je.jsx)(Kn,{})}function Mn(e){var n=e.node,t=e.onClick;return n.isEmpty?null:(0,je.jsx)(w.Z,{onClick:t,style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,je.jsx)(Cn.Z,{color:n.variant,children:q.ZP.get(n.key)})})}function Bn(){var e,n,t,r=(0,P.useContext)(L.R).data.getTeamBuff(),a=[];return Object.values(null!==(e=r.total)&&void 0!==e?e:{}).forEach((function(e){return!e.isEmpty&&a.push(e)})),Object.values(null!==(n=r.premod)&&void 0!==n?n:{}).forEach((function(e){return!e.isEmpty&&a.push(e)})),Object.values(null!==(t=r.enemy)&&void 0!==t?t:{}).forEach((function(e){return!e.isEmpty&&a.push(e)})),a.length?(0,je.jsxs)(M.Z,{children:[(0,je.jsx)(Z.Z,{sx:{py:1},children:(0,je.jsx)(j.Z,{children:"Team buff Stats"})}),(0,je.jsx)(g.Z,{}),(0,je.jsx)(Z.Z,{children:(0,je.jsx)(en.lD,{sx:{my:0},children:a.map((function(e,n){var t;return e&&(0,je.jsx)(en.JW,{node:e,component:Xe.ZP},n.toString()+(null!==(t=e.key)&&void 0!==t?t:""))}))})})]}):null}var Rn=t(4942);var Tn=t(50765),Fn=u().mark(Ln),_n=u().mark(Nn),In=u().mark(Vn),zn=(0,Ce.yY)((0,ne.I8)({dyn:(0,c.Z)((0,c.Z)({},V.qH.art),V.qH.artSet)})),Gn={art:(0,ne.O)([].concat((0,s.Z)(Tn.r),(0,s.Z)(Tn.L)),(function(e){return zn.dyn[e]})),artSet:(0,ne.xh)(V.qH.artSet,(function(e,n){return zn.dyn[n]}))};function Ln(e){var n,t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=function(e,r,a){var i,s,l,o,d,f,h;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.length){n.next=2;break}return n.abrupt("return");case 2:if(!r.some((function(e){return!Object.keys(e).length}))){n.next=6;break}return n.next=5,e;case 5:return n.abrupt("return");case 6:i=Se.eV[a-1],s=new Set(r.flatMap((function(e){return Object.keys(e)}))),l=(0,ae.Z)(s),n.prev=9,d=u().mark((function n(){var s,l,d;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=o.value,l=(0,c.Z)((0,c.Z)({},e),{},(0,Rn.Z)({},i,{kind:"required",sets:new Set([s])})),d=r.filter((function(e){return e[s]})).map((function(e){var n=(0,c.Z)({},e);return n[s]-=1,n[s]||delete n[s],n})),n.delegateYield(t(l,d,a-1),"t0",4);case 4:case"end":return n.stop()}}),n)})),l.s();case 12:if((o=l.n()).done){n.next=16;break}return n.delegateYield(d(),"t0",14);case 14:n.next=12;break;case 16:n.next=21;break;case 18:n.prev=18,n.t1=n.catch(9),l.e(n.t1);case 21:return n.prev=21,l.f(),n.finish(21);case 24:return f=(0,c.Z)((0,c.Z)({},e),{},(0,Rn.Z)({},i,{kind:"exclude",sets:s})),h=r.filter((function(e){return Object.values(e).reduce((function(e,n){return e+n}),0)<a})),n.delegateYield(t(f,h,a-1),"t2",27);case 27:case"end":return n.stop()}}),n,null,[[9,18,21,24]])},n=u().mark(t),r.delegateYield(t((0,ne.O)(Se.eV,(function(e){return Hn})),e.map((function(e){var n={};return e.forEach((function(e){var t,r=e.key,a=e.num;return r&&a&&(n[r]=(null!==(t=n[r])&&void 0!==t?t:0)+a)})),n})),5),"t0",3);case 3:case"end":return r.stop()}}),Fn)}function Nn(e,n,t){var r,a,i;return u().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t<1e4&&(t=1e4),r=(0,ae.Z)(n),s.prev=2,i=u().mark((function n(){var r,i,s;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=a.value,i=[r],s=u().mark((function n(){var r,a,s,l,o,d,f;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=i.pop(),a=Te(e,r),!((s=Ie(a))<=t)){n.next=8;break}if(!s){n.next=7;break}return n.next=7,r;case 7:return n.abrupt("return","continue");case 8:if(l=Se.eV.map((function(e){return{slot:e,sets:new Set(a.values[e].map((function(e){return e.set})))}})).filter((function(e){return e.sets.size>1})),l.length){n.next=12;break}return n.delegateYield(Vn(a,r,t),"t0",11);case 11:return n.abrupt("return","continue");case 12:o=l.reduce((function(e,n){return e.sets.size<n.sets.size?e:n})),d=o.sets,f=o.slot,d.forEach((function(e){return i.push((0,c.Z)((0,c.Z)({},r),{},(0,Rn.Z)({},f,{kind:"required",sets:new Set([e])})))}));case 14:case"end":return n.stop()}}),n)}));case 3:if(!i.length){n.next=10;break}return n.delegateYield(s(),"t0",5);case 5:if("continue"!==n.t0){n.next=8;break}return n.abrupt("continue",3);case 8:n.next=3;break;case 10:case"end":return n.stop()}}),n)})),r.s();case 5:if((a=r.n()).done){s.next=9;break}return s.delegateYield(i(),"t0",7);case 7:s.next=5;break;case 9:s.next=14;break;case 11:s.prev=11,s.t1=s.catch(2),r.e(s.t1);case 14:return s.prev=14,r.f(),s.finish(14);case 17:case"end":return s.stop()}}),_n,null,[[2,11,14,17]])}function Vn(e,n,t){var r,a;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=[n],a=u().mark((function n(){var a,i,s,l,o,d,f,h,x,v,m,p,Z;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=r.pop(),i=Te(e,a),!((s=Ie(i))<=t)){n.next=8;break}if(!s){n.next=7;break}return n.next=7,a;case 7:return n.abrupt("return","continue");case 8:if(l=Se.eV.map((function(e){return{slot:e,length:i.values[e].length}})).filter((function(e){return e.length>1})),o=l.reduce((function(e,n){return e.length<n.length?e:n})),d=o.slot,f=o.length,h=Math.ceil(s/t),x=Math.min(h,f),v=Array(x).fill(0).map((function(e){return new Set})),i.values[d].forEach((function(e,n){var t=e.id;return v[n%x].add(t)})),!(h>f)){n.next=18;break}v.forEach((function(e){return r.push((0,c.Z)((0,c.Z)({},a),{},(0,Rn.Z)({},d,{kind:"id",ids:e})))})),n.next=35;break;case 18:m=(0,ae.Z)(v),n.prev=19,m.s();case 21:if((p=m.n()).done){n.next=27;break}return Z=p.value,n.next=25,(0,c.Z)((0,c.Z)({},a),{},(0,Rn.Z)({},d,{kind:"id",ids:Z}));case 25:n.next=21;break;case 27:n.next=32;break;case 29:n.prev=29,n.t0=n.catch(19),m.e(n.t0);case 32:return n.prev=32,m.f(),n.finish(32);case 35:case"end":return n.stop()}}),n,null,[[19,29,32,35]])}));case 2:if(!r.length){i.next=9;break}return i.delegateYield(a(),"t0",4);case 4:if("continue"!==i.t0){i.next=7;break}return i.abrupt("continue",2);case 7:i.next=2;break;case 9:case"end":return i.stop()}}),In)}var Hn={kind:"exclude",sets:new Set};var Wn=["data"],qn=P.lazy((function(){return t.e(557).then(t.bind(t,98557))})),Un=(0,P.lazy)((function(){return Promise.all([t.e(187),t.e(11),t.e(82)]).then(t.bind(t,1011))}));function Yn(e,n){switch(n.type){case"mainStatKey":var t=n.slotKey,r=n.mainStatKey,a=(0,c.Z)({},e.mainStatKeys);return e.mainStatKeys[t].includes(r)?a[t]=a[t].filter((function(e){return e!==r})):a[t].push(r),(0,c.Z)((0,c.Z)({},e),{},{mainStatKeys:a});case"mainStatKeyReset":var i=n.slotKey,l=(0,c.Z)({},e.mainStatKeys);return l[i]=[],(0,c.Z)((0,c.Z)({},e),{},{mainStatKeys:l});case"setFilter":var u=n.index,o=n.key,d=n.num,f=void 0===d?0:d;return e.setFilters[u]={key:o,num:f},(0,c.Z)((0,c.Z)({},e),{},{setFilters:(0,s.Z)(e.setFilters)})}return(0,c.Z)((0,c.Z)({},e),n)}function Jn(){return{characterKey:""}}function Qn(e){var n,t,l,R,_,ie=e.location.characterKey,se=(0,Q.Z)("GlobalSettings",W.c),ce=(0,i.Z)(se,1)[0].tcMode,le=(0,P.useContext)(G.t).database,ue=(0,Q.Z)("BuildDisplay",Jn),oe=(0,i.Z)(ue,2),de=oe[0].characterKey,fe=oe[1],he=(0,P.useCallback)((function(e){return fe({characterKey:e})}),[fe]),xe=null!==ie&&void 0!==ie?ie:de;xe&&!le._getChar(xe)&&(xe="");var ve=(0,P.useState)(-1),me=(0,i.Z)(ve,2),pe=me[0],Ze=me[1],be=(0,P.useState)(!1),ye=(0,i.Z)(be,2),ke=ye[0],we=ye[1],Ce=(0,P.useState)(0),Se=(0,i.Z)(Ce,2),Oe=Se[0],Ee=Se[1],De=(0,P.useState)(0),Ke=(0,i.Z)(De,2),Ae=Ke[0],Me=Ke[1],Be=(0,P.useState)(0),Re=(0,i.Z)(Be,2),ze=Re[0],Ge=Re[1],Le=(0,P.useState)(void 0),Ne=(0,i.Z)(Le,2),Ve=Ne[0],We=Ne[1],qe=(0,$.Z)(),Ue=(0,i.Z)(qe,2),Je=Ue[0],Qe=Ue[1],Xe=(0,J.Z)(),en=(0,Y.Z)(xe),tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,P.useContext)(G.t).database,t=(0,P.useState)(n._getChar(e)),r=(0,i.Z)(t,2),a=r[0],s=r[1];return(0,P.useEffect)((function(){return s(n._getChar(e))}),[n,e]),(0,P.useEffect)((function(){return e?n.followChar(e,s):void 0}),[e,s,n]),a}(xe),rn=null!==(n=null===tn||void 0===tn?void 0:tn.buildSettings)&&void 0!==n?n:(0,re.$)(),sn=rn.plotBase,cn=rn.setFilters,un=rn.statFilters,on=rn.mainStatKeys,dn=rn.optimizationTarget,fn=rn.mainStatAssumptionLevel,xn=rn.useExcludedArts,mn=rn.useEquippedArts,pn=rn.builds,jn=rn.buildDate,bn=rn.maxBuildsToShow,yn=rn.levelLow,kn=rn.levelHigh,wn=(0,ee.Z)(xe,fn),Cn=null!==(t=null===wn||void 0===wn?void 0:wn[xe])&&void 0!==t?t:{},Sn=Cn.characterSheet,Pn=Cn.target,On=null!==(l=(0,X.Z)(Promise.all(pn.map(function(){var e=(0,a.Z)(u().mark((function e(n){var t,a,i,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ee.V)(le,xe,fn,n.filter((function(e){return e})).map((function(e){return le._getArt(e)})));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return a=t.teamData,i=t.teamBundle,s=(0,N.Qo)(a,xe),l=(0,ne.xh)(s,(function(e,n){var t=i[n],a=(t.data,(0,r.Z)(t,Wn));return(0,c.Z)((0,c.Z)({},e),a)})),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())).then((function(e){return e.map((function(e){return e}))})),[wn,pn,le,xe,fn]))&&void 0!==l?l:[],Dn=null!==(R=null===tn||void 0===tn?void 0:tn.compareData)&&void 0!==R&&R,Kn=(0,P.useMemo)((function(){return!le._getCharKeys().length}),[le]),An=(0,P.useMemo)((function(){return!le._getArts().length}),[le]),Mn=(0,P.useCallback)((function(e){return en&&en({buildSettings:Yn(rn,e)})}),[en,rn]);(0,P.useEffect)((function(){return O.ZP.pageview("/build")}),[]);var Tn=(0,P.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";xe!==e&&(he(e),We(void 0))}),[he,xe]);(0,P.useEffect)((function(){return le.followAnyArt(Qe)}),[Qe,le]);var Fn=(0,P.useMemo)((function(){if(!xe)return{totBuildNumber:0};var e=function(e,n){var t,r={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},a=new Set,i=(0,ae.Z)(e);try{for(i.s();!(t=i.n()).done;){var l,u=t.value,o=Zn.Z.mainStatValue(u.mainStatKey,u.rarity,Math.max(Math.min(n,4*u.rarity),u.level)),d={id:u.id,set:u.setKey,values:(0,c.Z)((l={},(0,Rn.Z)(l,u.setKey,1),(0,Rn.Z)(l,u.mainStatKey,u.mainStatKey.endsWith("_")?o/100:o),l),Object.fromEntries(u.substats.map((function(e){return[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]}))))};delete d.values[""],r.values[u.slotKey].push(d),Object.keys(d.values).forEach((function(e){return a.add(e)}))}}catch(f){i.e(f)}finally{i.f()}return r.base=(0,ne.O)((0,s.Z)(a),(function(e){return 0})),r}(le._getArts().filter((function(e){if(e.level<yn)return!1;if(e.level>kn)return!1;var n=on[e.slotKey];return!(null!==n&&void 0!==n&&n.length&&!n.includes(e.mainStatKey))&&(e.location===xe||!(e.exclude&&!xn)&&!(e.location&&!mn))})),fn),n=(0,s.Z)(Ln([cn])),t=(0,s.Z)(n).map((function(n){return Ie(Te(e,n))})).reduce((function(e,n){return e+n}),0);return Je&&{split:e,setPerms:n,totBuildNumber:t}}),[xe,xn,mn,on,cn,yn,kn,Je,le,fn]),_n=Fn.split,In=Fn.setPerms,zn=Fn.totBuildNumber;(0,P.useEffect)((function(){Ee(0)}),[zn]);var Vn=(0,P.useRef)((function(){}));(0,P.useEffect)((function(){return function(){return Vn.current()}}),[]);var Hn=(0,P.useCallback)((0,a.Z)(u().mark((function e(){var n,t,r,c,l,o,d,f,h,x,v,m,p,Z,j,g,b,y,k,w,C,S,P,E,K,A,M,B,R,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y=function(){var e=b.next(),n=e.done,t=e.value;return n?void 0:{command:"request",threshold:j.buildValues[bn-1],filter:t}},dn&&_n&&In){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,ee.V)(le,xe,fn,[]);case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(c=null===(n=(0,N.Qo)(r.teamData,xe)[xe])||void 0===n?void 0:n.target.data[0]){e.next=11;break}return e.abrupt("return");case 11:if(Object.assign(c,(0,N.b3)([c,Gn])),l=(0,ne.Hm)(null!==(t=c.display)&&void 0!==t?t:{},dn)){e.next=15;break}return e.abrupt("return");case 15:for(o=Object.entries(un).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return t.endsWith("_")&&(r/=100),{value:V.ri.total[t],minimum:r}})).filter((function(e){return e.value&&e.minimum>-1/0})),d=performance.now(),we(!0),We(void 0),Me(0),Ee(0),Ge(0),f=new Promise((function(e){return Vn.current=e})),h=[].concat((0,s.Z)(o.map((function(e){return e.value}))),[l]),x=_n,v=zn,m=[].concat((0,s.Z)(o.map((function(e){return e.minimum}))),[-1/0]),sn&&(h.push(V.ri.total[sn]),m.push(-1/0)),h=(0,H.tL)(h,c,(function(e){return"dyn"!==(0,i.Z)(e.path,1)[0]})),p=Pe(h,m,x,bn,new Set(cn.map((function(e){return e.key}))),{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0}),h=p.nodes,x=p.arts,Z=sn?h.pop():void 0,l=h.pop(),j={buildCount:0,failedCount:0,skippedCount:v,buildValues:Array(bn).fill(0).map((function(e){return-1/0}))},In.forEach((function(e){return j.skippedCount-=Ie(Te(x,e))})),g=navigator.hardwareConcurrency||4,b=Nn(x,In,1===g?1/0:Math.min(v/g/4,1e6))[Symbol.iterator](),k=h.map((function(e,n){return{value:e,min:m[n]}})).filter((function(e){return e.min>-1/0})),w=[],C=function(e){var n=new D,t={command:"setup",id:"".concat(e),arts:x,optimizationTarget:l,plotBase:Z,maxBuilds:bn,filters:k};n.postMessage(t,void 0);var r=void 0,i=new Promise((function(e){return r=e}));n.onmessage=function(){var e=(0,a.Z)(u().mark((function e(t){var a,i,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data,e.t0=a.command,e.next="interim"===e.t0?4:"request"===e.t0?9:"finalize"===e.t0?12:14;break;case 4:return j.buildCount+=a.buildCount,j.failedCount+=a.failedCount,j.skippedCount+=a.skippedCount,a.buildValues&&((i=j.buildValues).push.apply(i,(0,s.Z)(a.buildValues)),j.buildValues.sort((function(e,n){return n-e})).splice(bn)),e.abrupt("break",15);case 9:return(c=y())?n.postMessage(c):(l={command:"finalize"},n.postMessage(l)),e.abrupt("break",15);case 12:return r(a),e.abrupt("break",15);case 14:console.log("DEBUG",a);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f.then((function(){return n.terminate()})),w.push(i)},S=0;S<g;S++)C(S);return P=setInterval((function(){Ee(j.buildCount),Ge(j.skippedCount),Me(performance.now()-d)}),100),e.next=43,Promise.any([Promise.all(w),f]);case 43:E=e.sent,clearInterval(P),Vn.current=function(){},E?(sn&&(M=_e(E.map((function(e){return e.plotData}))),B=Object.values(M),"%"===q.ZP.unit(null===(K=l.info)||void 0===K?void 0:K.key)&&(B=B.map((function(e){return{value:100*e.value,plot:e.plot}}))),"%"===q.ZP.unit(null===(A=Z.info)||void 0===A?void 0:A.key)&&(B=B.map((function(e){var n=e.value,t=e.plot;return{value:n,plot:100*(null!==t&&void 0!==t?t:0)}}))),We(B)),R=Fe(E.map((function(e){return e.builds})),bn),Mn({builds:R.map((function(e){return e.artifactIds})),buildDate:Date.now()}),T=performance.now()-d,Ee(j.buildCount),Ge(j.skippedCount),Me(T),O.ZP.timing({category:"Build Generation",variable:"timing",value:T,label:zn.toString()})):(Me(0),Ee(0),Ge(0)),we(!1);case 48:case"end":return e.stop()}}),e)}))),[xe,le,zn,fn,bn,dn,sn,In,_n,Mn,cn,un]),Un=null!==(_=null===Sn||void 0===Sn?void 0:Sn.name)&&void 0!==_?_:"Character Name",Qn=(0,P.useCallback)((function(){return Ze(-1)}),[Ze]),Xn=(0,P.useCallback)((function(e){Mn({plotBase:e}),We(void 0)}),[Mn]),et=Pn&&Sn&&tn&&wn&&{data:Pn,characterSheet:Sn,character:tn,mainStatAssumptionLevel:fn,teamData:wn,characterDispatch:en},nt=On[pe];return(0,je.jsxs)(v.Z,{display:"flex",flexDirection:"column",gap:1,sx:{my:1},children:[(0,je.jsx)(F.Z,{pageKey:"buildPage",modalTitle:"Character Management Page Guide",text:["For self-infused attacks, like Noelle's Sweeping Time, enable the skill in the character talent page.","You can compare the difference between equipped artifacts and generated builds.",'Rainbow builds can sometimes be "optimal". Good substat combinations can sometimes surpass set effects.',"The more complex the formula, the longer the generation time."],children:(0,je.jsx)(qn,{})}),nt&&(0,je.jsx)($n,{teamData:nt,characterKey:xe,onClose:Qn}),Kn&&(0,je.jsxs)(m.Z,{severity:"error",variant:"filled",children:[" Opps! It looks like you haven't added a character to GO yet! You should go to the ",(0,je.jsx)(p.Z,{component:E.rU,to:"/character",children:"Characters"})," page and add some!"]}),An&&(0,je.jsxs)(m.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,je.jsx)(p.Z,{component:E.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),!et&&(0,je.jsxs)(A.Z,{children:[(0,je.jsx)(Z.Z,{sx:{py:1},children:(0,je.jsx)(j.Z,{variant:"h6",children:"Build Generator"})}),(0,je.jsx)(g.Z,{}),(0,je.jsx)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:(0,je.jsx)(M.Z,{children:(0,je.jsx)(Z.Z,{children:(0,je.jsx)(B.Z,{fullWidth:!0,value:xe,onChange:Tn,disabled:ke})})})})]}),et&&(0,je.jsxs)(L.R.Provider,{value:et,children:[(0,je.jsxs)(A.Z,{children:[(0,je.jsx)(Z.Z,{sx:{py:1},children:(0,je.jsx)(j.Z,{variant:"h6",children:"Build Generator"})}),(0,je.jsx)(g.Z,{}),(0,je.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,je.jsxs)(b.ZP,{container:!0,spacing:1,children:[(0,je.jsxs)(b.ZP,{item:!0,xs:12,md:6,lg:5,display:"flex",flexDirection:"column",gap:1,children:[(0,je.jsx)(M.Z,{children:(0,je.jsx)(Z.Z,{children:(0,je.jsx)(B.Z,{fullWidth:!0,value:xe,onChange:Tn,disabled:ke})})}),(0,je.jsx)(v.Z,{children:(0,je.jsx)(U.Z,{characterKey:xe,onClick:ke?void 0:Xe})}),(0,je.jsx)(nn,{}),(0,je.jsx)(Bn,{}),(0,je.jsx)(hn,{}),(0,je.jsx)(z.Z,{statFilters:un,setStatFilters:function(e){return Mn({statFilters:e})},disabled:ke}),(0,je.jsx)(vn,{disabled:ke})]}),(0,je.jsxs)(b.ZP,{item:!0,xs:12,md:6,lg:7,display:"flex",flexDirection:"column",gap:1,children:[(0,je.jsx)(Ye,{disabled:ke}),cn.map((function(e,n){return n<=cn.filter((function(e){return e.key})).length&&(0,je.jsx)($e,{index:n,setFilters:cn,disabled:ke,onChange:function(e,n,t){return Mn({type:"setFilter",index:e,key:n,num:t})}},n)})),xe&&(0,je.jsx)(M.Z,{children:(0,je.jsx)(Z.Z,{children:(0,je.jsxs)(b.ZP,{container:!0,spacing:1,children:[(0,je.jsx)(b.ZP,{item:!0,flexGrow:1,children:(0,je.jsx)(y.Z,{fullWidth:!0,onClick:function(){return Mn({useEquippedArts:!mn})},disabled:ke,startIcon:mn?(0,je.jsx)(f.Z,{}):(0,je.jsx)(h.Z,{}),children:"Use Equipped Artifacts"})}),(0,je.jsx)(b.ZP,{item:!0,flexGrow:1,children:(0,je.jsx)(y.Z,{fullWidth:!0,onClick:function(){return Mn({useExcludedArts:!xn})},disabled:ke,startIcon:xn?(0,je.jsx)(f.Z,{}):(0,je.jsx)(h.Z,{}),children:"Use Excluded Artifacts"})})]})})}),xe&&(0,je.jsxs)(M.Z,{children:[(0,je.jsx)(Z.Z,{sx:{py:1},children:"Artifact Level Filter"}),(0,je.jsx)(g.Z,{}),(0,je.jsx)(Z.Z,{children:(0,je.jsx)(K.Z,{levelLow:yn,levelHigh:kn,dark:!0,setLow:function(e){return Mn({levelLow:e})},setHigh:function(e){return Mn({levelHigh:e})},setBoth:function(e,n){return Mn({levelLow:e,levelHigh:n})}})})]}),xe&&(0,je.jsx)(gn,{mainStatAssumptionLevel:fn,mainStatKeys:on,onChangeMainStatKey:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;Mn(void 0===n?{type:"mainStatKeyReset",slotKey:e}:{type:"mainStatKey",slotKey:e,mainStatKey:n})},onChangeAssLevel:function(e){return Mn({mainStatAssumptionLevel:e})},disabled:ke})]})]}),(0,je.jsxs)(b.ZP,{container:!0,spacing:1,children:[(0,je.jsx)(b.ZP,{item:!0,flexGrow:1,children:(0,je.jsxs)(k.Z,{children:[(0,je.jsx)(y.Z,{disabled:!xe||ke||!dn||!zn||!(0,ne.Hm)(null===Pn||void 0===Pn?void 0:Pn.getDisplay(),dn),color:xe&&zn<=an?"success":"warning",onClick:Hn,startIcon:(0,je.jsx)(d.G,{icon:o.lTt}),children:"Generate"}),(0,je.jsxs)(T.Z,{disabled:ke||!xe,title:(0,je.jsxs)("span",{children:[(0,je.jsx)("b",{children:bn})," ",1===bn?"Build":"Builds"]}),children:[(0,je.jsx)(w.Z,{children:(0,je.jsx)(j.Z,{variant:"caption",color:"info.main",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."})}),(0,je.jsx)(g.Z,{}),te.sY.map((function(e){return(0,je.jsxs)(w.Z,{onClick:function(){return Mn({maxBuildsToShow:e})},children:[e," ",1===e?"Build":"Builds"]},e)}))]}),(0,je.jsx)(y.Z,{disabled:!ke,color:"error",onClick:function(){return Vn.current()},startIcon:(0,je.jsx)(x.Z,{}),children:"Cancel"})]})}),(0,je.jsxs)(b.ZP,{item:!0,children:[(0,je.jsx)("span",{children:"Optimization Target: "}),(0,je.jsx)(En,{optimizationTarget:dn,setTarget:function(e){return Mn({optimizationTarget:e})},disabled:!!ke})]})]}),!!xe&&(0,je.jsx)(v.Z,{children:(0,je.jsx)(ln,{totBuildNumber:zn,generatingBuilds:ke,generationSkipped:ze,generationProgress:Oe,generationDuration:Ae,characterName:Un,maxBuildsToShow:bn})}),ce&&(0,je.jsx)(v.Z,{children:(0,je.jsx)(ge,{disabled:ke,chartData:Ve,plotBase:sn,setPlotBase:Xn})})]})]}),(0,je.jsx)(A.Z,{children:(0,je.jsx)(Z.Z,{children:(0,je.jsxs)(v.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,je.jsx)(j.Z,{children:On?(0,je.jsxs)("span",{children:["Showing ",(0,je.jsx)("strong",{children:On.length})," Builds generated for ",Un,". ",!!jn&&(0,je.jsxs)("span",{children:["Build generated on: ",(0,je.jsx)("strong",{children:new Date(jn).toLocaleString()})]})]}):(0,je.jsx)("span",{children:"Select a character to generate builds."})}),(0,je.jsxs)(I.Z,{exclusive:!0,value:Dn,onChange:function(e,n){return en({compareData:n})},size:"small",children:[(0,je.jsx)(C.Z,{value:!1,disabled:!Dn,children:(0,je.jsx)("small",{children:"Show New artifact Stats"})}),(0,je.jsx)(C.Z,{value:!0,disabled:Dn,children:(0,je.jsx)("small",{children:"Compare against equipped artifacts"})})]})]})})}),(0,je.jsx)(P.Suspense,{fallback:(0,je.jsx)(S.Z,{variant:"rectangular",width:"100%",height:600}),children:null===On||void 0===On?void 0:On.map((function(e,n){return e&&(0,je.jsx)(L.R.Provider,{value:(0,c.Z)((0,c.Z)({},et),{},{data:e[xe].target,teamData:e,oldData:Pn}),children:(0,je.jsx)(He,{index:n,onClick:function(){return Ze(n)},compareBuild:Dn,disabled:!!ke})},n)}))})]})]})}function $n(e){var n=e.teamData,t=e.characterKey,r=e.onClose;return(0,je.jsx)(_.Z,{open:!!n,onClose:r,containerProps:{maxWidth:"xl"},children:(0,je.jsx)(Un,{characterKey:t,newteamData:n,onClose:r,footer:(0,je.jsx)(R.Z,{large:!0,onClick:r})})})}},17278:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(29439),a=t(72791),i=t(3997);function s(e,n){var t=(0,a.useContext)(i.t).database,s=(0,a.useState)(t._getState(e,n)),c=(0,r.Z)(s,2),l=c[0],u=c[1];return(0,a.useEffect)((function(){return u(t._getState(e,n))}),[t,e,n]),(0,a.useEffect)((function(){return e?t.followState(e,u):void 0}),[e,u,t]),[l,(0,a.useCallback)((function(n){return t.updateState(e,n)}),[t,e])]}},52771:function(e,n,t){t.d(n,{vL:function(){return a},g4:function(){return i},yJ:function(){return s},mf:function(){return c},JR:function(){return u},e6:function(){return o}});var r=t(60393),a=1e3,i=60*a,s=60*i,c=24*s;function l(e){var n=e%1e3,t=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:r,seconds:t,milliseconds:n}}function u(e){var n=l(e),t=n.hours,a=n.minutes,i=n.seconds,s="Minutes";return t&&(s="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(a,"0",2),":").concat((0,r.H_)(i,"0",2)," ").concat(s)}function o(e){var n=l(e),t=n.hours,a=n.minutes,i=n.seconds,s=n.milliseconds,c="Minutes";return t&&(c="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(a,"0",2),":").concat((0,r.H_)(i,"0",2),".").concat((0,r.H_)(s,"0",3)," ").concat(c)}}}]);
//# sourceMappingURL=314.7f538d8c.chunk.js.map