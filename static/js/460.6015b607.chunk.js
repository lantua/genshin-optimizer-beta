"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[460],{44361:function(e,n,t){t.d(n,{Z:function(){return P}});var r=t(93433),i=t(29439),a=t(39504),s=t(61889),l=t(94721),c=t(66647),o=t(68870),u=t(20890),d=t(72791),x=t(9350),h=t(42320),Z=t(24351),j=t(66218),v=t(3992),f=t(71310),m=t(68198),p=t(55942),g=t(9321),y=t(10157),k=t(73578),b=t(80184);function P(e){var n=e.show,t=e.onHide,P=e.onSelect,w=e.filter,C=void 0===w?function(){return!0}:w,S=e.weaponFilter,_=(0,h.Z)(j.ZP.getAll,[]),K=(0,d.useState)(null!==S&&void 0!==S?S:""),D=(0,i.Z)(K,2),E=D[0],T=D[1];(0,d.useEffect)((function(){return S&&T(S)}),[S]);var R=_?(0,r.Z)(new Set(Z.fG)).filter((function(e){return C(_[e])})).filter((function(e){var n;return!E||E===(null===_||void 0===_||null===(n=_[e])||void 0===n?void 0:n.weaponType)})).sort((function(e,n){var t,r,i,a;return(null!==(t=null===_||void 0===_||null===(r=_[n])||void 0===r?void 0:r.rarity)&&void 0!==t?t:0)-(null!==(i=null===_||void 0===_||null===(a=_[e])||void 0===a?void 0:a.rarity)&&void 0!==i?i:0)})):[];return _?(0,b.jsx)(g.Z,{open:n,onClose:t,children:(0,b.jsxs)(v.Z,{children:[(0,b.jsx)(a.Z,{sx:{py:1},children:(0,b.jsxs)(s.ZP,{container:!0,children:[(0,b.jsx)(s.ZP,{item:!0,flexGrow:1,children:(0,b.jsx)(k.Z,{value:E,onChange:T,disabled:!!S,size:"small"})}),(0,b.jsx)(s.ZP,{item:!0,children:(0,b.jsx)(m.Z,{onClick:t})})]})}),(0,b.jsx)(l.Z,{}),(0,b.jsx)(a.Z,{children:(0,b.jsx)(s.ZP,{container:!0,spacing:1,children:R.map((function(e){var n,r=_[e];return(0,b.jsx)(s.ZP,{item:!0,lg:3,md:4,children:(0,b.jsx)(f.Z,{sx:{height:"100%"},children:(0,b.jsxs)(c.Z,{onClick:function(){t(),P(e)},sx:{display:"flex"},children:[(0,b.jsx)(o.Z,{component:"img",src:r.img,sx:{width:100,height:"auto"},className:" grad-".concat(r.rarity,"star")}),(0,b.jsxs)(o.Z,{sx:{flexGrow:1,px:1},children:[(0,b.jsx)(u.Z,{variant:"subtitle1",children:r.name}),(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(p.Z,{src:null===(n=x.Z.weaponTypes)||void 0===n?void 0:n[r.weaponType]})," ",(0,b.jsx)(y.t,{stars:r.rarity,colored:!0})]})]})]})})},e)}))})}),(0,b.jsx)(l.Z,{}),(0,b.jsx)(a.Z,{sx:{py:1},children:(0,b.jsx)(m.Z,{large:!0,onClick:t})})]})}):null}},39688:function(e,n,t){t.d(n,{Oy:function(){return l}});t(9350),t(55942),t(25617);var r=t(66624),i=t(43144),a=t(15671),s=t(80184);(0,i.Z)((function e(){if((0,a.Z)(this,e),this instanceof e)throw Error("A static class cannot be instantiated.")})).printStat=function(e,n){return(0,s.jsx)(s.Fragment,{})};var l=function(e){return(0,s.jsx)(r.v,{ns:"sheet_gen",key18:e})}},53343:function(e,n,t){t.d(n,{st:function(){return l},Oy:function(){return c},v9:function(){return o},wV:function(){return u},dW:function(){return d}});var r=t(93433),i=t(66624),a=t(78661),s=t(80184),l=function(e,n){return(0,s.jsx)(i.v,{ns:"sheet",key18:e,values:n})},c=function(e){return(0,s.jsx)(i.v,{ns:"sheet_gen",key18:e})},o=function(e){return(0,a.Mp)(["conditional"].concat((0,r.Z)(e)))};function u(e,n){var t=[e,n];return[t,o(t)]}function d(e,n){return[function(t){return(0,s.jsx)(i.v,{ns:"".concat(e,"_").concat(n,"_gen"),key18:t})},function(t,r){return(0,s.jsx)(i.v,{ns:"".concat(e,"_").concat(n),key18:t,values:r})}]}},29460:function(e,n,t){t.r(n),t.d(n,{default:function(){return Kn}});var r=t(29439),i=t(1413),a=t(45987),s=t(47047),l=t(39504),c=t(61889),o=t(90388),u=t(57621),d=t(20890),x=t(25228),h=t(43896),Z=t(94721),j=t(24518),v=t(2199),f=t(23786),m=t(72791),p=t(3992),g=t(71310),y=t(3082),k=t(2380),b=t(68198),P=t(91702),w=t(10600),C=t(33890),S=t(66887),_=t(37355),K=t(56125),D=t(68870),E=t(9585),T=t(89673),R=t(55818),A=t(3721),W=t(2693),I=t(8430),O=t(44297),L=t(42320),z=t(91732),G=t(55942),B=t(80184);function M(){var e=(0,m.useState)(!1),n=(0,r.Z)(e,2),t=n[0],i=n[1],a=(0,m.useCallback)((function(){return i(!t)}),[i,t]);return(0,B.jsxs)(g.Z,{children:[(0,B.jsx)(l.Z,{children:(0,B.jsxs)(c.ZP,{container:!0,children:[(0,B.jsxs)(c.ZP,{item:!0,flexGrow:1,children:[(0,B.jsxs)(d.Z,{children:["Formulas ","&"," Calculations"]}),(0,B.jsx)(d.Z,{variant:"caption",color:"text.secondary",children:"Expand to see every formula and all their calculations."})]}),(0,B.jsx)(c.ZP,{item:!0,children:(0,B.jsx)(z.Z,{expand:t,onClick:a,"aria-expanded":t,"aria-label":"show more",children:(0,B.jsx)(_.Z,{})})})]})}),(0,B.jsx)(K.Z,{in:t,timeout:"auto",unmountOnExit:!0,children:(0,B.jsx)(l.Z,{sx:{pt:0},children:(0,B.jsx)(N,{})})})]})}function N(){var e=(0,m.useContext)(W.R).data,n=(0,I.U)(e);return(0,B.jsx)(m.Suspense,{fallback:(0,B.jsx)(s.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,B.jsx)(D.Z,{sx:{mr:-1,mb:-1},children:n.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,B.jsx)(F,{displayNs:i,sectionKey:t},t)}))})})}function F(e){var n=e.sectionKey,t=e.displayNs,i=(0,m.useContext)(W.R).data,a=(0,L.Z)((0,I.f)(i,n),[i,n]);if(!a)return null;var s=a.title,c=a.icon,o=a.action;return(0,B.jsxs)(p.Z,{sx:{mb:1},children:[(0,B.jsx)(E.Z,{avatar:c&&(0,B.jsx)(G.Z,{size:2,sx:{m:-1},src:c}),title:s,action:o,titleTypographyProps:{variant:"subtitle1"}}),(0,B.jsx)(Z.Z,{}),(0,B.jsx)(l.Z,{children:Object.entries(t).map((function(e){var n,t=(0,r.Z)(e,2),i=t[0],a=t[1];return!a.isEmpty&&(0,B.jsxs)(T.Z,{sx:{bgcolor:"contentLight.main"},children:[(0,B.jsx)(R.Z,{expandIcon:(0,B.jsx)(_.Z,{}),children:(0,B.jsxs)(d.Z,{children:[(0,B.jsx)(P.Z,{color:a.variant,children:O.ZP.get(null!==(n=a.key)&&void 0!==n?n:"")})," ",(0,B.jsx)("strong",{children:(0,O.EC)(a.value,a.unit)})]})}),(0,B.jsx)(A.Z,{children:a.formulas.map((function(e,n){return(0,B.jsx)(d.Z,{children:e},n)}))})]},i)}))})]})}var J=t(32490),V=t(91839),H=t(39688),U=t(2139),q=t(50920),Q=t(53561),X=t(47639),$=t(60393),Y=t(79271),ee=t(16246),ne=t(31148),te=t(31284),re=t(3997),ie=t(26138),ae=t(68544),se=t(24351),le=t(71946);var ce,oe=function(e){var n=e.newBuild,t=void 0!==n&&n,i=(0,m.useContext)(W.R),a=i.data,s=i.character,o=i.mainStatAssumptionLevel,x=(0,m.useContext)(re.t).database,h=(0,Y.k6)(),v=(0,m.useCallback)((function(e){return h.push({pathname:"/artifact",state:{artToEditId:e}})}),[h]),f=(0,L.Z)(ne.y.getAll,[]),p=(0,ae.Z)(),y=(0,r.Z)(p,2)[1];(0,m.useEffect)((function(){return x.followAnyArt(y)}));var k=(0,m.useCallback)((function(){if(window.confirm("Do you want to equip this artifact build to this character?")){var e=Object.fromEntries(se.eV.map((function(e){return[e,a.get(ie.ri.art[e].id).value]})));x.equipArtifacts(s.key,e)}}),[s,a,x]),b=(0,m.useCallback)((function(){s&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&x.equipArtifacts(s.key,(0,$.O)(se.eV,(function(e){return""})))}),[s,x]),P=se.eV.map((function(e){return a.get(ie.ri.art[e].id).value})),w=(0,m.useMemo)((function(){return f&&ne.y.setEffects(f,a)}),[f,a]);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(g.Z,{sx:{mb:1},children:[(0,B.jsx)(l.Z,{children:(0,B.jsx)(le.Z,{})}),(0,B.jsx)(Z.Z,{}),(0,B.jsx)(l.Z,{sx:{py:1},children:(0,B.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(c.ZP,{item:!0,children:t?(0,B.jsx)(j.Z,{onClick:k,className:"mr-2",children:"Equip artifacts"}):(0,B.jsx)(j.Z,{color:"error",onClick:b,children:"Unequip all artifacts"})}),(0,B.jsx)(c.ZP,{item:!0,flexGrow:1}),(0,B.jsx)(c.ZP,{item:!0,children:!!o&&(0,B.jsx)(u.Z,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:(0,B.jsx)(d.Z,{children:(0,B.jsxs)("strong",{children:["Assume Main Stats are Level ",o]})})})})]})})]}),(0,B.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:f&&w&&Object.entries(w).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,B.jsxs)(g.Z,{sx:{flexGrow:1},children:[(0,B.jsx)(E.Z,{avatar:(0,B.jsx)(G.Z,{size:2,sx:{m:-1},src:f[t].defIconSrc}),title:f[t].name,titleTypographyProps:{variant:"subtitle1"}}),(0,B.jsx)(Z.Z,{}),(0,B.jsx)(l.Z,{children:(0,B.jsx)(c.ZP,{container:!0,spacing:1,flexDirection:"column",height:"100%",children:(0,B.jsx)(c.ZP,{item:!0,display:"flex",flexDirection:"column",gap:1,children:i.map((function(e){return(0,B.jsx)(te.Z,{setKey:t,setNumKey:e},t+e)}))})})})]},t)}))}),P.map((function(e){return!!e&&(0,B.jsx)(c.ZP,{item:!0,xs:6,md:4,children:(0,B.jsx)(ee.Z,{artifactId:e,mainStatAssumptionLevel:o,onEdit:v})},e)}))]})]})},ue=t(93433),de=t(53174),xe=t(54483),he=t(42169),Ze=t(58751),je=t(9350),ve=t(14763),fe=t(10157),me=t(75545),pe=t(3368),ge=t(90329),ye=t(947),ke=t(94023),be=t(43992),Pe=t(52791),we=t(36944),Ce=t(37503),Se=t(66624),_e=t(78661),Ke=t(53343),De=function(e){return(0,B.jsx)(Se.v,{ns:"resonance_gen",key18:e})},Ee=(0,$.Uq)(se.Kj,(function(e){return["".concat(e,"_res_"),(0,_e.ew)(4,_e.Sm.apply(void 0,(0,ue.Z)(se.Kj.map((function(e){return(0,_e.VV)(1,ie.uK[e])})))),(0,_e.aQ)(.15))]})),Te={name:De("ProtectiveCanopy.name"),icon:(0,B.jsxs)("span",{children:[me.Z.anemo," ",me.Z.geo," ",me.Z.pyro," ",me.Z.hydro," ",me.Z.cryo," ",me.Z.electro," x4"]}),canShow:function(e){return 4===se.N.filter((function(n){return e.get(ie.uK[n]).value>=1})).length},sections:[{teamBuff:!0,text:De("ProtectiveCanopy.desc"),fields:Object.values(Ee).map((function(e){return{node:e}}))}]},Re=(0,_e.ew)(2,ie.uK.pyro,(0,_e.aQ)(.25)),Ae={name:De("FerventFlames.name"),icon:(0,B.jsxs)("span",{children:[me.Z.pyro," ",me.Z.pyro]}),canShow:function(e){return e.get(ie.uK.pyro).value>=2},sections:[{teamBuff:!0,text:De("FerventFlames.desc"),fields:[{node:Re},{text:(0,Ke.st)("affectDuration.cryo"),value:-40,unit:"%"}]}]},We=(0,_e.ew)(2,ie.uK.hydro,(0,_e.aQ)(.25)),Ie={name:De("SoothingWater.name"),icon:(0,B.jsxs)("span",{children:[me.Z.hydro," ",me.Z.hydro]}),canShow:function(e){return e.get(ie.uK.hydro).value>=2},sections:[{teamBuff:!0,text:De("SoothingWater.desc"),fields:[{node:We},{text:(0,Ke.st)("affectDuration.pyro"),value:-40,unit:"%"}]}]},Oe=["resonance","ShatteringIce"],Le=(0,Ke.v9)(Oe),ze=(0,_e.ew)(2,ie.uK.cryo,(0,_e.Dg)(Le,"on",(0,_e.aQ)(.15))),Ge={name:De("ShatteringIce.name"),icon:(0,B.jsxs)("span",{children:[me.Z.cryo," ",me.Z.cryo]}),canShow:function(e){return e.get(ie.uK.cryo).value>=2},sections:[{teamBuff:!0,text:De("ShatteringIce.desc"),fields:[{text:(0,Ke.st)("affectDuration.electro"),value:-40,unit:"%"}],conditional:{path:Oe,value:Le,name:(ce="ShatteringIce.cond",(0,B.jsx)(Se.v,{ns:"resonance",key18:ce})),states:{on:{fields:[{node:ze}]}}}}]},Be={name:De("HighVoltage.name"),icon:(0,B.jsxs)("span",{children:[me.Z.electro," ",me.Z.electro]}),canShow:function(e){return e.get(ie.uK.electro).value>=2},sections:[{teamBuff:!0,text:De("HighVoltage.desc"),fields:[{text:(0,Ke.st)("affectDuration.hydro"),value:-40,unit:"%"}]}]},Me=(0,_e.ew)(2,ie.uK.anemo,(0,_e.aQ)(-.15)),Ne=(0,_e.ew)(2,ie.uK.anemo,(0,_e.aQ)(.1)),Fe=(0,_e.ew)(2,ie.uK.anemo,(0,_e.aQ)(-.05)),Je={name:De("ImpetuousWinds.name"),icon:(0,B.jsxs)("span",{children:[me.Z.hydro," ",me.Z.hydro]}),canShow:function(e){return e.get(ie.uK.hydro).value>=2},sections:[{teamBuff:!0,text:De("ImpetuousWinds.desc"),fields:[{node:Me},{node:Ne},{node:Fe}]}]},Ve=(0,Ke.v9)(Oe),He=(0,_e.ew)(2,ie.uK.anemo,(0,_e.aQ)(.15)),Ue=(0,_e.ew)(2,ie.uK.anemo,(0,_e.aQ)(.15)),qe=(0,_e.ew)(2,ie.uK.anemo,(0,_e.aQ)(.2)),Qe=(De("EnduringRock.name"),me.Z.geo,me.Z.geo,De("EnduringRock.desc"),(0,Ke.st)("protectedByShield"),(0,Ke.Oy)("duration"),(0,i.Z)((0,i.Z)({},Ee),{},{atk_:Re,incHeal_:We,staminaDec_:Me,moveSPD_:Ne,cdRed_:Fe,shield_:He,all_dmg_:Ue,geo_enemyRes_:qe}),t(16134));function Xe(){return(0,B.jsxs)(Pe.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:[(0,B.jsx)(Ye,{}),(0,B.jsx)(c.ZP,{container:!0,spacing:1,children:(0,$.w6)(0,2).map((function(e){return(0,B.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,B.jsx)(en,{index:e})},e)}))})]})}var $e={xs:12,sm:6,md:6,lg:4};function Ye(){var e,n,t,a=(0,m.useContext)(W.R),s=a.data,o=a.oldData,u=s.getTeamBuff(),d=[];return Object.entries(null!==(e=u.total)&&void 0!==e?e:{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&0!==i.value&&d.push([["total",t],i])})),Object.entries(null!==(n=u.premod)&&void 0!==n?n:{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&0!==i.value&&d.push([["premod",t],i])})),Object.entries(null!==(t=u.enemy)&&void 0!==t?t:{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&0!==i.value&&d.push([["enemy",t],i])})),d.length?(0,B.jsxs)(g.Z,{children:[(0,B.jsx)(l.Z,{children:"Team Buffs"}),(0,B.jsx)(Z.Z,{}),(0,B.jsx)(l.Z,{children:(0,B.jsx)(c.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:d.map((function(e,n){var t,a=(0,r.Z)(e,2),s=a[0],l=a[1];return l&&(0,m.createElement)(c.ZP,(0,i.Z)((0,i.Z)({item:!0},$e),{},{key:l.key}),(0,B.jsx)(ve.JW,{node:l,oldValue:null===(t=(0,$.Hm)(null===o||void 0===o?void 0:o.getTeamBuff(),s))||void 0===t?void 0:t.value}))}))})})]}):null}function en(e){var n=e.index,t=(0,m.useContext)(W.R),r=t.character,i=t.teamData,a=t.characterDispatch,s=r.key,c=r.team[n],o=(0,q.Z)(c),u=(0,Q.Z)(),d=i[c],x=d&&o&&{character:d.character,characterSheet:d.characterSheet,data:d.target,teamData:i,mainStatAssumptionLevel:0,characterDispatch:o};return(0,B.jsxs)(g.Z,{children:[(0,B.jsx)(l.Z,{children:(0,B.jsx)(we.Z,{fullWidth:!0,value:c,onChange:function(e){return a({type:"team",index:n,charKey:e})},filter:function(e,n){return n!==s&&!r.team.includes(n)},unSelectText:"Teammate ".concat(n+1),unSelectIcon:(0,B.jsx)(be.Z,{})})}),x&&(0,B.jsx)(W.R.Provider,{value:x,children:(0,B.jsx)(Qe.Z,{characterKey:c,onClickHeader:u,artifactChildren:(0,B.jsx)(nn,{}),weaponChildren:(0,B.jsx)(tn,{}),characterChildren:(0,B.jsx)(rn,{})})})]})}function nn(){var e=(0,m.useContext)(W.R).data,n=(0,L.Z)(ne.y.getAll,[]),t=(0,m.useMemo)((function(){return n&&Object.entries(ne.y.setEffects(n,e)).flatMap((function(e){var t=(0,r.Z)(e,2),i=t[0];return t[1].flatMap((function(e){return n[i].setEffectDocument(e)}))}))}),[n,e]);return t?(0,B.jsx)(Ce.Z,{sections:t,teamBuffOnly:!0}):null}function tn(){var e=(0,m.useContext)(W.R),n=e.teamData[e.character.key].weaponSheet;return(0,B.jsx)(Ce.Z,{sections:n.document,teamBuffOnly:!0})}function rn(){var e=(0,m.useContext)(W.R),n=e.data,t=e.teamData[e.character.key].characterSheet.getTalent(n.get(ie.ri.charEle).value),r=Object.values(t.sheets).flatMap((function(e){return e.sections}));return(0,B.jsx)(Ce.Z,{sections:r,teamBuffOnly:!0})}function an(){var e,n=(0,m.useContext)(W.R),t=n.data,r=n.characterSheet,a=n.character,s=n.character.key,o=(0,q.Z)(s),u=t.get(ie.ri.charEle).value,x=r.weaponTypeKey,h=t.get(ie.ri.lvl).value,Z=t.get(ie.ri.asc).value,j=t.get(ie.ri.constellation).value,v={auto:t.get(ie.ri.total.auto).value,skill:t.get(ie.ri.total.skill).value,burst:t.get(ie.ri.total.burst).value},f={auto:t.get(ie.ri.bonus.auto).value,skill:t.get(ie.ri.bonus.skill).value,burst:t.get(ie.ri.bonus.burst).value};return(0,B.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(c.ZP,{item:!0,xs:12,md:3,children:(0,B.jsxs)(g.Z,{children:[(0,B.jsx)(he.Z,{src:r.cardImg,component:"img",width:"100%",height:"auto"}),(0,B.jsxs)(l.Z,{children:[(0,B.jsxs)(d.Z,{variant:"h4",children:[r.name," ",(0,B.jsx)(G.Z,{src:null===(e=je.Z.weaponTypes)||void 0===e?void 0:e[x]})," ",me.Z[u]," "]}),(0,B.jsx)(d.Z,{variant:"h6",children:(0,B.jsx)(fe.t,{stars:r.rarity,colored:!0})}),(0,B.jsxs)(d.Z,{variant:"h5",children:["Lvl. ",ye.ZP.getLevelString(h,Z)]}),(0,B.jsx)(c.ZP,{container:!0,spacing:1,mt:1,children:["auto","skill","burst"].map((function(e){var n;return(0,B.jsx)(c.ZP,{item:!0,xs:4,children:(0,B.jsx)(Ze.Z,{badgeContent:v[e],color:f[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,B.jsx)(D.Z,{component:"img",src:null===(n=r.getTalentOfKey(e,u))||void 0===n?void 0:n.img,width:"100%",height:"auto"})})},e)}))}),(0,B.jsx)(d.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:r.constellationName}),(0,B.jsx)(c.ZP,{container:!0,spacing:1,children:(0,$.w6)(1,6).map((function(e){var n;return(0,B.jsx)(c.ZP,{item:!0,xs:4,children:(0,B.jsx)(D.Z,{component:"img",src:null===(n=r.getTalentOfKey("constellation".concat(e),u))||void 0===n?void 0:n.img,sx:(0,i.Z)({cursor:"pointer"},j>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto",onClick:function(){return o({constellation:e===j?e-1:e})}})},e)}))})]})]})}),(0,B.jsxs)(c.ZP,{item:!0,xs:12,md:9,sx:{"> div:not(:last-child)":{mb:1}},children:[(0,B.jsx)(ge.default,{weaponId:a.equippedWeapon}),(0,B.jsx)(jn,{})]})]})}var sn=["eleMas","critRate_","critDMG_","enerRech_","heal_"],ln=[].concat(["atk","hp","def"],sn).map((function(e){return ie.ri.total[e]})),cn=["atk_","atk","hp_","hp","def_","def"].concat(sn),on=[].concat((0,ue.Z)(se.Kj.map((function(e){return ie.ri.total["".concat(e,"_dmg_")]}))),(0,ue.Z)(se.Kj.map((function(e){return ie.ri.total["".concat(e,"_res_")]}))),(0,ue.Z)(["stamina","incHeal_","shield_","cdRed_"].map((function(e){return ie.ri.total[e]})))),un=on.map((function(e){return e.info.key})),dn=[ie.ri.total.all_dmg_].concat((0,ue.Z)(se.Kj.map((function(e){return ie.ri.total["".concat(e,"_enemyRes_")]}))),[ie.ri.total.normal_dmg_,ie.ri.total.normal_critRate_,ie.ri.total.charged_dmg_,ie.ri.total.charged_critRate_,ie.ri.total.plunging_dmg_,ie.ri.total.plunging_critRate_,ie.ri.total.skill_dmg_,ie.ri.total.skill_critRate_,ie.ri.total.burst_dmg_,ie.ri.total.burst_critRate_],(0,ue.Z)(Object.keys(pe.Ne).map((function(e){return ie.ri.total["".concat(e,"_dmg_")]}))),(0,ue.Z)(Object.keys(pe.UT).map((function(e){return ie.ri.total["".concat(e,"_dmg_")]}))),(0,ue.Z)(["moveSPD_","atkSPD_","weakspotDMG_"].map((function(e){return ie.ri.total[e]}))),[ie.ri.total.dmgRed_]),xn=dn.map((function(e){return e.info.key})),hn={xs:12,sm:6,md:6,lg:4};function Zn(e){var n=e.nodes,t=e.statBreakpoint,r=e.extra,a=(0,m.useContext)(W.R),s=a.data,l=a.oldData;return(0,B.jsxs)(c.ZP,{container:!0,columnSpacing:{xs:2,lg:3},rowSpacing:1,children:[n.map((function(e){var n,r;return(0,B.jsx)(c.ZP,(0,i.Z)((0,i.Z)({item:!0},t),{},{children:(0,B.jsx)(ve.JW,{node:s.get(e),oldValue:null===l||void 0===l||null===(r=l.get(e))||void 0===r?void 0:r.value})}),null===(n=e.info)||void 0===n?void 0:n.key)})),r]})}function jn(){var e=(0,m.useContext)(W.R),n=e.data,t=e.character,r=e.character.key,a=(0,q.Z)(r),s=n.get(ie.ri.special);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Ye,{}),(0,B.jsx)(vn,{title:"Main Stats",content:(0,B.jsx)(Zn,{statBreakpoint:hn,nodes:ln,extra:s&&(0,B.jsxs)(c.ZP,(0,i.Z)((0,i.Z)({item:!0},hn),{},{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,B.jsxs)("span",{children:[(0,B.jsx)("b",{children:"Special:"})," ",(0,B.jsxs)(P.Z,{color:s.variant,children:[s.key&&me.Z[s.key]," ",s.key&&O.ZP.get(s.key)]})]}),(0,B.jsx)("span",{children:(0,O.EC)(s.value,s.unit)})]}))}),editContent:(0,B.jsx)(c.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:cn.map((function(e){var n,r=O.ZP.get(e);return(0,B.jsx)(c.ZP,{item:!0,xs:12,lg:6,children:(0,B.jsx)(ke.Z,{name:(0,B.jsxs)("span",{children:[me.Z[e]," ",r]}),placeholder:O.ZP.getStr(e),value:null!==(n=t.bonusStats[e])&&void 0!==n?n:0,percent:"%"===O.ZP.unit(e),onValueChange:function(n){return a({type:"editStats",statKey:e,value:n})}})},e)}))})}),(0,B.jsx)(vn,{title:"Other Stats",content:(0,B.jsx)(Zn,{statBreakpoint:hn,nodes:on}),editContent:(0,B.jsx)(c.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:un.map((function(e){var n,r=O.ZP.get(e);return(0,B.jsx)(c.ZP,{item:!0,xs:12,lg:6,children:(0,B.jsx)(ke.Z,{name:(0,B.jsxs)("span",{children:[me.Z[e]," ",r]}),placeholder:O.ZP.getStr(e),value:null!==(n=t.bonusStats[e])&&void 0!==n?n:0,percent:"%"===O.ZP.unit(e),defaultValue:void 0,onValueChange:function(n){return a({type:"editStats",statKey:e,value:n})}})},e)}))})}),(0,B.jsx)(vn,{title:"Misc Stats",content:(0,B.jsx)(Zn,{statBreakpoint:{xs:12,sm:6,md:6},nodes:dn}),editContent:(0,B.jsx)(c.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:xn.map((function(e){var n,r=O.ZP.get(e);return(0,B.jsx)(c.ZP,{item:!0,xs:12,lg:6,children:(0,B.jsx)(ke.Z,{name:(0,B.jsxs)("span",{children:[me.Z[e]," ",r]}),placeholder:O.ZP.getStr(e),value:null!==(n=t.bonusStats[e])&&void 0!==n?n:0,percent:"%"===O.ZP.unit(e),onValueChange:function(n){return a({type:"editStats",statKey:e,value:n})}})},e)}))})})]})}function vn(e){var n=e.title,t=e.content,i=e.editContent,a=(0,m.useState)(!1),s=(0,r.Z)(a,2),c=s[0],o=s[1];return(0,B.jsxs)(g.Z,{children:[(0,B.jsx)(l.Z,{sx:{py:1},children:(0,B.jsxs)(D.Z,{display:"flex",justifyContent:"space-between",children:[(0,B.jsx)(d.Z,{variant:"subtitle1",children:n}),(0,B.jsx)(j.Z,{size:"small",color:c?"error":"info",onClick:function(){return o(!c)},children:(0,B.jsxs)("span",{children:[(0,B.jsx)(xe.G,{icon:c?de.r6l:de.Xcf})," ",c?"EXIT":"Edit Stats"]})})]})}),(0,B.jsx)(Z.Z,{}),(0,B.jsx)(l.Z,{children:c?i:t})]})}var fn=t(66647),mn=t(96106),pn=t(20005);function gn(){var e=(0,m.useContext)(W.R),n=e.data,t=e.character,i=e.characterSheet,a=(0,q.Z)(t.key),s=n.get(ie.ri.charEle).value,l=n.get(ie.ri.asc).value,o=n.get(ie.ri.constellation).value;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(kn,{}),(0,B.jsxs)(c.ZP,{container:!0,spacing:1,sx:{mb:1},children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,B.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,B.jsx)(Cn,{talentKey:t,subtitle:i})},t)})),!!i.getTalentOfKey("sprint",s)&&(0,B.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,B.jsx)(Cn,{talentKey:"sprint",subtitle:"Alternative Sprint"})}),!!i.getTalentOfKey("passive",s)&&(0,B.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,B.jsx)(Cn,{talentKey:"passive",subtitle:"Passive"})})]}),(0,B.jsx)(c.ZP,{container:!0,spacing:1,children:[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var n=(0,r.Z)(e,3),t=n[0],a=n[1],o=n[2],u=l>=o;return i.getTalentOfKey(t,s)?(0,B.jsx)(c.ZP,{item:!0,style:{opacity:u?1:.5},xs:12,md:4,children:(0,B.jsx)(Cn,{talentKey:t,subtitle:a})},t):null}))}),(0,B.jsxs)(d.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",o]}),(0,B.jsx)(c.ZP,{container:!0,spacing:1,children:(0,$.w6)(1,6).map((function(e){var n="constellation".concat(e);return(0,B.jsx)(c.ZP,{item:!0,xs:12,md:4,sx:{opacity:o>=e?1:.5},children:(0,B.jsx)(Cn,{talentKey:n,subtitle:"Contellation Lv. ".concat(e),onClickTitle:function(){return a({constellation:e===o?e-1:e})}})},e)}))})]})}var yn={superconduct:function(e){var n=e.node;return(0,B.jsx)(p.Z,{children:(0,B.jsx)(l.Z,{sx:{p:1},children:(0,B.jsxs)(d.Z,{color:"superconduct.main",children:[O.ZP.get(n.key)," ",me.Z.electro,"+",me.Z.cryo," ",(0,B.jsx)("strong",{children:(0,O.EC)(n.value,n.unit)})]})})})},electrocharged:function(e){var n=e.node;return(0,B.jsx)(p.Z,{children:(0,B.jsx)(l.Z,{sx:{p:1},children:(0,B.jsxs)(d.Z,{color:"electrocharged.main",children:[O.ZP.get(n.key)," ",me.Z.electro,"+",me.Z.hydro," ",(0,B.jsx)("strong",{children:(0,O.EC)(n.value,n.unit)})]})})})},overloaded:function(e){var n=e.node;return(0,B.jsx)(p.Z,{children:(0,B.jsx)(l.Z,{sx:{p:1},children:(0,B.jsxs)(d.Z,{color:"overloaded.main",children:[O.ZP.get(n.key)," ",me.Z.electro,"+",me.Z.pyro," ",(0,B.jsx)("strong",{children:(0,O.EC)(n.value,n.unit)})]})})})},pyroSwirl:function(){var e=(0,m.useState)(Object.keys(bn)[0]),n=(0,r.Z)(e,2),t=n[0],i=n[1],a=(0,m.useContext)(W.R).data.getDisplay().reaction["".concat(t,"Swirl")];return(0,B.jsxs)(p.Z,{sx:{display:"flex"},children:[(0,B.jsx)(C.Z,{size:"small",title:bn[t],color:"success",children:Object.entries(bn).map((function(e){var n=(0,r.Z)(e,2),a=n[0],s=n[1];return(0,B.jsx)(f.Z,{selected:t===a,disabled:t===a,onClick:function(){return i(a)},children:s},a)}))}),(0,B.jsx)(D.Z,{sx:{color:"".concat(t,".main"),p:1},children:(0,B.jsx)("strong",{children:(0,O.EC)(a.value,a.unit)})})]})},shattered:function(e){var n=e.node,t=(0,B.jsx)(mn.Z,{placement:"top",title:(0,B.jsxs)(d.Z,{children:["Claymores, Plunging Attacks and ",(0,B.jsx)(P.Z,{color:"geo",children:"Geo DMG"})]}),children:(0,B.jsx)(D.Z,{component:"span",sx:{cursor:"help"},children:(0,B.jsx)(xe.G,{icon:de.sph})})});return(0,B.jsx)(p.Z,{children:(0,B.jsx)(l.Z,{sx:{p:1},children:(0,B.jsxs)(P.Z,{color:"shattered",children:[O.ZP.get(n.key)," ",me.Z.hydro,"+",me.Z.cryo,"+ ",(0,B.jsx)(P.Z,{color:"physical",children:(0,B.jsxs)("small",{children:["Heavy Attack",t," "]})})," ",(0,B.jsx)("strong",{children:(0,O.EC)(n.value,n.unit)})]})})})},crystallize:function(){var e=(0,m.useState)(Object.keys(Pn)[0]),n=(0,r.Z)(e,2),t=n[0],i=n[1],a=(0,m.useContext)(W.R).data,s="geo"===t?a.getDisplay().reaction.crystallize:a.getDisplay().reaction["".concat(t,"Crystallize")];return(0,B.jsxs)(p.Z,{sx:{display:"flex"},children:[(0,B.jsx)(C.Z,{size:"small",title:Pn[t],color:"success",children:Object.entries(Pn).map((function(e){var n=(0,r.Z)(e,2),a=n[0],s=n[1];return(0,B.jsx)(f.Z,{selected:t===a,disabled:t===a,onClick:function(){return i(a)},children:s},a)}))}),(0,B.jsx)(D.Z,{sx:{color:"".concat(t,".main"),p:1},children:(0,B.jsx)("strong",{children:(0,O.EC)(s.value,s.unit)})})]})}};function kn(){var e=(0,m.useContext)(W.R).data.getDisplay().reaction;return(0,B.jsx)(g.Z,{sx:{mb:1},children:(0,B.jsx)(l.Z,{children:(0,B.jsx)(c.ZP,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],a=yn[t];return a?(0,B.jsx)(c.ZP,{item:!0,children:(0,B.jsx)(a,{node:i})},t):null}))})})})}var bn={pyro:(0,B.jsxs)("span",{children:[(0,B.jsx)(P.Z,{color:"pyro",children:O.ZP.get("pyro_swirl_hit")})," ",me.Z.pyro," + ",me.Z.anemo]}),electro:(0,B.jsxs)("span",{children:[(0,B.jsx)(P.Z,{color:"electro",children:O.ZP.get("electro_swirl_hit")})," ",me.Z.electro,"+",me.Z.anemo]}),cryo:(0,B.jsxs)("span",{children:[(0,B.jsx)(P.Z,{color:"cryo",children:O.ZP.get("cryo_swirl_hit")})," ",me.Z.cryo," + ",me.Z.anemo]}),hydro:(0,B.jsxs)("span",{children:[(0,B.jsx)(P.Z,{color:"hydro",children:O.ZP.get("hydro_swirl_hit")})," ",me.Z.hydro," + ",me.Z.anemo]})};var Pn={geo:(0,B.jsxs)(P.Z,{color:"crystallize",children:[O.ZP.get("crystallize")," ",me.Z.electro,"/",me.Z.hydro,"/",me.Z.pyro,"/",me.Z.cryo,"+",me.Z.geo]}),pyro:(0,B.jsxs)("span",{children:[(0,B.jsx)(P.Z,{color:"pyro",children:O.ZP.get("pyro_crystallize")})," ",me.Z.pyro,"+",me.Z.geo]}),electro:(0,B.jsxs)("span",{children:[(0,B.jsx)(P.Z,{color:"electro",children:O.ZP.get("electro_crystallize")})," ",me.Z.electro,"+",me.Z.geo]}),cryo:(0,B.jsxs)("span",{children:[(0,B.jsx)(P.Z,{color:"cryo",children:O.ZP.get("cryo_crystallize")})," ",me.Z.cryo,"+",me.Z.geo]}),hydro:(0,B.jsxs)("span",{children:[(0,B.jsx)(P.Z,{color:"hydro",children:O.ZP.get("hydro_crystallize")})," ",me.Z.hydro,"+",me.Z.geo]})};var wn=[1,1,2,4,6,8,10];function Cn(e){var n=e.talentKey,t=e.subtitle,r=e.onClickTitle,i=(0,m.useContext)(W.R),a=i.data,s=i.character.talent,o=i.characterSheet,u=i.characterDispatch,x=(0,m.useCallback)((function(e){return(0,B.jsx)(fn.Z,{onClick:r,children:e})}),[r]),h=null;if(n in s){var j=a.get(ie.ri.bonus[n]).value,v=a.get(ie.ri.total[n]).value,p=a.get(ie.ri.asc).value;h=(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(l.Z,{sx:{py:1},children:(0,B.jsx)(C.Z,{fullWidth:!0,title:"Talent Lv. ".concat(v),color:j?"info":"primary",children:(0,$.w6)(1,wn[p]).map((function(e){return(0,B.jsxs)(f.Z,{selected:s[n]===e,disabled:s[n]===e,onClick:function(){return t=e,s[n]=t,void u({talent:s});var t},children:["Talent Lv. ",e+j]},e)}))})}),(0,B.jsx)(Z.Z,{})]})}var y=o.getTalentOfKey(n,a.get(ie.ri.charEle).value);return(0,B.jsxs)(g.Z,{sx:{height:"100%"},children:[h,(0,B.jsxs)(l.Z,{children:[(0,B.jsx)(pn.Z,{condition:!!r,wrapper:x,children:(0,B.jsxs)(c.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,B.jsx)(c.ZP,{item:!0,children:(0,B.jsx)(D.Z,{component:"img",src:null===y||void 0===y?void 0:y.img,sx:{width:60,height:"auto"}})}),(0,B.jsxs)(c.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,B.jsx)(d.Z,{variant:"h6",children:null===y||void 0===y?void 0:y.name}),(0,B.jsx)(d.Z,{variant:"subtitle1",children:t})]})]})}),null!==y&&void 0!==y&&y.sections?(0,B.jsx)(Ce.Z,{sections:y.sections}):null]})]})}var Sn=["children","current","value"];function _n(e){var n=e.children,t=e.current,r=e.value,l=(0,a.Z)(e,Sn);return r!==t?null:(0,B.jsx)(m.Suspense,{fallback:(0,B.jsx)(s.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,B.jsx)("div",(0,i.Z)((0,i.Z)({role:"tabpanel",hidden:r!==t,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},l),{},{children:n}))})}function Kn(e){var n,t,a=e.characterKey,s=e.footer,j=e.newteamData,v=e.mainStatAssumptionLevel,f=void 0===v?0:v,y=e.onClose,k=e.tabName,P=(0,X.Z)(a,f),w=null!==(n=null===P||void 0===P?void 0:P[a])&&void 0!==n?n:{},C=w.character,_=w.characterSheet,K=w.target,D=(0,m.useState)(k||(j?"newartifacts":"character")),E=(0,r.Z)(D,2),T=E[0],R=E[1],A=(0,m.useCallback)((function(e,n){return R(n)}),[R]),I=(0,q.Z)(null!==(t=null===C||void 0===C?void 0:C.key)&&void 0!==t?t:""),O=(null!==C&&void 0!==C?C:{}).compareData,L=(0,m.useMemo)((function(){if(P&&C&&_&&K)return{character:C,characterSheet:_,mainStatAssumptionLevel:f,data:j?j[a].target:K,teamData:j||P,oldData:O&&j?K:void 0,characterDispatch:I}}),[C,_,f,j,K,P,I,a,O]);return P&&C&&_&&K&&L?(0,B.jsx)(p.Z,{children:(0,B.jsxs)(W.R.Provider,{value:L,children:[(0,B.jsxs)(l.Z,{sx:{"> div:not(:last-child)":{mb:1}},children:[(0,B.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(c.ZP,{item:!0,children:(0,B.jsx)(Dn,{})}),(0,B.jsx)(c.ZP,{item:!0,children:!!j&&(0,B.jsxs)(V.Z,{exclusive:!0,value:O,onChange:function(e,n){return I({compareData:n})},size:"small",children:[(0,B.jsx)(o.Z,{value:!1,disabled:!O,children:(0,B.jsx)("small",{children:"Show New artifact Stats"})}),(0,B.jsx)(o.Z,{value:!0,disabled:O,children:(0,B.jsx)("small",{children:"Compare against equipped artifacts"})})]})}),(0,B.jsx)(c.ZP,{item:!0,flexGrow:1}),!!f&&(0,B.jsx)(c.ZP,{item:!0,children:(0,B.jsx)(u.Z,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:(0,B.jsx)(d.Z,{children:(0,B.jsxs)("strong",{children:["Assume Main Stats are Level ",f]})})})}),!!y&&(0,B.jsx)(c.ZP,{item:!0,children:(0,B.jsx)(b.Z,{onClick:y})})]}),(0,B.jsx)(g.Z,{children:(0,B.jsxs)(x.Z,{onChange:A,value:T,variant:"fullWidth",children:[(0,B.jsx)(h.Z,{value:"character",label:"Character"}),!!j&&(0,B.jsx)(h.Z,{value:"newartifacts",label:"New Artifacts"}),(0,B.jsx)(h.Z,{value:"artifacts",label:j?"Current Artifacts":"Artifacts"}),(0,B.jsx)(h.Z,{value:"buffs",label:"Team Buffs"}),(0,B.jsx)(h.Z,{value:"talent",label:"Talents"})]})}),(0,B.jsx)(J.yb,{}),(0,B.jsx)(M,{}),(0,B.jsx)(S.d3,{}),(0,B.jsx)(_n,{value:"character",current:T,children:(0,B.jsx)(an,{})}),(0,B.jsx)(W.R.Provider,{value:(0,i.Z)((0,i.Z)({},L),{},{data:K,oldData:void 0}),children:(0,B.jsx)(_n,{value:"artifacts",current:T,children:(0,B.jsx)(oe,{})})}),(0,B.jsx)(_n,{value:"newartifacts",current:T,children:(0,B.jsx)(oe,{newBuild:!0})}),(0,B.jsx)(_n,{value:"buffs",current:T,children:(0,B.jsx)(Xe,{})}),(0,B.jsx)(_n,{value:"talent",current:T,children:(0,B.jsx)(gn,{})})]}),!!s&&(0,B.jsx)(Z.Z,{}),s&&(0,B.jsx)(l.Z,{children:s})]})}):(0,B.jsx)(B.Fragment,{})}function Dn(){var e,n=(0,m.useContext)(W.R),t=n.character,i=n.characterSheet,a=n.characterDispatch,s=(0,m.useState)(!1),l=(0,r.Z)(s,2),o=l[0],u=l[1],d=(0,Q.Z)(),x=(0,m.useCallback)((function(e){e=(0,$.uZ)(e,1,90);var n=U.SJ.findIndex((function(n){return e<=n}));a({level:e,ascension:n})}),[a]),h=(0,m.useCallback)((function(){if(t){var e=t.level,n=void 0===e?1:e,r=t.ascension,i=void 0===r?0:r,s=U.SJ.findIndex((function(e){return 90!==n&&n===e}));a(i===s?{ascension:i+1}:{ascension:s})}}),[a,t]),Z=t.elementKey,p=void 0===Z?"anemo":Z,g=t.level,b=void 0===g?1:g,S=t.ascension,_=void 0===S?0:S;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(y.w,{show:o,onHide:function(){return u(!1)},onSelect:d}),(0,B.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(c.ZP,{item:!0,children:(0,B.jsx)(j.Z,{onClick:function(){return u(!0)},startIcon:(0,B.jsx)(k.Z,{src:null===i||void 0===i?void 0:i.thumbImgSide}),children:null!==(e=null===i||void 0===i?void 0:i.name)&&void 0!==e?e:"Select a Character"})}),(0,B.jsx)(c.ZP,{item:!0,children:(0,B.jsxs)(v.Z,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(null===i||void 0===i?void 0:i.sheet)&&"talents"in(null===i||void 0===i?void 0:i.sheet)&&(0,B.jsx)(C.Z,{title:(0,B.jsx)("strong",{children:(0,B.jsx)(P.Z,{color:p,children:(0,H.Oy)("element.".concat(p))})}),children:Object.keys(i.sheet.talents).map((function(e){return(0,B.jsx)(f.Z,{selected:p===e,disabled:p===e,onClick:function(){return a({elementKey:e})},children:(0,B.jsx)("strong",{children:(0,B.jsx)(P.Z,{color:e,children:(0,H.Oy)("element.".concat(e))})})},e)}))}),(0,B.jsx)(w.CC,{children:(0,B.jsx)(w.ZP,{onChange:x,value:b,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!i})}),(0,B.jsx)(j.Z,{sx:{pl:1},disabled:!(0,U.ek)(b)||!i,onClick:h,children:(0,B.jsxs)("strong",{children:["/ ",U.SJ[_]]})}),(0,B.jsx)(C.Z,{title:"Select Level",disabled:!i,children:U.D4.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],s=t===U.SJ[i]?"Lv. ".concat(t):"Lv. ".concat(t,"/").concat(U.SJ[i]),l=t===b&&i===_;return(0,B.jsx)(f.Z,{selected:l,disabled:l,onClick:function(){return a({level:t,ascension:i})},children:s},"".concat(t,"/").concat(i))}))})]})})]})]})}},22776:function(e,n,t){t.d(n,{Z:function(){return Y}});var r,i,a,s,l=t(53174),c=t(54483),o=t(40117),u=t(62002),d=t(66647),x=t(47047),h=t(9585),Z=t(13400),j=t(61889),v=t(20890),f=t(68870),m=t(39504),p=t(2199),g=t(24518),y=t(72791),k=t(9350),b=t(71310),P=t(1413),w=t(30168),C=t(45987),S=t(63204),_=t(49670),K=t(23786),D=t(57064),E=t(94721),T=t(22020),R=t(947),A=t(3997),W=t(42320),I=t(33890),O=t(2380),L=t(80184),z=["value","onChange","unSelectText","unSelectIcon","inventory","noUnselect","filter"];function G(e){var n,t=e.value,l=e.onChange,c=e.unSelectText,o=e.unSelectIcon,u=e.inventory,d=void 0!==u&&u,x=e.noUnselect,h=void 0!==x&&x,Z=e.filter,j=void 0===Z?function(){return!0}:Z,f=(0,C.Z)(e,z),m=(0,T.$)("ui").t,p=(0,y.useContext)(A.t).database,g=(0,W.Z)(R.ZP.getAll,[]),k=(0,W.Z)(R.ZP.get(t),[t]),b=p._getCharKeys().filter((function(e){return(null===g||void 0===g?void 0:g[e])&&j(g[e],e)})).sort();return(0,L.jsxs)(I.Z,(0,P.Z)((0,P.Z)({},f),{},{title:null!==(n=null===k||void 0===k?void 0:k.name)&&void 0!==n?n:d?m(r||(r=(0,w.Z)(["inventory"]))):null!==c&&void 0!==c?c:m(i||(i=(0,w.Z)(["unselect"]))),color:t?"success":"primary",startIcon:null!==k&&void 0!==k&&k.thumbImg?(0,L.jsx)(O.Z,{src:k.thumbImgSide}):d?(0,L.jsx)(S.Z,{}):null!==o&&void 0!==o?o:(0,L.jsx)(_.Z,{}),children:[!h&&(d?(0,L.jsxs)(K.Z,{onClick:function(){return l("")},selected:""===t,disabled:""===t,children:[(0,L.jsx)(D.Z,{children:(0,L.jsx)(S.Z,{})}),(0,L.jsx)(v.Z,{variant:"inherit",noWrap:!0,children:m(a||(a=(0,w.Z)(["inventory"])))})]}):(0,L.jsxs)(K.Z,{onClick:function(){return l("")},selected:""===t,disabled:""===t,children:[(0,L.jsx)(D.Z,{children:(0,L.jsx)(_.Z,{})}),(0,L.jsx)(v.Z,{variant:"inherit",noWrap:!0,children:m(s||(s=(0,w.Z)(["unselect"])))})]})),!h&&(0,L.jsx)(E.Z,{},"div"),!!g&&B(g,b,l,t)]}))}function B(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n.map((function(n){var i;return(0,L.jsxs)(K.Z,{onClick:function(){return t(n)},selected:r===n,disabled:r===n,children:[(0,L.jsx)(D.Z,{children:(0,L.jsx)(O.Z,{src:e[n].thumbImgSide})}),(0,L.jsx)(v.Z,{variant:"inherit",noWrap:!0,children:null===e||void 0===e||null===(i=e[n])||void 0===i?void 0:i.name})]},n)}))}var M=t(40020),N=t(20005),F=t(55942),J=t(10157),V=t(75545),H=t(2139),U=t(26138),q=t(87234),Q=t(74480),X=t(44297),$=t(66218);function Y(e){var n,t=e.weaponId,r=e.onClick,i=e.onEdit,a=e.onDelete,s=e.canEquip,P=void 0!==s&&s,w=(0,y.useContext)(A.t).database,C=(0,Q.Z)(t),S=(0,W.Z)(null!==C&&void 0!==C&&C.key?$.ZP.get(C.key):void 0,[null===C||void 0===C?void 0:C.key]),_=(0,y.useCallback)((function(e){return e.weaponTypeKey===(null===S||void 0===S?void 0:S.weaponType)}),[S]),K=(0,y.useCallback)((function(e){return(0,L.jsx)(d.Z,{onClick:function(){return null===r||void 0===r?void 0:r(t)},sx:{height:"100%"},children:e})}),[r,t]),D=(0,y.useCallback)((function(e){return w.setWeaponLocation(t,e)}),[w,t]),E=(0,y.useMemo)((function(){return S&&C&&(0,q.mP)([S.data,(0,q.v0)(C)])}),[S,C]);if(!C||!S||!E)return null;var T=C.level,R=C.ascension,I=C.refinement,O=C.id,z=C.location,B=void 0===z?"":z,Y=C.lock,ee=E.get(U.ri.weapon.type).value,ne=[U.ri.weapon.main,U.ri.weapon.sub,U.ri.weapon.sub2].map((function(e){return E.get(e)})),te=R<2?null===S||void 0===S?void 0:S.img:null===S||void 0===S?void 0:S.imgAwaken;return(0,L.jsx)(y.Suspense,{fallback:(0,L.jsx)(x.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,L.jsx)(N.Z,{condition:!!r,wrapper:K,children:(0,L.jsxs)(b.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,L.jsxs)("div",{className:"grad-".concat(S.rarity,"star"),children:[(0,L.jsx)(h.Z,{title:S.name,avatar:(0,L.jsx)(F.Z,{sx:{fontSize:"2em"},src:null===(n=k.Z.weaponTypes)||void 0===n?void 0:n[ee]}),titleTypographyProps:{variant:"h6"},action:!r&&(0,L.jsx)(Z.Z,{color:"primary",onClick:function(){return w.updateWeapon({lock:!Y},O)},children:Y?(0,L.jsx)(o.Z,{}):(0,L.jsx)(u.Z,{})})}),(0,L.jsxs)(j.ZP,{container:!0,sx:{flexWrap:"nowrap",pl:2},children:[(0,L.jsxs)(j.ZP,{item:!0,flexGrow:1,children:[(0,L.jsxs)(v.Z,{component:"span",variant:"h4",children:["Lv. ",T]}),(0,L.jsxs)(v.Z,{component:"span",variant:"h4",color:"text.secondary",children:["/",H.SJ[R]]}),(0,L.jsxs)(v.Z,{variant:"h6",children:["Refinement ",(0,L.jsx)("strong",{children:I})]}),(0,L.jsx)(v.Z,{children:(0,L.jsx)(J.t,{stars:S.rarity,colored:!0})})]}),(0,L.jsx)(j.ZP,{item:!0,container:!0,maxWidth:"40%",alignContent:"flex-end",sx:{mt:-3},children:(0,L.jsx)(f.Z,{component:"img",src:te,width:"100%",height:"auto"})})]})]}),(0,L.jsx)(m.Z,{children:ne.map((function(e){if(!e.key)return null;var n=(0,X.EC)(e.value,e.unit,"flat"===e.unit?0:void 0);return(0,L.jsxs)(f.Z,{sx:{display:"flex"},children:[(0,L.jsxs)(v.Z,{flexGrow:1,children:[V.Z[e.key]," ",X.ZP.get(e.key)]}),(0,L.jsx)(v.Z,{children:n})]},e.key)}))}),(0,L.jsx)(f.Z,{flexGrow:1}),(0,L.jsx)(m.Z,{sx:{py:1},children:(0,L.jsxs)(j.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,L.jsx)(j.ZP,{item:!0,xs:"auto",flexShrink:1,children:P?(0,L.jsx)(G,{size:"small",noUnselect:!0,inventory:!0,value:B,onChange:D,filter:_}):(0,L.jsx)(M.Z,{location:B})}),(0,L.jsx)(j.ZP,{item:!0,flexGrow:1,sx:{mr:1}}),(0,L.jsx)(j.ZP,{item:!0,xs:"auto",children:(0,L.jsxs)(p.Z,{sx:{height:"100%"},children:[!!i&&(0,L.jsx)(g.Z,{color:"info",size:"small",onClick:function(){return i(O)},children:(0,L.jsx)(c.G,{icon:l.Xcf,className:"fa-fw"})}),!!a&&(0,L.jsx)(g.Z,{color:"error",size:"small",onClick:function(){return a(O)},disabled:!!B||Y,children:(0,L.jsx)(c.G,{icon:l.I7k,className:"fa-fw"})})]})})]})})]})})})}},90329:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var r=t(93433),i=t(29439),a=t(40117),s=t(62002),l=t(97719),c=t(39504),o=t(61889),u=t(2199),d=t(24518),x=t(23786),h=t(94721),Z=t(68870),j=t(20890),v=t(9585),f=t(15021),m=t(72791),p=t(9350),g=t(3992),y=t(71310),k=t(36944),b=t(68198),P=(t(91702),t(10600)),w=t(37503),C=t(33890),S=t(14763),_=t(55942),K=t(9321),D=t(25617),E=t(10157),T=t(44361),R=t(947),A=t(2139),W=t(66218),I=t(3997),O=t(2693),L=t(26138),z=t(87234),G=t(42320),B=t(74480),M=t(60393),N=t(22776),F=t(80184);function J(e){var n,t=e.weaponId,l=e.footer,p=void 0!==l&&l,_=e.onClose,K=(0,m.useContext)(O.R).data,N=(0,m.useContext)(I.t).database,J=(0,B.Z)(t),H=null!==J&&void 0!==J?J:{},U=H.key,q=void 0===U?"":U,Q=H.level,X=void 0===Q?0:Q,$=H.refinement,Y=void 0===$?0:$,ee=H.ascension,ne=void 0===ee?0:ee,te=H.lock,re=H.location,ie=void 0===re?"":re,ae=H.id,se=(0,G.Z)(W.ZP.get(q),[q]),le=null===se||void 0===se?void 0:se.weaponType,ce=(0,m.useCallback)((function(e){N.updateWeapon(e,t)}),[t,N]),oe=(0,m.useCallback)((function(e){e=(0,M.uZ)(e,1,90);var n=A.SJ.findIndex((function(n){return e<=n}));ce({level:e,ascension:n})}),[ce]),ue=(0,m.useCallback)((function(){var e=A.SJ.findIndex((function(e){return 90!==X&&X===e}));ce(ne===e?{ascension:ne+1}:{ascension:e})}),[ce,ne,X]),de=(0,G.Z)(ie?R.ZP.get(ie):void 0,[ie]),xe=de?function(e){return e.weaponType===de.weaponTypeKey}:void 0,he=de&&de.weaponTypeKey,Ze=(0,m.useCallback)((function(e){return ae&&N.setWeaponLocation(ae,e)}),[N,ae]),je=(0,m.useCallback)((function(e){return e.weaponTypeKey===(null===se||void 0===se?void 0:se.weaponType)}),[se]),ve=(0,m.useState)(!1),fe=(0,i.Z)(ve,2),me=fe[0],pe=fe[1],ge=ne<2?null===se||void 0===se?void 0:se.img:null===se||void 0===se?void 0:se.imgAwaken;(0,m.useEffect)((function(){if(se&&ce&&se.key===(null===J||void 0===J?void 0:J.key)&&se.rarity<=2&&(X>70||ne>4)){var e=(0,i.Z)(A.Xu[0],2),n=e[0],t=e[1];ce({level:n,ascension:t})}}),[se,J,ce,X,ne]);var ye=(0,m.useMemo)((function(){return se&&J&&(0,z.mP)([se.data,(0,z.v0)(J)])}),[se,J]);return(0,F.jsxs)(y.Z,{children:[(0,F.jsx)(c.Z,{sx:{py:1},children:(0,F.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,F.jsx)(o.ZP,{item:!0,flexGrow:1,children:(0,F.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,F.jsxs)(o.ZP,{item:!0,children:[(0,F.jsx)(T.Z,{show:me,onHide:function(){return pe(!1)},onSelect:function(e){return ce({key:e})},filter:xe,weaponFilter:he}),(0,F.jsxs)(u.Z,{children:[(0,F.jsx)(d.Z,{onClick:function(){return pe(!0)},children:null!==(n=null===se||void 0===se?void 0:se.name)&&void 0!==n?n:"Select a Weapon"}),(null===se||void 0===se?void 0:se.hasRefinement)&&(0,F.jsxs)(C.Z,{title:"Refinement ".concat(Y),children:[(0,F.jsx)(x.Z,{children:"Select Weapon Refinement"}),(0,F.jsx)(h.Z,{}),(0,r.Z)(Array(5).keys()).map((function(e){return(0,F.jsx)(x.Z,{onClick:function(){return ce({refinement:e+1})},selected:Y===e+1,disabled:Y===e+1,children:"Refinement ".concat(e+1)},e)}))]})]})]}),(0,F.jsx)(o.ZP,{item:!0,children:(0,F.jsxs)(u.Z,{sx:{bgcolor:function(e){return e.palette.contentLight.main}},children:[(0,F.jsx)(P.CC,{children:(0,F.jsx)(P.ZP,{onChange:oe,value:X,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),se&&(0,F.jsx)(d.Z,{sx:{pl:1},disabled:!se.ambiguousLevel(X),onClick:ue,children:(0,F.jsxs)("strong",{children:["/ ",A.SJ[ne]]})}),se&&(0,F.jsx)(C.Z,{title:"Select Level",children:se.milestoneLevels.map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1],a=t===A.SJ[r]?"Lv. ".concat(t):"Lv. ".concat(t,"/").concat(A.SJ[r]),s=t===X&&r===ne;return(0,F.jsx)(x.Z,{selected:s,disabled:s,onClick:function(){return ce({level:t,ascension:r})},children:a},"".concat(t,"/").concat(r))}))})]})}),(0,F.jsx)(o.ZP,{item:!0,children:(0,F.jsx)(d.Z,{color:"error",onClick:function(){return ae&&N.updateWeapon({lock:!te},ae)},startIcon:te?(0,F.jsx)(a.Z,{}):(0,F.jsx)(s.Z,{}),children:te?"Locked":"Unlocked"})})]})}),!!_&&(0,F.jsx)(o.ZP,{item:!0,children:(0,F.jsx)(b.Z,{onClick:_})}),(0,F.jsx)(o.ZP,{item:!0,children:(0,F.jsx)(V,{weaponTypeKey:le,onChangeId:function(e){return N.setWeaponLocation(e,K.get(L.ri.charKey).value)}})})]})}),(0,F.jsx)(h.Z,{}),(0,F.jsx)(c.Z,{children:se&&ye&&(0,F.jsxs)(Z.Z,{display:"flex",gap:{xs:1,md:1.5,lg:2},children:[(0,F.jsxs)(Z.Z,{sx:{maxWidth:256},flexShrink:1,minWidth:"25%",children:[(0,F.jsx)(Z.Z,{component:"img",src:ge,className:"grad-".concat(se.rarity,"star"),sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}}),(0,F.jsx)(j.Z,{children:(0,F.jsx)("small",{children:se.description})})]}),(0,F.jsxs)(Z.Z,{sx:{mb:-1},flexGrow:1,children:[(0,F.jsxs)(j.Z,{variant:"h6",children:[!1,se.name," Lv. ",J&&W.ZP.getLevelString(J)," ",se.rarity>2&&(0,F.jsxs)(D.Z,{color:"info",children:["Refinement ",Y]})]}),(0,F.jsx)(j.Z,{children:(0,F.jsx)(E.t,{stars:se.rarity})}),(0,F.jsx)(j.Z,{variant:"subtitle1",children:se.passiveName}),(0,F.jsx)(j.Z,{gutterBottom:!0,children:se.passiveName&&se.passiveDescription(ye.get(L.ri.weapon.refineIndex).value)}),(0,F.jsxs)(Z.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,F.jsxs)(g.Z,{children:[(0,F.jsx)(v.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,F.jsx)(h.Z,{}),(0,F.jsx)(S.lD,{children:[L.ri.weapon.main,L.ri.weapon.sub,L.ri.weapon.sub2].map((function(e,n){var t=ye.get(e);return t.isEmpty||!t.value?null:(0,F.jsx)(S.JW,{node:t,component:f.ZP},t.key)}))})]}),K&&se.document&&(0,F.jsx)(w.Z,{sections:se.document})]})]})]})}),p&&ae&&(0,F.jsx)(c.Z,{sx:{py:1},children:(0,F.jsxs)(o.ZP,{container:!0,children:[(0,F.jsx)(o.ZP,{item:!0,flexGrow:1,children:(0,F.jsx)(k.Z,{noUnselect:!0,inventory:!0,value:ie,onChange:Ze,filter:je})}),!!_&&(0,F.jsx)(o.ZP,{item:!0,children:(0,F.jsx)(b.Z,{large:!0,onClick:_})})]})})]})}function V(e){var n=e.onChangeId,t=e.weaponTypeKey,r=(0,m.useContext)(I.t).database,a=(0,m.useState)(!1),s=(0,i.Z)(a,2),u=s[0],x=s[1],Z=function(){return x(!1)},v=function(e){n(e),Z()},f=(0,G.Z)(W.ZP.getAll,[]),y=r.weapons.keys.filter((function(e){var n,i=r._getWeapon(e);return!!i&&(!t||t===(null===f||void 0===f||null===(n=f[i.key])||void 0===n?void 0:n.weaponType))}));return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(d.Z,{color:"info",onClick:function(){return x(!0)},startIcon:(0,F.jsx)(l.Z,{}),children:"SWAP WEAPON"}),(0,F.jsx)(K.Z,{open:u,onClose:Z,children:(0,F.jsxs)(g.Z,{children:[(0,F.jsx)(c.Z,{sx:{py:1},children:(0,F.jsxs)(o.ZP,{container:!0,children:[(0,F.jsx)(o.ZP,{item:!0,flexGrow:1,children:(0,F.jsxs)(j.Z,{variant:"h6",children:[t?(0,F.jsx)(_.Z,{src:p.Z.weaponTypes[t]}):null," Swap Weapon"]})}),(0,F.jsx)(o.ZP,{item:!0,children:(0,F.jsx)(b.Z,{onClick:Z})})]})}),(0,F.jsx)(h.Z,{}),(0,F.jsx)(c.Z,{children:(0,F.jsx)(o.ZP,{container:!0,spacing:1,children:y.map((function(e){return(0,F.jsx)(o.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,F.jsx)(N.Z,{weaponId:e,onClick:v})},e)}))})})]})})]})}},74480:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(29439),i=t(72791),a=t(3997);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,i.useContext)(a.t),t=n.database,s=(0,i.useState)(t._getWeapon(e)),l=(0,r.Z)(s,2),c=l[0],o=l[1];return(0,i.useEffect)((function(){return o(t._getWeapon(e))}),[t,e]),(0,i.useEffect)((function(){return e?t.followWeapon(e,o):void 0}),[e,o,t]),c}}}]);
//# sourceMappingURL=460.6015b607.chunk.js.map