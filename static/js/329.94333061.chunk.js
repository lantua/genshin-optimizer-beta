"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[329],{2693:function(e,n,i){i.d(n,{R:function(){return t}});var t=(0,i(72791).createContext)({})},90329:function(e,n,i){i.r(n),i.d(n,{default:function(){return U}});var t=i(93433),s=i(29439),o=i(40117),r=i(62002),l=i(97719),c=i(39504),a=i(61889),d=i(2199),u=i(24518),x=i(23786),Z=i(94721),h=i(68870),p=i(20890),j=i(9585),v=i(15021),f=i(72791),m=i(9350),y=i(3992),g=i(71310),k=i(36944),w=i(68198),C=(i(91702),i(10600)),P=i(37503),b=i(33890),S=i(14763),W=i(55942),L=i(9321),T=i(25617),I=i(10157),R=i(44361),A=i(947),J=i(2139),K=i(66218),z=i(3997),H=i(2693),G=i(26138),M=i(87234),N=i(42320),D=i(74480),E=i(60393),_=i(22776),F=i(80184);function U(e){var n,i=e.weaponId,l=e.footer,m=void 0!==l&&l,W=e.onClose,L=(0,f.useContext)(H.R).data,_=(0,f.useContext)(z.t).database,U=(0,D.Z)(i),O=null!==U&&void 0!==U?U:{},X=O.key,q=void 0===X?"":X,Q=O.level,V=void 0===Q?0:Q,Y=O.refinement,$=void 0===Y?0:Y,ee=O.ascension,ne=void 0===ee?0:ee,ie=O.lock,te=O.location,se=void 0===te?"":te,oe=O.id,re=(0,N.Z)(K.ZP.get(q),[q]),le=null===re||void 0===re?void 0:re.weaponType,ce=(0,f.useCallback)((function(e){_.updateWeapon(e,i)}),[i,_]),ae=(0,f.useCallback)((function(e){e=(0,E.uZ)(e,1,90);var n=J.SJ.findIndex((function(n){return e<=n}));ce({level:e,ascension:n})}),[ce]),de=(0,f.useCallback)((function(){var e=J.SJ.findIndex((function(e){return 90!==V&&V===e}));ce(ne===e?{ascension:ne+1}:{ascension:e})}),[ce,ne,V]),ue=(0,N.Z)(se?A.ZP.get(se):void 0,[se]),xe=ue?function(e){return e.weaponType===ue.weaponTypeKey}:void 0,Ze=ue&&ue.weaponTypeKey,he=(0,f.useCallback)((function(e){return oe&&_.setWeaponLocation(oe,e)}),[_,oe]),pe=(0,f.useCallback)((function(e){return e.weaponTypeKey===(null===re||void 0===re?void 0:re.weaponType)}),[re]),je=(0,f.useState)(!1),ve=(0,s.Z)(je,2),fe=ve[0],me=ve[1],ye=ne<2?null===re||void 0===re?void 0:re.img:null===re||void 0===re?void 0:re.imgAwaken;(0,f.useEffect)((function(){if(re&&ce&&re.key===(null===U||void 0===U?void 0:U.key)&&re.rarity<=2&&(V>70||ne>4)){var e=(0,s.Z)(J.Xu[0],2),n=e[0],i=e[1];ce({level:n,ascension:i})}}),[re,U,ce,V,ne]);var ge=(0,f.useMemo)((function(){return re&&U&&(0,M.mP)([re.data,(0,M.v0)(U)])}),[re,U]);return(0,F.jsxs)(g.Z,{children:[(0,F.jsx)(c.Z,{sx:{py:1},children:(0,F.jsxs)(a.ZP,{container:!0,spacing:1,children:[(0,F.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,F.jsxs)(a.ZP,{container:!0,spacing:1,children:[(0,F.jsxs)(a.ZP,{item:!0,children:[(0,F.jsx)(R.Z,{show:fe,onHide:function(){return me(!1)},onSelect:function(e){return ce({key:e})},filter:xe,weaponFilter:Ze}),(0,F.jsxs)(d.Z,{children:[(0,F.jsx)(u.Z,{onClick:function(){return me(!0)},children:null!==(n=null===re||void 0===re?void 0:re.name)&&void 0!==n?n:"Select a Weapon"}),(null===re||void 0===re?void 0:re.hasRefinement)&&(0,F.jsxs)(b.Z,{title:"Refinement ".concat($),children:[(0,F.jsx)(x.Z,{children:"Select Weapon Refinement"}),(0,F.jsx)(Z.Z,{}),(0,t.Z)(Array(5).keys()).map((function(e){return(0,F.jsx)(x.Z,{onClick:function(){return ce({refinement:e+1})},selected:$===e+1,disabled:$===e+1,children:"Refinement ".concat(e+1)},e)}))]})]})]}),(0,F.jsx)(a.ZP,{item:!0,children:(0,F.jsxs)(d.Z,{sx:{bgcolor:function(e){return e.palette.contentLight.main}},children:[(0,F.jsx)(C.CC,{children:(0,F.jsx)(C.ZP,{onChange:ae,value:V,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),re&&(0,F.jsx)(u.Z,{sx:{pl:1},disabled:!re.ambiguousLevel(V),onClick:de,children:(0,F.jsxs)("strong",{children:["/ ",J.SJ[ne]]})}),re&&(0,F.jsx)(b.Z,{title:"Select Level",children:re.milestoneLevels.map((function(e){var n=(0,s.Z)(e,2),i=n[0],t=n[1],o=i===J.SJ[t]?"Lv. ".concat(i):"Lv. ".concat(i,"/").concat(J.SJ[t]),r=i===V&&t===ne;return(0,F.jsx)(x.Z,{selected:r,disabled:r,onClick:function(){return ce({level:i,ascension:t})},children:o},"".concat(i,"/").concat(t))}))})]})}),(0,F.jsx)(a.ZP,{item:!0,children:(0,F.jsx)(u.Z,{color:"error",onClick:function(){return oe&&_.updateWeapon({lock:!ie},oe)},startIcon:ie?(0,F.jsx)(o.Z,{}):(0,F.jsx)(r.Z,{}),children:ie?"Locked":"Unlocked"})})]})}),!!W&&(0,F.jsx)(a.ZP,{item:!0,children:(0,F.jsx)(w.Z,{onClick:W})}),(0,F.jsx)(a.ZP,{item:!0,children:(0,F.jsx)(B,{weaponTypeKey:le,onChangeId:function(e){return _.setWeaponLocation(e,L.get(G.ri.charKey).value)}})})]})}),(0,F.jsx)(Z.Z,{}),(0,F.jsx)(c.Z,{children:re&&ge&&(0,F.jsxs)(h.Z,{display:"flex",gap:{xs:1,md:1.5,lg:2},children:[(0,F.jsxs)(h.Z,{sx:{maxWidth:256},flexShrink:1,minWidth:"25%",children:[(0,F.jsx)(h.Z,{component:"img",src:ye,className:"grad-".concat(re.rarity,"star"),sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}}),(0,F.jsx)(p.Z,{children:(0,F.jsx)("small",{children:re.description})})]}),(0,F.jsxs)(h.Z,{sx:{mb:-1},flexGrow:1,children:[(0,F.jsxs)(p.Z,{variant:"h6",children:[!1,re.name," Lv. ",U&&K.ZP.getLevelString(U)," ",re.rarity>2&&(0,F.jsxs)(T.Z,{color:"info",children:["Refinement ",$]})]}),(0,F.jsx)(p.Z,{children:(0,F.jsx)(I.t,{stars:re.rarity})}),(0,F.jsx)(p.Z,{variant:"subtitle1",children:re.passiveName}),(0,F.jsx)(p.Z,{gutterBottom:!0,children:re.passiveName&&re.passiveDescription(ge.get(G.ri.weapon.refineIndex).value)}),(0,F.jsxs)(h.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,F.jsxs)(y.Z,{children:[(0,F.jsx)(j.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,F.jsx)(Z.Z,{}),(0,F.jsx)(S.lD,{children:[G.ri.weapon.main,G.ri.weapon.sub,G.ri.weapon.sub2].map((function(e,n){var i=ge.get(e);return i.isEmpty||!i.value?null:(0,F.jsx)(S.JW,{node:i,component:v.ZP},i.key)}))})]}),L&&re.document&&(0,F.jsx)(P.Z,{sections:re.document})]})]})]})}),m&&oe&&(0,F.jsx)(c.Z,{sx:{py:1},children:(0,F.jsxs)(a.ZP,{container:!0,children:[(0,F.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,F.jsx)(k.Z,{noUnselect:!0,inventory:!0,value:se,onChange:he,filter:pe})}),!!W&&(0,F.jsx)(a.ZP,{item:!0,children:(0,F.jsx)(w.Z,{large:!0,onClick:W})})]})})]})}function B(e){var n=e.onChangeId,i=e.weaponTypeKey,t=(0,f.useContext)(z.t).database,o=(0,f.useState)(!1),r=(0,s.Z)(o,2),d=r[0],x=r[1],h=function(){return x(!1)},j=function(e){n(e),h()},v=(0,N.Z)(K.ZP.getAll,[]),g=t.weapons.keys.filter((function(e){var n,s=t._getWeapon(e);return!!s&&(!i||i===(null===v||void 0===v||null===(n=v[s.key])||void 0===n?void 0:n.weaponType))}));return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(u.Z,{color:"info",onClick:function(){return x(!0)},startIcon:(0,F.jsx)(l.Z,{}),children:"SWAP WEAPON"}),(0,F.jsx)(L.Z,{open:d,onClose:h,children:(0,F.jsxs)(y.Z,{children:[(0,F.jsx)(c.Z,{sx:{py:1},children:(0,F.jsxs)(a.ZP,{container:!0,children:[(0,F.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,F.jsxs)(p.Z,{variant:"h6",children:[i?(0,F.jsx)(W.Z,{src:m.Z.weaponTypes[i]}):null," Swap Weapon"]})}),(0,F.jsx)(a.ZP,{item:!0,children:(0,F.jsx)(w.Z,{onClick:h})})]})}),(0,F.jsx)(Z.Z,{}),(0,F.jsx)(c.Z,{children:(0,F.jsx)(a.ZP,{container:!0,spacing:1,children:g.map((function(e){return(0,F.jsx)(a.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,F.jsx)(_.Z,{weaponId:e,onClick:j})},e)}))})})]})})]})}},97719:function(e,n,i){var t=i(76189),s=i(80184);n.Z=(0,t.Z)((0,s.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz")}}]);
//# sourceMappingURL=329.94333061.chunk.js.map