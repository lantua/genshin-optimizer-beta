{"version":3,"file":"static/js/657.d28dccc4.chunk.js","mappings":"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","sources":["Components/Artifact/ArtifactLevelSlider.tsx","Components/Artifact/ArtifactSetDropdown.tsx","Components/BootstrapTooltip.tsx","Components/Character/CharacterDropdownButton.tsx","Components/Character/LocationName.tsx","Components/Character/ThumbSide.tsx","Components/CustomNumberInput.tsx","Components/InfoComponent.tsx","Components/SortByButton.tsx","Components/StatFilterCard.tsx","Components/TextButton.tsx","DataContext.tsx","Data/Artifacts/ArtifactSheet.tsx","GlobalSettings.tsx","PageArtifact/ArtifactCard.tsx","ReactHooks/useArtifact.tsx","Components/Artifact/ArtifactRarityDropdown.tsx","Components/Artifact/ArtifactSlotDropdown.tsx","Components/CustomNumberTextField.tsx","PageArtifact/ArtifactEditor/Components/SubstatEfficiencyDisplayCard.tsx","PageArtifact/ArtifactEditor/Components/SubstatInput.tsx","PageArtifact/ArtifactEditor/Components/UploadExplainationModal.tsx","PageArtifact/BorrowManager.ts","PageArtifact/ScanningUtil.tsx","PageArtifact/ArtifactEditor.tsx","Components/Artifact/ArtifactMainStatMultipleSelectChip.tsx","Components/Artifact/ArtifactSetMultipleSelectChip.tsx","Components/Artifact/ArtifactSubStatMultipleSelectChip.tsx","PageArtifact/ArtifactFilter.tsx","PageArtifact/ProbabilityFilter.tsx","PageArtifact/ArtifactDisplay.tsx","PageArtifact/PercentBadge.tsx","ReactHooks/useDBState.tsx","Util/SortByFilters.ts"],"sourcesContent":["import { Card, Slider } from \"@mui/material\"\r\nimport { useCallback, useEffect, useState } from \"react\"\r\nimport { clamp } from \"../../Util/Util\"\r\nimport CustomNumberInput from \"../CustomNumberInput\"\r\n\r\nexport default function ArtifactLevelSlider({ levelLow, levelHigh, setLow, setHigh, setBoth, dark = false }: {\r\n  levelLow: number,\r\n  levelHigh: number,\r\n  setLow: (low: number) => void,\r\n  setHigh: (high: number) => void,\r\n  setBoth: (low: number, high: number) => void,\r\n  dark?: boolean\r\n}) {\r\n  const [sliderLow, setsliderLow] = useState(levelLow)\r\n  const [sliderHigh, setsliderHigh] = useState(levelHigh)\r\n  const setSlider = useCallback(\r\n    (e, [l, h]) => {\r\n      setsliderLow(l)\r\n      setsliderHigh(h)\r\n    },\r\n    [setsliderLow, setsliderHigh])\r\n  useEffect(() => setsliderLow(levelLow), [setsliderLow, levelLow])\r\n\r\n  useEffect(() => setsliderHigh(levelHigh), [setsliderHigh, levelHigh])\r\n  return <Card sx={{ width: \"100%\", display: \"flex\", alignItems: \"center\", bgcolor: dark ? \"contentDark.main\" : \"contentLight.main\" }}>\r\n    <CustomNumberInput\r\n      value={sliderLow}\r\n      onChange={val => setLow(clamp(val, 0, levelHigh))}\r\n      sx={{ pl: 2, width: 100, }}\r\n      inputProps={{ sx: { textAlign: \"center\" } }}\r\n      startAdornment={\"Level: \"}\r\n    />\r\n    <Slider sx={{ width: 100, flexGrow: 1, mx: 2 }}\r\n      getAriaLabel={() => 'Arifact Level Range'}\r\n      value={[sliderLow, sliderHigh]}\r\n      onChange={setSlider}\r\n      onChangeCommitted={(e, value) => setBoth(value[0], value[1])}\r\n      valueLabelDisplay=\"auto\"\r\n      min={0} max={20} step={1} marks\r\n    />\r\n    <CustomNumberInput\r\n      value={sliderHigh}\r\n      onChange={val => setHigh(clamp(val, levelLow, 20))}\r\n      sx={{ px: 1, width: 50, }}\r\n      inputProps={{ sx: { textAlign: \"center\" } }}\r\n    />\r\n  </Card>\r\n}","import { Replay } from \"@mui/icons-material\";\r\nimport { ButtonProps, Divider, ListItemIcon, ListItemText, MenuItem, Typography } from \"@mui/material\";\r\nimport React, { useMemo } from \"react\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { ArtifactSheet } from \"../../Data/Artifacts/ArtifactSheet\";\r\nimport usePromise from \"../../ReactHooks/usePromise\";\r\nimport { ArtifactRarity, ArtifactSetKey, Rarity } from \"../../Types/consts\";\r\nimport DropdownButton from \"../DropdownMenu/DropdownButton\";\r\nimport ImgIcon from \"../Image/ImgIcon\";\r\nimport { Stars } from \"../StarDisplay\";\r\n\r\ntype props = Omit<ButtonProps, \"onChange\"> & {\r\n  selectedSetKey?: ArtifactSetKey | \"\"\r\n  onChange: (setKey: ArtifactSetKey | \"\") => void\r\n  hasUnselect?: boolean\r\n  artifactSetsByRarity?: { [rarity in ArtifactRarity]: ArtifactSetKey[] }\r\n}\r\nexport default function ArtifactSetDropdown({ selectedSetKey = \"\", onChange, artifactSetsByRarity, hasUnselect = false, ...props }: props) {\r\n  const { t } = useTranslation(\"artifact\")\r\n  const artifactSheets = usePromise(ArtifactSheet.getAll, [])\r\n  const sheet = artifactSheets?.[selectedSetKey]\r\n  const displaySets = useMemo(() => {\r\n    if (artifactSetsByRarity) return artifactSetsByRarity\r\n    if (!artifactSheets) return {}\r\n    return ArtifactSheet.setKeysByRarities(artifactSheets)\r\n  }, [artifactSheets, artifactSetsByRarity])\r\n  return <DropdownButton\r\n    {...props}\r\n    title={sheet?.name ?? t`editor.set.artifactSet`}\r\n    startIcon={sheet?.defIconSrc && <ImgIcon src={sheet?.defIconSrc} />}\r\n    color={sheet ? \"success\" : \"primary\"}\r\n  >\r\n    {hasUnselect && <MenuItem onClick={() => onChange(\"\")} selected={selectedSetKey === \"\"} disabled={selectedSetKey === \"\"}>\r\n      <ListItemIcon>\r\n        <Replay />\r\n      </ListItemIcon>\r\n      <ListItemText>\r\n        <Trans t={t} i18nKey=\"ui:unselect\" >Unselect</Trans>\r\n      </ListItemText>\r\n    </MenuItem >}\r\n    {!!Object.keys(displaySets).length && Object.entries(displaySets).reverse().flatMap(([star, sets], i) => [\r\n      ...(((i > 0) || hasUnselect) && sets.length ? [<Divider key={`${star}divi`} />] : []),\r\n      ...(sets.length ? [<MenuItem key={`${star}header`} >\r\n        <Typography>\r\n          <Trans t={t} i18nKey=\"editor.set.maxRarity\">Max Rarity <Stars stars={parseInt(star) as Rarity} /></Trans>\r\n        </Typography>\r\n      </MenuItem>] : []),\r\n      ...sets.map(setKey => <MenuItem key={setKey} onClick={() => onChange(setKey)} selected={selectedSetKey === setKey} disabled={selectedSetKey === setKey}>\r\n        <ListItemIcon>\r\n          <ImgIcon src={artifactSheets?.[setKey]?.defIconSrc} sx={{ fontSize: \"1.5em\" }} />\r\n        </ListItemIcon>\r\n        <ListItemText>\r\n          {artifactSheets?.[setKey]?.name}\r\n        </ListItemText>\r\n      </MenuItem >)\r\n    ])}\r\n  </DropdownButton>\r\n}\r\n","import { styled, Tooltip, tooltipClasses, TooltipProps } from \"@mui/material\";\r\n\r\nconst BootstrapTooltip = styled(({ className, ...props }: TooltipProps) => (\r\n  <Tooltip {...props} arrow classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.arrow}`]: {\r\n    color: theme.palette.common.black,\r\n  },\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: theme.palette.common.black,\r\n  },\r\n}));\r\nexport default BootstrapTooltip","import { BusinessCenter, Replay } from \"@mui/icons-material\";\r\nimport { Divider, ListItemIcon, MenuItem, Typography } from \"@mui/material\";\r\nimport { useContext } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport CharacterSheet from \"../../Data/Characters/CharacterSheet\";\r\nimport { DatabaseContext } from \"../../Database/Database\";\r\nimport usePromise from \"../../ReactHooks/usePromise\";\r\nimport { CharacterKey } from \"../../Types/consts\";\r\nimport DropdownButton, { DropdownButtonProps } from \"../DropdownMenu/DropdownButton\";\r\nimport ThumbSide from \"./ThumbSide\";\r\n\r\nexport type CharacterDropdownButtonProps = Omit<DropdownButtonProps, \"title\" | \"onChange\" | \"children\"> & {\r\n  value: CharacterKey | \"\"\r\n  onChange: (ck: CharacterKey | \"\") => void\r\n  filter?: (cs: CharacterSheet, ck: CharacterKey) => boolean\r\n  inventory?: boolean\r\n  noUnselect?: boolean,\r\n  unSelectText?: Displayable,\r\n  unSelectIcon?: Displayable,\r\n}\r\n\r\nexport default function CharacterDropdownButton({ value, onChange, unSelectText, unSelectIcon, inventory = false, noUnselect = false, filter = () => true, ...props }: CharacterDropdownButtonProps) {\r\n  const { t } = useTranslation(\"ui\");\r\n  const { database } = useContext(DatabaseContext)\r\n  const characterSheets = usePromise(CharacterSheet.getAll, [])\r\n  const characterSheet = usePromise(CharacterSheet.get(value), [value])\r\n  const characterKeys = database._getCharKeys().filter(ck => characterSheets?.[ck] && filter(characterSheets[ck], ck)).sort()\r\n  return <DropdownButton\r\n    {...props}\r\n    title={characterSheet?.name ?? (inventory ? t`inventory` : (unSelectText ?? t`unselect`))}\r\n    color={value ? \"success\" : \"primary\"}\r\n    startIcon={characterSheet?.thumbImg ? <ThumbSide src={characterSheet.thumbImgSide} /> : (inventory ? <BusinessCenter /> : (unSelectIcon ?? <Replay />))}>\r\n    {!noUnselect && (inventory ? <MenuItem onClick={() => onChange(\"\")} selected={value === \"\"} disabled={value === \"\"}>\r\n      <ListItemIcon>\r\n        <BusinessCenter />\r\n      </ListItemIcon>\r\n      <Typography variant=\"inherit\" noWrap>\r\n        {t`inventory`}\r\n      </Typography>\r\n    </MenuItem> : <MenuItem onClick={() => onChange(\"\")} selected={value === \"\"} disabled={value === \"\"}>\r\n      <ListItemIcon>\r\n        <Replay />\r\n      </ListItemIcon>\r\n      <Typography variant=\"inherit\" noWrap>\r\n        {t`unselect`}\r\n      </Typography>\r\n    </MenuItem>)}\r\n    {!noUnselect && <Divider key=\"div\" />}\r\n    {!!characterSheets && CharacterMenuItemArray(characterSheets, characterKeys, onChange, value)}\r\n  </DropdownButton >\r\n}\r\n\r\n// Returning an array instead of Fragment because MUI Menu doesn't like fragments.\r\nexport function CharacterMenuItemArray(characterSheets: StrictDict<CharacterKey, CharacterSheet>, characterKeys: CharacterKey[], onChange: (ck: CharacterKey) => void, selectedCharacterKey: CharacterKey | \"\" = \"\") {\r\n  return characterKeys.map(characterKey =>\r\n    <MenuItem onClick={() => onChange(characterKey)} key={characterKey} selected={selectedCharacterKey === characterKey} disabled={selectedCharacterKey === characterKey} >\r\n      <ListItemIcon>\r\n        <ThumbSide src={characterSheets[characterKey]?.thumbImgSide} />\r\n      </ListItemIcon>\r\n      <Typography variant=\"inherit\" noWrap>\r\n        {characterSheets?.[characterKey]?.name}\r\n      </Typography>\r\n    </MenuItem>)\r\n}\r\n","import { BusinessCenter } from \"@mui/icons-material\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport CharacterSheet from \"../../Data/Characters/CharacterSheet\";\r\nimport usePromise from \"../../ReactHooks/usePromise\";\r\n\r\nexport default function LocationName({ location }) {\r\n  const { t } = useTranslation(\"ui\");\r\n  const characterSheet = usePromise(CharacterSheet.get(location ?? \"\"), [location])\r\n  return <Typography component=\"span\">\r\n    {characterSheet?.name ? characterSheet.nameWIthIcon : <span><BusinessCenter sx={{ verticalAlign: \"text-bottom\" }} /> {t`inventory`}</span>}\r\n  </Typography>\r\n\r\n}\r\n","import { styled } from \"@mui/system\";\r\n\r\nconst ThumbSide = styled(\"img\")(({ theme }) => ({\r\n  display: \"inline-block\",\r\n  width: \"auto\",\r\n  height: `2.3em`,\r\n  lineHeight: 1,\r\n  verticalAlign: \"text-bottom\",\r\n  marginTop: theme.spacing(-3),\r\n  marginLeft: theme.spacing(-1.25),\r\n  marginRight: theme.spacing(-1),\r\n  marginBottom: theme.spacing(-1),\r\n}))\r\n\r\nexport default ThumbSide","import { Button, ButtonProps, InputBase, InputProps, styled } from '@mui/material'\r\nimport { useCallback, useEffect, useMemo, useState } from 'react'\r\ntype props = Omit<InputProps, \"onChange\"> & {\r\n  value?: number | undefined,\r\n  onChange: (newValue: number | undefined) => void,\r\n  disabled?: boolean\r\n  float?: boolean,\r\n  allowEmpty?: boolean,\r\n}\r\n\r\nexport const StyledInputBase = styled(InputBase)(({ theme }) => ({\r\n  backgroundColor: theme.palette.primary.main,\r\n  transition: \"all 0.5s ease\",\r\n  \"&:hover\": {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n  \"&.Mui-focused\": {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n  \"&.Mui-disabled\": {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n}))\r\n\r\nconst Wrapper = styled(Button)(({ theme }) => ({\r\n  backgroundColor: theme.palette.primary.main,\r\n  padding: 0,\r\n  overflow: \"hidden\",\r\n  \"div\": {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n}))\r\n\r\n// wrap the Input with this when using the input in a buttongroup\r\nexport function CustomNumberInputButtonGroupWrapper({ children, disableRipple, disableFocusRipple, disableTouchRipple, ...props }: ButtonProps) {\r\n  return <Wrapper disableRipple disableFocusRipple disableTouchRipple {...props}>{children}</Wrapper>\r\n}\r\n\r\nexport default function CustomNumberInput({ value = 0, onChange, disabled = false, float = false, ...props }: props) {\r\n  const [number, setNumber] = useState(value)\r\n  const [focused, setFocus] = useState(false)\r\n  const parseFunc = useMemo(() => float ? parseFloat : parseInt, [float],)\r\n  const onBlur = useCallback(\r\n    () => {\r\n      onChange(number)\r\n      setFocus(false)\r\n    },\r\n    [onChange, number, setFocus],\r\n  )\r\n  const onFocus = useCallback(\r\n    () => {\r\n      setFocus(true)\r\n    },\r\n    [setFocus],\r\n  )\r\n  useEffect(() => setNumber(value), [value, setNumber]) // update value on value change\r\n  const onInputChange = useCallback(e => setNumber(parseFunc(e.target.value) || 0), [setNumber, parseFunc],)\r\n  const onKeyDOwn = useCallback(e => e.key === \"Enter\" && onBlur(), [onBlur],)\r\n  return <StyledInputBase\r\n    value={(focused && !number) ? \"\" : number}\r\n    aria-label=\"custom-input\"\r\n    type=\"number\"\r\n    inputProps={{ step: float ? 0.1 : 1 }}\r\n    onChange={onInputChange}\r\n    onBlur={onBlur}\r\n    onFocus={onFocus}\r\n    disabled={disabled}\r\n    onKeyDown={onKeyDOwn}\r\n    {...props}\r\n  />\r\n}\r\n","import { faQuestionCircle } from \"@fortawesome/free-solid-svg-icons\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { Button, CardContent, Divider, Grid, Skeleton, Typography } from \"@mui/material\"\r\nimport { Suspense, useCallback, useState } from \"react\"\r\nimport useDBState from \"../ReactHooks/useDBState\"\r\nimport { getRandomElementFromArray } from \"../Util/Util\"\r\nimport CardDark from \"./Card/CardDark\"\r\nimport CloseButton from \"./CloseButton\"\r\nimport ModalWrapper from \"./ModalWrapper\"\r\nimport { Translate } from \"./Translate\"\r\nexport function initialInfoShownState() {\r\n  return {\r\n    artifactPage: true,\r\n    buildPage: true,\r\n    characterPage: true,\r\n  }\r\n}\r\ntype StateInfoShown = ReturnType<typeof initialInfoShownState>\r\ntype InfoShownPageKey = keyof StateInfoShown\r\n\r\nexport default function InfoComponent({ pageKey, text = \"\", modalTitle = \"\", children }: { pageKey: InfoShownPageKey, text: Displayable | Displayable[], modalTitle: Displayable, children: JSX.Element }) {\r\n  const [stateInfoShown, setStateInfoShown] = useDBState(\"InfoShown\", initialInfoShownState)\r\n  const showInfoModal = stateInfoShown[pageKey]\r\n  const setshowInfoModal = useCallback((value: boolean) => setStateInfoShown({ [pageKey]: value }), [setStateInfoShown, pageKey])\r\n\r\n  const [displayText,] = useState(Array.isArray(text) ? getRandomElementFromArray(text) : text)\r\n  const closeModal = () => setshowInfoModal(false)\r\n\r\n  return <CardDark >\r\n    <Grid container>\r\n      <Grid item flexGrow={1}>\r\n        <Typography variant=\"caption\" pl={1} >\r\n          {displayText}\r\n        </Typography>\r\n      </Grid>\r\n      <Grid item xs=\"auto\">\r\n        <Button size=\"small\" color=\"info\" variant=\"contained\" onClick={() => setshowInfoModal(true)} startIcon={<FontAwesomeIcon icon={faQuestionCircle} />}>\r\n          <Translate ns=\"ui\" key18=\"info\" />\r\n        </Button>\r\n      </Grid>\r\n    </Grid>\r\n    <ModalWrapper containerProps={{ maxWidth: \"xl\" }} open={showInfoModal} onClose={() => closeModal()} >\r\n      <CardDark >\r\n        <CardContent sx={{ py: 1 }}>\r\n          <Grid container>\r\n            <Grid item flexGrow={1}>\r\n              <Typography variant=\"h6\">{modalTitle}</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <CloseButton onClick={closeModal} />\r\n            </Grid>\r\n          </Grid>\r\n        </CardContent>\r\n        <Divider />\r\n        <CardContent>\r\n          <Suspense fallback={<Skeleton variant=\"rectangular\" width=\"100%\" height={500} />}>\r\n            {children}\r\n          </Suspense>\r\n        </CardContent>\r\n        <Divider />\r\n        <CardContent sx={{ py: 1 }}>\r\n          <CloseButton large onClick={closeModal} />\r\n        </CardContent>\r\n      </CardDark>\r\n    </ModalWrapper >\r\n  </CardDark>\r\n}\r\n","import { faSortAmountDownAlt, faSortAmountUp } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Button, ButtonGroup, ButtonGroupProps, MenuItem } from \"@mui/material\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport DropdownButton from \"./DropdownMenu/DropdownButton\";\r\n\r\ntype SortByButtonProps = ButtonGroupProps & {\r\n  sortKeys: string[]\r\n  value: string\r\n  onChange: (value: string) => void\r\n  ascending: boolean\r\n  onChangeAsc: (value: boolean) => void\r\n}\r\n// Assumes that all the sortKeys has corresponding translations in ui.json sortMap\r\nexport default function SortByButton({ sortKeys, value, onChange, ascending, onChangeAsc, ...props }: SortByButtonProps) {\r\n  const { t } = useTranslation(\"ui\")\r\n  return <ButtonGroup {...props} >\r\n    <DropdownButton title={<Trans t={t} i18nKey=\"sortByFormat\" value={t(`sortMap.${value}`) as any}>Sort By: {{ value: t(`sortMap.${value}`) }}</Trans>}>\r\n      {sortKeys.map(key =>\r\n        <MenuItem key={key} selected={value === key} disabled={value === key} onClick={() => onChange(key)}>{t(`sortMap.${key}`) as any}</MenuItem>)}\r\n    </DropdownButton>\r\n    <Button onClick={() => onChangeAsc(!ascending)} startIcon={<FontAwesomeIcon icon={ascending ? faSortAmountDownAlt : faSortAmountUp} className=\"fa-fw\" />}>\r\n      {ascending ? <Trans t={t} i18nKey=\"ascending\" >Ascending</Trans> : <Trans t={t} i18nKey=\"descending\" >Descending</Trans>}\r\n    </Button>\r\n  </ButtonGroup>\r\n}","import { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Button, ButtonGroup, CardContent, Divider, Grid, MenuItem, Typography } from '@mui/material';\r\nimport React, { useCallback, useContext } from 'react';\r\nimport CardLight from './Card/CardLight';\r\nimport CustomNumberInput, { CustomNumberInputButtonGroupWrapper } from './CustomNumberInput';\r\nimport DropdownButton from './DropdownMenu/DropdownButton';\r\nimport { DataContext } from '../DataContext';\r\nimport { uiInput as input } from '../Formula';\r\nimport KeyMap, { StatKey } from '../KeyMap';\r\nimport { ElementKey } from '../Types/consts';\r\nexport default function StatFilterCard({ statFilters = {}, setStatFilters, disabled = false }:\r\n  { statFilters: Dict<StatKey, number>, setStatFilters: (object: Dict<StatKey, number>) => void, disabled?: boolean }) {\r\n  const { data } = useContext(DataContext)\r\n  const statKeys: StatKey[] = [\"atk\", \"hp\", \"def\", \"eleMas\", \"critRate_\", \"critDMG_\", \"heal_\", \"enerRech_\"]\r\n  if (data.get(input.weaponType).value !== \"catalyst\") statKeys.push(\"physical_dmg_\")\r\n  const charEle = data.get(input.charEle).value as ElementKey\r\n  statKeys.push(`${charEle}_dmg_`)\r\n\r\n  const remainingKeys = statKeys.filter(key => !(Object.keys(statFilters) as any).some(k => k === key))\r\n  const setFilter = useCallback((sKey, min) => setStatFilters({ ...statFilters, [sKey]: min }), [statFilters, setStatFilters],)\r\n  return <CardLight>\r\n    <CardContent sx={{ py: 1 }}>\r\n      <Typography>Minimum Final Stat Filter</Typography>\r\n    </CardContent>\r\n    <Divider />\r\n    <CardContent>\r\n      <Grid container spacing={1}>\r\n        {Object.entries(statFilters).map(([statKey, min]) => {\r\n          return <Grid item xs={12} key={statKey} ><StatFilterItem statKey={statKey} statKeys={remainingKeys} setFilter={setFilter} disabled={disabled} value={min} close={() => {\r\n            delete statFilters[statKey]\r\n            setStatFilters({ ...statFilters })\r\n          }} /></Grid>\r\n        })}\r\n        <Grid item xs={12}>\r\n          <StatFilterItem value={undefined} close={undefined} statKeys={remainingKeys} setFilter={setFilter} disabled={disabled} />\r\n        </Grid>\r\n      </Grid>\r\n    </CardContent>\r\n  </CardLight>\r\n}\r\n\r\nexport function StatFilterItem({ statKey, statKeys = [], value = 0, close, setFilter, disabled = false }: {\r\n  statKey?: string, statKeys: string[], value?: number, close?: () => void, setFilter: (statKey: string, value?: number) => void, disabled?: boolean\r\n}) {\r\n  const isFloat = KeyMap.unit(statKey) === \"%\"\r\n  const onChange = useCallback(s => statKey && setFilter(statKey, s), [setFilter, statKey])\r\n  return <ButtonGroup sx={{ width: \"100%\" }}>\r\n    <DropdownButton\r\n      title={statKey ? KeyMap.get(statKey) : \"New Stat\"}\r\n      disabled={disabled}\r\n    >\r\n      {statKeys.map(sKey => <MenuItem key={sKey} onClick={() => { close?.(); setFilter(sKey, value) }}>{KeyMap.get(sKey)}</MenuItem>)}\r\n    </DropdownButton>\r\n    <CustomNumberInputButtonGroupWrapper sx={{ flexBasis: 30, flexGrow: 1 }}>\r\n      <CustomNumberInput\r\n        disabled={!statKey}\r\n        float={isFloat}\r\n        value={value}\r\n        placeholder=\"Min Value\"\r\n        onChange={onChange}\r\n        sx={{ px: 2 }}\r\n      />\r\n    </CustomNumberInputButtonGroupWrapper>\r\n    {!!close && <Button color=\"error\" onClick={close} disabled={disabled}><FontAwesomeIcon icon={faTrashAlt} /></Button>}\r\n  </ButtonGroup>\r\n}\r\n","import { Button, ButtonProps, styled } from \"@mui/material\";\r\n\r\nconst DisabledButton = styled(Button)(({ theme }) => ({\r\n  \"&.Mui-disabled\": {\r\n    backgroundColor: theme.palette.primary.dark,\r\n    color: theme.palette.text.secondary,\r\n  }\r\n}))\r\n\r\nexport default function TextButton({ children, disabled, ...props }: ButtonProps) {\r\n  return <DisabledButton {...props} disabled  >\r\n    {children}\r\n  </DisabledButton>\r\n}\r\n","import { createContext } from \"react\"\r\nimport CharacterSheet from \"./Data/Characters/CharacterSheet\"\r\nimport { UIData } from \"./Formula/uiData\"\r\nimport { ICachedCharacter } from \"./Types/character_WR\"\r\nimport { CharacterKey } from \"./Types/consts\"\r\nimport { ICachedWeapon } from \"./Types/weapon_WR\"\r\nimport WeaponSheet from \"./Data/Weapons/WeaponSheet\"\r\nexport type TeamData = Partial<Record<CharacterKey, {\r\n  target: UIData\r\n  buffs: Dict<CharacterKey, UIData>\r\n  character: ICachedCharacter\r\n  weapon: ICachedWeapon\r\n  characterSheet: CharacterSheet\r\n  weaponSheet: WeaponSheet,\r\n}>>\r\nexport type dataContextObj = {\r\n  character: ICachedCharacter\r\n  characterSheet: CharacterSheet\r\n  data: UIData\r\n  oldData?: UIData\r\n  mainStatAssumptionLevel: number\r\n  teamData: TeamData\r\n  characterDispatch: (_: any) => void\r\n}\r\n\r\n// If using this context without a Provider, then stuff will crash...\r\n// In theory, none of the components that uses this context should work without a provider...\r\nexport const DataContext = createContext({} as dataContextObj)\r\n","import ImgIcon from \"../../Components/Image/ImgIcon\";\r\nimport { Translate } from \"../../Components/Translate\";\r\nimport { mergeData } from \"../../Formula/api\";\r\nimport { Data } from \"../../Formula/type\";\r\nimport { allSlotKeys, ArtifactRarity, ArtifactSetKey, SetNum, SlotKey } from \"../../Types/consts\";\r\nimport { DocumentSection } from \"../../Types/sheet\";\r\nimport { UIData } from \"../../Formula/uiData\"\r\nimport { input } from \"../../Formula\"\r\nimport SqBadge from \"../../Components/SqBadge\";\r\nimport IConditional from \"../../Types/IConditional_WR\";\r\n\r\n// TODO: remove typecasting once all sheets populated\r\nconst artifactSheets = import(\".\").then(imp => imp.default)\r\n\r\nexport interface IArtifactSheet {\r\n  name: string, // only to stored the English name for OCR, otherwise, should come from localization pipeline\r\n  rarity: readonly ArtifactRarity[],\r\n  icons: Dict<SlotKey, string>,\r\n  setEffects: Dict<SetNum, SetEffectEntry>\r\n}\r\nexport interface SetEffectEntry {\r\n  document?: DocumentSection[],\r\n}\r\n\r\n\r\nconst tr = (setKey: string, strKey: string) => <Translate ns={`artifact_${setKey}_gen`} key18={strKey} />\r\nconst allData = artifactSheets.then(as => mergeData(Object.values(as).map(s => s.data)))\r\nexport class ArtifactSheet {\r\n  readonly sheet: IArtifactSheet\r\n  readonly key: ArtifactSetKey\r\n  readonly data: Data\r\n  constructor(setKey: ArtifactSetKey, sheet: IArtifactSheet, data: Data) {\r\n    this.sheet = sheet\r\n    this.key = setKey\r\n    this.data = data\r\n  }\r\n\r\n  get name() { return tr(this.key, \"setName\") }\r\n  get defIconSrc() {\r\n    const slotKey = this.slots[0]\r\n    if (!this.slotIcons[slotKey]) return undefined\r\n    return this.slotIcons[slotKey]\r\n  }\r\n  get defIcon() { return <ImgIcon src={this.defIconSrc} sx={{ fontSize: \"1.5em\" }} /> }\r\n  /**\r\n   * @deprecated use src directly\r\n   */\r\n  get nameWithIcon() {\r\n    const slotKey = this.slots[0]\r\n    return <span><ImgIcon src={this.slotIcons[slotKey]} /> {tr(this.key, \"setName\")}</span>\r\n  }\r\n\r\n  //This is only for OCR, because we only scan in english right now.\r\n  get nameRaw(): string { return this.sheet.name }\r\n  get rarity(): readonly ArtifactRarity[] { return this.sheet.rarity }\r\n  get slots(): SlotKey[] {\r\n    switch (this.key) {\r\n      case \"PrayersForDestiny\":\r\n      case \"PrayersForIllumination\":\r\n      case \"PrayersForWisdom\":\r\n      case \"PrayersToSpringtime\": return [\"circlet\"]\r\n      default: return [...allSlotKeys]\r\n    }\r\n  }\r\n  get slotIcons(): Dict<SlotKey, string> { return this.sheet.icons }\r\n  get setEffects(): Dict<SetNum, SetEffectEntry> { return this.sheet.setEffects }\r\n  getSlotName = (slotKey: SlotKey) => tr(this.key, `pieces.${slotKey}.name`)\r\n  getSlotDesc = (slotKey: SlotKey) => tr(this.key, `pieces.${slotKey}.desc`)\r\n  setEffectDesc = (setNum: SetNum): Displayable => tr(this.key, `setEffects.${setNum}`)\r\n  setEffectDocument = (setNum: SetNum) => this.sheet.setEffects[setNum]?.document\r\n\r\n  static get(set: ArtifactSetKey | undefined): Promise<ArtifactSheet> | undefined { return set ? artifactSheets.then(a => a[set]) : undefined }\r\n  static get getAll() { return artifactSheets }\r\n  static get getAllData() { return allData }\r\n  static setKeysByRarities(sheets: StrictDict<ArtifactSetKey, ArtifactSheet>): Dict<ArtifactRarity, ArtifactSetKey[]> {\r\n    const grouped: Dict<ArtifactRarity, ArtifactSetKey[]> = {}\r\n    Object.entries(sheets).forEach(([key, sheet]) => {\r\n      const rarity = Math.max(...sheet.rarity) as ArtifactRarity\r\n      if (grouped[rarity]) grouped[rarity]!.push(key)\r\n      else grouped[rarity] = [key]\r\n    })\r\n    return grouped\r\n  }\r\n\r\n  static setEffects(sheets: StrictDict<ArtifactSetKey, ArtifactSheet>, data: UIData) {\r\n    const artifactSetEffect: Partial<Record<ArtifactSetKey, SetNum[]>> = {}\r\n    Object.entries(sheets).forEach(([setKey, sheet]) => {\r\n      const setNums = (Object.keys(sheet.setEffects).map(k => parseInt(k)) as SetNum[]).filter(sn => sheet.hasEnough(sn, data))\r\n      if (setNums.length) artifactSetEffect[setKey] = setNums\r\n    })\r\n    return artifactSetEffect\r\n  }\r\n  hasEnough = (setNum: SetNum, data: UIData) => (data.get(input.artSet[this.key]).value ?? 0) >= setNum\r\n}\r\nexport const conditionalHeader = (tr: (string) => Displayable, img: string): IConditional[\"header\"] => {\r\n  return {\r\n    title: tr(\"setName\"),\r\n    icon: <ImgIcon size={2} sx={{ m: -1 }} src={img} />,\r\n    action: <SqBadge color=\"success\">4-set</SqBadge>\r\n  }\r\n}\r\n","\r\nexport function initGlobalSettings() {\r\n  return { tcMode: false }\r\n}\r\n","import { faBan, faChartLine, faEdit, faInfoCircle, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Lock, LockOpen } from '@mui/icons-material';\r\nimport { Box, Button, ButtonGroup, CardActions, CardContent, CardMedia, Chip, Grid, IconButton, Skeleton, Tooltip, Typography } from '@mui/material';\r\nimport React, { Suspense, useContext } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport SlotNameWithIcon from '../Components/Artifact/SlotNameWIthIcon';\r\nimport BootstrapTooltip from '../Components/BootstrapTooltip';\r\nimport CardLight from '../Components/Card/CardLight';\r\nimport CharacterDropdownButton from '../Components/Character/CharacterDropdownButton';\r\nimport LocationName from '../Components/Character/LocationName';\r\nimport ColorText from '../Components/ColoredText';\r\nimport SqBadge from '../Components/SqBadge';\r\nimport { Stars } from '../Components/StarDisplay';\r\nimport StatIcon from '../Components/StatIcon';\r\nimport Artifact from '../Data/Artifacts/Artifact';\r\nimport { ArtifactSheet } from '../Data/Artifacts/ArtifactSheet';\r\nimport { DatabaseContext } from '../Database/Database';\r\nimport KeyMap, { cacheValueString } from '../KeyMap';\r\nimport useArtifact from '../ReactHooks/useArtifact';\r\nimport usePromise from '../ReactHooks/usePromise';\r\nimport { allSubstats, ICachedArtifact, ICachedSubstat, SubstatKey } from '../Types/artifact';\r\nimport { CharacterKey, Rarity } from '../Types/consts';\r\nimport { clamp, clamp01 } from '../Util/Util';\r\nimport PercentBadge from './PercentBadge';\r\nimport { probability } from './RollProbability';\r\n\r\ntype Data = {\r\n  artifactId?: string,\r\n  artifactObj?: ICachedArtifact,\r\n  onEdit?: (id: string) => void,\r\n  onDelete?: (id: string) => void, mainStatAssumptionLevel?: number,\r\n  effFilter?: Set<SubstatKey>,\r\n  probabilityFilter?: Dict<SubstatKey, number>\r\n}\r\nconst allSubstatFilter = new Set(allSubstats)\r\n\r\nexport default function ArtifactCard({ artifactId, artifactObj, onEdit, onDelete, mainStatAssumptionLevel = 0, effFilter = allSubstatFilter, probabilityFilter }: Data): JSX.Element | null {\r\n  const { t } = useTranslation([\"artifact\"]);\r\n  const { database } = useContext(DatabaseContext)\r\n  const databaseArtifact = useArtifact(artifactId)\r\n  const sheet = usePromise(ArtifactSheet.get((artifactObj ?? databaseArtifact)?.setKey), [artifactObj, databaseArtifact])\r\n  const equipOnChar = (charKey: CharacterKey | \"\") => database.setArtLocation(artifactId!, charKey)\r\n\r\n  const editable = !artifactObj\r\n  const art = artifactObj ?? databaseArtifact\r\n  if (!art) return null\r\n\r\n  const { id, lock, slotKey, rarity, level, mainStatKey, substats, exclude, location = \"\" } = art\r\n  const mainStatLevel = Math.max(Math.min(mainStatAssumptionLevel, rarity * 4), level)\r\n  const mainStatUnit = KeyMap.unit(mainStatKey) === \"flat\" ? null : KeyMap.unit(mainStatKey)\r\n  const levelVariant = \"roll\" + (Math.floor(Math.max(level, 0) / 4) + 1)\r\n  const mainStatVal = <ColorText color={mainStatLevel !== level ? \"warning\" : undefined}>{cacheValueString(Artifact.mainStatValue(mainStatKey, rarity, mainStatLevel) ?? 0, KeyMap.unit(mainStatKey))}</ColorText>\r\n  const { currentEfficiency, maxEfficiency } = Artifact.getArtifactEfficiency(art, effFilter)\r\n  const artifactValid = maxEfficiency !== 0\r\n  const slotName = sheet?.getSlotName(slotKey) || \"Unknown Piece Name\"\r\n  const slotDesc = sheet?.getSlotDesc(slotKey)\r\n  const slotDescTooltip = slotDesc && <BootstrapTooltip placement=\"top\" title={<Typography>{slotDesc}</Typography>}>\r\n    <span><FontAwesomeIcon icon={faInfoCircle} /></span>\r\n  </BootstrapTooltip>\r\n  const setEffects = sheet?.setEffects\r\n  const setDescTooltip = sheet && setEffects && <BootstrapTooltip placement=\"top\" title={\r\n    <span>\r\n      {Object.keys(setEffects).map(setNumKey => <span key={setNumKey}>\r\n        <Typography variant=\"h6\"><SqBadge color=\"success\">{t(`setEffectNum`, { setNum: setNumKey })}</SqBadge></Typography>\r\n        <Typography>{sheet.setEffectDesc(setNumKey as any)}</Typography>\r\n      </span>)}\r\n    </span>\r\n  }>\r\n    <span><FontAwesomeIcon icon={faInfoCircle} /></span>\r\n  </BootstrapTooltip>\r\n  return <Suspense fallback={<Skeleton variant=\"rectangular\" sx={{ width: \"100%\", height: \"100%\", minHeight: 350 }} />}>\r\n    <CardLight sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n      <CardContent className={`grad-${rarity}star`} sx={{ pt: 1, pb: 0, pr: 0 }}>\r\n        <Box component=\"div\" sx={{ display: \"flex\", alignItems: \"center\", pr: 1 }}>\r\n          <Chip size=\"small\" label={<strong>{` +${level}`}</strong>} color={levelVariant as any} />\r\n          <Typography sx={{ pl: 1, flexGrow: 1 }}>{slotName} {slotDescTooltip}</Typography>\r\n          <IconButton color=\"primary\" disabled={!editable} onClick={() => database.updateArt({ lock: !lock }, id)}>\r\n            {lock ? <Lock /> : <LockOpen />}\r\n          </IconButton>\r\n        </Box>\r\n        <Grid container sx={{ flexWrap: \"nowrap\" }}>\r\n          <Grid item flexGrow={1}>\r\n            <Typography color=\"text.secondary\" variant=\"body2\">\r\n              <SlotNameWithIcon slotKey={slotKey} />\r\n            </Typography>\r\n            <Typography variant=\"h6\" color={`${KeyMap.getVariant(mainStatKey)}.main`}>\r\n              <span>{StatIcon[mainStatKey]} {KeyMap.get(mainStatKey)}</span>\r\n            </Typography>\r\n            <Typography variant=\"h5\">\r\n              <strong>{mainStatVal}{mainStatUnit}</strong>\r\n            </Typography>\r\n            <Stars stars={rarity} colored />\r\n            {/* {process.env.NODE_ENV === \"development\" && <Typography color=\"common.black\">{id || `\"\"`} </Typography>} */}\r\n          </Grid>\r\n          <Grid item maxWidth=\"40%\" sx={{ mt: -3, mb: -1, pl: -2 }} alignSelf=\"flex-end\">\r\n            <CardMedia\r\n              component=\"img\"\r\n              image={sheet?.slotIcons[slotKey] ?? \"\"}\r\n              width=\"100%\"\r\n              height=\"auto\"\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </CardContent>\r\n      <CardContent sx={{ flexGrow: 1, display: \"flex\", flexDirection: \"column\", pt: 1, pb: 0 }}>\r\n        {substats.map((stat: ICachedSubstat) => <SubstatDisplay key={stat.key} stat={stat} effFilter={effFilter} rarity={rarity} />)}\r\n        <Box sx={{ display: \"flex\", my: 1 }}>\r\n          <Typography color=\"text.secondary\" component=\"span\" variant=\"caption\" sx={{ flexGrow: 1 }}>{t`editor.curSubEff`}</Typography>\r\n          <PercentBadge value={currentEfficiency} max={900} valid={artifactValid} />\r\n        </Box>\r\n        {currentEfficiency !== maxEfficiency && <Box sx={{ display: \"flex\", mb: 1 }}>\r\n          <Typography color=\"text.secondary\" component=\"span\" variant=\"caption\" sx={{ flexGrow: 1 }}>{t`editor.maxSubEff`}</Typography>\r\n          <PercentBadge value={maxEfficiency} max={900} valid={artifactValid} />\r\n        </Box>}\r\n        <Box flexGrow={1} />\r\n        {probabilityFilter && <strong>Probability: {(probability(art, probabilityFilter) * 100).toFixed(2)}%</strong>}\r\n        <Typography color=\"success.main\">{sheet?.name ?? \"Artifact Set\"} {setDescTooltip}</Typography>\r\n      </CardContent>\r\n      <CardActions>\r\n        <Grid container sx={{ flexWrap: \"nowrap\" }}>\r\n          <Grid item xs=\"auto\" flexShrink={1}>\r\n            {editable ?\r\n              <CharacterDropdownButton size=\"small\" inventory value={location} onChange={equipOnChar} /> : <LocationName location={location} />}\r\n          </Grid>\r\n          <Grid item flexGrow={1} sx={{ mr: 1 }} />\r\n          {editable && <Grid item xs=\"auto\">\r\n            <ButtonGroup sx={{ height: \"100%\" }}>\r\n              {!!onEdit && <Button color=\"info\" onClick={() => onEdit(id)} size=\"small\">\r\n                <FontAwesomeIcon icon={faEdit} className=\"fa-fw\" />\r\n              </Button>}\r\n              <Tooltip title={<Typography>{t`excludeArtifactTip`}</Typography>} placement=\"top\" arrow>\r\n                <Button onClick={() => database.updateArt({ exclude: !exclude }, id)} color={exclude ? \"error\" : \"success\"} size=\"small\">\r\n                  <FontAwesomeIcon icon={exclude ? faBan : faChartLine} className=\"fa-fw\" />\r\n                </Button>\r\n              </Tooltip>\r\n              {!!onDelete && <Button color=\"error\" size=\"small\" onClick={() => onDelete(id)} disabled={lock}>\r\n                <FontAwesomeIcon icon={faTrashAlt} className=\"fa-fw\" />\r\n              </Button>}\r\n            </ButtonGroup>\r\n          </Grid>}\r\n        </Grid>\r\n      </CardActions>\r\n    </CardLight >\r\n  </Suspense>\r\n}\r\nfunction SubstatDisplay({ stat, effFilter, rarity }: { stat: ICachedSubstat, effFilter: Set<SubstatKey>, rarity: Rarity }) {\r\n  if (!stat.value) return null\r\n  const numRolls = stat.rolls?.length ?? 0\r\n  const maxRoll = stat.key ? Artifact.maxSubstatValues(stat.key) : 0\r\n  const rollData = stat.key ? Artifact.getSubstatRollData(stat.key, rarity) : []\r\n  const rollOffset = 7 - rollData.length\r\n  const rollColor = `roll${clamp(numRolls, 1, 6)}`\r\n  const efficiency = stat.efficiency ?? 0\r\n  const effOpacity = clamp01(0.5 + (efficiency / (100 * 5)) * 0.5) //divide by 6 because an substat can have max 6 rolls\r\n  const statName = KeyMap.get(stat.key)\r\n  const inFilter = stat.key && effFilter.has(stat.key)\r\n  return (<Box display=\"flex\" gap={1} alignContent=\"center\">\r\n    <Typography sx={{ flexGrow: 1 }} color={(numRolls ? `${rollColor}.main` : \"error.main\") as any} component=\"span\">{StatIcon[stat.key]} {statName}{`+${cacheValueString(stat.value, KeyMap.unit(stat.key))}`}</Typography>\r\n    {inFilter && <Box display=\"flex\" gap={0.25} height=\"90%\">\r\n      {stat.rolls.sort().map(v => <SmolProgress value={100 * v / maxRoll} color={`roll${clamp(rollOffset + rollData.indexOf(v), 1, 6)}.main`} />)}\r\n    </Box>}\r\n    <Typography sx={{ opacity: effOpacity, minWidth: 40, textAlign: \"right\" }}>{inFilter ? `${efficiency.toFixed()}%` : \"-\"}</Typography>\r\n  </Box>)\r\n}\r\nfunction SmolProgress({ color = \"red\", value = 50 }) {\r\n  return <Box sx={{ width: 7, height: \"100%\", bgcolor: color, overflow: \"hidden\", borderRadius: 1, display: \"inline-block\" }}>\r\n    <Box sx={{ width: 10, height: `${100 - clamp(value, 0, 100)}%`, bgcolor: \"gray\" }} />\r\n  </Box>\r\n}\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\n\r\nexport default function useArtifact(artifactID: string | undefined = \"\") {\r\n  const { database } = useContext(DatabaseContext)\r\n  const [artifact, setArtifact] = useState(database._getArt(artifactID))\r\n  useEffect(() => setArtifact(database._getArt(artifactID)), [database, artifactID])\r\n  useEffect(() =>\r\n    artifactID ? database.followArt(artifactID, setArtifact) : undefined,\r\n    [artifactID, setArtifact, database])\r\n  return artifact\r\n}\r\n","import { ButtonProps, MenuItem } from \"@mui/material\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ArtifactRarity } from \"../../Types/consts\";\r\nimport DropdownButton from \"../DropdownMenu/DropdownButton\";\r\nimport { Stars } from \"../StarDisplay\";\r\n\r\ntype props = ButtonProps & {\r\n  rarity?: ArtifactRarity\r\n  onChange: (rarity: ArtifactRarity) => void\r\n  filter: (ArtifactRarity) => boolean\r\n}\r\n\r\nexport default function ArtifactRarityDropdown({ rarity, onChange, filter, ...props }: props) {\r\n  const { t } = useTranslation(\"artifact\")\r\n  return <DropdownButton\r\n    {...props}\r\n    title={rarity ? <Stars stars={rarity} /> : t`editor.rarity`}\r\n    color={rarity ? \"success\" : \"primary\"}\r\n  >\r\n    {([5, 4, 3] as ArtifactRarity[]).map(rarity =>\r\n      <MenuItem key={rarity} disabled={!filter(rarity)} onClick={() => onChange(rarity)}>\r\n        <Stars stars={rarity} />\r\n      </MenuItem>)}\r\n  </DropdownButton>\r\n}\r\n","import { Replay } from \"@mui/icons-material\"\r\nimport { ButtonProps, Divider, ListItemIcon, ListItemText, MenuItem } from \"@mui/material\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { allSlotKeys, SlotKey } from \"../../Types/consts\"\r\nimport DropdownButton from \"../DropdownMenu/DropdownButton\"\r\nimport { artifactSlotIcon } from \"./SlotNameWIthIcon\"\r\n\r\ntype ArtifactSlotDropdownProps = ButtonProps & {\r\n  slotKey?: SlotKey | \"\"\r\n  onChange: (slotKey: SlotKey | \"\") => void\r\n  hasUnselect?: boolean\r\n}\r\n\r\nexport default function ArtifactSlotDropdown({ slotKey = \"\", onChange, hasUnselect = false, ...props }: ArtifactSlotDropdownProps) {\r\n  const { t } = useTranslation([\"artifact\", \"ui\"]);\r\n  return <DropdownButton\r\n    title={slotKey ? t(`artifact:slotName:${slotKey}`) : t('artifact:slot')}\r\n    color={slotKey ? \"success\" : \"primary\"}\r\n    startIcon={slotKey ? artifactSlotIcon(slotKey) : undefined}\r\n    {...props}\r\n  >\r\n    {hasUnselect && <MenuItem selected={slotKey === \"\"} disabled={slotKey === \"\"} onClick={() => onChange(\"\")} >\r\n      <ListItemIcon>\r\n        <Replay />\r\n      </ListItemIcon>\r\n      <ListItemText>\r\n        {t`ui:unselect`}\r\n      </ListItemText>\r\n    </MenuItem>}\r\n    {hasUnselect && <Divider />}\r\n    {allSlotKeys.map(key =>\r\n      <MenuItem key={key} selected={slotKey === key} disabled={slotKey === key} onClick={() => onChange(key)} >\r\n        <ListItemIcon>\r\n          {artifactSlotIcon(key)}\r\n        </ListItemIcon>\r\n        <ListItemText>\r\n          {t(`artifact:slotName:${key}`)}\r\n        </ListItemText>\r\n      </MenuItem>)}\r\n  </DropdownButton>\r\n}\r\n","import { TextField, TextFieldProps } from '@mui/material'\r\nimport { useCallback, useEffect, useState } from 'react'\r\ntype props = TextFieldProps & {\r\n  value?: number | undefined,\r\n  onChange: (newValue: number | undefined) => void,\r\n  disabled?: boolean\r\n  float?: boolean,\r\n  allowEmpty?: boolean,\r\n}\r\nexport default function CustomNumberTextField({ value, onChange, disabled = false, float = false, ...props }: props) {\r\n  const [state, setState] = useState(\"\")\r\n  const sendChange = useCallback(\r\n    () => {\r\n      if (state === \"\") return onChange(0)\r\n      const parseFunc = float ? parseFloat : parseInt\r\n      onChange(parseFunc(state))\r\n    },\r\n    [onChange, state, float],\r\n  )\r\n  useEffect(() => setState(value?.toString() ?? \"\"), [value, setState]) // update value on value change\r\n\r\n  return <TextField\r\n    value={state}\r\n    aria-label=\"custom-input\"\r\n    type=\"number\"\r\n    onChange={(e: any) => setState(e.target.value)}\r\n    onBlur={sendChange}\r\n    disabled={disabled}\r\n    onKeyDown={(e: any) => e.key === \"Enter\" && sendChange()}\r\n    {...props}\r\n  />\r\n}","import { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Box, Grid, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { Trans } from 'react-i18next';\r\nimport BootstrapTooltip from '../../../Components/BootstrapTooltip';\r\nimport CardLight from '../../../Components/Card/CardLight';\r\nimport PercentBadge from '../../PercentBadge';\r\n\r\nexport default function SubstatEfficiencyDisplayCard({ efficiency, max = false, t, valid }) {\r\n  const eff = max ? \"maxSubEff\" : \"curSubEff\"\r\n  return <CardLight sx={{ py: 1, px: 2 }}>\r\n    <Grid container spacing={1}>\r\n      <Grid item>{t(`editor.${eff}`)}</Grid>\r\n      <Grid item flexGrow={1}>\r\n        <BootstrapTooltip placement=\"top\" title={<span>\r\n          <Typography variant=\"h6\">{t(`editor.${eff}`)}</Typography>\r\n          <Typography><Trans t={t} i18nKey={`editor.${eff}Desc`} /></Typography>\r\n        </span>}>\r\n          <span><Box component={FontAwesomeIcon} icon={faQuestionCircle} sx={{ cursor: \"help\" }} /></span>\r\n        </BootstrapTooltip>\r\n      </Grid>\r\n      <Grid item xs=\"auto\">\r\n        <PercentBadge valid={valid} max={900} value={valid ? efficiency : \"ERR\"} />\r\n      </Grid>\r\n    </Grid>\r\n  </CardLight>\r\n}\r\n","import { Box, Button, ButtonGroup, Grid, ListItemIcon, ListItemText, MenuItem, Typography } from '@mui/material';\r\nimport React from 'react';\r\nimport { Trans, useTranslation } from 'react-i18next';\r\nimport CardLight from '../../../Components/Card/CardLight';\r\nimport CustomNumberInput, { CustomNumberInputButtonGroupWrapper } from '../../../Components/CustomNumberInput';\r\nimport DropdownButton from '../../../Components/DropdownMenu/DropdownButton';\r\nimport SqBadge from '../../../Components/SqBadge';\r\nimport StatIcon from '../../../Components/StatIcon';\r\nimport TextButton from '../../../Components/TextButton';\r\nimport Artifact from '../../../Data/Artifacts/Artifact';\r\nimport artifactSubstatRollCorrection from '../../../Data/Artifacts/artifact_sub_rolls_correction_gen.json';\r\nimport KeyMap, { cacheValueString } from '../../../KeyMap';\r\nimport { allSubstats, ICachedArtifact, ISubstat } from '../../../Types/artifact';\r\nimport { clamp } from '../../../Util/Util';\r\nimport PercentBadge from '../../PercentBadge';\r\nexport default function SubstatInput({ index, artifact, setSubstat }: { index: number, artifact: ICachedArtifact | undefined, setSubstat: (index: number, substat: ISubstat) => void, }) {\r\n  const { t } = useTranslation(\"artifact\")\r\n  const { mainStatKey = \"\", rarity = 5 } = artifact ?? {}\r\n  const { key = \"\", value = 0, rolls = [], efficiency = 0 } = artifact?.substats[index] ?? {}\r\n\r\n  const accurateValue = rolls.reduce((a, b) => a + b, 0)\r\n  const unit = KeyMap.unit(key), rollNum = rolls.length\r\n\r\n  let error: string = \"\", rollData: readonly number[] = [], allowedRolls = 0\r\n\r\n  if (artifact) {\r\n    // Account for the rolls it will need to fill all 4 substates, +1 for its base roll\r\n    const rarity = artifact.rarity\r\n    const { numUpgrades, high } = Artifact.rollInfo(rarity)\r\n    const maxRollNum = numUpgrades + high - 3;\r\n    allowedRolls = maxRollNum - rollNum\r\n    rollData = key ? Artifact.getSubstatRollData(key, rarity) : []\r\n  }\r\n  const rollOffset = 7 - rollData.length\r\n\r\n  if (!rollNum && key && value) error = error || t`editor.substat.error.noCalc`\r\n  if (allowedRolls < 0) error = error || t(\"editor.substat.error.noOverRoll\", { value: allowedRolls + rollNum })\r\n\r\n  return <CardLight>\r\n    <Box sx={{ display: \"flex\" }}>\r\n      <ButtonGroup size=\"small\" sx={{ width: \"100%\", display: \"flex\" }}>\r\n        <DropdownButton\r\n          startIcon={key ? StatIcon[key] : undefined}\r\n          title={key ? KeyMap.get(key) : t('editor.substat.substatFormat', { value: index + 1 })}\r\n          disabled={!artifact}\r\n          color={key ? \"success\" : \"primary\"}\r\n          sx={{ whiteSpace: \"nowrap\" }}>\r\n          {key && <MenuItem onClick={() => setSubstat(index, { key: \"\", value: 0 })}>{t`editor.substat.noSubstat`}</MenuItem>}\r\n          {allSubstats.filter(key => mainStatKey !== key)\r\n            .map(k => <MenuItem key={k} selected={key === k} disabled={key === k} onClick={() => setSubstat(index, { key: k, value: 0 })} >\r\n              <ListItemIcon>{StatIcon[k]}</ListItemIcon>\r\n              <ListItemText>{KeyMap.get(k)}</ListItemText>\r\n            </MenuItem>)}\r\n        </DropdownButton>\r\n        <CustomNumberInputButtonGroupWrapper sx={{ flexBasis: 30, flexGrow: 1 }} >\r\n          <CustomNumberInput\r\n            float={unit === \"%\"}\r\n            placeholder={t`editor.substat.selectSub`}\r\n            value={key ? value : undefined}\r\n            onChange={value => setSubstat(index, { key, value: value ?? 0 })}\r\n            disabled={!key}\r\n            error={!!error}\r\n            sx={{\r\n              px: 1,\r\n            }}\r\n            inputProps={{\r\n              sx: { textAlign: \"right\" }\r\n            }}\r\n          />\r\n        </CustomNumberInputButtonGroupWrapper>\r\n        {!!rollData.length && <TextButton>{t`editor.substat.nextRolls`}</TextButton>}\r\n        {rollData.map((v, i) => {\r\n          let newValue = cacheValueString(accurateValue + v, unit)\r\n          newValue = artifactSubstatRollCorrection[rarity]?.[key]?.[newValue] ?? newValue\r\n          return <Button key={i} color={`roll${clamp(rollOffset + i, 1, 6)}` as any} disabled={(value && !rollNum) || allowedRolls <= 0} onClick={() => setSubstat(index, { key, value: parseFloat(newValue) })}>{newValue}</Button>\r\n        })}\r\n      </ButtonGroup>\r\n    </Box>\r\n    <Box sx={{ p: 1, }}>\r\n      {error ? <SqBadge color=\"error\">{t`ui:error`}</SqBadge> : <Grid container>\r\n        <Grid item>\r\n          <SqBadge color={rollNum === 0 ? \"secondary\" : `roll${clamp(rollNum, 1, 6)}`}>\r\n            {rollNum ? t(\"editor.substat.RollCount\", { count: rollNum }) : t`editor.substat.noRoll`}\r\n          </SqBadge>\r\n        </Grid>\r\n        <Grid item flexGrow={1}>\r\n          {!!rolls.length && [...rolls].sort().map((val,i) =>\r\n            <Typography component=\"span\" key={`${i}.${val}`} color={`roll${clamp(rollOffset + rollData.indexOf(val), 1, 6)}.main`} sx={{ ml: 1 }} >{cacheValueString(val, unit)}</Typography>)}\r\n        </Grid>\r\n        <Grid item xs=\"auto\" flexShrink={1}>\r\n          <Typography>\r\n            <Trans t={t} i18nKey=\"editor.substat.eff\" color=\"text.secondary\">\r\n              Efficiency: <PercentBadge valid={true} max={rollNum * 100} value={efficiency ? efficiency : t`editor.substat.noStat` as string} />\r\n            </Trans>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>}\r\n\r\n    </Box>\r\n  </CardLight >\r\n}\r\n","import { Alert, Box, CardContent, Divider, Grid, Typography } from '@mui/material';\r\nimport CardDark from '../../../Components/Card/CardDark';\r\nimport CloseButton from '../../../Components/CloseButton';\r\nimport ModalWrapper from '../../../Components/ModalWrapper';\r\nimport scan_art_main from \"./imgs/scan_art_main.png\";\r\nimport Snippet from \"./imgs/snippet.png\";\r\nexport default function UploadExplainationModal({ modalShow, hide }: { modalShow: boolean, hide: () => void }) {\r\n  return <ModalWrapper open={modalShow} onClose={hide} >\r\n    <CardDark>\r\n      <CardContent sx={{ py: 1 }}>\r\n        <Grid container>\r\n          <Grid item flexGrow={1}>\r\n            <Typography variant=\"subtitle1\">How do Upload Screenshots for parsing</Typography>\r\n          </Grid>\r\n          <Grid item>\r\n            <CloseButton onClick={hide} />\r\n          </Grid>\r\n        </Grid>\r\n      </CardContent>\r\n      <Divider />\r\n      <CardContent>\r\n        <Alert variant=\"outlined\" severity=\"warning\">\r\n          NOTE: Artifact Scanning currently only work for <strong>ENGLISH</strong> artifacts.\r\n        </Alert>\r\n        <Grid container spacing={1} mt={1}>\r\n          <Grid item xs={8} md={4}>\r\n            <Box component=\"img\" alt=\"snippet of the screen to take\" src={Snippet} width=\"100%\" height=\"auto\" />\r\n          </Grid>\r\n          <Grid item xs={12} md={8}>\r\n            <Typography gutterBottom>Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer.</Typography>\r\n            <Typography variant=\"h5\">Where to snip the screenshot.</Typography>\r\n            <Typography gutterBottom>In game, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer. <b>Only artifact from this screen can be scanned.</b></Typography>\r\n            <Typography variant=\"h6\">Single artifact</Typography>\r\n            <Typography gutterBottom>To take a screenshot, in Windows, the shortcut is <strong>Shift + WindowsKey + S</strong>. Once you selected the region, the image is automatically included in your clipboard.</Typography>\r\n            <Typography variant=\"h6\">Multiple artifacts</Typography>\r\n            <Typography gutterBottom>To take advantage of batch uploads, you can use a tool like <a href=\"https://picpick.app/\" target=\"_blank\" rel=\"noreferrer\">PicPick</a> to create a macro to easily to screenshot a region to screenshot multiple artifacts at once.</Typography>\r\n            <Typography variant=\"h5\">What to include in the screenshot.</Typography>\r\n            <Typography>As shown in the Image, starting from the top with the artifact name, all the way to the set name(the text in green). </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} md={7}>\r\n            <Typography variant=\"h5\">Adding Screenshot to Genshin Optimizer</Typography>\r\n            <Typography>At this point, you should have the artifact snippet either saved to your harddrive, or in your clipboard.</Typography>\r\n            <Typography gutterBottom>You can click on the box next to \"Browse\" to browse the files in your harddrive for multiple screenshots.</Typography>\r\n            <Typography>For single screenshots from the snippets, just press <strong>Ctrl + V</strong> to paste from your clipboard.</Typography>\r\n            <Typography gutterBottom>You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the <b>Artifact Editor</b>.</Typography>\r\n            <Typography variant=\"h5\">Finishing the Artifact</Typography>\r\n            <Typography>Unfortunately, computer vision is not 100%. There will always be cases where something is not scanned properly. You should always double check the scanned artifact values! Once the artifact has been filled, Click on <strong>Add Artifact</strong> to finish editing the artifact.</Typography>\r\n          </Grid>\r\n          <Grid item xs={8} md={5}>\r\n            <Box component=\"img\" alt=\"main screen after importing stats\" src={scan_art_main} width=\"100%\" height=\"auto\" />\r\n          </Grid>\r\n        </Grid>\r\n      </CardContent>\r\n      <Divider />\r\n      <CardContent sx={{ py: 1 }}>\r\n        <CloseButton large onClick={hide} />\r\n      </CardContent>\r\n    </CardDark>\r\n  </ModalWrapper>\r\n}","export class BorrowManager<T> {\r\n  data: Dict<string, { value: T, refCount: number }> = {}\r\n  init: (key: string) => T\r\n  deinit: (key: string, value: T) => void\r\n\r\n  constructor(init: (key: string) => T, deinit: (key: string, value: T) => void) {\r\n    this.init = init\r\n    this.deinit = deinit\r\n  }\r\n\r\n  /**\r\n   * Borrow the object corresponding to `key`, creating the object as necessary.\r\n   * The borrowing ends when `callback`'s promise is fulfilled.\r\n   * When the last borrowing ends, `deinit` the object.\r\n   *\r\n   * Do not use `arg` after the `callback`'s promise is fulfilled.\r\n   */\r\n  async borrow<R>(key: string, callback: (arg: T) => Promise<R>): Promise<R> {\r\n    if (!this.data[key]) {\r\n      this.data[key] = { value: this.init(key), refCount: 0 }\r\n    }\r\n\r\n    const box = this.data[key]!\r\n    box.refCount += 1\r\n    const result = await callback(box.value)\r\n    box.refCount -= 1\r\n    if (!box.refCount) {\r\n      // Last user. Cleaning up\r\n      delete this.data[key]\r\n      this.deinit(key, box.value)\r\n    }\r\n    return result\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { createScheduler, createWorker, RecognizeResult, Scheduler } from 'tesseract.js';\r\nimport ColorText from '../Components/ColoredText';\r\nimport Artifact from '../Data/Artifacts/Artifact';\r\nimport { ArtifactSheet } from '../Data/Artifacts/ArtifactSheet';\r\nimport KeyMap, { valueString } from '../KeyMap';\r\nimport { allMainStatKeys, allSubstats, IArtifact, ICachedArtifact, ISubstat, MainStatKey, SubstatKey } from '../Types/artifact';\r\nimport { allArtifactRarities, allArtifactSets, allSlotKeys, ArtifactRarity, ArtifactSetKey, Rarity, SlotKey } from '../Types/consts';\r\nimport { clamp, hammingDistance, objectKeyMap } from '../Util/Util';\r\nimport { BorrowManager } from './BorrowManager';\r\n\r\nconst starColor = { r: 255, g: 204, b: 50 } //#FFCC32\r\nconst workerCount = 2\r\n\r\nconst schedulers = new BorrowManager(async (language): Promise<Scheduler> => {\r\n  const scheduler = createScheduler()\r\n  const promises = Array(workerCount).fill(0).map(async _ => {\r\n    const worker = createWorker({\r\n      errorHandler: console.error\r\n    })\r\n\r\n    await worker.load()\r\n    await worker.loadLanguage(language)\r\n    await worker.initialize(language)\r\n    scheduler.addWorker(worker)\r\n  })\r\n\r\n  await Promise.any(promises)\r\n  return scheduler\r\n}, (_language, value) => {\r\n  value.then(value => value.terminate())\r\n})\r\n\r\nexport type ProcessedEntry = {\r\n  fileName: string, imageURL: string, artifact: IArtifact, texts: Dict<keyof ICachedArtifact, Displayable>\r\n}\r\nexport type OutstandingEntry = {\r\n  file: File, fileName: string, imageURL?: Promise<string>, result?: Promise<{ file: File, result: ProcessedEntry }>\r\n}\r\ntype Queue = { processed: ProcessedEntry[], outstanding: OutstandingEntry[] }\r\ntype UploadMessage = { type: \"upload\", files: OutstandingEntry[] }\r\ntype ProcessingMessage = { type: \"processing\" }\r\ntype ProcessedMessage = { type: \"processed\", file: File, result: ProcessedEntry }\r\ntype PopMessage = { type: \"pop\" }\r\ntype ClearMessage = { type: \"clear\" }\r\ntype Color = [number, number, number] // RGB\r\nexport const queueReducer = (queue: Queue, message: UploadMessage | ProcessingMessage | ProcessedMessage | PopMessage | ClearMessage): Queue => {\r\n  switch (message.type) {\r\n    case \"upload\": return { processed: queue.processed, outstanding: [...queue.outstanding, ...message.files] }\r\n    case \"processing\": // Processing `outstanding` head. Refresh\r\n      return { processed: queue.processed, outstanding: [...queue.outstanding] }\r\n    case \"processed\":\r\n      if (queue.outstanding[0].file === message.file)\r\n        return { processed: [...queue.processed, message.result], outstanding: queue.outstanding.slice(1) }\r\n      return queue // Not in the list, ignored\r\n    case \"pop\": return { processed: queue.processed.slice(1), outstanding: queue.outstanding }\r\n    case \"clear\": return { processed: [], outstanding: [] }\r\n  }\r\n}\r\n\r\nexport function processEntry(entry: OutstandingEntry) {\r\n  if (entry.result) return\r\n\r\n  const { file, fileName } = entry\r\n  entry.imageURL = fileToURL(file)\r\n  entry.result = entry.imageURL.then(async imageURL => {\r\n    const sheets = await ArtifactSheet.getAll\r\n    const ocrResult = await ocr(imageURL)\r\n\r\n    const [artifact, texts] = findBestArtifact(\r\n      sheets, ocrResult.rarities,\r\n      parseSetKeys(ocrResult.artifactSetTexts, sheets),\r\n      parseSlotKeys(ocrResult.whiteTexts),\r\n      parseSubstats(ocrResult.substatTexts),\r\n      parseMainStatKeys(ocrResult.whiteTexts),\r\n      parseMainStatValues(ocrResult.whiteTexts)\r\n    )\r\n\r\n    return { file, result: { fileName, imageURL, artifact, texts } }\r\n  })\r\n}\r\n\r\nconst fileToURL = (file: File): Promise<string> => new Promise(resolve => {\r\n  const reader = new FileReader()\r\n  reader.onloadend = ({ target }) =>\r\n    resolve(target!.result as string)\r\n  reader.readAsDataURL(file)\r\n})\r\nconst urlToImageData = (urlFile: string): Promise<ImageData> => new Promise(resolve => {\r\n  const img = new Image()\r\n  img.onload = ({ target }) =>\r\n    resolve(imageToImageData(target as HTMLImageElement))\r\n  img.src = urlFile\r\n})\r\nfunction imageToImageData(image: HTMLImageElement): ImageData {\r\n  const canvas = document.createElement('canvas'), context = canvas.getContext('2d')!\r\n  canvas.width = image.width\r\n  canvas.height = image.height\r\n  context.drawImage(image, 0, 0, image.width, image.height)\r\n  return context.getImageData(0, 0, image.width, image.height) as ImageData // TODO: May be undefined\r\n}\r\nfunction imageDataToCanvas(imageData: ImageData) {\r\n  // create off-screen canvas element\r\n  const canvas = document.createElement('canvas')\r\n  canvas.width = imageData.width\r\n  canvas.height = imageData.height\r\n\r\n  // update canvas with new data\r\n  canvas.getContext('2d')!.putImageData(imageData, 0, 0)\r\n  return canvas // produces a PNG file\r\n}\r\n\r\nasync function ocr(imageURL: string): Promise<{ artifactSetTexts: string[], substatTexts: string[], whiteTexts: string[], rarities: Set<Rarity> }> {\r\n  const imageData = await urlToImageData(imageURL)\r\n\r\n  const width = imageData.width, halfHeight = Math.floor(imageData.height / 2)\r\n  const bottomOpts = { rectangle: { top: halfHeight, left: 0, width, height: halfHeight } }\r\n\r\n  const awaits = [\r\n    textsFromImage(bandPass(imageData, [140, 140, 140], [255, 255, 255], { mode: \"bw\", region: \"top\" })), // slotkey, mainStatValue, level\r\n    textsFromImage(bandPass(imageData, [30, 50, 80], [160, 160, 160], { region: \"bot\" }), bottomOpts), // substats\r\n    textsFromImage(bandPass(imageData, [30, 160, 30], [200, 255, 200], { mode: \"bw\", region: \"bot\" }), bottomOpts), // artifact set, look for greenish texts\r\n  ]\r\n\r\n  const rarities = parseRarities(imageData.data, imageData.width, imageData.height)\r\n  const [whiteTexts, substatTexts, artifactSetTexts] = await Promise.all(awaits)\r\n  return { whiteTexts, substatTexts, artifactSetTexts, rarities }\r\n}\r\nasync function textsFromImage(imageData: ImageData, options: object | undefined = undefined): Promise<string[]> {\r\n  const canvas = imageDataToCanvas(imageData)\r\n  const rec = await schedulers.borrow(\"eng\", async (scheduler) =>\r\n    await (await scheduler).addJob(\"recognize\", canvas, options) as RecognizeResult)\r\n  return rec.data.lines.map(line => line.text)\r\n}\r\n\r\nexport function findBestArtifact(sheets: StrictDict<ArtifactSetKey, ArtifactSheet>, rarities: Set<number>, textSetKeys: Set<ArtifactSetKey>, slotKeys: Set<SlotKey>, substats: ISubstat[], mainStatKeys: Set<MainStatKey>, mainStatValues: { mainStatValue: number, unit?: string }[]): [IArtifact, Dict<keyof ICachedArtifact, Displayable>] {\r\n  // const relevantSetKey = [...new Set<ArtifactSetKey>([...textSetKeys, \"Adventurer\", \"ArchaicPetra\"])]\r\n  // TODO: restore\r\n  const relevantSetKey = [...new Set<ArtifactSetKey>([...textSetKeys, \"EmblemOfSeveredFate\"])]\r\n\r\n  let bestScore = -1, bestArtifacts: IArtifact[] = [{\r\n    // setKey: \"Adventurer\", rarity: 3, level: 0, slotKey: \"flower\", mainStatKey: \"hp\", substats: [],\r\n    // TODO: restore\r\n    setKey: \"EmblemOfSeveredFate\", rarity: 3, level: 0, slotKey: \"flower\", mainStatKey: \"hp\", substats: [],\r\n    location: \"\", lock: false, exclude: false,\r\n  }]\r\n\r\n  // Rate each rarity\r\n  const rarityRates = objectKeyMap(allArtifactRarities, rarity => {\r\n    let score = 0\r\n    if (textSetKeys.size) {\r\n      const count = [...textSetKeys].reduce((count, set) => count + (sheets[set].rarity.includes(rarity) ? 1 : 0), 0)\r\n      score += count / textSetKeys.size\r\n    }\r\n    if (substats.length) {\r\n      const count = substats.reduce((count, substat) =>\r\n        count + (Artifact.getSubstatRolls(substat.key as SubstatKey, substat.value, rarity).length ? 1 : 0), 0)\r\n      score += count / substats.length * 2\r\n    }\r\n    return score\r\n  })\r\n\r\n  // Test all *probable* combinations\r\n  for (const slotKey of allSlotKeys) {\r\n    for (const mainStatKey of Artifact.slotMainStats(slotKey)) {\r\n      const mainStatScore = (slotKeys.has(slotKey) ? 1 : 0) + (mainStatKeys.has(mainStatKey) ? 1 : 0)\r\n      const relevantMainStatValues = mainStatValues\r\n        .filter(value => value.unit !== \"%\" || KeyMap.unit(mainStatKey) === \"%\") // Ignore \"%\" text if key isn't \"%\"\r\n        .map(value => value.mainStatValue)\r\n\r\n      for (const [rarityString, rarityIndividualScore] of Object.entries(rarityRates)) {\r\n        const rarity = parseInt(rarityString) as ArtifactRarity\r\n        const setKeys = relevantSetKey.filter(setKey => sheets[setKey].rarity.includes(rarity))\r\n        const rarityScore = mainStatScore + rarityIndividualScore\r\n\r\n        if (rarityScore + 2 < bestScore) continue // Early bail out\r\n\r\n        for (const minimumMainStatValue of relevantMainStatValues) {\r\n          const values = Artifact.mainStatValues(rarity, mainStatKey)\r\n          const level = Math.max(0, values.findIndex(level => level >= minimumMainStatValue))\r\n          const mainStatVal = values[level]\r\n          const mainStatValScore = rarityScore + (mainStatVal === minimumMainStatValue ? 1 : 0)\r\n\r\n          for (const setKey of setKeys) {\r\n            const score = mainStatValScore + (textSetKeys.has(setKey) ? 1 : 0)\r\n            if (score >= bestScore) {\r\n              if (score > bestScore) bestArtifacts = []\r\n              bestScore = score\r\n              bestArtifacts.push({\r\n                setKey, rarity, level, slotKey, mainStatKey, substats: [], location: \"\", lock: false, exclude: false,\r\n              })\r\n            }\r\n          }\r\n        }\r\n        if (rarityScore >= bestScore) {\r\n          const level = 0\r\n          for (const setKey of setKeys) {\r\n            const score = rarityScore + (textSetKeys.has(setKey) ? 1 : 0)\r\n\r\n            if (score > bestScore) bestArtifacts = []\r\n            bestScore = score\r\n            bestArtifacts.push({\r\n              setKey, rarity, level, slotKey, mainStatKey, substats: [], location: \"\", lock: false, exclude: false\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const texts = {} as Dict<keyof ICachedArtifact, Displayable>\r\n  const chosen = {\r\n    setKey: new Set(), rarity: new Set(), level: new Set(), slotKey: new Set(), mainStatKey: new Set(), mainStatVal: new Set(),\r\n  } as Dict<keyof ICachedArtifact, Set<string>>\r\n\r\n  const result = bestArtifacts[0], resultMainStatVal = Artifact.mainStatValue(result.mainStatKey, result.rarity, result.level)!\r\n  result.substats = substats.filter((substat, i) =>\r\n    substat.key !== result.mainStatKey &&\r\n    substats.slice(0, i).every(other => other.key !== substat.key))\r\n  for (let i = result.substats.length; i < 4; i++)\r\n    result.substats.push({ key: \"\", value: 0 })\r\n\r\n  for (const other of bestArtifacts) {\r\n    chosen.setKey!.add(other.setKey)\r\n    chosen.rarity!.add(other.rarity as any)\r\n    chosen.level!.add(other.level as any)\r\n    chosen.slotKey!.add(other.slotKey)\r\n    chosen.mainStatKey!.add(other.mainStatKey)\r\n  }\r\n\r\n  function unknownText<T>(value: T, name: Displayable, text: (arg: T) => Displayable) {\r\n    return <>Unknown {name} : Set to <ColorText color=\"error\">{text(value)}</ColorText></>\r\n  }\r\n  function ambiguousText<T>(value: T, available: T[], name: Displayable, text: (arg: T) => Displayable) {\r\n    return <>Ambiguous {name} <ColorText color=\"error\">{text(value)}</ColorText> : May also be {\r\n      available.filter(v => v !== value).map((value, index) => <><b>{index > 0 ? \"/\" : \"\"}</b><ColorText color=\"warning\">{text(value)}</ColorText></>)}</>\r\n  }\r\n  function detectedText<T>(value: T, name: Displayable, text: (arg: T) => Displayable) {\r\n    return <>Detected {name} <ColorText color=\"success\">{text(value)}</ColorText></>\r\n  }\r\n  function inferredText<T>(value: T, name: Displayable, text: (arg: T) => Displayable) {\r\n    return <>Inferred {name} <ColorText color=\"warning\">{text(value)}</ColorText></>\r\n  }\r\n\r\n  function addText(key: keyof ICachedArtifact, available: Set<any>, name: Displayable, text: (value) => Displayable) {\r\n    const recommended = new Set([...chosen[key]!].filter(value => available.has(value)))\r\n    if (recommended.size > 1)\r\n      texts[key] = ambiguousText(result[key], [...available], name, text)\r\n    else if (recommended.size === 1)\r\n      texts[key] = detectedText(result[key], name, text)\r\n    else if (chosen[key]!.size > 1)\r\n      texts[key] = unknownText(result[key], name, text)\r\n    else\r\n      texts[key] = inferredText(result[key], name, text)\r\n  }\r\n\r\n  addText(\"setKey\", textSetKeys, \"Set\", (value) => sheets[value].name)\r\n  addText(\"rarity\", rarities, \"Rarity\", (value) => <>{value} {value !== 1 ? \"Stars\" : \"Star\"}</>)\r\n  addText(\"slotKey\", slotKeys, \"Slot\", (value) => <>{Artifact.slotName(value)}</>)\r\n  addText(\"mainStatKey\", mainStatKeys, \"Main Stat\", (value) => <>{KeyMap.getStr(value)}</>)\r\n  texts.substats = <>{result.substats.filter(substat => substat.key !== \"\").map((substat, i) =>\r\n    <div key={i}>{detectedText(substat, \"Sub Stat\", (value) => <>{KeyMap.getStr(value.key)}+{valueString(value.value, KeyMap.unit(value.key))}</>)}</div>)\r\n  }</>\r\n\r\n  const unit = KeyMap.unit(result.mainStatKey)\r\n  if (mainStatValues.find(value => value.mainStatValue === resultMainStatVal)) {\r\n    if (mainStatKeys.has(result.mainStatKey)) {\r\n      texts.level = detectedText(result.level, \"Level\", (value) => \"+\" + value)\r\n      texts.mainStatVal = detectedText(resultMainStatVal, \"Main Stat value\", (value) => <>{valueString(value, unit)}</>)\r\n    } else {\r\n      texts.level = inferredText(result.level, \"Level\", (value) => \"+\" + value)\r\n      texts.mainStatVal = inferredText(resultMainStatVal, \"Main Stat value\", (value) => <>{valueString(value, unit)}</>)\r\n    }\r\n  } else {\r\n    texts.level = unknownText(result.level, \"Level\", (value) => \"+\" + value)\r\n    texts.mainStatVal = unknownText(resultMainStatVal, \"Main Stat value\", (value) => <>{valueString(value, unit)}</>)\r\n  }\r\n\r\n  return [result, texts]\r\n}\r\n\r\nfunction parseSetKeys(texts: string[], sheets): Set<ArtifactSetKey> {\r\n  const results = new Set<ArtifactSetKey>([])\r\n  for (const text of texts)\r\n    for (const key of allArtifactSets)\r\n      if (hammingDistance(text.replace(/\\W/g, ''), sheets[key].nameRaw.replace(/\\W/g, '')) <= 2)\r\n        results.add(key)\r\n  return results\r\n}\r\nfunction parseRarities(pixels: Uint8ClampedArray, width: number, height: number): Set<Rarity> {\r\n  let d = pixels, lastRowNum = 0, rowsWithNumber = 0;\r\n  const results = new Set<Rarity>([])\r\n  for (let y = 0; y < height; y++) {\r\n    let star = 0, onStar = false;\r\n    for (let x = 0; x < width; x++) {\r\n      let i = (y * width + x) * 4\r\n      let r = d[i], g = d[i + 1], b = d[i + 2];\r\n      if (colorCloseEnough({ r, g, b }, starColor)) {\r\n        if (!onStar) {\r\n          onStar = true\r\n          star++\r\n        }\r\n      } else {\r\n        onStar = false\r\n      }\r\n    }\r\n\r\n    if (lastRowNum !== star) {\r\n      lastRowNum = star\r\n      rowsWithNumber = 1;\r\n    } else if (lastRowNum) {\r\n      rowsWithNumber++\r\n      if (rowsWithNumber >= 10) results.add(clamp(lastRowNum, 3, 5) as Rarity)\r\n    }\r\n  }\r\n  return results\r\n}\r\nfunction colorCloseEnough(color1, color2, threshold = 5) {\r\n  const intCloseEnough = (a, b) => (Math.abs(a - b) <= threshold)\r\n  return intCloseEnough(color1.r, color2.r) &&\r\n    intCloseEnough(color1.g, color2.g) &&\r\n    intCloseEnough(color1.b, color2.b)\r\n}\r\nfunction parseSlotKeys(texts: string[]): Set<SlotKey> {\r\n  const results = new Set<SlotKey>()\r\n  for (const text of texts)\r\n    for (const key of allSlotKeys)\r\n      if (hammingDistance(text.replace(/\\W/g, ''), Artifact.slotName(key).replace(/\\W/g, '')) <= 2)\r\n        results.add(key)\r\n  return results\r\n}\r\nfunction parseMainStatKeys(texts: string[]): Set<MainStatKey> {\r\n  const results = new Set<MainStatKey>([])\r\n  for (const text of texts)\r\n    for (const key of allMainStatKeys) {\r\n      if (text.toLowerCase().includes(KeyMap.getStr(key)?.toLowerCase() ?? \"\"))\r\n        results.add(key)\r\n      //use fuzzy compare on the ... Bonus texts. heal_ is included.\r\n      if (key.includes(\"_bonu\") && hammingDistance(text.replace(/\\W/g, ''), (KeyMap.getStr(key) ?? \"\").replace(/\\W/g, '')) <= 1)\r\n        results.add(key)\r\n    }\r\n  return results\r\n}\r\nfunction parseMainStatValues(texts: string[]): { mainStatValue: number, unit?: string }[] {\r\n  const results: { mainStatValue: number, unit?: string }[] = []\r\n  for (const text of texts) {\r\n    let regex = /(\\d+[,|\\\\.]+\\d)%/\r\n    let match = regex.exec(text)\r\n    if (match) results.push({ mainStatValue: parseFloat(match[1].replace(/,/g, \".\").replace(/\\.{2,}/g, \".\")), unit: \"%\" })\r\n    regex = /(\\d+[,|\\\\.]\\d{3}|\\d{2,3})/\r\n    match = regex.exec(text)\r\n    if (match) results.push({ mainStatValue: parseInt(match[1].replace(/[,|\\\\.]+/g, \"\")) })\r\n  }\r\n  return results\r\n}\r\nfunction parseSubstats(texts: string[]): ISubstat[] {\r\n  const matches: ISubstat[] = []\r\n  for (let text of texts) {\r\n    text = text.replace(/^[\\W]+/, \"\").replace(/\\n/, \"\")\r\n    //parse substats\r\n    allSubstats.forEach(key => {\r\n      const name = KeyMap.getStr(key)\r\n      const regex = KeyMap.unit(key) === \"%\" ?\r\n        new RegExp(name + \"\\\\s*\\\\+\\\\s*(\\\\d+[\\\\.|,]+\\\\d)%\", \"im\") :\r\n        new RegExp(name + \"\\\\s*\\\\+\\\\s*(\\\\d+,\\\\d+|\\\\d+)($|\\\\s)\", \"im\")\r\n      const match = regex.exec(text)\r\n      if (match)\r\n        matches.push({ key, value: parseFloat(match[1].replace(/,/g, \".\").replace(/\\.{2,}/g, \".\")) })\r\n    })\r\n  }\r\n  return matches.slice(0, 4)\r\n}\r\n\r\nfunction bandPass(pixelData: ImageData, color1: Color, color2: Color, options: { region?: \"top\" | \"bot\" | \"all\", mode?: \"bw\" | \"color\" | \"invert\" }) {\r\n  const { region = \"all\", mode = \"color\" } = options\r\n  const d = Uint8ClampedArray.from(pixelData.data)\r\n  const top = region === \"top\", bot = region === \"bot\", all = region === \"all\"\r\n  const bw = mode === \"bw\", invert = mode === \"invert\"\r\n  const halfInd = Math.floor(pixelData.width * (pixelData.height / 2) * 4)\r\n  for (let i = 0; i < d.length; i += 4) {\r\n    const r = d[i], g = d[i + 1], b = d[i + 2];\r\n    if ((all || (top && i < halfInd) || (bot && i > halfInd)) &&\r\n      r >= color1[0] && r <= color2[0] &&\r\n      g >= color1[1] && g <= color2[1] &&\r\n      b >= color1[2] && b <= color2[2]) {\r\n      if (bw) d[i] = d[i + 1] = d[i + 2] = 0\r\n      else if (invert) {\r\n        d[i] = 255 - r\r\n        d[i + 1] = 255 - g\r\n        d[i + 2] = 255 - b\r\n      } // else orignal color\r\n    } else {\r\n      d[i] = d[i + 1] = d[i + 2] = 255\r\n    }\r\n  }\r\n  return new ImageData(d, pixelData.width, pixelData.height)\r\n}\r\n","import { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Add, PhotoCamera, Replay, Shuffle, Update } from '@mui/icons-material';\r\nimport { Alert, Box, Button, ButtonGroup, CardContent, CardHeader, CircularProgress, Grid, ListItemIcon, ListItemText, MenuItem, Skeleton, styled, Typography } from '@mui/material';\r\nimport React, { Suspense, useCallback, useContext, useEffect, useMemo, useReducer, useState } from 'react';\r\nimport ReactGA from 'react-ga';\r\nimport { Trans, useTranslation } from 'react-i18next';\r\nimport ArtifactRarityDropdown from '../Components/Artifact/ArtifactRarityDropdown';\r\nimport ArtifactSetDropdown from '../Components/Artifact/ArtifactSetDropdown';\r\nimport ArtifactSlotDropdown from '../Components/Artifact/ArtifactSlotDropdown';\r\nimport CardDark from '../Components/Card/CardDark';\r\nimport CardLight from '../Components/Card/CardLight';\r\nimport CloseButton from '../Components/CloseButton';\r\nimport CustomNumberTextField from '../Components/CustomNumberTextField';\r\nimport DropdownButton from '../Components/DropdownMenu/DropdownButton';\r\nimport ImgIcon from '../Components/Image/ImgIcon';\r\nimport ModalWrapper from '../Components/ModalWrapper';\r\nimport StatIcon from '../Components/StatIcon';\r\nimport Artifact from '../Data/Artifacts/Artifact';\r\nimport { ArtifactSheet } from '../Data/Artifacts/ArtifactSheet';\r\nimport { DatabaseContext } from '../Database/Database';\r\nimport { parseArtifact, validateArtifact } from '../Database/validation';\r\nimport KeyMap, { cacheValueString } from '../KeyMap';\r\nimport useForceUpdate from '../ReactHooks/useForceUpdate';\r\nimport usePromise from '../ReactHooks/usePromise';\r\nimport { allSubstats, IArtifact, ICachedArtifact, ISubstat, MainStatKey } from '../Types/artifact';\r\nimport { ArtifactRarity, ArtifactSetKey, SlotKey } from '../Types/consts';\r\nimport { randomizeArtifact } from '../Util/ArtifactUtil';\r\nimport { clamp, deepClone } from '../Util/Util';\r\nimport ArtifactCard from './ArtifactCard';\r\nimport SubstatEfficiencyDisplayCard from './ArtifactEditor/Components/SubstatEfficiencyDisplayCard';\r\nimport SubstatInput from './ArtifactEditor/Components/SubstatInput';\r\nimport UploadExplainationModal from './ArtifactEditor/Components/UploadExplainationModal';\r\nimport { OutstandingEntry, ProcessedEntry, processEntry, queueReducer } from './ScanningUtil';\r\n\r\nconst maxProcessingCount = 3, maxProcessedCount = 16\r\nconst allSubstatFilter = new Set(allSubstats)\r\ntype ResetMessage = { type: \"reset\" }\r\ntype SubstatMessage = { type: \"substat\", index: number, substat: ISubstat }\r\ntype OverwriteMessage = { type: \"overwrite\", artifact: IArtifact }\r\ntype UpdateMessage = { type: \"update\", artifact: Partial<IArtifact> }\r\ntype Message = ResetMessage | SubstatMessage | OverwriteMessage | UpdateMessage\r\ninterface IEditorArtifact {\r\n  setKey: ArtifactSetKey,\r\n  slotKey: SlotKey,\r\n  level: number,\r\n  rarity: ArtifactRarity,\r\n  mainStatKey: MainStatKey,\r\n  substats: ISubstat[],\r\n}\r\nfunction artifactReducer(state: IEditorArtifact | undefined, action: Message): IEditorArtifact | undefined {\r\n  switch (action.type) {\r\n    case \"reset\": return\r\n    case \"substat\": {\r\n      const { index, substat } = action\r\n      const oldIndex = substat.key ? state!.substats.findIndex(current => current.key === substat.key) : -1\r\n      if (oldIndex === -1 || oldIndex === index)\r\n        state!.substats[index] = substat\r\n      else  // Already in used, swap the items instead\r\n        [state!.substats[index], state!.substats[oldIndex]] =\r\n          [state!.substats[oldIndex], state!.substats[index]]\r\n      return { ...state! }\r\n    }\r\n    case \"overwrite\": return action.artifact\r\n    case \"update\": return { ...state!, ...action.artifact }\r\n  }\r\n}\r\n\r\nconst InputInvis = styled('input')({\r\n  display: 'none',\r\n});\r\n\r\nexport default function ArtifactEditor({ artifactIdToEdit, cancelEdit }: { artifactIdToEdit?: string, cancelEdit: () => void }) {\r\n  const { t } = useTranslation(\"artifact\")\r\n\r\n  const artifactSheets = usePromise(ArtifactSheet.getAll, [])\r\n\r\n  const { database } = useContext(DatabaseContext)\r\n\r\n  const [show, setShow] = useState(false)\r\n\r\n  const [dirtyDatabase, setDirtyDatabase] = useForceUpdate()\r\n  useEffect(() => database.followAnyArt(setDirtyDatabase), [database, setDirtyDatabase])\r\n\r\n  const [editorArtifact, artifactDispatch] = useReducer(artifactReducer, undefined)\r\n  const artifact = useMemo(() => editorArtifact && parseArtifact(editorArtifact), [editorArtifact])\r\n\r\n  const [modalShow, setModalShow] = useState(false)\r\n\r\n  const [{ processed, outstanding }, dispatchQueue] = useReducer(queueReducer, { processed: [], outstanding: [] })\r\n  const firstProcessed = processed[0] as ProcessedEntry | undefined\r\n  const firstOutstanding = outstanding[0] as OutstandingEntry | undefined\r\n\r\n  const processingImageURL = usePromise(firstOutstanding?.imageURL, [firstOutstanding?.imageURL])\r\n  const processingResult = usePromise(firstOutstanding?.result, [firstOutstanding?.result])\r\n\r\n  const remaining = processed.length + outstanding.length\r\n\r\n  const image = firstProcessed?.imageURL ?? processingImageURL\r\n  const { artifact: artifactProcessed, texts } = firstProcessed ?? {}\r\n  // const fileName = firstProcessed?.fileName ?? firstOutstanding?.fileName ?? \"Click here to upload Artifact screenshot files\"\r\n\r\n  useEffect(() => {\r\n    if (!artifact && artifactProcessed)\r\n      artifactDispatch({ type: \"overwrite\", artifact: artifactProcessed })\r\n  }, [artifact, artifactProcessed, artifactDispatch])\r\n\r\n  useEffect(() => {\r\n    const numProcessing = Math.min(maxProcessedCount - processed.length, maxProcessingCount, outstanding.length)\r\n    const processingCurrent = numProcessing && !outstanding[0].result\r\n    outstanding.slice(0, numProcessing).forEach(processEntry)\r\n    if (processingCurrent)\r\n      dispatchQueue({ type: \"processing\" })\r\n  }, [processed.length, outstanding])\r\n\r\n  useEffect(() => {\r\n    if (processingResult)\r\n      dispatchQueue({ type: \"processed\", ...processingResult })\r\n  }, [processingResult, dispatchQueue])\r\n\r\n  const uploadFiles = useCallback((files: FileList) => {\r\n    setShow(true)\r\n    dispatchQueue({ type: \"upload\", files: [...files].map(file => ({ file, fileName: file.name })) })\r\n  }, [dispatchQueue, setShow])\r\n  const clearQueue = useCallback(() => dispatchQueue({ type: \"clear\" }), [dispatchQueue])\r\n\r\n  useEffect(() => {\r\n    const pasteFunc = (e: any) => uploadFiles(e.clipboardData.files)\r\n    window.addEventListener('paste', pasteFunc);\r\n    return () =>\r\n      window.removeEventListener('paste', pasteFunc)\r\n  }, [uploadFiles])\r\n\r\n  const onUpload = useCallback(\r\n    e => {\r\n      uploadFiles(e.target.files)\r\n      e.target.value = null // reset the value so the same file can be uploaded again...\r\n    },\r\n    [uploadFiles],\r\n  )\r\n\r\n  const { old, oldType }: { old: ICachedArtifact | undefined, oldType: \"edit\" | \"duplicate\" | \"upgrade\" | \"\" } = useMemo(() => {\r\n    const databaseArtifact = dirtyDatabase && artifactIdToEdit && database._getArt(artifactIdToEdit)\r\n    if (databaseArtifact) return { old: databaseArtifact, oldType: \"edit\" }\r\n    if (artifact === undefined) return { old: undefined, oldType: \"\" }\r\n    const { duplicated, upgraded } = dirtyDatabase && database.findDuplicates(artifact)\r\n    return { old: duplicated[0] ?? upgraded[0], oldType: duplicated.length !== 0 ? \"duplicate\" : \"upgrade\" }\r\n  }, [artifact, artifactIdToEdit, database, dirtyDatabase])\r\n\r\n  const { artifact: cachedArtifact, errors } = useMemo(() => {\r\n    if (!artifact || !artifactIdToEdit) return { artifact: undefined, errors: [] as Displayable[] }\r\n    const validated = validateArtifact(artifact, artifactIdToEdit)\r\n    if (old) {\r\n      validated.artifact.location = old.location\r\n      validated.artifact.exclude = old.exclude\r\n    }\r\n    return validated\r\n  }, [artifact, artifactIdToEdit, old])\r\n\r\n  // Overwriting using a different function from `databaseArtifact` because `useMemo` does not\r\n  // guarantee to trigger *only when* dependencies change, which is necessary in this case.\r\n  useEffect(() => {\r\n    if (artifactIdToEdit === \"new\") {\r\n      setShow(true)\r\n      artifactDispatch({ type: \"reset\" })\r\n    }\r\n    const databaseArtifact = artifactIdToEdit && dirtyDatabase && database._getArt(artifactIdToEdit)\r\n    if (databaseArtifact) {\r\n      setShow(true)\r\n      artifactDispatch({ type: \"overwrite\", artifact: deepClone(databaseArtifact) })\r\n    }\r\n  }, [artifactIdToEdit, database, dirtyDatabase])\r\n\r\n  const sheet = artifact ? artifactSheets?.[artifact.setKey] : undefined\r\n  const reset = useCallback(() => {\r\n    cancelEdit?.();\r\n    dispatchQueue({ type: \"pop\" })\r\n    artifactDispatch({ type: \"reset\" })\r\n  }, [cancelEdit, artifactDispatch])\r\n  const update = useCallback((newValue: Partial<IArtifact>) => {\r\n    const newSheet = newValue.setKey ? artifactSheets![newValue.setKey] : sheet!\r\n\r\n    function pick<T>(value: T | undefined, available: readonly T[], prefer?: T): T {\r\n      return (value && available.includes(value)) ? value : (prefer ?? available[0])\r\n    }\r\n\r\n    if (newValue.setKey) {\r\n      newValue.rarity = pick(artifact?.rarity, newSheet.rarity, Math.max(...newSheet.rarity) as ArtifactRarity)\r\n      newValue.slotKey = pick(artifact?.slotKey, newSheet.slots)\r\n    }\r\n    if (newValue.rarity)\r\n      newValue.level = artifact?.level ?? 0\r\n    if (newValue.level)\r\n      newValue.level = clamp(newValue.level, 0, 4 * (newValue.rarity ?? artifact!.rarity))\r\n    if (newValue.slotKey)\r\n      newValue.mainStatKey = pick(artifact?.mainStatKey, Artifact.slotMainStats(newValue.slotKey))\r\n\r\n    if (newValue.mainStatKey) {\r\n      newValue.substats = [0, 1, 2, 3].map(i =>\r\n        (artifact && artifact.substats[i].key !== newValue.mainStatKey) ? artifact!.substats[i] : { key: \"\", value: 0 })\r\n    }\r\n    artifactDispatch({ type: \"update\", artifact: newValue })\r\n  }, [artifact, artifactSheets, sheet, artifactDispatch])\r\n  const setSubstat = useCallback((index: number, substat: ISubstat) => {\r\n    artifactDispatch({ type: \"substat\", index, substat })\r\n  }, [artifactDispatch])\r\n  const isValid = !errors.length\r\n  const canClearArtifact = (): boolean => window.confirm(t`editor.clearPrompt` as string)\r\n  const { rarity = 5, level = 0, slotKey = \"flower\" } = artifact ?? {}\r\n  const { currentEfficiency = 0, maxEfficiency = 0 } = cachedArtifact ? Artifact.getArtifactEfficiency(cachedArtifact, allSubstatFilter) : {}\r\n  const preventClosing = processed.length || outstanding.length\r\n  const onClose = useCallback(\r\n    (e) => {\r\n      if (preventClosing) e.preventDefault()\r\n      setShow(false)\r\n      cancelEdit()\r\n    }, [preventClosing, setShow, cancelEdit])\r\n  return <ModalWrapper open={show} onClose={onClose} >\r\n    <Suspense fallback={<Skeleton variant=\"rectangular\" sx={{ width: \"100%\", height: show ? \"100%\" : 64 }} />}><CardDark >\r\n      <UploadExplainationModal modalShow={modalShow} hide={() => setModalShow(false)} />\r\n      <CardHeader\r\n        title={<Trans t={t} i18nKey=\"editor.title\" >Artifact Editor</Trans>}\r\n        action={<CloseButton disabled={!!preventClosing} onClick={onClose} />}\r\n      />\r\n      <CardContent sx={{ pt: 0 }}>\r\n        <Grid container spacing={1} sx={{ mb: 1 }}>\r\n          {/* Left column */}\r\n          <Grid item xs={12} md={6} lg={6} sx={{\r\n            // select all excluding last\r\n            \"> div:nth-last-of-type(n+2)\": { mb: 1 }\r\n          }}>\r\n            {/* set & rarity */}\r\n            <ButtonGroup sx={{ display: \"flex\", mb: 1 }}>\r\n              {/* Artifact Set */}\r\n              <ArtifactSetDropdown selectedSetKey={artifact?.setKey} onChange={setKey => update({ setKey: setKey as ArtifactSetKey })} sx={{ flexGrow: 1 }} />\r\n              {/* rarity dropdown */}\r\n              <ArtifactRarityDropdown rarity={artifact ? rarity : undefined} onChange={r => update({ rarity: r })} filter={r => !!sheet?.rarity?.includes?.(r)} disabled={!sheet} />\r\n            </ButtonGroup>\r\n\r\n            {/* level */}\r\n            <Box component=\"div\" display=\"flex\">\r\n              <CustomNumberTextField id=\"filled-basic\" label=\"Level\" variant=\"filled\" sx={{ flexShrink: 1, flexGrow: 1, mr: 1, my: 0 }} margin=\"dense\" size=\"small\"\r\n                value={level} disabled={!sheet} placeholder={`0~${rarity * 4}`} onChange={l => update({ level: l })}\r\n              />\r\n              <ButtonGroup >\r\n                <Button onClick={() => update({ level: level - 1 })} disabled={!sheet || level === 0}>-</Button>\r\n                {rarity ? [...Array(rarity + 1).keys()].map(i => 4 * i).map(i => <Button key={i} onClick={() => update({ level: i })} disabled={!sheet || level === i}>{i}</Button>) : null}\r\n                <Button onClick={() => update({ level: level + 1 })} disabled={!sheet || level === (rarity * 4)}>+</Button>\r\n              </ButtonGroup>\r\n            </Box>\r\n\r\n            {/* slot */}\r\n            <Box component=\"div\" display=\"flex\">\r\n              <ArtifactSlotDropdown disabled={!sheet} slotKey={slotKey} onChange={slotKey => update({ slotKey })} />\r\n              <CardLight sx={{ p: 1, ml: 1, flexGrow: 1 }}>\r\n                <Suspense fallback={<Skeleton width=\"60%\" />}>\r\n                  <Typography color=\"text.secondary\">\r\n                    {sheet?.getSlotName(artifact!.slotKey) ? <span><ImgIcon src={sheet.slotIcons[artifact!.slotKey]} /> {sheet?.getSlotName(artifact!.slotKey)}</span> : t`editor.unknownPieceName`}\r\n                  </Typography>\r\n                </Suspense>\r\n              </CardLight>\r\n            </Box>\r\n\r\n            {/* main stat */}\r\n            <Box component=\"div\" display=\"flex\">\r\n              <DropdownButton startIcon={artifact?.mainStatKey ? StatIcon[artifact.mainStatKey] : undefined} title={<b>{artifact ? KeyMap.get(artifact.mainStatKey) : t`mainStat`}</b>} disabled={!sheet} color={artifact ? \"success\" : \"primary\"} >\r\n                {Artifact.slotMainStats(slotKey).map(mainStatK =>\r\n                  <MenuItem key={mainStatK} selected={artifact?.mainStatKey === mainStatK} disabled={artifact?.mainStatKey === mainStatK} onClick={() => update({ mainStatKey: mainStatK })} >\r\n                    <ListItemIcon>{StatIcon[mainStatK]}</ListItemIcon>\r\n                    <ListItemText>{KeyMap.get(mainStatK)}</ListItemText>\r\n                  </MenuItem>)}\r\n              </DropdownButton>\r\n              <CardLight sx={{ p: 1, ml: 1, flexGrow: 1 }}>\r\n                <Typography color=\"text.secondary\">\r\n                  {artifact ? `${cacheValueString(Artifact.mainStatValue(artifact.mainStatKey, rarity, level), KeyMap.unit(artifact.mainStatKey))}${KeyMap.unitStr(artifact.mainStatKey)}` : t`mainStat`}\r\n                </Typography>\r\n              </CardLight>\r\n            </Box>\r\n\r\n            {/* Current/Max Substats Efficiency */}\r\n            <SubstatEfficiencyDisplayCard valid={isValid} efficiency={currentEfficiency} t={t} />\r\n            {currentEfficiency !== maxEfficiency && <SubstatEfficiencyDisplayCard max valid={isValid} efficiency={maxEfficiency} t={t} />}\r\n\r\n            {/* Image OCR */}\r\n            <CardLight>\r\n              <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 1 }}>\r\n                {/* TODO: artifactDispatch not overwrite */}\r\n                <Suspense fallback={<Skeleton width=\"100%\" height=\"100\" />}>\r\n                  <Grid container spacing={1} alignItems=\"center\">\r\n                    <Grid item flexGrow={1}>\r\n                      <label htmlFor=\"contained-button-file\">\r\n                        <InputInvis accept=\"image/*\" id=\"contained-button-file\" multiple type=\"file\" onChange={onUpload} />\r\n                        <Button component=\"span\" startIcon={<PhotoCamera />}>\r\n                          Upload Screenshot (or Ctrl-V)\r\n                        </Button>\r\n                      </label>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button color=\"info\" sx={{ px: 2, minWidth: 0 }} onClick={() => {\r\n                        setModalShow(true)\r\n                        ReactGA.modalview('/artifact/how-to-upload')\r\n                      }}><Typography><FontAwesomeIcon icon={faQuestionCircle} /></Typography></Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                  {image && <Box display=\"flex\" justifyContent=\"center\">\r\n                    <Box component=\"img\" src={image} width=\"100%\" maxWidth={350} height=\"auto\" alt=\"Screenshot to parse for artifact values\" />\r\n                  </Box>}\r\n                  {remaining > 0 && <CardDark sx={{ pl: 2 }} ><Grid container spacing={1} alignItems=\"center\" >\r\n                    {!firstProcessed && firstOutstanding && <Grid item>\r\n                      <CircularProgress size=\"1em\" />\r\n                    </Grid>}\r\n                    <Grid item flexGrow={1}>\r\n                      <Typography>\r\n                        <span>\r\n                          Screenshots in file-queue: <b>{remaining}</b>\r\n                          {/* {process.env.NODE_ENV === \"development\" && ` (Debug: Processed ${processed.length}/${maxProcessedCount}, Processing: ${outstanding.filter(entry => entry.result).length}/${maxProcessingCount}, Outstanding: ${outstanding.length})`} */}\r\n                        </span>\r\n                      </Typography>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button size=\"small\" color=\"error\" onClick={clearQueue}>Clear file-queue</Button>\r\n                    </Grid>\r\n                  </Grid></CardDark>}\r\n                </Suspense>\r\n              </CardContent>\r\n            </CardLight>\r\n          </Grid>\r\n\r\n          {/* Right column */}\r\n          <Grid item xs={12} md={6} lg={6} display=\"flex\" flexDirection=\"column\" gap={1}>\r\n            {/* substat selections */}\r\n            {[0, 1, 2, 3].map((index) => <SubstatInput key={index} index={index} artifact={cachedArtifact} setSubstat={setSubstat} />)}\r\n            {texts && <CardLight><CardContent>\r\n              <div>{texts.slotKey}</div>\r\n              <div>{texts.mainStatKey}</div>\r\n              <div>{texts.mainStatVal}</div>\r\n              <div>{texts.rarity}</div>\r\n              <div>{texts.level}</div>\r\n              <div>{texts.substats}</div>\r\n              <div>{texts.setKey}</div>\r\n            </CardContent></CardLight>}\r\n          </Grid>\r\n        </Grid>\r\n\r\n        {/* Duplicate/Updated/Edit UI */}\r\n        {old && <Grid container sx={{ justifyContent: \"space-around\", mb: 1 }} spacing={1} >\r\n          <Grid item lg={4} md={6} ><CardLight>\r\n            <Typography sx={{ textAlign: \"center\" }} py={1} variant=\"h6\" color=\"text.secondary\" >{t`editor.preview`}</Typography>\r\n            <ArtifactCard artifactObj={cachedArtifact} />\r\n          </CardLight></Grid>\r\n          <Grid item lg={4} md={6} ><CardLight>\r\n            <Typography sx={{ textAlign: \"center\" }} py={1} variant=\"h6\" color=\"text.secondary\" >{oldType !== \"edit\" ? (oldType === \"duplicate\" ? t`editor.dupArt` : t`editor.upArt`) : t`editor.beforeEdit`}</Typography>\r\n            <ArtifactCard artifactObj={old} />\r\n          </CardLight></Grid>\r\n        </Grid>}\r\n\r\n        {/* Error alert */}\r\n        {!isValid && <Alert variant=\"filled\" severity=\"error\" sx={{ mb: 1 }}>{errors.map((e, i) => <div key={i}>{e}</div>)}</Alert>}\r\n\r\n        {/* Buttons */}\r\n        <Grid container spacing={2}>\r\n          <Grid item>\r\n            {oldType === \"edit\" ?\r\n              <Button startIcon={<Add />} onClick={() => { database.updateArt(editorArtifact!, old!.id); reset() }} disabled={!editorArtifact || !isValid} color=\"primary\">\r\n                {t`editor.btnSave`}\r\n              </Button> :\r\n              <Button startIcon={<Add />} onClick={() => { database.createArt(artifact!); reset() }} disabled={!artifact || !isValid} color={oldType === \"duplicate\" ? \"warning\" : \"primary\"}>\r\n                {t`editor.btnAdd`}\r\n              </Button>}\r\n          </Grid>\r\n          <Grid item flexGrow={1}>\r\n            <Button startIcon={<Replay />} disabled={!artifact} onClick={() => { canClearArtifact() && reset() }} color=\"error\">{t`editor.btnClear`}</Button>\r\n          </Grid>\r\n          <Grid item>\r\n            {process.env.NODE_ENV === \"development\" && <Button color=\"info\" startIcon={<Shuffle />} onClick={async () => artifactDispatch({ type: \"overwrite\", artifact: await randomizeArtifact() })}>{t`editor.btnRandom`}</Button>}\r\n          </Grid>\r\n          {old && oldType !== \"edit\" && <Grid item>\r\n            <Button startIcon={<Update />} onClick={() => { database.updateArt(editorArtifact!, old.id); reset() }} disabled={!editorArtifact || !isValid} color=\"success\">{t`editor.btnUpdate`}</Button>\r\n          </Grid>}\r\n        </Grid>\r\n      </CardContent>\r\n    </CardDark ></Suspense>\r\n  </ModalWrapper>\r\n}\r\n","import { ListItemIcon, ListItemText } from '@mui/material';\r\nimport Box from '@mui/material/Box';\r\nimport Chip from '@mui/material/Chip';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport OutlinedInput from '@mui/material/OutlinedInput';\r\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\r\nimport { Theme, useTheme } from '@mui/material/styles';\r\nimport KeyMap from '../../KeyMap';\r\nimport { allMainStatKeys, MainStatKey } from '../../Types/artifact';\r\nimport StatIcon from '../StatIcon';\r\n\r\n\r\nfunction getStyles(name: string, personName: readonly string[], theme: Theme) {\r\n  return {\r\n    fontWeight: personName.includes(name)\r\n      ? theme.typography.fontWeightMedium\r\n      : theme.typography.fontWeightRegular,\r\n  };\r\n}\r\n\r\nexport default function ArtifactMainStatMultipleSelectChip({ mainStatKeys, setMainStatKeys }:\r\n  { mainStatKeys: MainStatKey[], setMainStatKeys: (keys: MainStatKey[]) => void }) {\r\n  const theme = useTheme();\r\n\r\n  const handleChange = (event: SelectChangeEvent<typeof mainStatKeys>) => {\r\n    const { target: { value }, } = event\r\n    setMainStatKeys((typeof value === 'string' ? value.split(',') : value) as MainStatKey[]);// On autofill we get a stringified value.\r\n  };\r\n  return (\r\n    <div>\r\n      <FormControl fullWidth>\r\n        <InputLabel id=\"main-stat-multiple-chip-label\">Main Stats</InputLabel>\r\n        <Select\r\n          labelId=\"main-stat-multiple-chip-label\"\r\n          id=\"main-stat-multiple-chip\"\r\n          multiple\r\n          value={mainStatKeys}\r\n          onChange={handleChange}\r\n          input={<OutlinedInput id=\"main-stat-select-multiple-chip\" label=\"Main Stats\" />}\r\n          renderValue={(selected) => (\r\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n              {selected.map((value) =>\r\n                <Chip key={value} icon={StatIcon[value]} label={KeyMap.get(value)} />\r\n              )}\r\n            </Box>\r\n          )}\r\n        >\r\n          {allMainStatKeys.map(statKey => <MenuItem key={statKey} value={statKey}>\r\n            <ListItemIcon>{StatIcon[statKey]}</ListItemIcon>\r\n            <ListItemText primaryTypographyProps={{ style: getStyles(statKey, mainStatKeys, theme) }}>\r\n              {KeyMap.get(statKey)}\r\n            </ListItemText>\r\n          </MenuItem>)}\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}\r\n","import { Divider, ListItemIcon, ListItemText, Typography } from '@mui/material';\r\nimport Box from '@mui/material/Box';\r\nimport Chip from '@mui/material/Chip';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport OutlinedInput from '@mui/material/OutlinedInput';\r\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\r\nimport { Theme, useTheme } from '@mui/material/styles';\r\nimport { useMemo } from 'react';\r\nimport { Trans, useTranslation } from 'react-i18next';\r\nimport { ArtifactSheet } from '../../Data/Artifacts/ArtifactSheet';\r\nimport usePromise from '../../ReactHooks/usePromise';\r\nimport { ArtifactSetKey, Rarity } from '../../Types/consts';\r\nimport { Stars } from '../StarDisplay';\r\n\r\n\r\nfunction getStyles(name: string, personName: readonly string[], theme: Theme) {\r\n  return {\r\n    fontWeight: personName.includes(name)\r\n      ? theme.typography.fontWeightMedium\r\n      : theme.typography.fontWeightRegular,\r\n  };\r\n}\r\n\r\nexport default function ArtifactSetMultipleSelectChip({ artSetKeys, setArtSetKeys }:\r\n  { artSetKeys: ArtifactSetKey[], setArtSetKeys: (keys: ArtifactSetKey[]) => void }) {\r\n  const { t } = useTranslation(\"artifact\")\r\n  const artifactSheets = usePromise(ArtifactSheet.getAll, [])\r\n  const theme = useTheme();\r\n\r\n  const handleChange = (event: SelectChangeEvent<typeof artSetKeys>) => {\r\n    const { target: { value }, } = event\r\n    setArtSetKeys((typeof value === 'string' ? value.split(',') : value) as ArtifactSetKey[]);// On autofill we get a stringified value.\r\n  };\r\n  const displaySets = useMemo(() => {\r\n    if (!artifactSheets) return {}\r\n    return ArtifactSheet.setKeysByRarities(artifactSheets)\r\n  }, [artifactSheets])\r\n  if (!artifactSheets) return null\r\n  return (\r\n    <div>\r\n      <FormControl fullWidth>\r\n        <InputLabel id=\"artifact-set-multiple-chip-label\">Artifact Sets</InputLabel>\r\n        <Select\r\n          labelId=\"artifact-set-multiple-chip-label\"\r\n          id=\"artifact-set-multiple-chip\"\r\n          multiple\r\n          value={artSetKeys}\r\n          onChange={handleChange}\r\n          input={<OutlinedInput id=\"artifact-set-select-multiple-chip\" label=\"Artifact Sets\" />}\r\n          renderValue={(selected) => (\r\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n              {selected.map((value) =>\r\n                <Chip key={value} icon={artifactSheets[value]?.defIcon} label={artifactSheets[value].name} />\r\n              )}\r\n            </Box>\r\n          )}\r\n        >\r\n          {!!Object.keys(displaySets).length && Object.entries(displaySets).reverse().flatMap(([star, sets], i) => [\r\n            ...((i > 0) && sets.length ? [<Divider key={`${star}divi`} />] : []),\r\n            ...(sets.length ? [<MenuItem key={`${star}header`} style={{ pointerEvents: 'none' }} >\r\n              <Typography>\r\n                <Trans t={t} i18nKey=\"editor.set.maxRarity\">Max Rarity <Stars stars={parseInt(star) as Rarity} /></Trans>\r\n              </Typography>\r\n            </MenuItem>] : []),\r\n            ...sets.map(setKey => <MenuItem key={setKey} value={setKey}>\r\n              <ListItemIcon>{artifactSheets[setKey]?.defIcon}</ListItemIcon>\r\n              <ListItemText primaryTypographyProps={{ style: getStyles(setKey, artSetKeys, theme) }}>\r\n                {artifactSheets[setKey]?.name}\r\n              </ListItemText>\r\n            </MenuItem >)\r\n          ])}\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}\r\n","import { ListItemIcon, ListItemText } from '@mui/material';\r\nimport Box from '@mui/material/Box';\r\nimport Chip from '@mui/material/Chip';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport OutlinedInput from '@mui/material/OutlinedInput';\r\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\r\nimport { Theme, useTheme } from '@mui/material/styles';\r\nimport KeyMap from '../../KeyMap';\r\nimport { allSubstats, SubstatKey } from '../../Types/artifact';\r\nimport StatIcon from '../StatIcon';\r\n\r\n\r\nfunction getStyles(name: string, personName: readonly string[], theme: Theme) {\r\n  return {\r\n    fontWeight: personName.includes(name)\r\n      ? theme.typography.fontWeightMedium\r\n      : theme.typography.fontWeightRegular,\r\n  };\r\n}\r\n\r\nexport default function ArtifactSubStatMultipleSelectChip({ subStatKeys, setSubStatKeys }:\r\n  { subStatKeys: SubstatKey[], setSubStatKeys: (keys: SubstatKey[]) => void }) {\r\n  const theme = useTheme();\r\n\r\n  const handleChange = (event: SelectChangeEvent<typeof subStatKeys>) => {\r\n    const { target: { value }, } = event\r\n    setSubStatKeys((typeof value === 'string' ? value.split(',') : value) as SubstatKey[]);// On autofill we get a stringified value.\r\n  };\r\n  return (\r\n    <div>\r\n      <FormControl fullWidth>\r\n        <InputLabel id=\"sub-stat-multiple-chip-label\">Sub Stats</InputLabel>\r\n        <Select\r\n          labelId=\"sub-stat-multiple-chip-label\"\r\n          id=\"sub-stat-multiple-chip\"\r\n          multiple\r\n          value={subStatKeys}\r\n          onChange={handleChange}\r\n          input={<OutlinedInput id=\"sub-stat-select-multiple-chip\" label=\"Sub Stats\" />}\r\n          renderValue={(selected) => (\r\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n              {selected.map((value) =>\r\n                <Chip key={value} icon={StatIcon[value]} label={KeyMap.get(value)} />\r\n              )}\r\n            </Box>\r\n          )}\r\n        >\r\n          {allSubstats.map(statKey => <MenuItem key={statKey} value={statKey}>\r\n            <ListItemIcon>{StatIcon[statKey]}</ListItemIcon>\r\n            <ListItemText primaryTypographyProps={{ style: getStyles(statKey, subStatKeys, theme) }}>\r\n              {KeyMap.get(statKey)}\r\n            </ListItemText>\r\n          </MenuItem>)}\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}\r\n","import { faBan, faChartLine, faTrash, faUserShield, faUserSlash } from \"@fortawesome/free-solid-svg-icons\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { BusinessCenter, Lock, LockOpen, Replay } from \"@mui/icons-material\"\r\nimport { Button, CardContent, Divider, Grid, ListItemIcon, ListItemText, MenuItem, Skeleton, ToggleButton, Typography } from \"@mui/material\"\r\nimport { Box } from \"@mui/system\"\r\nimport { Suspense, useContext, useMemo } from \"react\"\r\nimport { Trans, useTranslation } from \"react-i18next\"\r\nimport ArtifactLevelSlider from \"../Components/Artifact/ArtifactLevelSlider\"\r\nimport ArtifactMainStatMultipleSelectChip from \"../Components/Artifact/ArtifactMainStatMultipleSelectChip\"\r\nimport ArtifactSetMultipleSelectChip from \"../Components/Artifact/ArtifactSetMultipleSelectChip\"\r\nimport ArtifactSubStatMultipleSelectChip from \"../Components/Artifact/ArtifactSubStatMultipleSelectChip\"\r\nimport { artifactSlotIcon } from \"../Components/Artifact/SlotNameWIthIcon\"\r\nimport CardDark from \"../Components/Card/CardDark\"\r\nimport { CharacterMenuItemArray } from \"../Components/Character/CharacterDropdownButton\"\r\nimport DropdownButton from \"../Components/DropdownMenu/DropdownButton\"\r\nimport SolidToggleButtonGroup from \"../Components/SolidToggleButtonGroup\"\r\nimport SqBadge from \"../Components/SqBadge\"\r\nimport { Stars } from \"../Components/StarDisplay\"\r\nimport CharacterSheet from \"../Data/Characters/CharacterSheet\"\r\nimport { DatabaseContext } from \"../Database/Database\"\r\nimport usePromise from \"../ReactHooks/usePromise\"\r\nimport { ICachedArtifact } from \"../Types/artifact\"\r\nimport { allArtifactRarities, allSlotKeys, CharacterKey } from \"../Types/consts\"\r\nimport { FilterOption } from \"./ArtifactSort\"\r\n\r\nexport default function ArtifactFilter({ filterOption, filterOptionDispatch, filterDispatch, numShowing, total, }:\r\n  { filterOption: FilterOption, filterOptionDispatch: (any) => void, filterDispatch: (any) => void, numShowing: number, total: number }) {\r\n  const { t } = useTranslation([\"artifact\", \"ui\"]);\r\n  const { artSetKeys = [], mainStatKeys = [], rarity = [], slotKeys = [], levelLow, levelHigh, substats = [],\r\n    location = \"\", excluded = \"\" } = filterOption\r\n  const locationCharacterSheet = usePromise(CharacterSheet.get(location as CharacterKey), [location])\r\n\r\n  let locationDisplay\r\n  if (!location) locationDisplay = t(\"filterLocation.any\")\r\n  else if (location === \"Inventory\") locationDisplay = <span><BusinessCenter /> {t(\"filterLocation.inventory\")}</span>\r\n  else if (location === \"Equipped\") locationDisplay = <span><FontAwesomeIcon icon={faUserShield} /> {t(\"filterLocation.currentlyEquipped\")}</span>\r\n  else locationDisplay = <b>{locationCharacterSheet?.nameWIthIcon}</b>\r\n\r\n  let excludedDisplay\r\n  if (excluded === \"excluded\") excludedDisplay = <span><FontAwesomeIcon icon={faBan} /> {t`exclusion.excluded`}</span>\r\n  else if (excluded === \"included\") excludedDisplay = <span><FontAwesomeIcon icon={faChartLine} /> {t`exclusion.included`}</span>\r\n  else excludedDisplay = t(\"exclusionDisplay\", { value: t(\"exclusion.any\") })\r\n\r\n  return <Suspense fallback={<Skeleton variant=\"rectangular\" width=\"100%\" height={300} />}>\r\n    <CardDark  >\r\n      <CardContent>\r\n        <Grid container>\r\n          <Grid item >\r\n            <Typography variant=\"h6\"><Trans t={t} i18nKey=\"artifactFilter\">Artifact Filter</Trans></Typography>\r\n          </Grid>\r\n          <Grid item flexGrow={1} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            {numShowing !== total && <Typography>Filtered {numShowing} / {total}</Typography>}\r\n          </Grid>\r\n          <Grid item>\r\n            <Button size=\"small\" color=\"error\" onClick={() => filterDispatch({ type: \"reset\" })} startIcon={<Replay />}>\r\n              <Trans t={t} i18nKey=\"ui:reset\" />\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container spacing={1} mt={1}>\r\n          {/* left */}\r\n          <Grid item xs={12} md={6} display=\"flex\" flexDirection=\"column\" gap={1}>\r\n            {/* Artifact stars filter */}\r\n            <SolidToggleButtonGroup fullWidth onChange={(e, newVal) => filterOptionDispatch({ rarity: newVal })} value={rarity} size=\"small\">\r\n              {allArtifactRarities.map(star => <ToggleButton key={star} value={star}><Stars stars={star} /></ToggleButton>)}\r\n            </SolidToggleButtonGroup>\r\n            {/* Artifact Slot */}\r\n            <SolidToggleButtonGroup fullWidth onChange={(e, newVal) => filterOptionDispatch({ slotKeys: newVal })} value={slotKeys} size=\"small\">\r\n              {allSlotKeys.map(slotKey => <ToggleButton key={slotKey} value={slotKey}>{artifactSlotIcon(slotKey)}</ToggleButton>)}\r\n            </SolidToggleButtonGroup>\r\n            {/* Artiface level filter */}\r\n            <ArtifactLevelSlider levelLow={levelLow} levelHigh={levelHigh}\r\n              setLow={levelLow => filterOptionDispatch({ levelLow })}\r\n              setHigh={levelHigh => filterOptionDispatch({ levelHigh })}\r\n              setBoth={(levelLow, levelHigh) => filterOptionDispatch({ levelLow, levelHigh })} />\r\n            <Box display=\"flex\" gap={1}>\r\n              {/* location */}\r\n              <LocationDropdown dropdownProps={{ color: location ? \"success\" : \"primary\" }} title={locationDisplay} onChange={location => filterOptionDispatch({ location })} selectedCharacterKey={location} />\r\n              {/* exclusion state */}\r\n              <DropdownButton fullWidth title={excludedDisplay} color={excluded ? (excluded === \"included\" ? \"success\" : \"error\") : \"primary\"}>\r\n                <MenuItem selected={excluded === \"\"} disabled={excluded === \"\"} onClick={() => filterOptionDispatch({ excluded: \"\" })}><Trans t={t} i18nKey=\"exclusion.any\" >Any</Trans></MenuItem>\r\n                <MenuItem selected={excluded === \"excluded\"} disabled={excluded === \"excluded\"} onClick={() => filterOptionDispatch({ excluded: \"excluded\" })}>\r\n                  <ListItemIcon>\r\n                    <FontAwesomeIcon icon={faBan} />\r\n                  </ListItemIcon>\r\n                  <ListItemText>\r\n                    <Trans t={t} i18nKey=\"exclusion.excluded\" >Excluded</Trans>\r\n                  </ListItemText>\r\n                </MenuItem>\r\n                <MenuItem selected={excluded === \"included\"} disabled={excluded === \"included\"} onClick={() => filterOptionDispatch({ excluded: \"included\" })}>\r\n                  <ListItemIcon>\r\n                    <FontAwesomeIcon icon={faChartLine} />\r\n                  </ListItemIcon>\r\n                  <ListItemText>\r\n                    <Trans t={t} i18nKey=\"exclusion.included\" >Included</Trans>\r\n                  </ListItemText>\r\n                </MenuItem>\r\n              </DropdownButton>\r\n            </Box>\r\n          </Grid>\r\n          {/* right */}\r\n          <Grid item xs={12} md={6} display=\"flex\" flexDirection=\"column\" gap={1}>\r\n            {/* Artifact Set */}\r\n            <ArtifactSetMultipleSelectChip artSetKeys={artSetKeys} setArtSetKeys={artSetKeys => filterOptionDispatch({ artSetKeys })} />\r\n            <ArtifactMainStatMultipleSelectChip mainStatKeys={mainStatKeys} setMainStatKeys={mainStatKeys => filterOptionDispatch({ mainStatKeys })} />\r\n            <ArtifactSubStatMultipleSelectChip subStatKeys={substats} setSubStatKeys={substats => filterOptionDispatch({ substats })} />\r\n          </Grid>\r\n        </Grid>\r\n      </CardContent>\r\n    </CardDark>\r\n  </Suspense>\r\n}\r\n\r\n\r\nfunction LocationDropdown({ title, onChange, selectedCharacterKey, dropdownProps }) {\r\n  const { database } = useContext(DatabaseContext)\r\n  const characterSheets = usePromise(CharacterSheet.getAll, [])\r\n  const { t } = useTranslation([\"artifact\", \"ui\"]);\r\n\r\n  return <DropdownButton fullWidth {...dropdownProps} title={title}>\r\n    <MenuItem key=\"unselect\" selected={selectedCharacterKey === \"\"} disabled={selectedCharacterKey === \"\"} onClick={() => onChange(\"\")}>\r\n      <ListItemIcon>\r\n        <Replay />\r\n      </ListItemIcon>\r\n      <ListItemText>\r\n        <Trans t={t} i18nKey=\"ui:unselect\" >Unselect</Trans>\r\n      </ListItemText>\r\n    </MenuItem>\r\n    <MenuItem key=\"inventory\" selected={selectedCharacterKey === \"Inventory\"} disabled={selectedCharacterKey === \"Inventory\"} onClick={() => onChange(\"Inventory\")}>\r\n      <ListItemIcon>\r\n        <BusinessCenter />\r\n      </ListItemIcon>\r\n      <ListItemText>\r\n        <Trans t={t} i18nKey=\"filterLocation.inventory\" >Inventory</Trans>\r\n      </ListItemText>\r\n    </MenuItem>\r\n    <MenuItem key=\"equipped\" selected={selectedCharacterKey === \"Equipped\"} disabled={selectedCharacterKey === \"Equipped\"} onClick={() => onChange(\"Equipped\")}>\r\n      <ListItemIcon>\r\n        <FontAwesomeIcon icon={faUserShield} />\r\n      </ListItemIcon>\r\n      <ListItemText>\r\n        <Trans t={t} i18nKey=\"filterLocation.currentlyEquipped\" >Currently Equipped</Trans>\r\n      </ListItemText>\r\n    </MenuItem>\r\n    <Divider />\r\n    {!!characterSheets && CharacterMenuItemArray(characterSheets, database._getCharKeys().sort(), onChange, selectedCharacterKey)}\r\n  </DropdownButton>\r\n}\r\n\r\nexport function ArtifactRedButtons({ artifactIds, filterOption }:\r\n  { artifactIds: string[], filterOption: FilterOption }) {\r\n  const { t } = useTranslation([\"artifact\", \"ui\"]);\r\n  const { database } = useContext(DatabaseContext)\r\n  const { numDelete, numUnequip, numExclude, numInclude, numUnlock, numLock } = useMemo(() => {\r\n    const artifacts = artifactIds.map(id => database._getArt(id)) as ICachedArtifact[]\r\n    const numUnlock = artifacts.reduce((a, art) => a + (art.lock ? 0 : 1), 0)\r\n    const numLock = artifacts.length - numUnlock\r\n    const numDelete = numUnlock\r\n    const numUnequip = artifacts.reduce((a, art) => a + (art.location ? 1 : 0), 0)\r\n    const numExclude = artifacts.reduce((a, art) => a + (art.exclude ? 1 : 0), 0)\r\n    const numInclude = artifacts.length - numExclude\r\n\r\n    return { numDelete, numUnequip, numExclude, numInclude, numUnlock, numLock }\r\n  }, [artifactIds, database])\r\n\r\n  const unequipArtifacts = () =>\r\n    window.confirm(`Are you sure you want to unequip ${numUnequip} artifacts currently equipped on characters?`) &&\r\n    artifactIds.map(id => database.setArtLocation(id, \"\"))\r\n\r\n  const deleteArtifacts = () =>\r\n    window.confirm(`Are you sure you want to delete ${numDelete} artifacts?`) &&\r\n    artifactIds.map(id => !database._getArt(id)?.lock && database.removeArt(id))\r\n\r\n  const excludeArtifacts = () =>\r\n    window.confirm(`Are you sure you want to exclude ${numInclude} artifacts from build generations?`) &&\r\n    artifactIds.map(id => database.updateArt({ exclude: true }, id))\r\n\r\n  const includeArtifacts = () =>\r\n    window.confirm(`Are you sure you want to include ${numExclude} artifacts in build generations?`) &&\r\n    artifactIds.map(id => database.updateArt({ exclude: false }, id))\r\n\r\n  const lockArtifacts = () =>\r\n    window.confirm(`Are you sure you want to lock ${numUnlock} artifacts?`) &&\r\n    artifactIds.map(id => database.updateArt({ lock: true }, id))\r\n\r\n  const unlockArtifacts = () =>\r\n    window.confirm(`Are you sure you want to unlock ${numLock} artifacts?`) &&\r\n    artifactIds.map(id => database.updateArt({ lock: false }, id))\r\n\r\n  return <Grid container spacing={1} alignItems=\"center\">\r\n    <Grid item xs={12} sm={6} md={3}>\r\n      <Button fullWidth color=\"error\" disabled={!numUnequip} onClick={unequipArtifacts} startIcon={<FontAwesomeIcon icon={faUserSlash} />}>\r\n        <Trans t={t} i18nKey=\"button.unequipArtifacts\" >Unequip Artifacts</Trans>\r\n        <SqBadge sx={{ ml: 1 }} color={numUnequip ? \"success\" : \"secondary\"}>{numUnequip}</SqBadge>\r\n      </Button>\r\n    </Grid>\r\n    <Grid item xs={12} sm={6} md={3}>\r\n      <Button fullWidth color=\"error\" disabled={!numDelete} onClick={deleteArtifacts} startIcon={<FontAwesomeIcon icon={faTrash} />}>\r\n        <Trans t={t} i18nKey=\"button.deleteArtifacts\" >Delete Artifacts</Trans>\r\n        <SqBadge sx={{ ml: 1 }} color={numDelete ? \"success\" : \"secondary\"}>{numDelete}</SqBadge>\r\n      </Button>\r\n    </Grid>\r\n    <Grid item xs={12} sm={6} md={3}>\r\n      <Button fullWidth color=\"error\" disabled={!numInclude} onClick={excludeArtifacts} startIcon={<FontAwesomeIcon icon={faBan} />}>\r\n        <Trans t={t} i18nKey=\"button.excludeArtifacts\" >Exclude Artifacts</Trans>\r\n        <SqBadge sx={{ ml: 1 }} color={numInclude ? \"success\" : \"secondary\"}>{numInclude}</SqBadge>\r\n      </Button>\r\n    </Grid>\r\n    <Grid item xs={12} sm={6} md={3}>\r\n      <Button fullWidth color=\"error\" disabled={!numExclude} onClick={includeArtifacts} startIcon={<FontAwesomeIcon icon={faChartLine} />}>\r\n        <Trans t={t} i18nKey=\"button.includeArtifacts\" >Include Artifacts</Trans>\r\n        <SqBadge sx={{ ml: 1 }} color={numExclude ? \"success\" : \"secondary\"}>{numExclude}</SqBadge>\r\n      </Button>\r\n    </Grid>\r\n    <Grid item xs={12} sm={6} md={3}>\r\n      <Button fullWidth color=\"error\" disabled={!numLock} onClick={unlockArtifacts} startIcon={<LockOpen />}>\r\n        <Trans t={t} i18nKey=\"button.unlockrtifacts\" >Unlock Artifacts</Trans>\r\n        <SqBadge sx={{ ml: 1 }} color={numLock ? \"success\" : \"secondary\"}>{numLock}</SqBadge>\r\n      </Button>\r\n    </Grid>\r\n    <Grid item xs={12} sm={6} md={3}>\r\n      <Button fullWidth color=\"error\" disabled={!numUnlock} onClick={lockArtifacts} startIcon={<Lock />}>\r\n        <Trans t={t} i18nKey=\"button.lockArtifacts\" >Lock Artifacts</Trans>\r\n        <SqBadge sx={{ ml: 1 }} color={numUnlock ? \"success\" : \"secondary\"}>{numUnlock}</SqBadge>\r\n      </Button>\r\n    </Grid>\r\n    <Grid item xs={12} sm={12} md={6} display=\"flex\" justifyContent=\"space-around\">\r\n      <Typography variant=\"caption\" color=\"text.secondary\"><Trans t={t} i18nKey=\"buttonHint\">Note: the red buttons above only applies to <b>currently filtered artifacts</b></Trans></Typography>\r\n    </Grid>\r\n  </Grid>\r\n}\r\n","import { CardContent, Divider, Grid, Typography } from \"@mui/material\"\r\nimport { useCallback } from \"react\"\r\nimport CardDark from \"../Components/Card/CardDark\"\r\nimport CardLight from \"../Components/Card/CardLight\"\r\nimport ColorText from \"../Components/ColoredText\"\r\nimport SqBadge from \"../Components/SqBadge\"\r\nimport { StatFilterItem } from \"../Components/StatFilterCard\"\r\nimport { allSubstats, SubstatKey } from \"../Types/artifact\"\r\n\r\nexport default function ProbabilityFilter({ probabilityFilter: statFilters = {}, setProbabilityFilter: setStatFilters, disabled = false }: {\r\n  probabilityFilter: Dict<SubstatKey, number>,\r\n  setProbabilityFilter: (object: Dict<SubstatKey, number>) => void,\r\n  disabled?: boolean\r\n}) {\r\n  const remainingKeys = allSubstats.filter(key => !(Object.keys(statFilters) as any).some(k => k === key))\r\n  const setFilter = useCallback((sKey, min) => setStatFilters({ ...statFilters, [sKey]: min }), [statFilters, setStatFilters],\r\n  )\r\n  return <CardDark>\r\n    <CardContent sx={{ py: 1 }}>\r\n      <Typography variant=\"h6\">\r\n        Roll Probability Calculator <SqBadge color=\"success\">TC Feature</SqBadge>\r\n      </Typography>\r\n    </CardContent>\r\n    <Divider />\r\n    <CardContent>\r\n      <Grid container spacing={1}>\r\n        <Grid item xs={12} md={6}>\r\n          <CardLight>\r\n            <CardContent>\r\n              <Typography>\r\n                This UI only pops up when \"Sort by\" <strong>Probability</strong>.\r\n                In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.\r\n                <ColorText color=\"warning\"> Artifacts that already reach the criteria(100%) or are at 0% are hidden.</ColorText>\r\n              </Typography>\r\n\r\n            </CardContent>\r\n          </CardLight>\r\n        </Grid>\r\n        <Grid item xs={12} md={6} container spacing={1}>\r\n          {Object.entries(statFilters).map(([statKey, min]) => {\r\n            return <Grid item xs={12} key={statKey} ><StatFilterItem statKey={statKey} statKeys={remainingKeys} setFilter={setFilter} disabled={disabled} value={min} close={() => {\r\n              delete statFilters[statKey]\r\n              setStatFilters({ ...statFilters })\r\n            }} /></Grid>\r\n          })}\r\n          <Grid item xs={12}>\r\n            <StatFilterItem value={undefined} close={undefined} statKeys={remainingKeys} setFilter={setFilter} disabled={disabled} />\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </CardContent>\r\n  </CardDark >\r\n}\r\n","import { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Replay } from '@mui/icons-material';\r\nimport { Alert, Box, Button, CardContent, Grid, Link, Pagination, Skeleton, ToggleButton, Typography } from '@mui/material';\r\nimport React, { Suspense, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\r\nimport ReactGA from 'react-ga';\r\nimport { Trans, useTranslation } from 'react-i18next';\r\nimport { Link as RouterLink, useLocation } from 'react-router-dom';\r\nimport CardDark from '../Components/Card/CardDark';\r\nimport InfoComponent from '../Components/InfoComponent';\r\nimport SolidToggleButtonGroup from '../Components/SolidToggleButtonGroup';\r\nimport SortByButton from '../Components/SortByButton';\r\nimport StatIcon from '../Components/StatIcon';\r\nimport { DatabaseContext } from '../Database/Database';\r\nimport { initGlobalSettings } from '../GlobalSettings';\r\nimport KeyMap from '../KeyMap';\r\nimport useDBState from '../ReactHooks/useDBState';\r\nimport useForceUpdate from '../ReactHooks/useForceUpdate';\r\nimport { allSubstats, SubstatKey } from '../Types/artifact';\r\nimport { ArtifactDisplayLocationState } from '../Types/LocationState';\r\nimport { filterFunction, sortFunction } from '../Util/SortByFilters';\r\nimport { clamp } from '../Util/Util';\r\nimport ArtifactCard from './ArtifactCard';\r\nimport ArtifactEditor from './ArtifactEditor';\r\nimport ArtifactFilter, { ArtifactRedButtons } from './ArtifactFilter';\r\nimport { artifactFilterConfigs, artifactSortConfigs, artifactSortKeys, artifactSortKeysTC, initialArtifactSortFilter } from './ArtifactSort';\r\nimport ProbabilityFilter from './ProbabilityFilter';\r\nimport { probability } from './RollProbability';\r\n\r\nconst InfoDisplay = React.lazy(() => import('./InfoDisplay'));\r\nfunction initialState() {\r\n  return {\r\n    ...initialArtifactSortFilter(),\r\n    maxNumArtifactsToDisplay: 50,\r\n    effFilter: [...allSubstats] as SubstatKey[],\r\n    probabilityFilter: {} as Dict<SubstatKey, number>,\r\n  }\r\n}\r\nexport default function ArtifactDisplay() {\r\n  const [{ tcMode }] = useDBState(\"GlobalSettings\", initGlobalSettings)\r\n  const { t } = useTranslation([\"artifact\", \"ui\"]);\r\n  const { state: locationState } = useLocation<ArtifactDisplayLocationState | undefined>()\r\n  const { database } = useContext(DatabaseContext)\r\n  const [state, setState] = useDBState(\"ArtifactDisplay\", initialState)\r\n  const stateDispatch = useCallback(\r\n    action => {\r\n      if (action.type === \"reset\") setState(initialArtifactSortFilter())\r\n      else setState(action)\r\n    },\r\n    [setState],\r\n  )\r\n\r\n  const { effFilter, filterOption, ascending, probabilityFilter, maxNumArtifactsToDisplay } = state\r\n  let { sortType } = state\r\n  const showProbability = tcMode && sortType === \"probability\"\r\n  //force the sortType back to a normal value after exiting TC mode\r\n  if (sortType === \"probability\" && !tcMode) stateDispatch({ sortType: artifactSortKeys[0] })\r\n\r\n  const [artToEditId, setartToEditId] = useState(locationState?.artToEditId)\r\n  const [pageIdex, setpageIdex] = useState(0)\r\n  const invScrollRef = useRef<HTMLDivElement>(null)\r\n  const [dbDirty, forceUpdate] = useForceUpdate()\r\n  const effFilterSet = useMemo(() => new Set(effFilter), [effFilter]) as Set<SubstatKey>\r\n  const deleteArtifact = useCallback((id: string) => database.removeArt(id), [database])\r\n  const editArtifact = useCallback(id => setartToEditId(id), [])\r\n  const cancelEditArtifact = useCallback(() => setartToEditId(undefined), [])\r\n\r\n  useEffect(() => {\r\n    ReactGA.pageview('/artifact')\r\n    return database.followAnyArt(forceUpdate)\r\n  }, [database, forceUpdate])\r\n\r\n  const filterOptionDispatch = useCallback((action) => {\r\n    stateDispatch({\r\n      filterOption: {\r\n        ...filterOption,\r\n        ...action\r\n      }\r\n    })\r\n  }, [stateDispatch, filterOption])\r\n\r\n  const setProbabilityFilter = useCallback(probabilityFilter => stateDispatch({ probabilityFilter }), [stateDispatch],)\r\n\r\n  const noArtifact = useMemo(() => !database._getArts().length, [database])\r\n  const sortConfigs = useMemo(() => artifactSortConfigs(effFilterSet, probabilityFilter), [effFilterSet, probabilityFilter])\r\n  const filterConfigs = useMemo(() => artifactFilterConfigs(), [])\r\n  const { artifactIds, totalArtNum } = useMemo(() => {\r\n    const { sortType = artifactSortKeys[0], ascending = false, filterOption } = state\r\n    let allArtifacts = database._getArts()\r\n    const filterFunc = filterFunction(filterOption, filterConfigs)\r\n    const sortFunc = sortFunction(sortType, ascending, sortConfigs)\r\n    //in probability mode, filter out the artifacts that already reach criteria\r\n    if (showProbability) {\r\n      allArtifacts.forEach(art => (art as any).probability = probability(art, probabilityFilter))\r\n      allArtifacts = allArtifacts.filter(art => (art as any).probability && (art as any).probability !== 1)\r\n    }\r\n    const artifactIds = allArtifacts.filter(filterFunc).sort(sortFunc).map(art => art.id)\r\n    return { artifactIds, totalArtNum: allArtifacts.length, ...dbDirty }//use dbDirty to shoo away warnings!\r\n  }, [state, dbDirty, database, sortConfigs, filterConfigs, probabilityFilter, showProbability])\r\n\r\n\r\n  const { artifactsToShow: artifactIdsToShow, numPages, currentPageIndex } = useMemo(() => {\r\n    const numPages = Math.ceil(artifactIds.length / maxNumArtifactsToDisplay)\r\n    const currentPageIndex = clamp(pageIdex, 0, numPages - 1)\r\n    return { artifactsToShow: artifactIds.slice(currentPageIndex * maxNumArtifactsToDisplay, (currentPageIndex + 1) * maxNumArtifactsToDisplay), numPages, currentPageIndex }\r\n  }, [artifactIds, pageIdex, maxNumArtifactsToDisplay])\r\n\r\n  //for pagination\r\n  const totalShowing = artifactIds.length !== totalArtNum ? `${artifactIds.length}/${totalArtNum}` : `${totalArtNum}`\r\n  const setPage = useCallback(\r\n    (e, value) => {\r\n      invScrollRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n      setpageIdex(value - 1);\r\n    },\r\n    [setpageIdex, invScrollRef],\r\n  )\r\n\r\n  return <Box display=\"flex\" flexDirection=\"column\" gap={1} my={1}>\r\n    <InfoComponent\r\n      pageKey=\"artifactPage\"\r\n      modalTitle={t`info.title`}\r\n      text={t(\"tipsOfTheDay\", { returnObjects: true }) as string[]}\r\n    >\r\n      <InfoDisplay />\r\n    </InfoComponent>\r\n\r\n    {noArtifact && <Alert severity=\"info\" variant=\"filled\">Looks like you haven't added any artifacts yet. If you want, there are <Link color=\"warning.main\" component={RouterLink} to=\"/scanner\">automatic scanners</Link> that can speed up the import process!</Alert>}\r\n\r\n    <ArtifactEditor\r\n      artifactIdToEdit={artToEditId}\r\n      cancelEdit={cancelEditArtifact}\r\n    />\r\n    <ArtifactFilter filterOption={filterOption} filterOptionDispatch={filterOptionDispatch} filterDispatch={stateDispatch}\r\n      numShowing={artifactIds.length} total={totalArtNum} />\r\n    {showProbability && <ProbabilityFilter probabilityFilter={probabilityFilter} setProbabilityFilter={setProbabilityFilter} />}\r\n    <CardDark ref={invScrollRef}>\r\n      <CardContent>\r\n        <Grid container sx={{ mb: 1 }}>\r\n          <Grid item flexGrow={1}><span><Trans t={t} i18nKey=\"efficiencyFilter.title\">Substats to use in efficiency calculation</Trans></span></Grid>\r\n          <Grid item>\r\n            <Button size=\"small\" color=\"error\" onClick={() => stateDispatch({ effFilter: [...allSubstats] })} startIcon={<Replay />}><Trans t={t} i18nKey=\"ui:reset\" /></Button>\r\n          </Grid>\r\n        </Grid>\r\n        <EfficiencyFilter selectedKeys={effFilter} onChange={n => stateDispatch({ effFilter: n })} />\r\n      </CardContent>\r\n    </CardDark>\r\n    <CardDark ><CardContent>\r\n      <Grid container alignItems=\"center\" sx={{ pb: 2 }}>\r\n        <Grid item flexGrow={1}>\r\n          <Pagination count={numPages} page={currentPageIndex + 1} onChange={setPage} />\r\n        </Grid>\r\n        <Grid item flexGrow={1}>\r\n          <ShowingArt count={numPages} page={currentPageIndex + 1} onChange={setPage} numShowing={artifactIdsToShow.length} total={totalShowing} t={t} />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={4} lg={4} xl={3}>\r\n          <SortByButton fullWidth sortKeys={[...artifactSortKeys.filter(key => (artifactSortKeysTC as unknown as string[]).includes(key) ? tcMode : true)]}\r\n            value={sortType} onChange={sortType => stateDispatch({ sortType })}\r\n            ascending={ascending} onChangeAsc={ascending => stateDispatch({ ascending })}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <ArtifactRedButtons artifactIds={artifactIds} filterOption={filterOption} />\r\n    </CardContent></CardDark>\r\n\r\n    <Suspense fallback={<Skeleton variant=\"rectangular\" sx={{ width: \"100%\", height: \"100%\", minHeight: 5000 }} />}>\r\n      <Grid container spacing={1} >\r\n        <Grid item xs={12} sm={6} md={4} lg={4} xl={3}>\r\n          <CardDark sx={{ height: \"100%\", width: \"100%\", minHeight: 300, display: \"flex\", flexDirection: \"column\" }}>\r\n            <CardContent>\r\n              <Typography sx={{ textAlign: \"center\" }}>Add New Artifact</Typography>\r\n            </CardContent>\r\n            <Box sx={{\r\n              flexGrow: 1,\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\"\r\n            }}\r\n            >\r\n              <Button onClick={() => editArtifact(\"new\")} sx={{\r\n                borderRadius: \"1em\"\r\n              }}>\r\n                <Typography variant=\"h1\"><FontAwesomeIcon icon={faPlus} className=\"fa-fw\" /></Typography>\r\n              </Button>\r\n            </Box>\r\n          </CardDark>\r\n        </Grid>\r\n        {artifactIdsToShow.map(artId =>\r\n          <Grid item key={artId} xs={12} sm={6} md={4} lg={4} xl={3} >\r\n            <ArtifactCard\r\n              artifactId={artId}\r\n              effFilter={effFilterSet}\r\n              onDelete={deleteArtifact}\r\n              onEdit={editArtifact}\r\n              probabilityFilter={showProbability ? probabilityFilter : undefined}\r\n            />\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n    </Suspense>\r\n    {numPages > 1 && <CardDark ><CardContent>\r\n      <Grid container>\r\n        <Grid item flexGrow={1}>\r\n          <Pagination count={numPages} page={currentPageIndex + 1} onChange={setPage} />\r\n        </Grid>\r\n        <Grid item>\r\n          <ShowingArt count={numPages} page={currentPageIndex + 1} onChange={setPage} numShowing={artifactIdsToShow.length} total={totalShowing} t={t} />\r\n        </Grid>\r\n      </Grid>\r\n    </CardContent></CardDark>}\r\n  </Box >\r\n}\r\n\r\nfunction ShowingArt({ count, page, onChange, numShowing, total, t }) {\r\n  return <Typography color=\"text.secondary\">\r\n    <Trans t={t} i18nKey=\"showingNum\" count={numShowing} value={total} >\r\n      Showing <b>{{ count: numShowing }}</b> out of {{ value: total }} Artifacts\r\n    </Trans>\r\n  </Typography>\r\n}\r\n\r\nfunction EfficiencyFilter({ selectedKeys, onChange }) {\r\n  const keys1 = allSubstats.slice(0, 6)\r\n  const keys2 = allSubstats.slice(6)\r\n  const selKeys1 = selectedKeys.filter(k => keys1.includes(k))\r\n  const selKeys2 = selectedKeys.filter(k => keys2.includes(k))\r\n  return <Grid container spacing={1}>\r\n    <Grid item xs={12} md={6}>\r\n      <SolidToggleButtonGroup fullWidth value={selKeys1} onChange={(e, arr) => onChange([...selKeys2, ...arr])} sx={{ height: \"100%\" }}>\r\n        {keys1.map(key => <ToggleButton size=\"small\" key={key} value={key}>\r\n          <Box display=\"flex\" gap={1} alignItems=\"center\">\r\n            {StatIcon[key]}\r\n            {KeyMap.get(key)}\r\n          </Box>\r\n        </ToggleButton>)}\r\n      </SolidToggleButtonGroup>\r\n    </Grid>\r\n    <Grid item xs={12} md={6}>\r\n      <SolidToggleButtonGroup fullWidth value={selKeys2} onChange={(e, arr) => onChange([...selKeys1, ...arr])} sx={{ height: \"100%\" }}>\r\n        {keys2.map(key => <ToggleButton size=\"small\" key={key} value={key}>\r\n          <Box display=\"flex\" gap={1} alignItems=\"center\">\r\n            {StatIcon[key]}\r\n            {KeyMap.get(key)}\r\n          </Box>\r\n        </ToggleButton>)}\r\n      </SolidToggleButtonGroup>\r\n    </Grid>\r\n  </Grid>\r\n}\r\n","import SqBadge from '../Components/SqBadge';\r\nimport { clamp } from '../Util/Util';\r\n\r\nexport default function PercentBadge({ value, max = 1, valid }: {\r\n  valid?: boolean,\r\n  value: number | string,\r\n  max?: number\r\n}) {\r\n  let [badgeColor, text] = typeof value === 'number' ?\r\n    [`roll${clamp(Math.floor((value / max) * 10) - 4, 1, 6)}`, value.toFixed() + \"%\"] : [\"secondary\", value]\r\n  if (!valid) badgeColor = \"error\"\r\n  return <SqBadge color={badgeColor} >{text}</SqBadge>\r\n}\r\n","import { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\n\r\nexport default function useDBState<O extends object>(key: string, init: () => O): [O, (value: Partial<O>) => void] {\r\n  const { database } = useContext(DatabaseContext)\r\n  const [state, setState] = useState(database._getState<O>(key, init))\r\n\r\n  useEffect(() => setState(database._getState(key, init)), [database, key, init])\r\n  useEffect(() =>\r\n    key ? database.followState(key, setState) : undefined,\r\n    [key, setState, database])\r\n  const updateState = useCallback(\r\n    value => database.updateState(key, value),\r\n    [database, key],\r\n  )\r\n\r\n  return [state, updateState]\r\n}\r\n","type SortConfig<T> = {\r\n  getValue: (id: T) => number | string\r\n  tieBreaker?: string\r\n}\r\nexport type SortConfigs<Keys extends string, T> = Record<Keys, SortConfig<T>>\r\n\r\nexport function sortFunction<Keys extends string, T>(sortby: string, ascending: boolean, configs: SortConfigs<Keys, T>) {\r\n  function Sort(a: T, b: T, ascending: boolean, config: SortConfig<T>) {\r\n    const aV = config.getValue(a)\r\n    const bV = config.getValue(b)\r\n    let diff = 0\r\n    if (typeof aV === \"string\" && typeof bV === \"string\")\r\n      diff = aV.localeCompare(bV)\r\n    else\r\n      diff = ((bV as number) - (aV as number))\r\n    return (ascending ? -1 : 1) * diff\r\n  }\r\n  return (a: T, b: T) => {\r\n    if (!configs[sortby]) return 0\r\n    const filterOption = configs[sortby]\r\n    let diff = Sort(a, b, ascending, filterOption)\r\n    if (!diff && filterOption.tieBreaker && configs[filterOption.tieBreaker])\r\n      diff = Sort(a, b, ascending, configs[filterOption.tieBreaker])\r\n    return diff\r\n  }\r\n}\r\n\r\ntype FilterConfig<T> = (obj: T, filter: any) => boolean\r\nexport type FilterConfigs<Keys extends string, T> = Record<Keys, FilterConfig<T>>\r\nexport function filterFunction<Keys extends string, T>(filterOptions: Record<Keys, any>, filterConfigs: FilterConfigs<Keys, T>) {\r\n  return (obj: T) => Object.entries(filterOptions).every(([optionKey, optionVal]) => filterConfigs[optionKey as any] && filterConfigs[optionKey as any](obj, optionVal))\r\n}\r\n"],"names":["ArtifactLevelSlider","levelLow","levelHigh","setLow","setHigh","setBoth","dark","useState","sliderLow","setsliderLow","sliderHigh","setsliderHigh","setSlider","useCallback","e","l","h","useEffect","sx","width","display","alignItems","bgcolor","value","onChange","val","clamp","pl","inputProps","textAlign","startAdornment","flexGrow","mx","getAriaLabel","onChangeCommitted","valueLabelDisplay","min","max","step","marks","px","ArtifactSetDropdown","selectedSetKey","artifactSetsByRarity","hasUnselect","props","t","useTranslation","artifactSheets","usePromise","ArtifactSheet","sheet","displaySets","useMemo","title","name","startIcon","defIconSrc","src","color","onClick","selected","disabled","i18nKey","Object","keys","length","entries","reverse","flatMap","i","star","sets","stars","parseInt","map","setKey","fontSize","BootstrapTooltip","styled","className","arrow","classes","popper","theme","tooltipClasses","palette","common","black","backgroundColor","CharacterDropdownButton","unSelectText","unSelectIcon","inventory","noUnselect","filter","database","useContext","DatabaseContext","characterSheets","CharacterSheet","characterSheet","characterKeys","_getCharKeys","ck","sort","thumbImg","thumbImgSide","variant","noWrap","CharacterMenuItemArray","selectedCharacterKey","characterKey","LocationName","location","component","nameWIthIcon","verticalAlign","ThumbSide","height","lineHeight","marginTop","spacing","marginLeft","marginRight","marginBottom","StyledInputBase","InputBase","primary","main","transition","Wrapper","Button","padding","overflow","CustomNumberInputButtonGroupWrapper","children","disableRipple","disableFocusRipple","disableTouchRipple","CustomNumberInput","float","number","setNumber","focused","setFocus","parseFunc","parseFloat","onBlur","onFocus","onInputChange","target","onKeyDOwn","key","type","onKeyDown","initialInfoShownState","artifactPage","buildPage","characterPage","InfoComponent","pageKey","text","modalTitle","useDBState","stateInfoShown","setStateInfoShown","showInfoModal","setshowInfoModal","Array","isArray","getRandomElementFromArray","displayText","closeModal","container","item","xs","size","icon","faQuestionCircle","ns","key18","containerProps","maxWidth","open","onClose","py","Suspense","fallback","large","SortByButton","sortKeys","ascending","onChangeAsc","faSortAmountDownAlt","faSortAmountUp","StatFilterCard","statFilters","setStatFilters","data","DataContext","statKeys","get","input","push","charEle","remainingKeys","some","k","setFilter","sKey","statKey","StatFilterItem","close","undefined","isFloat","KeyMap","s","flexBasis","placeholder","faTrashAlt","DisabledButton","secondary","TextButton","createContext","then","imp","default","tr","strKey","allData","as","mergeData","values","getSlotName","slotKey","getSlotDesc","setEffectDesc","setNum","setEffectDocument","setEffects","document","hasEnough","this","slots","slotIcons","rarity","allSlotKeys","icons","set","a","sheets","grouped","forEach","Math","artifactSetEffect","setNums","sn","conditionalHeader","img","m","action","initGlobalSettings","tcMode","allSubstatFilter","Set","allSubstats","ArtifactCard","artifactId","artifactObj","onEdit","onDelete","mainStatAssumptionLevel","effFilter","probabilityFilter","databaseArtifact","artifactID","_getArt","artifact","setArtifact","followArt","useArtifact","editable","art","id","lock","level","mainStatKey","substats","exclude","mainStatLevel","mainStatUnit","levelVariant","floor","mainStatVal","cacheValueString","Artifact","currentEfficiency","maxEfficiency","artifactValid","slotName","slotDesc","slotDescTooltip","placement","Typography","faInfoCircle","setDescTooltip","setNumKey","SqBadge","Skeleton","minHeight","CardLight","flexDirection","CardContent","pt","pb","pr","Box","Chip","label","IconButton","updateArt","Lock","LockOpen","Grid","flexWrap","StatIcon","colored","mt","mb","alignSelf","CardMedia","image","stat","SubstatDisplay","my","PercentBadge","valid","probability","toFixed","CardActions","flexShrink","charKey","setArtLocation","mr","ButtonGroup","faEdit","Tooltip","faBan","faChartLine","numRolls","rolls","maxRoll","rollData","rollOffset","rollColor","efficiency","effOpacity","clamp01","statName","inFilter","has","gap","alignContent","v","SmolProgress","indexOf","opacity","minWidth","borderRadius","ArtifactRarityDropdown","DropdownButton","MenuItem","ArtifactSlotDropdown","artifactSlotIcon","ListItemIcon","Replay","ListItemText","Divider","CustomNumberTextField","state","setState","sendChange","toString","TextField","SubstatEfficiencyDisplayCard","eff","Trans","FontAwesomeIcon","cursor","SubstatInput","index","setSubstat","accurateValue","reduce","b","unit","rollNum","error","allowedRolls","numUpgrades","high","whiteSpace","newValue","artifactSubstatRollCorrection","p","count","ml","UploadExplainationModal","modalShow","hide","ModalWrapper","CardDark","CloseButton","Alert","severity","md","alt","Snippet","gutterBottom","href","rel","scan_art_main","BorrowManager","init","deinit","callback","refCount","box","result","starColor","r","g","schedulers","language","scheduler","createScheduler","promises","fill","_","worker","createWorker","errorHandler","console","load","loadLanguage","initialize","addWorker","Promise","any","_language","terminate","queueReducer","queue","message","processed","outstanding","files","file","slice","processEntry","entry","fileName","imageURL","fileToURL","ocr","ocrResult","findBestArtifact","rarities","parseSetKeys","artifactSetTexts","parseSlotKeys","whiteTexts","parseSubstats","substatTexts","parseMainStatKeys","parseMainStatValues","texts","resolve","reader","FileReader","onloadend","readAsDataURL","urlToImageData","urlFile","Image","onload","canvas","createElement","context","getContext","drawImage","getImageData","imageToImageData","imageDataToCanvas","imageData","putImageData","halfHeight","bottomOpts","rectangle","top","left","awaits","textsFromImage","bandPass","mode","region","parseRarities","all","options","borrow","addJob","rec","lines","line","textSetKeys","slotKeys","mainStatKeys","mainStatValues","relevantSetKey","bestScore","bestArtifacts","rarityRates","objectKeyMap","allArtifactRarities","score","includes","substat","mainStatScore","relevantMainStatValues","mainStatValue","rarityString","rarityIndividualScore","setKeys","rarityScore","minimumMainStatValue","findIndex","mainStatValScore","chosen","resultMainStatVal","every","other","add","unknownText","detectedText","inferredText","addText","available","recommended","ambiguousText","valueString","find","results","allArtifactSets","hammingDistance","replace","nameRaw","f","pixels","d","lastRowNum","rowsWithNumber","y","onStar","x","colorCloseEnough","color1","color2","threshold","intCloseEnough","abs","allMainStatKeys","toLowerCase","regex","match","exec","matches","RegExp","pixelData","Uint8ClampedArray","from","bot","bw","invert","halfInd","ImageData","artifactReducer","oldIndex","current","InputInvis","ArtifactEditor","artifactIdToEdit","cancelEdit","show","setShow","useForceUpdate","dirtyDatabase","setDirtyDatabase","followAnyArt","useReducer","editorArtifact","artifactDispatch","parseArtifact","setModalShow","dispatchQueue","firstProcessed","firstOutstanding","processingImageURL","processingResult","remaining","artifactProcessed","numProcessing","processingCurrent","uploadFiles","clearQueue","pasteFunc","clipboardData","window","addEventListener","removeEventListener","onUpload","old","oldType","findDuplicates","duplicated","upgraded","errors","validated","validateArtifact","cachedArtifact","deepClone","reset","update","newSheet","pick","prefer","isValid","preventClosing","preventDefault","CardHeader","lg","margin","ImgIcon","mainStatK","htmlFor","accept","multiple","PhotoCamera","ReactGA","justifyContent","CircularProgress","Add","createArt","confirm","process","Update","getStyles","personName","fontWeight","typography","fontWeightMedium","fontWeightRegular","ArtifactMainStatMultipleSelectChip","setMainStatKeys","useTheme","FormControl","fullWidth","InputLabel","Select","labelId","event","split","OutlinedInput","renderValue","primaryTypographyProps","style","ArtifactSetMultipleSelectChip","artSetKeys","setArtSetKeys","defIcon","pointerEvents","ArtifactSubStatMultipleSelectChip","subStatKeys","setSubStatKeys","ArtifactFilter","locationDisplay","excludedDisplay","filterOption","filterOptionDispatch","filterDispatch","numShowing","total","excluded","locationCharacterSheet","BusinessCenter","faUserShield","SolidToggleButtonGroup","newVal","ToggleButton","LocationDropdown","dropdownProps","ArtifactRedButtons","artifactIds","artifacts","numUnlock","numLock","numDelete","numUnequip","numExclude","numInclude","sm","faUserSlash","removeArt","faTrash","ProbabilityFilter","setProbabilityFilter","InfoDisplay","React","initialState","initialArtifactSortFilter","maxNumArtifactsToDisplay","ArtifactDisplay","locationState","useLocation","stateDispatch","sortType","showProbability","artifactSortKeys","artToEditId","setartToEditId","pageIdex","setpageIdex","invScrollRef","useRef","dbDirty","forceUpdate","effFilterSet","deleteArtifact","editArtifact","cancelEditArtifact","noArtifact","_getArts","sortConfigs","artifactSortConfigs","filterConfigs","artifactFilterConfigs","allArtifacts","filterFunc","filterFunction","sortFunc","sortFunction","totalArtNum","numPages","ceil","currentPageIndex","artifactsToShow","artifactIdsToShow","totalShowing","setPage","scrollIntoView","behavior","returnObjects","Link","RouterLink","to","ref","EfficiencyFilter","selectedKeys","n","Pagination","page","ShowingArt","xl","artifactSortKeysTC","faPlus","artId","keys1","keys2","selKeys1","selKeys2","arr","badgeColor","_getState","followState","updateState","sortby","configs","Sort","config","aV","getValue","bV","localeCompare","diff","tieBreaker","filterOptions","obj","optionKey","optionVal"],"sourceRoot":""}