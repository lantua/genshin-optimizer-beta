"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[831],{20005:function(e,t,n){function r(e){var t=e.condition,n=e.wrapper,r=e.falseWrapper,a=e.children;return t?n(a):r?r(a):a}n.d(t,{Z:function(){return r}})},2693:function(e,t,n){n.d(t,{R:function(){return r}});var r=(0,n(72791).createContext)({})},31148:function(e,t,n){n.d(t,{y:function(){return g},u:function(){return y}});var r=n(29439),a=n(93433),i=n(15671),s=n(43144),c=n(55942),o=n(66624),u=n(87234),l=n(24351),f=n(26138),h=n(25617),d=n(80184),p=n.e(90).then(n.bind(n,10090)).then((function(e){return e.default})),x=function(e,t){return(0,d.jsx)(o.v,{ns:"artifact_".concat(e,"_gen"),key18:t})},v=p.then((function(e){return(0,u.b3)(Object.values(e).map((function(e){return e.data})))})),g=function(){function e(t,n,r){var a=this;(0,i.Z)(this,e),this.sheet=void 0,this.key=void 0,this.data=void 0,this.getSlotName=function(e){return x(a.key,"pieces.".concat(e,".name"))},this.getSlotDesc=function(e){return x(a.key,"pieces.".concat(e,".desc"))},this.setEffectDesc=function(e){return x(a.key,"setEffects.".concat(e))},this.setEffectDocument=function(e){var t;return null===(t=a.sheet.setEffects[e])||void 0===t?void 0:t.document},this.hasEnough=function(e,t){var n;return(null!==(n=t.get(f.qH.artSet[a.key]).value)&&void 0!==n?n:0)>=e},this.sheet=n,this.key=t,this.data=r}return(0,s.Z)(e,[{key:"name",get:function(){return x(this.key,"setName")}},{key:"defIconSrc",get:function(){var e=this.slots[0];if(this.slotIcons[e])return this.slotIcons[e]}},{key:"defIcon",get:function(){return(0,d.jsx)(c.Z,{src:this.defIconSrc,sx:{fontSize:"1.5em"}})}},{key:"nameWithIcon",get:function(){var e=this.slots[0];return(0,d.jsxs)("span",{children:[(0,d.jsx)(c.Z,{src:this.slotIcons[e]})," ",x(this.key,"setName")]})}},{key:"nameRaw",get:function(){return this.sheet.name}},{key:"rarity",get:function(){return this.sheet.rarity}},{key:"slots",get:function(){switch(this.key){case"PrayersForDestiny":case"PrayersForIllumination":case"PrayersForWisdom":case"PrayersToSpringtime":return["circlet"];default:return(0,a.Z)(l.eV)}}},{key:"slotIcons",get:function(){return this.sheet.icons}},{key:"setEffects",get:function(){return this.sheet.setEffects}}],[{key:"get",value:function(e){return e?p.then((function(t){return t[e]})):void 0}},{key:"getAll",get:function(){return p}},{key:"getAllData",get:function(){return v}},{key:"setKeysByRarities",value:function(e){var t={};return Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),i=n[0],s=n[1],c=Math.max.apply(Math,(0,a.Z)(s.rarity));t[c]?t[c].push(i):t[c]=[i]})),t}},{key:"setEffects",value:function(e,t){var n={};return Object.entries(e).forEach((function(e){var a=(0,r.Z)(e,2),i=a[0],s=a[1],c=Object.keys(s.setEffects).map((function(e){return parseInt(e)})).filter((function(e){return s.hasEnough(e,t)}));c.length&&(n[i]=c)})),n}}]),e}(),y=function(e,t){return{title:e("setName"),icon:(0,d.jsx)(c.Z,{size:2,sx:{m:-1},src:t}),action:(0,d.jsx)(h.Z,{color:"success",children:"4-set"})}}},66218:function(e,t,n){n.d(t,{ZP:function(){return h},uh:function(){return d},p$:function(){return p}});var r=n(29439),a=n(15671),i=n(43144),s=n(66624),c=n(2139),o=n(55942),u=n(26138),l=n(80184),f=n.e(447).then(n.bind(n,11447)).then((function(e){return e.default})),h=function(){function e(t,n,r,i){var c=this;(0,a.Z)(this,e),this.key=void 0,this.sheet=void 0,this.data=void 0,this.rarity=void 0,this.weaponType=void 0,this.tr=function(e){return(0,l.jsx)(s.v,{ns:"weapon_".concat(c.key,"_gen"),key18:e})},this.passiveDescription=function(e){return c.rarity>2?c.tr("passiveDescription.".concat(e)):""},this.rarity=r.rarity,this.weaponType=r.weaponType,this.key=t,this.sheet=n,this.data=i}return(0,i.Z)(e,[{key:"name",get:function(){return this.tr("name")}},{key:"passiveName",get:function(){return this.rarity>2?this.tr("passiveName"):""}},{key:"description",get:function(){return this.tr("description")}},{key:"img",get:function(){return this.sheet.icon}},{key:"imgAwaken",get:function(){return this.sheet.iconAwaken}},{key:"document",get:function(){return this.sheet.document}}],[{key:"getAll",get:function(){return f}}]),e}();h.get=function(e){return e?f.then((function(t){return t[e]})):void 0},h.getWeaponsOfType=function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=(0,r.Z)(e,2);n[0];return n[1].weaponType===t})))},h.getLevelString=function(e){return"".concat(e.level,"/").concat(c.SJ[e.ascension])};var d=function(e,t,n){return{title:e("passiveName"),icon:function(e){return(0,l.jsx)(o.Z,{size:2,sx:{m:-1},src:e.get(u.qH.weapon.asc).value<2?t:n})}}},p=function(e){return function(t){return e("passiveDescription.".concat(t.get(u.qH.weapon.refineIndex).value))}}},16134:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(29439),a=n(66647),i=n(47047),s=n(39504),c=n(68870),o=n(81918),u=n(20890),l=n(61889),f=n(72791),h=n(31148),d=n(3992),p=n(71310),x=n(20005),v=n(55942),g=n(25617),y=n(10157),Z=n(75545),m=n(2139),k=n(3997),j=n(2693),b=n(26138),w=n(87234),C=n(44297),S=n(50920),_=n(42320),P=n(47639),E=n(24351),D=n(66218),I=n(80184);function W(e){var t,n,r=e.characterKey,o=e.artifactChildren,u=e.weaponChildren,l=e.characterChildren,h=e.onClick,d=e.onClickHeader,v=e.footer,g=(0,f.useContext)(j.R).teamData,y=null!==(t=(0,P.Z)(g?"":r))&&void 0!==t?t:g,Z=null!==(n=null===y||void 0===y?void 0:y[r])&&void 0!==n?n:{},m=Z.character,k=Z.characterSheet,b=Z.target,w=(0,f.useCallback)((function(){return r&&(null===h||void 0===h?void 0:h(r))}),[r,h]),C=(0,f.useCallback)((function(e){return(0,I.jsx)(a.Z,{onClick:w,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[w]),_=(0,S.Z)(r);if(!y||!m||!k||!b)return null;var E={character:m,data:b,characterSheet:k,mainStatAssumptionLevel:0,teamData:y,characterDispatch:_};return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(i.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:(0,I.jsx)(j.R.Provider,{value:E,children:(0,I.jsxs)(p.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,I.jsxs)(x.Z,{condition:!!h,wrapper:C,children:[(0,I.jsx)(A,{onClick:h?void 0:d}),(0,I.jsxs)(s.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1},children:[(0,I.jsx)(O,{weaponId:m.equippedWeapon}),u,(0,I.jsxs)(c.Z,{flexGrow:1,display:"flex",flexDirection:"column",gap:1,children:[(0,I.jsx)(K,{}),o]}),(0,I.jsx)(z,{}),l]})]}),v]})})})}function A(e){var t=e.onClick,n=(0,f.useContext)(j.R),r=n.data,i=n.characterSheet,s=r.get(b.ri.charKey).value,h=r.get(b.ri.charEle).value,d=r.get(b.ri.lvl).value,p=r.get(b.ri.constellation).value,v=r.get(b.ri.asc).value,Z=r.get(b.ri.bonus.auto).value,k=r.get(b.ri.bonus.skill).value,w=r.get(b.ri.bonus.burst).value,C=r.get(b.ri.total.auto).value,S=r.get(b.ri.total.skill).value,_=r.get(b.ri.total.burst).value,P=(0,f.useCallback)((function(e){return(0,I.jsx)(a.Z,{onClick:function(){return s&&(null===t||void 0===t?void 0:t(s))},sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[t,s]);return(0,I.jsx)(x.Z,{condition:!!t,wrapper:P,children:(0,I.jsxs)(c.Z,{display:"flex",position:"relative",className:"grad-".concat(i.rarity,"star"),sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:"url(".concat(i.bannerImg,")"),backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[(0,I.jsx)(c.Z,{flexShrink:1,sx:{maxWidth:{xs:"40%",lg:"40%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:(0,I.jsx)(c.Z,{component:"img",src:i.thumbImg,width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),(0,I.jsxs)(c.Z,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,children:[(0,I.jsx)(o.Z,{label:(0,I.jsx)(u.Z,{variant:"subtitle1",children:i.name}),size:"small",color:h}),(0,I.jsxs)(l.ZP,{container:!0,spacing:1,flexWrap:"nowrap",children:[(0,I.jsxs)(l.ZP,{item:!0,sx:{textShadow:"0 0 5px gray"},children:[(0,I.jsxs)(u.Z,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",d]}),(0,I.jsxs)(u.Z,{component:"span",variant:"h6",color:"text.secondary",children:["/",m.SJ[v]]})]}),(0,I.jsx)(l.ZP,{item:!0,children:(0,I.jsx)(u.Z,{variant:"h6",children:(0,I.jsxs)(g.Z,{children:["C",p]})})})]}),(0,I.jsxs)(l.ZP,{container:!0,spacing:1,flexWrap:"nowrap",children:[(0,I.jsx)(l.ZP,{item:!0,children:(0,I.jsx)(o.Z,{color:Z?"info":"secondary",label:(0,I.jsx)("strong",{children:C})})}),(0,I.jsx)(l.ZP,{item:!0,children:(0,I.jsx)(o.Z,{color:k?"info":"secondary",label:(0,I.jsx)("strong",{children:S})})}),(0,I.jsx)(l.ZP,{item:!0,children:(0,I.jsx)(o.Z,{color:w?"info":"secondary",label:(0,I.jsx)("strong",{children:_})})})]}),(0,I.jsx)(u.Z,{mt:1,children:(0,I.jsx)(y.t,{stars:i.rarity,colored:!0})})]})]})})}function O(e){var t=e.weaponId,n=(0,f.useContext)(k.t4)._getWeapon(t),r=(0,_.Z)((null===n||void 0===n?void 0:n.key)&&D.ZP.get(n.key),[null===n||void 0===n?void 0:n.key]),a=(0,f.useMemo)((function(){return r&&n&&(0,w.mP)([r.data,(0,w.v0)(n)])}),[r,n]);if(!n||!r||!a)return null;var i=null===r||void 0===r?void 0:r.name,s=(0,C.EC)(a.get(b.ri.weapon.main).value,a.get(b.ri.weapon.main).unit,0),o=a.get(b.ri.weapon.sub).key,l=(0,C.EC)(a.get(b.ri.weapon.sub).value,a.get(b.ri.weapon.sub).unit,"flat"===a.get(b.ri.weapon.sub).unit?0:void 0),h=D.ZP.getLevelString(n);return(0,I.jsx)(d.Z,{children:(0,I.jsxs)(c.Z,{display:"flex",children:[(0,I.jsx)(c.Z,{flexShrink:1,maxWidth:"35%",display:"flex",flexDirection:"column",alignContent:"flex-end",className:"grad-".concat(r.rarity,"star"),children:(0,I.jsx)(c.Z,{component:"img",src:r.img,width:"100%",height:"auto",sx:{mt:"auto"}})}),(0,I.jsxs)(c.Z,{flexGrow:1,sx:{p:1},children:[(0,I.jsx)(u.Z,{variant:"body2",children:(0,I.jsx)("strong",{children:i})}),(0,I.jsxs)(u.Z,{whiteSpace:"nowrap",lineHeight:1,children:[(0,I.jsxs)(g.Z,{color:"primary",sx:{mr:1},children:["Lv. ",h]}),o&&(0,I.jsxs)(g.Z,{color:"info",children:[" Refinement ",n.refinement]})]}),(0,I.jsxs)(u.Z,{variant:"subtitle1",children:["ATK: ",s]}),o&&(0,I.jsxs)(u.Z,{variant:"subtitle2",lineHeight:1,children:[C.ZP.get(o),": ",l]})]})]})})}function K(){var e=(0,f.useContext)(k.t4),t=(0,f.useContext)(j.R).data,n=(0,_.Z)(h.y.getAll,[]),a=(0,f.useMemo)((function(){return E.eV.map((function(n){var r;return[n,e._getArt(null!==(r=t.get(b.ri.art[n].id).value)&&void 0!==r?r:"")]}))}),[t,e]);return n?(0,I.jsx)(l.ZP,{container:!0,spacing:1,children:a.map((function(e){var t=(0,r.Z)(e,2),a=t[0],i=t[1];if(!i)return null;var s=i.setKey,c=i.slotKey,u=i.mainStatKey;return(0,I.jsx)(l.ZP,{item:!0,flexGrow:1,children:(0,I.jsx)(o.Z,{color:"secondary",sx:{width:"100%"},icon:(0,I.jsx)(v.Z,{src:null===n||void 0===n?void 0:n[s].slotIcons[c],size:2.5}),label:(0,I.jsx)("span",{children:C.ZP.get(u)})})},a)}))}):null}function z(){var e=(0,f.useContext)(j.R).data,t=["hp","atk","def","eleMas","critRate_","critDMG_","enerRech_"];return t.push("".concat(e.get(b.ri.charEle).value,"_dmg_")),"catalyst"!==e.get(b.ri.weaponType).value&&t.push("physical_dmg_"),(0,I.jsxs)(c.Z,{sx:{width:"100%"},children:[t.map((function(t){var n=e.get(b.ri.total[t]),r=(0,C.EC)(n.value,n.unit,"flat"===n.unit?0:void 0);return(0,I.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,I.jsx)(u.Z,{flexGrow:1,color:"".concat(n.variant,".main"),children:(0,I.jsxs)("strong",{children:[Z.Z[t]," ",C.ZP.get(n.key)]})}),(0,I.jsx)(u.Z,{children:r})]},t)})),e.get(b.ri.special).key&&(0,I.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,I.jsx)(u.Z,{flexGrow:1,children:(0,I.jsx)("strong",{children:"Specialized:"})}),(0,I.jsx)(u.Z,{children:C.ZP.get(e.get(b.ri.special).key)})]})]})}},53561:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(15861),a=n(87757),i=n.n(a),s=n(72791),c=n(79271),o=n(947),u=n(39738),l=n(24351),f=n(60393);var h=n(3997),d=n(11400);function p(){var e=(0,s.useContext)(h.t4),t=(0,c.k6)(),n=(0,s.useCallback)(function(){var n=(0,r.Z)(i().mark((function n(r){var a,s,c,h;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e._getChar(r)){n.next=12;break}return a={key:r,level:1,ascension:0,hitMode:"avgHit",reactionMode:"",equippedArtifacts:(0,f.O)(l.eV,(function(){return""})),equippedWeapon:"",conditional:{},bonusStats:{},enemyOverride:{},buildSettings:(0,u.$)(),talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0,team:["","",""],compareData:!1},e.updateChar(a),n.next=6,o.ZP.get(r);case 6:if(s=n.sent){n.next=9;break}return n.abrupt("return");case 9:c=(0,d.Q)(s.weaponTypeKey),h=e.createWeapon(c),e.setWeaponLocation(h,r);case 12:t.push("/character/".concat(r));case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e]);return n}},50920:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(93433),a=n(4942),i=n(1413),s=n(72791),c=n(3997),o=n(60393);function u(e){var t=(0,s.useContext)(c.t4);return(0,s.useCallback)((function(n){if(e)if("type"in n)switch(n.type){case"weapon":t.setWeaponLocation(n.id,e);break;case"enemyOverride":var s=t._getChar(e),c=s.enemyOverride,u=n.statKey,l=n.value;if(c[u]===l)break;t.updateChar((0,i.Z)((0,i.Z)({},s),{},{enemyOverride:(0,i.Z)((0,i.Z)({},c),{},(0,a.Z)({},u,l))}));break;case"editStats":var f=t._getChar(e),h=n.statKey,d=n.value,p=(0,o.I8)(f.bonusStats);if(p[h]===d)break;d?p[h]=d:delete p[h],t.updateChar((0,i.Z)((0,i.Z)({},f),{},{bonusStats:p}));break;case"resetStats":var x=t._getChar(e),v=n.statKey,g=x.bonusStats;delete g[v],t.updateChar((0,i.Z)((0,i.Z)({},x),{},{bonusStats:g}));break;case"team":var y=t._getChar(e),Z=y.team,m=n.index,k=n.charKey,j=Z[m];if(Z[m]=k,j){var b=t._getChar(j);b&&t.updateChar((0,i.Z)((0,i.Z)({},b),{},{team:["","",""]}))}if(k){var w=t._getChar(k);w&&w.team.forEach((function(e){if(e){var n=t._getChar(e);n&&t.updateChar((0,i.Z)((0,i.Z)({},n),{},{team:n.team.map((function(e){return e===k?"":e}))}))}}))}Z.forEach((function(n,a){if(n){var s=t._getChar(n);s&&t.updateChar((0,i.Z)((0,i.Z)({},s),{},{team:[e].concat((0,r.Z)(Z)).filter((function(e,t){return t!==a+1}))}))}})),t.updateChar((0,i.Z)((0,i.Z)({},y),{},{team:Z}))}else t.updateChar((0,i.Z)((0,i.Z)({},t._getChar(e)),n))}),[e,t])}},47639:function(e,t,n){n.d(t,{Z:function(){return k},V:function(){return j}});var r=n(93433),a=n(4942),i=n(15861),s=n(1413),c=n(45987),o=n(29439),u=n(87757),l=n.n(u),f=n(72791),h=n(31148),d=n(947),p=n(3997),x=n(26138),v=n(87234),g=n(60393),y=n(66218),Z=n(68544),m=["data"];function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,f.useContext)(p.t4),r=(0,Z.Z)(),a=(0,o.Z)(r,2),i=a[0],u=a[1],l=(0,f.useState)(void 0),h=(0,o.Z)(l,2),d=h[0],x=h[1];(0,f.useEffect)((function(){j(n,e,t).then((function(e){return x(e)}))}),[i,e,n,t]);var y=null!==d&&void 0!==d?d:{},k=y.team,b=void 0===k?[]:k,w=y.teamData,C=y.teamBundle,S=(0,o.Z)(b,4),_=S[0],P=S[1],E=S[2],D=S[3];if((0,f.useEffect)((function(){return _?n.followChar(_,u):void 0}),[_,u,n]),(0,f.useEffect)((function(){return P?n.followChar(P,u):void 0}),[P,u,n]),(0,f.useEffect)((function(){return E?n.followChar(E,u):void 0}),[E,u,n]),(0,f.useEffect)((function(){return D?n.followChar(D,u):void 0}),[D,u,n]),w&&C){var I=(0,v.Qo)(w,e),W=(0,g.xh)(I,(function(e,t){var n=C[t],r=(n.data,(0,c.Z)(n,m));return(0,s.Z)((0,s.Z)({},e),r)}));return W}}function j(e,t){return b.apply(this,arguments)}function b(){return b=(0,i.Z)(l().mark((function e(t,n){var r,s,c,o,u,f,h=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>2&&void 0!==h[2]?h[2]:0,s=h.length>3?h[3]:void 0,n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,w(t,n,r,s);case 6:if(c=e.sent){e.next=9;break}return e.abrupt("return");case 9:return o=[n],u=(0,a.Z)({},n,c),f=(0,a.Z)({},n,c.data),e.next=14,Promise.all(c.character.team.map(function(){var e=(0,i.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w(t,n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:o.push(n),u[n]=r,f[n]=r.data;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",{team:o,teamData:f,teamBundle:u});case 15:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function w(e,t){return C.apply(this,arguments)}function C(){return C=(0,i.Z)(l().mark((function e(t,n){var a,i,s,c,o,u,f,p,g,Z=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Z.length>2&&void 0!==Z[2]?Z[2]:0,i=Z.length>3?Z[3]:void 0,n){e.next=4;break}return e.abrupt("return");case 4:if(s=t._getChar(n)){e.next=7;break}return e.abrupt("return");case 7:if(c=t._getWeapon(s.equippedWeapon)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,d.ZP.get(n);case 12:return o=e.sent,e.next=15,y.ZP.get(c.key);case 15:return u=e.sent,e.next=18,h.y.getAllData;case 18:if(f=e.sent,o&&u&&f){e.next=21;break}return e.abrupt("return");case 21:return p=(null!==i&&void 0!==i?i:Object.values(s.equippedArtifacts).map((function(e){return t._getArt(e)}))).filter((function(e){return e})),g=[].concat((0,r.Z)(p.map((function(e){return(0,v.n3)(e,a)}))),[(0,v.vn)(s),o.data,(0,v.v0)(c),u.data,f,x.y0]),e.abrupt("return",{character:s,weapon:c,characterSheet:o,weaponSheet:u,data:g});case 24:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}}}]);
//# sourceMappingURL=831.e7279e76.chunk.js.map