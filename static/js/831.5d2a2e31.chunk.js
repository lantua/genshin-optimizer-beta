"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[831],{20005:function(e,t,n){function r(e){var t=e.condition,n=e.wrapper,r=e.falseWrapper,a=e.children;return t?n(a):r?r(a):a}n.d(t,{Z:function(){return r}})},2693:function(e,t,n){n.d(t,{R:function(){return r}});var r=(0,n(72791).createContext)({})},31148:function(e,t,n){n.d(t,{y:function(){return g},u:function(){return m}});var r=n(29439),a=n(93433),i=n(15671),s=n(43144),o=n(55942),c=n(66624),u=n(87234),l=n(24351),f=n(26138),h=n(25617),d=n(80184),p=n.e(90).then(n.bind(n,10090)).then((function(e){return e.default})),x=function(e,t){return(0,d.jsx)(c.v,{ns:"artifact_".concat(e,"_gen"),key18:t})},v=p.then((function(e){return(0,u.b3)(Object.values(e).map((function(e){return e.data})))})),g=function(){function e(t,n,r){var a=this;(0,i.Z)(this,e),this.sheet=void 0,this.key=void 0,this.data=void 0,this.getSlotName=function(e){return x(a.key,"pieces.".concat(e,".name"))},this.getSlotDesc=function(e){return x(a.key,"pieces.".concat(e,".desc"))},this.setEffectDesc=function(e){return x(a.key,"setEffects.".concat(e))},this.setEffectDocument=function(e){var t;return null===(t=a.sheet.setEffects[e])||void 0===t?void 0:t.document},this.hasEnough=function(e,t){var n;return(null!==(n=t.get(f.qH.artSet[a.key]).value)&&void 0!==n?n:0)>=e},this.sheet=n,this.key=t,this.data=r}return(0,s.Z)(e,[{key:"name",get:function(){return x(this.key,"setName")}},{key:"defIconSrc",get:function(){var e=this.slots[0];if(this.slotIcons[e])return this.slotIcons[e]}},{key:"defIcon",get:function(){return(0,d.jsx)(o.Z,{src:this.defIconSrc,sx:{fontSize:"1.5em"}})}},{key:"nameWithIcon",get:function(){var e=this.slots[0];return(0,d.jsxs)("span",{children:[(0,d.jsx)(o.Z,{src:this.slotIcons[e]})," ",x(this.key,"setName")]})}},{key:"nameRaw",get:function(){return this.sheet.name}},{key:"rarity",get:function(){return this.sheet.rarity}},{key:"slots",get:function(){switch(this.key){case"PrayersForDestiny":case"PrayersForIllumination":case"PrayersForWisdom":case"PrayersToSpringtime":return["circlet"];default:return(0,a.Z)(l.eV)}}},{key:"slotIcons",get:function(){return this.sheet.icons}},{key:"setEffects",get:function(){return this.sheet.setEffects}}],[{key:"get",value:function(e){return e?p.then((function(t){return t[e]})):void 0}},{key:"getAll",get:function(){return p}},{key:"getAllData",get:function(){return v}},{key:"setKeysByRarities",value:function(e){var t={};return Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),i=n[0],s=n[1],o=Math.max.apply(Math,(0,a.Z)(s.rarity));t[o]?t[o].push(i):t[o]=[i]})),t}},{key:"setEffects",value:function(e,t){var n={};return Object.entries(e).forEach((function(e){var a=(0,r.Z)(e,2),i=a[0],s=a[1],o=Object.keys(s.setEffects).map((function(e){return parseInt(e)})).filter((function(e){return s.hasEnough(e,t)}));o.length&&(n[i]=o)})),n}}]),e}(),m=function(e,t){return{title:e("setName"),icon:(0,d.jsx)(o.Z,{size:2,sx:{m:-1},src:t}),action:(0,d.jsx)(h.Z,{color:"success",children:"4-set"})}}},66218:function(e,t,n){n.d(t,{ZP:function(){return d},uh:function(){return p},p$:function(){return x}});var r=n(29439),a=n(15671),i=n(43144),s=n(66624),o=n(2139),c=n(55942),u=n(26138),l=n(25617),f=n(80184),h=n.e(891).then(n.bind(n,96891)).then((function(e){return e.default})),d=function(){function e(t,n,r,i){var o=this;(0,a.Z)(this,e),this.key=void 0,this.sheet=void 0,this.data=void 0,this.rarity=void 0,this.weaponType=void 0,this.tr=function(e){return(0,f.jsx)(s.v,{ns:"weapon_".concat(o.key,"_gen"),key18:e})},this.passiveDescription=function(e){return o.hasRefinement?o.tr("passiveDescription.".concat(e)):""},this.rarity=r.rarity,this.weaponType=r.weaponType,this.key=t,this.sheet=n,this.data=i}return(0,i.Z)(e,[{key:"name",get:function(){return this.tr("name")}},{key:"hasRefinement",get:function(){return this.rarity>2}},{key:"passiveName",get:function(){return this.hasRefinement?this.tr("passiveName"):""}},{key:"description",get:function(){return this.tr("description")}},{key:"img",get:function(){return this.sheet.icon}},{key:"imgAwaken",get:function(){return this.sheet.iconAwaken}},{key:"document",get:function(){return this.sheet.document}},{key:"milestoneLevels",get:function(){return this.hasRefinement?o.D4:o.Xu}},{key:"ambiguousLevel",value:function(e){return this.hasRefinement?(0,o.ek)(e):(0,o.nB)(e)}}],[{key:"getAll",get:function(){return h}}]),e}();d.get=function(e){return e?h.then((function(t){return t[e]})):void 0},d.getWeaponsOfType=function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=(0,r.Z)(e,2);n[0];return n[1].weaponType===t})))},d.getLevelString=function(e){return"".concat(e.level,"/").concat(o.SJ[e.ascension])};var p=function(e,t,n,r){return{title:e("passiveName"),icon:function(e){return(0,f.jsx)(c.Z,{size:2,sx:{m:-1},src:e.get(u.qH.weapon.asc).value<2?t:n})},action:r&&(0,f.jsx)(l.Z,{color:"success",children:r})}},x=function(e){return function(t){return e("passiveDescription.".concat(t.get(u.qH.weapon.refineIndex).value))}}},16134:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(29439),a=n(66647),i=n(47047),s=n(39504),o=n(68870),c=n(81918),u=n(20890),l=n(61889),f=n(72791),h=n(31148),d=n(3992),p=n(71310),x=n(20005),v=n(55942),g=n(25617),m=n(10157),y=n(75545),Z=n(2139),k=n(3997),b=n(2693),j=n(26138),w=n(87234),C=n(44297),S=n(50920),_=n(42320),P=n(47639),E=n(24351),D=n(66218),I=n(80184);function W(e){var t,n,r=e.characterKey,c=e.artifactChildren,u=e.weaponChildren,l=e.characterChildren,h=e.onClick,d=e.onClickHeader,v=e.footer,g=(0,f.useContext)(b.R).teamData,m=null!==(t=(0,P.Z)(g?"":r))&&void 0!==t?t:g,y=null!==(n=null===m||void 0===m?void 0:m[r])&&void 0!==n?n:{},Z=y.character,k=y.characterSheet,j=y.target,w=(0,f.useCallback)((function(){return r&&(null===h||void 0===h?void 0:h(r))}),[r,h]),C=(0,f.useCallback)((function(e){return(0,I.jsx)(a.Z,{onClick:w,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[w]),_=(0,S.Z)(r);if(!m||!Z||!k||!j)return null;var E={character:Z,data:j,characterSheet:k,mainStatAssumptionLevel:0,teamData:m,characterDispatch:_};return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(i.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:(0,I.jsx)(b.R.Provider,{value:E,children:(0,I.jsxs)(p.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,I.jsxs)(x.Z,{condition:!!h,wrapper:C,children:[(0,I.jsx)(R,{onClick:h?void 0:d}),(0,I.jsxs)(s.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1},children:[(0,I.jsx)(A,{weaponId:Z.equippedWeapon}),u,(0,I.jsxs)(o.Z,{flexGrow:1,display:"flex",flexDirection:"column",gap:1,children:[(0,I.jsx)(O,{}),c]}),(0,I.jsx)(K,{}),l]})]}),v]})})})}function R(e){var t=e.onClick,n=(0,f.useContext)(b.R),r=n.data,i=n.characterSheet,s=r.get(j.ri.charKey).value,h=r.get(j.ri.charEle).value,d=r.get(j.ri.lvl).value,p=r.get(j.ri.constellation).value,v=r.get(j.ri.asc).value,y=r.get(j.ri.bonus.auto).value,k=r.get(j.ri.bonus.skill).value,w=r.get(j.ri.bonus.burst).value,C=r.get(j.ri.total.auto).value,S=r.get(j.ri.total.skill).value,_=r.get(j.ri.total.burst).value,P=(0,f.useCallback)((function(e){return(0,I.jsx)(a.Z,{onClick:function(){return s&&(null===t||void 0===t?void 0:t(s))},sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[t,s]);return(0,I.jsx)(x.Z,{condition:!!t,wrapper:P,children:(0,I.jsxs)(o.Z,{display:"flex",position:"relative",className:"grad-".concat(i.rarity,"star"),sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:"url(".concat(i.bannerImg,")"),backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[(0,I.jsx)(o.Z,{flexShrink:1,sx:{maxWidth:{xs:"40%",lg:"40%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:(0,I.jsx)(o.Z,{component:"img",src:i.thumbImg,width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),(0,I.jsxs)(o.Z,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,children:[(0,I.jsx)(c.Z,{label:(0,I.jsx)(u.Z,{variant:"subtitle1",children:i.name}),size:"small",color:h}),(0,I.jsxs)(l.ZP,{container:!0,spacing:1,flexWrap:"nowrap",children:[(0,I.jsxs)(l.ZP,{item:!0,sx:{textShadow:"0 0 5px gray"},children:[(0,I.jsxs)(u.Z,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",d]}),(0,I.jsxs)(u.Z,{component:"span",variant:"h6",color:"text.secondary",children:["/",Z.SJ[v]]})]}),(0,I.jsx)(l.ZP,{item:!0,children:(0,I.jsx)(u.Z,{variant:"h6",children:(0,I.jsxs)(g.Z,{children:["C",p]})})})]}),(0,I.jsxs)(l.ZP,{container:!0,spacing:1,flexWrap:"nowrap",children:[(0,I.jsx)(l.ZP,{item:!0,children:(0,I.jsx)(c.Z,{color:y?"info":"secondary",label:(0,I.jsx)("strong",{children:C})})}),(0,I.jsx)(l.ZP,{item:!0,children:(0,I.jsx)(c.Z,{color:k?"info":"secondary",label:(0,I.jsx)("strong",{children:S})})}),(0,I.jsx)(l.ZP,{item:!0,children:(0,I.jsx)(c.Z,{color:w?"info":"secondary",label:(0,I.jsx)("strong",{children:_})})})]}),(0,I.jsx)(u.Z,{mt:1,children:(0,I.jsx)(m.t,{stars:i.rarity,colored:!0})})]})]})})}function A(e){var t=e.weaponId,n=(0,f.useContext)(k.t).database._getWeapon(t),r=(0,_.Z)((null===n||void 0===n?void 0:n.key)&&D.ZP.get(n.key),[null===n||void 0===n?void 0:n.key]),a=(0,f.useMemo)((function(){return r&&n&&(0,w.mP)([r.data,(0,w.v0)(n)])}),[r,n]);if(!n||!r||!a)return null;var i=null===r||void 0===r?void 0:r.name,s=(0,C.EC)(a.get(j.ri.weapon.main).value,a.get(j.ri.weapon.main).unit,0),c=a.get(j.ri.weapon.sub).key,l=(0,C.EC)(a.get(j.ri.weapon.sub).value,a.get(j.ri.weapon.sub).unit,"flat"===a.get(j.ri.weapon.sub).unit?0:void 0),h=D.ZP.getLevelString(n);return(0,I.jsx)(d.Z,{children:(0,I.jsxs)(o.Z,{display:"flex",children:[(0,I.jsx)(o.Z,{flexShrink:1,maxWidth:"35%",display:"flex",flexDirection:"column",alignContent:"flex-end",className:"grad-".concat(r.rarity,"star"),children:(0,I.jsx)(o.Z,{component:"img",src:r.img,width:"100%",height:"auto",sx:{mt:"auto"}})}),(0,I.jsxs)(o.Z,{flexGrow:1,sx:{p:1},children:[(0,I.jsx)(u.Z,{variant:"body2",children:(0,I.jsx)("strong",{children:i})}),(0,I.jsxs)(u.Z,{whiteSpace:"nowrap",lineHeight:1,children:[(0,I.jsxs)(g.Z,{color:"primary",sx:{mr:1},children:["Lv. ",h]}),c&&(0,I.jsxs)(g.Z,{color:"info",children:[" Refinement ",n.refinement]})]}),(0,I.jsxs)(u.Z,{variant:"subtitle1",children:["ATK: ",s]}),c&&(0,I.jsxs)(u.Z,{variant:"subtitle2",lineHeight:1,children:[C.ZP.get(c),": ",l]})]})]})})}function O(){var e=(0,f.useContext)(k.t).database,t=(0,f.useContext)(b.R).data,n=(0,_.Z)(h.y.getAll,[]),a=(0,f.useMemo)((function(){return E.eV.map((function(n){var r;return[n,e._getArt(null!==(r=t.get(j.ri.art[n].id).value)&&void 0!==r?r:"")]}))}),[t,e]);return n?(0,I.jsx)(l.ZP,{container:!0,spacing:1,children:a.map((function(e){var t=(0,r.Z)(e,2),a=t[0],i=t[1];if(!i)return null;var s=i.setKey,o=i.slotKey,u=i.mainStatKey;return(0,I.jsx)(l.ZP,{item:!0,flexGrow:1,children:(0,I.jsx)(c.Z,{color:"secondary",sx:{width:"100%"},icon:(0,I.jsx)(v.Z,{src:null===n||void 0===n?void 0:n[s].slotIcons[o],size:2.5}),label:(0,I.jsx)("span",{children:C.ZP.get(u)})})},a)}))}):null}function K(){var e=(0,f.useContext)(b.R).data,t=["hp","atk","def","eleMas","critRate_","critDMG_","enerRech_"];return t.push("".concat(e.get(j.ri.charEle).value,"_dmg_")),"catalyst"!==e.get(j.ri.weaponType).value&&t.push("physical_dmg_"),(0,I.jsxs)(o.Z,{sx:{width:"100%"},children:[t.map((function(t){var n=e.get(j.ri.total[t]),r=(0,C.EC)(n.value,n.unit,"flat"===n.unit?0:void 0);return(0,I.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,I.jsx)(u.Z,{flexGrow:1,color:"".concat(n.variant,".main"),children:(0,I.jsxs)("strong",{children:[y.Z[t]," ",C.ZP.get(n.key)]})}),(0,I.jsx)(u.Z,{children:r})]},t)})),e.get(j.ri.special).key&&(0,I.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,I.jsx)(u.Z,{flexGrow:1,children:(0,I.jsx)("strong",{children:"Specialized:"})}),(0,I.jsx)(u.Z,{children:C.ZP.get(e.get(j.ri.special).key)})]})]})}},53561:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(15861),a=n(87757),i=n.n(a),s=n(72791),o=n(79271),c=n(947),u=n(39738),l=n(24351),f=n(60393);var h=n(3997),d=n(11400);function p(){var e=(0,s.useContext)(h.t).database,t=(0,o.k6)(),n=(0,s.useCallback)(function(){var n=(0,r.Z)(i().mark((function n(r){var a,s,o,h;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e._getChar(r)){n.next=12;break}return a={key:r,level:1,ascension:0,hitMode:"avgHit",reactionMode:"",equippedArtifacts:(0,f.O)(l.eV,(function(){return""})),equippedWeapon:"",conditional:{},bonusStats:{},enemyOverride:{},buildSettings:(0,u.$)(),talent:{auto:1,skill:1,burst:1},infusionAura:"",constellation:0,team:["","",""],compareData:!1},e.updateChar(a),n.next=6,c.ZP.get(r);case 6:if(s=n.sent){n.next=9;break}return n.abrupt("return");case 9:o=(0,d.Q)(s.weaponTypeKey),h=e.createWeapon(o),e.setWeaponLocation(h,r);case 12:t.push("/character/".concat(r));case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e]);return n}},50920:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(93433),a=n(4942),i=n(1413),s=n(72791),o=n(3997),c=n(60393);function u(e){var t=(0,s.useContext)(o.t).database;return(0,s.useCallback)((function(n){if(e)if("type"in n)switch(n.type){case"weapon":t.setWeaponLocation(n.id,e);break;case"enemyOverride":var s=t._getChar(e),o=s.enemyOverride,u=n.statKey,l=n.value;if(o[u]===l)break;t.updateChar((0,i.Z)((0,i.Z)({},s),{},{enemyOverride:(0,i.Z)((0,i.Z)({},o),{},(0,a.Z)({},u,l))}));break;case"editStats":var f=t._getChar(e),h=n.statKey,d=n.value,p=(0,c.I8)(f.bonusStats);if(p[h]===d)break;d?p[h]=d:delete p[h],t.updateChar((0,i.Z)((0,i.Z)({},f),{},{bonusStats:p}));break;case"resetStats":var x=t._getChar(e),v=n.statKey,g=x.bonusStats;delete g[v],t.updateChar((0,i.Z)((0,i.Z)({},x),{},{bonusStats:g}));break;case"team":var m=t._getChar(e),y=m.team,Z=n.index,k=n.charKey,b=y[Z];if(y[Z]=k,b){var j=t._getChar(b);j&&t.updateChar((0,i.Z)((0,i.Z)({},j),{},{team:["","",""]}))}if(k){var w=t._getChar(k);w&&w.team.forEach((function(e){if(e){var n=t._getChar(e);n&&t.updateChar((0,i.Z)((0,i.Z)({},n),{},{team:n.team.map((function(e){return e===k?"":e}))}))}}))}y.forEach((function(n,a){if(n){var s=t._getChar(n);s&&t.updateChar((0,i.Z)((0,i.Z)({},s),{},{team:[e].concat((0,r.Z)(y)).filter((function(e,t){return t!==a+1}))}))}})),t.updateChar((0,i.Z)((0,i.Z)({},m),{},{team:y}))}else t.updateChar((0,i.Z)((0,i.Z)({},t._getChar(e)),n))}),[e,t])}},47639:function(e,t,n){n.d(t,{Z:function(){return k},V:function(){return b}});var r=n(93433),a=n(4942),i=n(15861),s=n(1413),o=n(45987),c=n(29439),u=n(87757),l=n.n(u),f=n(72791),h=n(31148),d=n(947),p=n(3997),x=n(26138),v=n(87234),g=n(60393),m=n(66218),y=n(68544),Z=["data"];function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,f.useContext)(p.t),r=n.database,a=(0,y.Z)(),i=(0,c.Z)(a,2),u=i[0],l=i[1],h=(0,f.useState)(void 0),d=(0,c.Z)(h,2),x=d[0],m=d[1];(0,f.useEffect)((function(){b(r,e,t).then((function(e){return m(e)}))}),[u,e,r,t]);var k=null!==x&&void 0!==x?x:{},j=k.team,w=void 0===j?[]:j,C=k.teamData,S=k.teamBundle;(0,f.useEffect)((function(){return e?r.followChar(e,l):void 0}),[e,l,r]);var _=(0,c.Z)(w,4),P=_[0],E=_[1],D=_[2],I=_[3];(0,f.useEffect)((function(){return P?r.followChar(P,l):void 0}),[P,l,r]),(0,f.useEffect)((function(){return E?r.followChar(E,l):void 0}),[E,l,r]),(0,f.useEffect)((function(){return D?r.followChar(D,l):void 0}),[D,l,r]),(0,f.useEffect)((function(){return I?r.followChar(I,l):void 0}),[I,l,r]);var W=(0,f.useMemo)((function(){return C&&(0,v.Qo)(C,e)}),[C,e]),R=(0,f.useMemo)((function(){if(W&&S)return(0,g.xh)(W,(function(e,t){var n=S[t],r=(n.data,(0,o.Z)(n,Z));return(0,s.Z)((0,s.Z)({},e),r)}))}),[W,S]);return R}function b(e,t){return j.apply(this,arguments)}function j(){return j=(0,i.Z)(l().mark((function e(t,n){var r,s,o,c,u,f,h=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>2&&void 0!==h[2]?h[2]:0,s=h.length>3?h[3]:void 0,n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,w(t,n,r,s);case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return");case 9:return c=[n],u=(0,a.Z)({},n,o),f=(0,a.Z)({},n,o.data),e.next=14,Promise.all(o.character.team.map(function(){var e=(0,i.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w(t,n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:c.push(n),u[n]=r,f[n]=r.data;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",{team:c,teamData:f,teamBundle:u});case 15:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function w(e,t){return C.apply(this,arguments)}function C(){return C=(0,i.Z)(l().mark((function e(t,n){var a,i,s,o,c,u,f,p,g,y=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y.length>2&&void 0!==y[2]?y[2]:0,i=y.length>3?y[3]:void 0,n){e.next=4;break}return e.abrupt("return");case 4:if(s=t._getChar(n)){e.next=7;break}return e.abrupt("return");case 7:if(o=t._getWeapon(s.equippedWeapon)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,d.ZP.get(n);case 12:return c=e.sent,e.next=15,m.ZP.get(o.key);case 15:return u=e.sent,e.next=18,h.y.getAllData;case 18:if(f=e.sent,c&&u&&f){e.next=21;break}return e.abrupt("return");case 21:return p=(null!==i&&void 0!==i?i:Object.values(s.equippedArtifacts).map((function(e){return t._getArt(e)}))).filter((function(e){return e})),g=[].concat((0,r.Z)(p.map((function(e){return(0,v.n3)(e,a)}))),[(0,v.vn)(s),c.data,(0,v.v0)(o),u.data,f,x.y0]),e.abrupt("return",{character:s,weapon:o,characterSheet:c,weaponSheet:u,data:g});case 24:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}}}]);
//# sourceMappingURL=831.5d2a2e31.chunk.js.map