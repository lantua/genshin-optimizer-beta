"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[246],{40020:function(e,n,r){r.d(n,{Z:function(){return u}});var t,i=r(30168),l=r(63204),a=r(20890),o=r(22020),s=r(947),c=r(42320),f=r(80184);function u(e){var n=e.location,r=(0,o.$)("ui").t,u=(0,c.Z)(s.ZP.get(null!==n&&void 0!==n?n:""),[n]);return(0,f.jsx)(a.Z,{component:"span",children:null!==u&&void 0!==u&&u.name?u.nameWIthIcon:(0,f.jsxs)("span",{children:[(0,f.jsx)(l.Z,{sx:{verticalAlign:"text-bottom"}})," ",r(t||(t=(0,i.Z)(["inventory"])))]})})}},16246:function(e,n,r){r.d(n,{Z:function(){return V}});var t=r(30168),i=r(53174),l=r(54483),a=r(40117),o=r(62002),s=r(20890),c=r(47047),f=r(39504),u=r(68870),d=r(81918),x=r(13400),h=r(61889),v=r(42169),Z=r(72363),j=r(2199),m=r(24518),p=r(18455),y=r(72791),g=r(22020),b=r(96106),k=r(71310),w=r(36944),S=r(40020),G=r(91702),P=r(25617),E=r(10157),A=r(3997),M=r(29439);var N,_,C,z=r(42320),O=r(50765),I=r(60374),D=r(60393),K=r(19272),F=r(31148),R=r(95614),W=r(46797),L=r(44217),U=r(44297),q=r(80184),B=new Set(O.L);function V(e){var n,r,O,V,$=e.artifactId,H=e.artifactObj,Q=e.onEdit,T=e.onDelete,X=e.mainStatAssumptionLevel,J=void 0===X?0:X,Y=e.effFilter,ee=void 0===Y?B:Y,ne=e.probabilityFilter,re=(0,g.$)(["artifact"]).t,te=(0,y.useContext)(A.t4),ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,y.useContext)(A.t4),r=(0,y.useState)(n._getArt(e)),t=(0,M.Z)(r,2),i=t[0],l=t[1];return(0,y.useEffect)((function(){return l(n._getArt(e))}),[n,e]),(0,y.useEffect)((function(){return e?n.followArt(e,l):void 0}),[e,l,n]),i}($),le=(0,z.Z)(F.y.get(null===(n=null!==H&&void 0!==H?H:ie)||void 0===n?void 0:n.setKey),[H,ie]),ae=!H&&te===A.Fs,oe=null!==H&&void 0!==H?H:ie;if(!oe)return null;var se=oe.id,ce=oe.lock,fe=oe.slotKey,ue=oe.rarity,de=oe.level,xe=oe.mainStatKey,he=oe.substats,ve=oe.exclude,Ze=oe.location,je=void 0===Ze?"":Ze,me=Math.max(Math.min(J,4*ue),de),pe="roll"+(Math.floor(Math.max(de,0)/4)+1),ye=(0,q.jsx)(G.Z,{color:me!==de?"warning":void 0,children:(0,I.g)(null!==(r=K.Z.mainStatValue(xe,ue,me))&&void 0!==r?r:0,U.ZP.unit(xe))}),ge=K.Z.getArtifactEfficiency(oe,ee),be=ge.currentEfficiency,ke=ge.maxEfficiency,we=0!==ke,Se=(null===le||void 0===le?void 0:le.getSlotName(fe))||"Unknown Piece Name",Ge=null===le||void 0===le?void 0:le.getSlotDesc(fe),Pe=Ge&&(0,q.jsx)(b.Z,{placement:"top",title:(0,q.jsx)(s.Z,{children:Ge}),children:(0,q.jsx)("span",{children:(0,q.jsx)(l.G,{icon:i.sqG})})}),Ee=null===le||void 0===le?void 0:le.setEffects,Ae=le&&Ee&&(0,q.jsx)(b.Z,{placement:"top",title:(0,q.jsx)("span",{children:Object.keys(Ee).map((function(e){return(0,q.jsxs)("span",{children:[(0,q.jsx)(s.Z,{variant:"h6",children:(0,q.jsx)(P.Z,{color:"success",children:re("setEffectNum",{setNum:e})})}),(0,q.jsx)(s.Z,{children:le.setEffectDesc(e)})]},e)}))}),children:(0,q.jsx)("span",{children:(0,q.jsx)(l.G,{icon:i.sqG})})});return(0,q.jsx)(y.Suspense,{fallback:(0,q.jsx)(c.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:(0,q.jsxs)(k.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,q.jsxs)(f.Z,{className:"grad-".concat(ue,"star"),sx:{pt:1,pb:0,pr:0},children:[(0,q.jsxs)(u.Z,{component:"div",sx:{display:"flex",alignItems:"center",pr:1},children:[(0,q.jsx)(d.Z,{size:"small",label:(0,q.jsx)("strong",{children:" +".concat(de)}),color:pe}),(0,q.jsxs)(s.Z,{sx:{pl:1,flexGrow:1},children:[Se," ",Pe]}),(0,q.jsx)(x.Z,{color:"primary",disabled:!ae,onClick:function(){return te.updateArt({lock:!ce},se)},children:ce?(0,q.jsx)(a.Z,{}):(0,q.jsx)(o.Z,{})})]}),(0,q.jsxs)(h.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,q.jsxs)(h.ZP,{item:!0,flexGrow:1,children:[(0,q.jsx)(s.Z,{color:"text.secondary",variant:"body2",children:(0,q.jsx)(R.ZP,{slotKey:fe})}),(0,q.jsx)(s.Z,{variant:"h6",children:U.ZP.get(xe)}),(0,q.jsx)(s.Z,{variant:"h5",children:(0,q.jsx)("strong",{children:ye})}),(0,q.jsx)(E.t,{stars:ue,colored:!0})]}),(0,q.jsx)(h.ZP,{item:!0,maxWidth:"40%",sx:{mt:-3,mb:-1,pl:-2},alignSelf:"flex-end",children:(0,q.jsx)(v.Z,{component:"img",image:null!==(O=null===le||void 0===le?void 0:le.slotIcons[fe])&&void 0!==O?O:"",width:"100%",height:"auto"})})]})]}),(0,q.jsxs)(f.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0},children:[he.map((function(e,n){var r,t,i;if(!e.value)return null;var l=null!==(r=null===(t=e.rolls)||void 0===t?void 0:t.length)&&void 0!==r?r:0,a="roll".concat((0,D.uZ)(l,1,6)),o=null!==(i=e.efficiency)&&void 0!==i?i:0,c=.3+o/100*.7,f=U.ZP.get(e.key);return(0,q.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,q.jsxs)(u.Z,{sx:{flexGrow:1},children:[(0,q.jsx)(P.Z,{color:l?a:"error",sx:{mr:1},children:(0,q.jsx)("strong",{children:l||"?"})}),(0,q.jsxs)(s.Z,{color:l?"".concat(a,".main"):"error.main",component:"span",children:[f,"+".concat((0,I.g)(e.value,U.ZP.unit(e.key)))]})]}),(0,q.jsx)(s.Z,{sx:{opacity:c},children:e.key&&ee.has(e.key)?(0,I.g)(o,"eff"):"-"})]},n)})),(0,q.jsxs)(u.Z,{sx:{display:"flex",my:1},children:[(0,q.jsx)(s.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:re(N||(N=(0,t.Z)(["editor.curSubEff"])))}),(0,q.jsx)(W.Z,{value:be,valid:we})]}),be!==ke&&(0,q.jsxs)(u.Z,{sx:{display:"flex",mb:1},children:[(0,q.jsx)(s.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:re(_||(_=(0,t.Z)(["editor.maxSubEff"])))}),(0,q.jsx)(W.Z,{value:ke,valid:we})]}),(0,q.jsx)(u.Z,{flexGrow:1}),ne&&(0,q.jsxs)("strong",{children:["Probability: ",(100*(0,L.B)(oe,ne)).toFixed(2),"%"]}),(0,q.jsxs)(s.Z,{color:"success.main",children:[null!==(V=null===le||void 0===le?void 0:le.name)&&void 0!==V?V:"Artifact Set"," ",Ae]})]}),(0,q.jsx)(Z.Z,{children:(0,q.jsxs)(h.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,q.jsx)(h.ZP,{item:!0,xs:"auto",flexShrink:1,children:ae?(0,q.jsx)(w.Z,{size:"small",inventory:!0,value:je,onChange:function(e){return te.setArtLocation($,e)}}):(0,q.jsx)(S.Z,{location:je})}),(0,q.jsx)(h.ZP,{item:!0,flexGrow:1,sx:{mr:1}}),ae&&(0,q.jsx)(h.ZP,{item:!0,xs:"auto",children:(0,q.jsxs)(j.Z,{sx:{height:"100%"},children:[!!Q&&(0,q.jsx)(m.Z,{color:"info",onClick:function(){return Q(se)},size:"small",children:(0,q.jsx)(l.G,{icon:i.Xcf,className:"fa-fw"})}),(0,q.jsx)(p.Z,{title:(0,q.jsx)(s.Z,{children:re(C||(C=(0,t.Z)(["excludeArtifactTip"])))}),placement:"top",arrow:!0,children:(0,q.jsx)(m.Z,{onClick:function(){return te.updateArt({exclude:!ve},se)},color:ve?"error":"success",size:"small",children:(0,q.jsx)(l.G,{icon:ve?i.gPx:i.Stf,className:"fa-fw"})})}),!!T&&(0,q.jsx)(m.Z,{color:"error",size:"small",onClick:function(){return T(se)},disabled:ce,children:(0,q.jsx)(l.G,{icon:i.I7k,className:"fa-fw"})})]})})]})})]})})}},46797:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(29439),i=r(25617),l=r(60393),a=r(80184);function o(e){var n=e.value,r=e.valid,o="number"===typeof n?["roll".concat((0,l.uZ)(Math.floor(.05*n)+1,1,6)),n.toFixed(2)+"%"]:["secondary",n],s=(0,t.Z)(o,2),c=s[0],f=s[1];return r||(c="error"),(0,a.jsx)(i.Z,{color:c,children:f})}},44217:function(e,n,r){r.d(n,{B:function(){return g}});var t=r(29439),i=r(37762),l=r(4942),a=r(1413),o=r(93433),s=r(60393),c=r(19272),f=r(12354),u=[3,4,6],d={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},x={};function h(e,n,r,t){if(5!==e.length)for(var i=0,c=u;i<c.length;i++){var f=c[i];n[f]>0&&h([].concat((0,o.Z)(e),[f]),(0,a.Z)((0,a.Z)({},n),{},(0,l.Z)({},f,n[f]-f)),r-f,t*n[f]/r)}else(0,s.SR)(x,e,t)}h([0],{3:6,4:20,6:18},44,1),h([3],{3:3,4:20,6:18},41,1),h([4],{3:6,4:16,6:18},40,1),h([6],{3:6,4:20,6:12},38,1);for(var v=Array(6).fill(0).map((function(e,n){for(var r=[1],t=0,i=1;++t<=n;)i*=n-t+1,i/=t,r.push(i);return r})),Z=[[1]],j=function(){var e=Z[Z.length-1],n=Array(e.length+3).fill(0);e.forEach((function(e,r){for(var t=0,i=[0,1,2,3];t<i.length;t++){n[r+i[t]]+=e}})),Z.push(n.map((function(e){return e/4})))};Z.length<6;)j();for(var m=function(){var e=y[p],n=e.reduce((function(e,n){return e+n}));e.forEach((function(e,r,t){t[r]=n,n-=e}))},p=0,y=Z;p<y.length;p++)m();function g(e,n){if(e.rarity<=2)return NaN;var r=e.rarity,o=e.level,h=e.substats,j=(0,a.Z)({},n),m=new Set(Object.keys(j)),p=0,y=e.mainStatKey;if(y in j){var g=4*r;if(f[r][y][g]<j[y])return 0;delete j[y],m.delete(y)}var b,k=(0,i.Z)(h);try{for(k.s();!(b=k.n()).done;){var w=b.value,S=w.key,G=w.value;S?m.has(S)&&(m.delete(S),j[S]>G?j[S]-=G:delete j[S]):p+=1}}catch(D){k.e(D)}finally{k.f()}if(p+=4-h.length,m.size>p||Object.keys(j).length>4)return 0;for(var P=c.Z.rollsRemaining(o,r)-p,E=0,A=Object.entries(j);E<A.length;E++){var M=(0,t.Z)(A[E],2),N=M[0],_=M[1];j[N]=Math.max(Math.ceil(10*_/c.Z.maxSubstatValues(N,r)),1)}var C=0,z=Object.entries(j).map((function(e){var n=(0,t.Z)(e,2),r=n[0],i=n[1],l=m.has(r)?1:0,a=Math.ceil(i/10)-l;return C+=a,{target:i,filler:l,minUpgrade:a}})).reverse();if(C>P)return 0;var O=(0,l.Z)({},P,1),I=P-C;return z.forEach((function(e,n){for(var r,i,l,a=e.target,o=e.filler,s=e.minUpgrade,c={},f=s;f<=s+I;f++)for(var u=a-7*(f+o),d=u>0?Z[f+o][u]:1,x=0,h=Object.entries(O);x<h.length;x++){var j,m=(0,t.Z)(h[x],2),p=m[0],y=m[1],g=parseInt(p);if(!(g<f)){var b=(i=f,l=4-n,v[r=g][i]*Math.pow(l-1,r-i)/Math.pow(l,r)),k=g-f;c[k]=(null!==(j=c[k])&&void 0!==j?j:0)+y*d*b}}O=c})),function(e,n,r){var t,l,a=null!==(t=d[e])&&void 0!==t?t:0,o=0,c={3:2,4:5,6:3},f=x[a],h=(0,i.Z)(n);try{for(h.s();!(l=h.n()).done;){var Z=l.value.key;if(Z){var j=d[Z];f=f[j],c[j]-=1}}}catch(D){h.e(D)}finally{h.f()}a&&(c[a]-=1);var m,p={3:0,4:0,6:0},y=(0,i.Z)(r);try{for(y.s();!(m=y.n()).done;){var g=m.value;p[d[g]]+=1}}catch(D){y.e(D)}finally{y.f()}var b=0;(0,s.Q1)(f,[],(function(e){return"number"===typeof e}),(function(e,n){b+=e;var r,t={3:0,4:0,6:0},l=(0,i.Z)(n);try{for(l.s();!(r=l.n()).done;){t[r.value]+=1}}catch(D){l.e(D)}finally{l.f()}var a,s=e,c=(0,i.Z)(u);try{for(c.s();!(a=c.n()).done;){var f=a.value,d=t[f],x=p[f];if(d<x)return;s*=v[d][x]}}catch(D){c.e(D)}finally{c.f()}o+=s}));var k,w=(0,i.Z)(u);try{for(w.s();!(k=w.n()).done;){var S=k.value;o/=v[c[S]][p[S]]}}catch(D){w.e(D)}finally{w.f()}return o/b}(e.mainStatKey,h,m)*Object.values(O).reduce((function(e,n){return e+n}))}}}]);
//# sourceMappingURL=246.d79c8588.chunk.js.map