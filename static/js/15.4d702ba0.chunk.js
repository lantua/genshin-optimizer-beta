(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[15],{294:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(8),c=n(0),r=n(158);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(c.useContext)(r.b),n=Object(c.useState)(t._getWeapon(e)),i=Object(a.a)(n,2),l=i[0],s=i[1];return Object(c.useEffect)((function(){return s(t._getWeapon(e))}),[t,e]),Object(c.useEffect)((function(){return e?t.followWeapon(e,s):void 0}),[e,s,t]),l}},298:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a,c=n(38),r=n(363),i=n(70),l=n(124),s=n(270),o=n(263),j=n(1);function u(e){var t=e.location,n=Object(l.a)("ui").t,u=Object(o.a)(s.b.get(null!==t&&void 0!==t?t:""),[t]);return Object(j.jsx)(i.a,{component:"span",children:null!==u&&void 0!==u&&u.name?u.nameWIthIcon:Object(j.jsxs)("span",{children:[Object(j.jsx)(r.a,{sx:{verticalAlign:"text-bottom"}})," ",n(a||(a=Object(c.a)(["inventory"])))]})})}},299:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(10),c=n(125),r=n(775),i=n(0),l=n(272),s=n(19),o=n(266),j=n(288),u=n(1),d=["value","onChange"];function b(e){var t=e.value,n=e.onChange,b=Object(c.a)(e,d),O=Object(i.useCallback)((function(e,t){return n(t||"")}),[n]);return Object(u.jsx)(j.a,Object(a.a)(Object(a.a)({exclusive:!0,onChange:O,value:t||s.l},b),{},{children:s.l.map((function(e){var t;return Object(u.jsx)(r.a,{value:e,children:Object(u.jsx)(o.a,{src:null===(t=l.a.weaponTypes)||void 0===t?void 0:t[e],size:2})},e)}))}))}},304:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return r}));var a=n(8);function c(e,t,n){function a(e,t,n,a){var c=a.getValue(e),r=a.getValue(t);return(n?-1:1)*("string"===typeof c&&"string"===typeof r?c.localeCompare(r):r-c)}return function(c,r){if(!n[e])return 0;var i=n[e],l=a(c,r,t,i);return!l&&i.tieBreaker&&n[i.tieBreaker]&&(l=a(c,r,t,n[i.tieBreaker])),l}}function r(e,t){return function(n){return Object.entries(e).every((function(e){var c=Object(a.a)(e,2),r=c[0],i=c[1];return t[r](n,i)}))}}},305:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(10),c=n(125),r=n(53),i=n(52),l=n(724),s=n(774),o=n(257),j=n(124),u=n(89),d=n(269),b=n(1),O=["sortKeys","value","onChange","ascending","onChangeAsc"];function x(e){var t=e.sortKeys,n=e.value,x=e.onChange,h=e.ascending,v=e.onChangeAsc,f=Object(c.a)(e,O),p=Object(j.a)("ui").t;return Object(b.jsxs)(l.a,Object(a.a)(Object(a.a)({},f),{},{children:[Object(b.jsx)(d.a,{title:Object(b.jsxs)(u.a,{t:p,i18nKey:"sortByFormat",value:p("sortMap.".concat(n)),children:["Sort By: ",{value:p("sortMap.".concat(n))}]}),children:t.map((function(e){return Object(b.jsx)(s.a,{selected:n===e,disabled:n===e,onClick:function(){return x(e)},children:p("sortMap.".concat(e))},e)}))}),Object(b.jsx)(o.a,{onClick:function(){return v(!h)},startIcon:Object(b.jsx)(i.a,{icon:h?r.x:r.y,className:"fa-fw"}),children:h?Object(b.jsx)(u.a,{t:p,i18nKey:"ascending",children:"Ascending"}):Object(b.jsx)(u.a,{t:p,i18nKey:"descending",children:"Descending"})})]}))}},309:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(6),n(10),n(38),n(14),n(272),n(105),n(266),n(267);var a=n(126),c=n(18),r=n(17),i=n(1),l=Object(c.a)((function e(){if(Object(r.a)(this,e),this instanceof e)throw Error("A static class cannot be instantiated.")}));l.printStat=function(e,t){return Object(i.jsx)(i.Fragment,{})};var s=function(e){return Object(i.jsx)(a.a,{ns:"sheet_gen",key18:e})}},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(8),c=n(16),r=n(6),i=n(10),l=n(14),s=n(25),o=n(60),j=n(106),u=[3,4,6],d={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},b={};function O(e,t,n,a){if(5!==e.length)for(var c=0,o=u;c<o.length;c++){var j=o[c];t[j]>0&&O([].concat(Object(l.a)(e),[j]),Object(i.a)(Object(i.a)({},t),{},Object(r.a)({},j,t[j]-j)),n-j,a*t[j]/n)}else Object(s.k)(b,e,a)}O([0],{3:6,4:20,6:18},44,1),O([3],{3:3,4:20,6:18},41,1),O([4],{3:6,4:16,6:18},40,1),O([6],{3:6,4:20,6:12},38,1);for(var x=Array(6).fill(0).map((function(e,t){for(var n=[1],a=0,c=1;++a<=t;)c*=t-a+1,c/=a,n.push(c);return n})),h=[[1]],v=function(){var e=h[h.length-1],t=Array(e.length+3).fill(0);e.forEach((function(e,n){for(var a=0,c=[0,1,2,3];a<c.length;a++){t[n+c[a]]+=e}})),h.push(t.map((function(e){return e/4})))};h.length<6;)v();for(var f=function(){var e=m[p],t=e.reduce((function(e,t){return e+t}));e.forEach((function(e,n,a){a[n]=t,t-=e}))},p=0,m=h;p<m.length;p++)f();function g(e,t){if(e.rarity<=2)return NaN;var n=e.rarity,l=e.level,O=e.substats,v=Object(i.a)({},t),f=new Set(Object.keys(v)),p=0,m=e.mainStatKey;if(m in v){var g=4*n;if(j[n][m][g]<v[m])return 0;delete v[m],f.delete(m)}var y,k=Object(c.a)(O);try{for(k.s();!(y=k.n()).done;){var C=y.value,w=C.key,S=C.value;w?f.has(w)&&(f.delete(w),v[w]>S?v[w]-=S:delete v[w]):p+=1}}catch(G){k.e(G)}finally{k.f()}if(p+=4-O.length,f.size>p||Object.keys(v).length>4)return 0;for(var _=o.a.rollsRemaining(l,n)-p,A=0,K=Object.entries(v);A<K.length;A++){var T=Object(a.a)(K[A],2),D=T[0],E=T[1];v[D]=Math.max(Math.ceil(10*E/o.a.maxSubstatValues(D,n)),1)}var M=0,I=Object.entries(v).map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1],r=f.has(n)?1:0,i=Math.ceil(c/10)-r;return M+=i,{target:c,filler:r,minUpgrade:i}})).reverse();if(M>_)return 0;var W=Object(r.a)({},_,1),L=_-M;return I.forEach((function(e,t){for(var n,c,r,i=e.target,l=e.filler,s=e.minUpgrade,o={},j=s;j<=s+L;j++)for(var u=i-7*(j+l),d=u>0?h[j+l][u]:1,b=0,O=Object.entries(W);b<O.length;b++){var v,f=Object(a.a)(O[b],2),p=f[0],m=f[1],g=parseInt(p);if(!(g<j)){var y=(c=j,r=4-t,x[n=g][c]*Math.pow(r-1,n-c)/Math.pow(r,n)),k=g-j;o[k]=(null!==(v=o[k])&&void 0!==v?v:0)+m*d*y}}W=o})),function(e,t,n){var a,r,i=null!==(a=d[e])&&void 0!==a?a:0,l=0,o={3:2,4:5,6:3},j=b[i],O=Object(c.a)(t);try{for(O.s();!(r=O.n()).done;){var h=r.value.key;if(h){var v=d[h];j=j[v],o[v]-=1}}}catch(G){O.e(G)}finally{O.f()}i&&(o[i]-=1);var f,p={3:0,4:0,6:0},m=Object(c.a)(n);try{for(m.s();!(f=m.n()).done;){var g=f.value;p[d[g]]+=1}}catch(G){m.e(G)}finally{m.f()}var y=0;Object(s.d)(j,[],(function(e){return"number"===typeof e}),(function(e,t){y+=e;var n,a={3:0,4:0,6:0},r=Object(c.a)(t);try{for(r.s();!(n=r.n()).done;){a[n.value]+=1}}catch(G){r.e(G)}finally{r.f()}var i,s=e,o=Object(c.a)(u);try{for(o.s();!(i=o.n()).done;){var j=i.value,d=a[j],b=p[j];if(d<b)return;s*=x[d][b]}}catch(G){o.e(G)}finally{o.f()}l+=s}));var k,C=Object(c.a)(u);try{for(C.s();!(k=C.n()).done;){var w=k.value;l/=x[o[w]][p[w]]}}catch(G){C.e(G)}finally{C.f()}return l/y}(e.mainStatKey,O,f)*Object.values(W).reduce((function(e,t){return e+t}))}},313:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(8),c=n(267),r=n(25),i=n(1);function l(e){var t=e.value,n=e.valid,l="number"===typeof t?["roll".concat(Object(r.b)(Math.floor(.05*t)+1,1,6)),t.toFixed(2)+"%"]:["secondary",t],s=Object(a.a)(l,2),o=s[0],j=s[1];return n||(o="error"),Object(i.jsx)(c.a,{color:o,children:j})}},320:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var a=n(14),c=n(8),r=n(445),i=n(250),l=n(239),s=n(407),o=n(232),j=n(70),u=n(0),d=n(272),b=n(263),O=n(19),x=n(276),h=n(265),v=n(261),f=n(278),p=n(266),m=n(281),g=n(274),y=n(299),k=n(1);function C(e){var t=e.show,n=e.onHide,C=e.onSelect,w=e.filter,S=void 0===w?function(){return!0}:w,_=e.weaponFilter,A=Object(b.a)(x.a.getAll,[]),K=Object(u.useState)(null!==_&&void 0!==_?_:""),T=Object(c.a)(K,2),D=T[0],E=T[1];Object(u.useEffect)((function(){return _&&E(_)}),[_]);var M=A?Object(a.a)(new Set(O.k)).filter((function(e){return S(A[e])})).filter((function(e){var t;return!D||D===(null===A||void 0===A||null===(t=A[e])||void 0===t?void 0:t.weaponType)})).sort((function(e,t){var n,a,c,r;return(null!==(n=null===A||void 0===A||null===(a=A[t])||void 0===a?void 0:a.rarity)&&void 0!==n?n:0)-(null!==(c=null===A||void 0===A||null===(r=A[e])||void 0===r?void 0:r.rarity)&&void 0!==c?c:0)})):[];return A?Object(k.jsx)(m.a,{open:t,onClose:n,children:Object(k.jsxs)(h.a,{children:[Object(k.jsx)(r.a,{sx:{py:1},children:Object(k.jsxs)(i.a,{container:!0,children:[Object(k.jsx)(i.a,{item:!0,flexGrow:1,children:Object(k.jsx)(y.a,{value:D,onChange:E,disabled:!!_,size:"small"})}),Object(k.jsx)(i.a,{item:!0,children:Object(k.jsx)(f.a,{onClick:n})})]})}),Object(k.jsx)(l.a,{}),Object(k.jsx)(r.a,{children:Object(k.jsx)(i.a,{container:!0,spacing:1,children:M.map((function(e){var t,a=A[e];return Object(k.jsx)(i.a,{item:!0,lg:3,md:4,children:Object(k.jsx)(v.a,{sx:{height:"100%"},children:Object(k.jsxs)(s.a,{onClick:function(){n(),C(e)},sx:{display:"flex"},children:[Object(k.jsx)(o.a,{component:"img",src:a.img,sx:{width:100,height:"auto"},className:" grad-".concat(a.rarity,"star")}),Object(k.jsxs)(o.a,{sx:{flexGrow:1,px:1},children:[Object(k.jsx)(j.a,{variant:"subtitle1",children:a.name}),Object(k.jsxs)(j.a,{children:[Object(k.jsx)(p.a,{src:null===(t=d.a.weaponTypes)||void 0===t?void 0:t[a.weaponType]})," ",Object(k.jsx)(g.a,{stars:a.rarity,colored:!0})]})]})]})})},e)}))})}),Object(k.jsx)(l.a,{}),Object(k.jsx)(r.a,{sx:{py:1},children:Object(k.jsx)(f.a,{large:!0,onClick:n})})]})}):null}},321:function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var a=n(38),c=n(53),r=n(52),i=n(382),l=n(383),s=n(70),o=n(156),j=n(445),u=n(232),d=n(404),b=n(258),O=n(250),x=n(405),h=n(446),v=n(724),f=n(257),p=n(757),m=n(0),g=n(124),y=n(289),k=n(261),C=n(290),w=n(298),S=n(54),_=n(267),A=n(274),K=n(158),T=n(8);var D,E,M,I=n(263),W=n(61),L=n(127),G=n(25),N=n(60),z=n(271),B=n(128),F=n(313),R=n(310),P=n(102),V=n(1),U=new Set(W.b);function q(e){var t,n,W,q,H=e.artifactId,J=e.artifactObj,X=e.onEdit,Q=e.onDelete,Y=e.mainStatAssumptionLevel,Z=void 0===Y?0:Y,$=e.effFilter,ee=void 0===$?U:$,te=e.probabilityFilter,ne=Object(g.a)(["artifact"]).t,ae=Object(m.useContext)(K.b),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(m.useContext)(K.b),n=Object(m.useState)(t._getArt(e)),a=Object(T.a)(n,2),c=a[0],r=a[1];return Object(m.useEffect)((function(){return r(t._getArt(e))}),[t,e]),Object(m.useEffect)((function(){return e?t.followArt(e,r):void 0}),[e,r,t]),c}(H),re=Object(I.a)(z.a.get(null===(t=null!==J&&void 0!==J?J:ce)||void 0===t?void 0:t.setKey),[J,ce]),ie=!J&&ae===K.c,le=null!==J&&void 0!==J?J:ce;if(!le)return null;var se=le.id,oe=le.lock,je=le.slotKey,ue=le.rarity,de=le.level,be=le.mainStatKey,Oe=le.substats,xe=le.exclude,he=le.location,ve=void 0===he?"":he,fe=Math.max(Math.min(Z,4*ue),de),pe="roll"+(Math.floor(Math.max(de,0)/4)+1),me=Object(V.jsx)(S.a,{color:fe!==de?"warning":void 0,children:Object(L.b)(null!==(n=N.a.mainStatValue(be,ue,fe))&&void 0!==n?n:0,P.b.unit(be))}),ge=N.a.getArtifactEfficiency(le,ee),ye=ge.currentEfficiency,ke=ge.maxEfficiency,Ce=0!==ke,we=(null===re||void 0===re?void 0:re.getSlotName(je))||"Unknown Piece Name",Se=null===re||void 0===re?void 0:re.getSlotDesc(je),_e=Se&&Object(V.jsx)(y.a,{placement:"top",title:Object(V.jsx)(s.a,{children:Se}),children:Object(V.jsx)("span",{children:Object(V.jsx)(r.a,{icon:c.s})})}),Ae=null===re||void 0===re?void 0:re.setEffects,Ke=re&&Ae&&Object(V.jsx)(y.a,{placement:"top",title:Object(V.jsx)("span",{children:Object.keys(Ae).map((function(e){return Object(V.jsxs)("span",{children:[Object(V.jsx)(s.a,{variant:"h6",children:Object(V.jsx)(_.a,{color:"success",children:ne("setEffectNum",{setNum:e})})}),Object(V.jsx)(s.a,{children:re.setEffectDesc(e)})]},e)}))}),children:Object(V.jsx)("span",{children:Object(V.jsx)(r.a,{icon:c.s})})});return Object(V.jsx)(m.Suspense,{fallback:Object(V.jsx)(o.a,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:Object(V.jsxs)(k.a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(V.jsxs)(j.a,{className:"grad-".concat(ue,"star"),sx:{pt:1,pb:0,pr:0},children:[Object(V.jsxs)(u.a,{component:"div",sx:{display:"flex",alignItems:"center",pr:1},children:[Object(V.jsx)(d.a,{size:"small",label:Object(V.jsx)("strong",{children:" +".concat(de)}),color:pe}),Object(V.jsxs)(s.a,{sx:{pl:1,flexGrow:1},children:[we," ",_e]}),Object(V.jsx)(b.a,{color:"primary",disabled:!ie,onClick:function(){return ae.updateArt({lock:!oe},se)},children:oe?Object(V.jsx)(i.a,{}):Object(V.jsx)(l.a,{})})]}),Object(V.jsxs)(O.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(V.jsxs)(O.a,{item:!0,flexGrow:1,children:[Object(V.jsx)(s.a,{color:"text.secondary",variant:"body2",children:Object(V.jsx)(B.c,{slotKey:je})}),Object(V.jsx)(s.a,{variant:"h6",children:P.b.get(be)}),Object(V.jsx)(s.a,{variant:"h5",children:Object(V.jsx)("strong",{children:me})}),Object(V.jsx)(A.a,{stars:ue,colored:!0})]}),Object(V.jsx)(O.a,{item:!0,maxWidth:"40%",sx:{mt:-3,mb:-1,pl:-2},alignSelf:"flex-end",children:Object(V.jsx)(x.a,{component:"img",image:null!==(W=null===re||void 0===re?void 0:re.slotIcons[je])&&void 0!==W?W:"",width:"100%",height:"auto"})})]})]}),Object(V.jsxs)(j.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0},children:[Oe.map((function(e,t){var n,a,c;if(!e.value)return null;var r=null!==(n=null===(a=e.rolls)||void 0===a?void 0:a.length)&&void 0!==n?n:0,i="roll".concat(Object(G.b)(r,1,6)),l=null!==(c=e.efficiency)&&void 0!==c?c:0,o=.3+l/100*.7,j=P.b.get(e.key);return Object(V.jsxs)(u.a,{sx:{display:"flex"},children:[Object(V.jsxs)(u.a,{sx:{flexGrow:1},children:[Object(V.jsx)(_.a,{color:r?i:"error",sx:{mr:1},children:Object(V.jsx)("strong",{children:r||"?"})}),Object(V.jsxs)(s.a,{color:r?"".concat(i,".main"):"error.main",component:"span",children:[j,"+".concat(Object(L.b)(e.value,P.b.unit(e.key)))]})]}),Object(V.jsx)(s.a,{sx:{opacity:o},children:e.key&&ee.has(e.key)?Object(L.b)(l,"eff"):"-"})]},t)})),Object(V.jsxs)(u.a,{sx:{display:"flex",my:1},children:[Object(V.jsx)(s.a,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:ne(D||(D=Object(a.a)(["editor.curSubEff"])))}),Object(V.jsx)(F.a,{value:ye,valid:Ce})]}),ye!==ke&&Object(V.jsxs)(u.a,{sx:{display:"flex",mb:1},children:[Object(V.jsx)(s.a,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:ne(E||(E=Object(a.a)(["editor.maxSubEff"])))}),Object(V.jsx)(F.a,{value:ke,valid:Ce})]}),Object(V.jsx)(u.a,{flexGrow:1}),te&&Object(V.jsxs)("strong",{children:["Probability: ",(100*Object(R.a)(le,te)).toFixed(2),"%"]}),Object(V.jsxs)(s.a,{color:"success.main",children:[null!==(q=null===re||void 0===re?void 0:re.name)&&void 0!==q?q:"Artifact Set"," ",Ke]})]}),Object(V.jsx)(h.a,{children:Object(V.jsxs)(O.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(V.jsx)(O.a,{item:!0,xs:"auto",flexShrink:1,children:ie?Object(V.jsx)(C.b,{size:"small",inventory:!0,value:ve,onChange:function(e){return ae.setArtLocation(H,e)}}):Object(V.jsx)(w.a,{location:ve})}),Object(V.jsx)(O.a,{item:!0,flexGrow:1,sx:{mr:1}}),ie&&Object(V.jsx)(O.a,{item:!0,xs:"auto",children:Object(V.jsxs)(v.a,{sx:{height:"100%"},children:[!!X&&Object(V.jsx)(f.a,{color:"info",onClick:function(){return X(se)},size:"small",children:Object(V.jsx)(r.a,{icon:c.m,className:"fa-fw"})}),Object(V.jsx)(p.a,{title:Object(V.jsx)(s.a,{children:ne(M||(M=Object(a.a)(["excludeArtifactTip"])))}),placement:"top",arrow:!0,children:Object(V.jsx)(f.a,{onClick:function(){return ae.updateArt({exclude:!xe},se)},color:xe?"error":"success",size:"small",children:Object(V.jsx)(r.a,{icon:xe?c.b:c.e,className:"fa-fw"})})}),!!Q&&Object(V.jsx)(f.a,{color:"error",size:"small",onClick:function(){return Q(se)},disabled:oe,children:Object(V.jsx)(r.a,{icon:c.D,className:"fa-fw"})})]})})]})})]})})}},322:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var a,c,r,i,l=n(53),s=n(52),o=n(382),j=n(383),u=n(407),d=n(156),b=n(354),O=n(258),x=n(250),h=n(70),v=n(232),f=n(445),p=n(724),m=n(257),g=n(0),y=n(272),k=n(261),C=n(10),w=n(38),S=n(125),_=n(363),A=n(364),K=n(774),T=n(238),D=n(239),E=n(124),M=n(270),I=n(158),W=n(263),L=n(269),G=n(292),N=n(1),z=["value","onChange","unSelectText","unSelectIcon","inventory","noUnselect","filter"];function B(e){var t,n=e.value,l=e.onChange,s=e.unSelectText,o=e.unSelectIcon,j=e.inventory,u=void 0!==j&&j,d=e.noUnselect,b=void 0!==d&&d,O=e.filter,x=void 0===O?function(){return!0}:O,v=Object(S.a)(e,z),f=Object(E.a)("ui").t,p=Object(g.useContext)(I.b),m=Object(W.a)(M.b.getAll,[]),y=Object(W.a)(M.b.get(n),[n]),k=p._getCharKeys().filter((function(e){return(null===m||void 0===m?void 0:m[e])&&x(m[e],e)})).sort();return Object(N.jsxs)(L.a,Object(C.a)(Object(C.a)({},v),{},{title:null!==(t=null===y||void 0===y?void 0:y.name)&&void 0!==t?t:u?f(a||(a=Object(w.a)(["inventory"]))):null!==s&&void 0!==s?s:f(c||(c=Object(w.a)(["unselect"]))),color:n?"success":"primary",startIcon:null!==y&&void 0!==y&&y.thumbImg?Object(N.jsx)(G.a,{src:y.thumbImgSide}):u?Object(N.jsx)(_.a,{}):null!==o&&void 0!==o?o:Object(N.jsx)(A.a,{}),children:[!b&&(u?Object(N.jsxs)(K.a,{onClick:function(){return l("")},selected:""===n,disabled:""===n,children:[Object(N.jsx)(T.a,{children:Object(N.jsx)(_.a,{})}),Object(N.jsx)(h.a,{variant:"inherit",noWrap:!0,children:f(r||(r=Object(w.a)(["inventory"])))})]}):Object(N.jsxs)(K.a,{onClick:function(){return l("")},selected:""===n,disabled:""===n,children:[Object(N.jsx)(T.a,{children:Object(N.jsx)(A.a,{})}),Object(N.jsx)(h.a,{variant:"inherit",noWrap:!0,children:f(i||(i=Object(w.a)(["unselect"])))})]})),!b&&Object(N.jsx)(D.a,{},"div"),!!m&&F(m,k,l,n)]}))}function F(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t.map((function(t){var c;return Object(N.jsxs)(K.a,{onClick:function(){return n(t)},selected:a===t,disabled:a===t,children:[Object(N.jsx)(T.a,{children:Object(N.jsx)(G.a,{src:e[t].thumbImgSide})}),Object(N.jsx)(h.a,{variant:"inherit",noWrap:!0,children:null===e||void 0===e||null===(c=e[t])||void 0===c?void 0:c.name})]},t)}))}var R=n(298),P=n(297),V=n(266),U=n(274),q=n(275),H=n(45),J=n(262),X=n(273),Q=n(294),Y=n(102),Z=n(276);function $(e){var t,n=e.weaponId,a=e.onClick,c=e.onEdit,r=e.onDelete,i=e.canEquip,C=void 0!==i&&i,w=Object(g.useContext)(I.b),S=Object(Q.a)(n),_=Object(W.a)(null!==S&&void 0!==S&&S.key?Z.a.get(S.key):void 0,[null===S||void 0===S?void 0:S.key]),A=Object(g.useCallback)((function(e){return e.weaponTypeKey===(null===_||void 0===_?void 0:_.weaponType)}),[_]),K=Object(g.useCallback)((function(e){return Object(N.jsx)(u.a,{onClick:function(){return null===a||void 0===a?void 0:a(n)},sx:{height:"100%"},children:e})}),[a,n]),T=Object(g.useCallback)((function(e){return w.setWeaponLocation(n,e)}),[w,n]),D=Object(g.useMemo)((function(){return _&&S&&Object(X.a)([_.data,Object(X.d)(S)])}),[_,S]);if(!S||!_||!D)return null;var E=S.level,M=S.ascension,L=S.refinement,G=S.id,z=S.location,F=void 0===z?"":z,$=S.lock,ee=D.get(J.d.weapon.type).value,te=[J.d.weapon.main,J.d.weapon.sub,J.d.weapon.sub2].map((function(e){return D.get(e)})),ne=M<2?null===_||void 0===_?void 0:_.img:null===_||void 0===_?void 0:_.imgAwaken;return Object(N.jsx)(g.Suspense,{fallback:Object(N.jsx)(d.a,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:Object(N.jsx)(P.a,{condition:!!a,wrapper:K,children:Object(N.jsxs)(k.a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(N.jsxs)("div",{className:"grad-".concat(_.rarity,"star"),children:[Object(N.jsx)(b.a,{title:_.name,avatar:Object(N.jsx)(V.a,{sx:{fontSize:"2em"},src:null===(t=y.a.weaponTypes)||void 0===t?void 0:t[ee]}),titleTypographyProps:{variant:"h6"},action:!a&&Object(N.jsx)(O.a,{color:"primary",onClick:function(){return w.updateWeapon({lock:!$},G)},children:$?Object(N.jsx)(o.a,{}):Object(N.jsx)(j.a,{})})}),Object(N.jsxs)(x.a,{container:!0,sx:{flexWrap:"nowrap",pl:2},children:[Object(N.jsxs)(x.a,{item:!0,flexGrow:1,children:[Object(N.jsxs)(h.a,{component:"span",variant:"h4",children:["Lv. ",E]}),Object(N.jsxs)(h.a,{component:"span",variant:"h4",color:"text.secondary",children:["/",H.b[M]]}),Object(N.jsxs)(h.a,{variant:"h6",children:["Refinement ",Object(N.jsx)("strong",{children:L})]}),Object(N.jsx)(h.a,{children:Object(N.jsx)(U.a,{stars:_.rarity,colored:!0})})]}),Object(N.jsx)(x.a,{item:!0,container:!0,maxWidth:"40%",alignContent:"flex-end",sx:{mt:-3},children:Object(N.jsx)(v.a,{component:"img",src:ne,width:"100%",height:"auto"})})]})]}),Object(N.jsx)(f.a,{children:te.map((function(e){if(!e.key)return null;var t=Object(X.h)(e.value,e.unit,"flat"===e.unit?0:void 0);return Object(N.jsxs)(v.a,{sx:{display:"flex"},children:[Object(N.jsxs)(h.a,{flexGrow:1,children:[q.a[e.key]," ",Y.b.get(e.key)]}),Object(N.jsx)(h.a,{children:t})]},e.key)}))}),Object(N.jsx)(v.a,{flexGrow:1}),Object(N.jsx)(f.a,{sx:{py:1},children:Object(N.jsxs)(x.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(N.jsx)(x.a,{item:!0,xs:"auto",flexShrink:1,children:C?Object(N.jsx)(B,{size:"small",noUnselect:!0,inventory:!0,value:F,onChange:T,filter:A}):Object(N.jsx)(R.a,{location:F})}),Object(N.jsx)(x.a,{item:!0,flexGrow:1,sx:{mr:1}}),Object(N.jsx)(x.a,{item:!0,xs:"auto",children:Object(N.jsxs)(p.a,{sx:{height:"100%"},children:[!!c&&Object(N.jsx)(m.a,{color:"info",size:"small",onClick:function(){return c(G)},children:Object(N.jsx)(s.a,{icon:l.m,className:"fa-fw"})}),!!r&&Object(N.jsx)(m.a,{color:"error",size:"small",onClick:function(){return r(G)},disabled:!!F||$,children:Object(N.jsx)(s.a,{icon:l.D,className:"fa-fw"})})]})})]})})]})})})}},335:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return r}));var a=["level","rarity","name"];function c(e,t){return{new:{getValue:function(t){return e._getChar(t)?0:1},tieBreaker:"name"},name:{getValue:function(e){return e}},level:{getValue:function(t){var n,a;return null!==(n=null===(a=e._getChar(t))||void 0===a?void 0:a.level)&&void 0!==n?n:0},tieBreaker:"rarity"},rarity:{getValue:function(e){var n;return null===t||void 0===t||null===(n=t[e])||void 0===n?void 0:n.rarity},tieBreaker:"level"}}}function r(e){return{element:function(t,n){var a;return!n||n===(null===e||void 0===e||null===(a=e[t])||void 0===a?void 0:a.elementKey)},weaponType:function(t,n){var a;return!n||n===(null===e||void 0===e||null===(a=e[t])||void 0===a?void 0:a.weaponTypeKey)}}}},344:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return V}));var a=n(14),c=n(8),r=n(382),i=n(383),l=n(439),s=n(445),o=n(250),j=n(724),u=n(257),d=n(774),b=n(239),O=n(232),x=n(70),h=n(403),v=n(0),f=n(272),p=n(270),m=n(265),g=n(261),y=n(290),k=n(278),C=(n(54),n(280)),w=n(295),S=n(269),_=n(277),A=n(266),K=n(281),T=n(267),D=n(274),E=n(320),M=n(45),I=n(158),W=n(262),L=n(273),G=n(263),N=n(294),z=n(25),B=n(322),F=n(276),R=n(264),P=n(1);function V(e){var t,n=e.weaponId,l=e.footer,f=void 0!==l&&l,A=e.onClose,K=Object(v.useContext)(R.a).data,B=Object(v.useContext)(I.b),V=Object(N.a)(n),q=null!==V&&void 0!==V?V:{},H=q.key,J=void 0===H?"":H,X=q.level,Q=q.refinement,Y=void 0===Q?0:Q,Z=q.ascension,$=void 0===Z?0:Z,ee=q.lock,te=q.location,ne=void 0===te?"":te,ae=q.id,ce=Object(G.a)(F.a.get(J),[J]),re=null===ce||void 0===ce?void 0:ce.weaponType,ie=Object(v.useCallback)((function(e){B.updateWeapon(e,n)}),[n,B]),le=Object(v.useCallback)((function(e){e=Object(z.b)(e,1,90);var t=M.b.findIndex((function(t){return e<=t}));ie({level:e,ascension:t})}),[ie]),se=Object(v.useCallback)((function(){var e=M.b.findIndex((function(e){return 90!==X&&X===e}));ie($===e?{ascension:$+1}:{ascension:e})}),[ie,$,X]),oe=Object(G.a)(ne?p.b.get(ne):void 0,[ne]),je=oe?function(e){return e.weaponType===oe.weaponTypeKey}:void 0,ue=oe&&oe.weaponTypeKey,de=Object(v.useCallback)((function(e){return ae&&B.setWeaponLocation(ae,e)}),[B,ae]),be=Object(v.useCallback)((function(e){return e.weaponTypeKey===(null===ce||void 0===ce?void 0:ce.weaponType)}),[ce]),Oe=Object(v.useState)(!1),xe=Object(c.a)(Oe,2),he=xe[0],ve=xe[1],fe=$<2?null===ce||void 0===ce?void 0:ce.img:null===ce||void 0===ce?void 0:ce.imgAwaken,pe=Object(v.useMemo)((function(){return ce&&V&&Object(L.a)([ce.data,Object(L.d)(V)])}),[ce,V]);return Object(P.jsxs)(g.a,{children:[Object(P.jsx)(s.a,{sx:{py:1},children:Object(P.jsxs)(o.a,{container:!0,spacing:1,children:[Object(P.jsx)(o.a,{item:!0,flexGrow:1,children:Object(P.jsxs)(o.a,{container:!0,spacing:1,children:[Object(P.jsxs)(o.a,{item:!0,children:[Object(P.jsx)(E.a,{show:he,onHide:function(){return ve(!1)},onSelect:function(e){return ie({key:e})},filter:je,weaponFilter:ue}),Object(P.jsxs)(j.a,{children:[Object(P.jsx)(u.a,{onClick:function(){return ve(!0)},children:null!==(t=null===ce||void 0===ce?void 0:ce.name)&&void 0!==t?t:"Select a Weapon"}),Object(P.jsxs)(S.a,{title:"Refinement ".concat(Y),children:[Object(P.jsx)(d.a,{children:"Select Weapon Refinement"}),Object(P.jsx)(b.a,{}),Object(a.a)(Array(5).keys()).map((function(e){return Object(P.jsx)(d.a,{onClick:function(){return ie({refinement:e+1})},selected:Y===e+1,disabled:Y===e+1,children:"Refinement ".concat(e+1)},e)}))]})]})]}),Object(P.jsx)(o.a,{item:!0,children:Object(P.jsxs)(j.a,{sx:{bgcolor:function(e){return e.palette.contentLight.main}},children:[Object(P.jsx)(C.a,{children:Object(P.jsx)(C.c,{onChange:le,value:X,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),Object(P.jsx)(u.a,{sx:{pl:1},disabled:!Object(M.a)(X),onClick:se,children:Object(P.jsxs)("strong",{children:["/ ",M.b[$]]})}),Object(P.jsx)(S.a,{title:"Select Level",children:M.c.map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1],r=n===M.b[a]?"Lv. ".concat(n):"Lv. ".concat(n,"/").concat(M.b[a]),i=n===X&&a===$;return Object(P.jsx)(d.a,{selected:i,disabled:i,onClick:function(){return ie({level:n,ascension:a})},children:r},"".concat(n,"/").concat(a))}))})]})}),Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(u.a,{color:"error",onClick:function(){return ae&&B.updateWeapon({lock:!ee},ae)},startIcon:ee?Object(P.jsx)(r.a,{}):Object(P.jsx)(i.a,{}),children:ee?"Locked":"Unlocked"})})]})}),!!A&&Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(k.a,{onClick:A})}),B===I.c&&Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(U,{weaponTypeKey:re,onChangeId:function(e){return B.setWeaponLocation(e,K.get(W.d.charKey).value)}})})]})}),Object(P.jsx)(b.a,{}),Object(P.jsx)(s.a,{children:ce&&pe&&Object(P.jsxs)(O.a,{display:"flex",gap:{xs:1,md:1.5,lg:2},children:[Object(P.jsxs)(O.a,{sx:{maxWidth:256},flexShrink:1,minWidth:"25%",children:[Object(P.jsx)(O.a,{component:"img",src:fe,className:"grad-".concat(ce.rarity,"star"),sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}}),Object(P.jsx)(x.a,{children:Object(P.jsx)("small",{children:ce.description})})]}),Object(P.jsxs)(O.a,{sx:{mb:-1},flexGrow:1,children:[Object(P.jsxs)(x.a,{variant:"h6",children:[!1,ce.name," Lv. ",V&&F.a.getLevelString(V)," ",ce.rarity>2&&Object(P.jsxs)(T.a,{color:"info",children:["Refinement ",Y]})]}),Object(P.jsx)(x.a,{children:Object(P.jsx)(D.a,{stars:ce.rarity})}),Object(P.jsx)(x.a,{variant:"subtitle1",children:ce.passiveName}),Object(P.jsx)(x.a,{gutterBottom:!0,children:ce.passiveName&&ce.passiveDescription(pe.get(W.d.weapon.refineIndex).value)}),Object(P.jsxs)(O.a,{display:"flex",flexDirection:"column",gap:1,children:[Object(P.jsxs)(m.a,{children:[Object(P.jsx)(s.a,{children:Object(P.jsx)(x.a,{children:"Main Stats"})}),Object(P.jsx)(_.a,{children:[W.d.weapon.main,W.d.weapon.sub,W.d.weapon.sub2].map((function(e,t){var n=pe.get(e);return n.isEmpty||!n.value?null:Object(P.jsx)(h.a,{children:Object(P.jsx)(_.b,{node:n})},t)}))})]}),K&&ce.document&&Object(P.jsx)(w.a,{sections:ce.document})]})]})]})}),f&&ae&&Object(P.jsx)(s.a,{sx:{py:1},children:Object(P.jsxs)(o.a,{container:!0,children:[Object(P.jsx)(o.a,{item:!0,flexGrow:1,children:Object(P.jsx)(y.b,{noUnselect:!0,inventory:!0,value:ne,onChange:de,filter:be})}),!!A&&Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(k.a,{large:!0,onClick:A})})]})})]})}function U(e){var t=e.onChangeId,n=e.weaponTypeKey,a=Object(v.useContext)(I.b),r=Object(v.useState)(!1),i=Object(c.a)(r,2),j=i[0],d=i[1],O=function(){return d(!1)},h=function(e){t(e),O()},p=Object(G.a)(F.a.getAll,[]),g=a.weapons.keys.filter((function(e){var t,c=a._getWeapon(e);return!!c&&(!n||n===(null===p||void 0===p||null===(t=p[c.key])||void 0===t?void 0:t.weaponType))}));return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(u.a,{color:"info",onClick:function(){return d(!0)},startIcon:Object(P.jsx)(l.a,{}),children:"SWAP WEAPON"}),Object(P.jsx)(K.a,{open:j,onClose:O,children:Object(P.jsxs)(m.a,{children:[Object(P.jsx)(s.a,{sx:{py:1},children:Object(P.jsxs)(o.a,{container:!0,children:[Object(P.jsx)(o.a,{item:!0,flexGrow:1,children:Object(P.jsxs)(x.a,{variant:"h6",children:[n?Object(P.jsx)(A.a,{src:f.a.weaponTypes[n]}):null," Swap Weapon"]})}),Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(k.a,{onClick:O})})]})}),Object(P.jsx)(b.a,{}),Object(P.jsx)(s.a,{children:Object(P.jsx)(o.a,{container:!0,spacing:1,children:g.map((function(e){return Object(P.jsx)(o.a,{item:!0,xs:6,sm:6,md:4,lg:3,children:Object(P.jsx)(B.a,{weaponId:e,onClick:h})},e)}))})})]})})]})}},345:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var a=n(14),c=n(8),r=n(445),i=n(250),l=n(239),s=n(407),o=n(232),j=n(70),u=n(0),d=n(272),b=n(270),O=n(158),x=n(262),h=n(271),v=n(273),f=n(25),p=n(276),m=n(334),g=n(286),y=n(263),k=n(294);var C=n(19),w=n(335),S=n(304),_=n(265),A=n(261),K=n(278),T=n(266),D=n(281),E=n(305),M=n(267),I=n(274),W=n(275),L=n(346),G=n(299),N=n(1),z=["level","rarity","name"];function B(e){var t=e.show,n=e.onHide,s=e.onSelect,o=e.filter,j=void 0===o?function(){return!0}:o,d=e.newFirst,x=void 0!==d&&d,h=Object(u.useMemo)((function(){return x?["new"].concat(z):z}),[x]),v=Object(u.useContext)(O.b),f=Object(u.useState)(h[0]),p=Object(c.a)(f,2),m=p[0],g=p[1],k=Object(u.useState)(!1),A=Object(c.a)(k,2),T=A[0],M=A[1],I=Object(u.useState)(""),W=Object(c.a)(I,2),B=W[0],R=W[1],P=Object(u.useState)(""),V=Object(c.a)(P,2),U=V[0],q=V[1],H=Object(y.a)(b.b.getAll,[]),J=Object(u.useMemo)((function(){return H&&Object(w.b)(v,H)}),[v,H]),X=Object(u.useMemo)((function(){return H&&Object(w.a)(H)}),[H]),Q=Object(u.useMemo)((function(){return H&&J&&X?Object(a.a)(new Set(C.c)).filter((function(e){return j(v._getChar(e),H[e])})).filter(Object(S.a)({element:B,weaponType:U},X)).sort(Object(S.b)(m,T,J)):[]}),[v,H,j,B,U,m,T,J,X]);return H?Object(N.jsx)(D.a,{open:t,onClose:n,children:Object(N.jsxs)(_.a,{children:[Object(N.jsx)(r.a,{sx:{py:1},children:Object(N.jsxs)(i.a,{container:!0,spacing:1,children:[Object(N.jsx)(i.a,{item:!0,children:Object(N.jsx)(G.a,{sx:{height:"100%"},onChange:q,value:U,size:"small"})}),Object(N.jsx)(i.a,{item:!0,flexGrow:1,children:Object(N.jsx)(L.a,{sx:{height:"100%"},onChange:R,value:B,size:"small"})}),Object(N.jsx)(i.a,{item:!0,flexGrow:1}),Object(N.jsx)(i.a,{item:!0,children:Object(N.jsx)(E.a,{sx:{height:"100%"},sortKeys:h,value:m,onChange:g,ascending:T,onChangeAsc:M})}),Object(N.jsx)(i.a,{item:!0,children:Object(N.jsx)(K.a,{onClick:n})})]})}),Object(N.jsx)(l.a,{}),Object(N.jsx)(r.a,{children:Object(N.jsx)(i.a,{container:!0,spacing:1,children:Q.map((function(e){return Object(N.jsx)(i.a,{item:!0,xs:6,md:4,lg:3,children:Object(N.jsx)(F,{characterKey:e,onClick:function(){n(),null===s||void 0===s||s(e)}},e)},e)}))})})]})}):null}function F(e){var t,n=e.onClick,r=e.characterKey,i=Object(y.a)(b.b.get(r),[r]),l=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Object(u.useContext)(O.b),i=Object(m.a)(e),l=Object(k.a)(null===i||void 0===i?void 0:i.equippedWeapon),s=Object(y.a)(b.b.get(e),[e]),o=Object(y.a)(h.a.getAllData,[]),j=Object(y.a)(l&&p.a.get(l.key),[l]),d=Object(u.useMemo)((function(){return i&&r&&Object(f.o)(i.equippedArtifacts,(function(e){return r._getArt(e)}))}),[i,r]),C=Object(g.a)(),w=Object(c.a)(C,2),S=w[0],_=w[1],A=null!==(t=null===i||void 0===i?void 0:i.team)&&void 0!==t?t:[],K=Object(c.a)(A,3),T=K[0],D=K[1],E=K[2];Object(u.useEffect)((function(){return T?r.followChar(T,_):void 0}),[T,_,r]),Object(u.useEffect)((function(){return D?r.followChar(D,_):void 0}),[D,_,r]),Object(u.useEffect)((function(){return E?r.followChar(E,_):void 0}),[E,_,r]);var M=Object(u.useMemo)((function(){return S&&i&&s&&l&&j&&d&&o&&[Object(v.c)(i),s.data,Object(v.d)(l),j.data,o,x.a]}),[S,i,s,l,j,d,o]),I=Object(u.useMemo)((function(){return M&&d&&Object(v.a)([].concat(Object(a.a)(Object.values(d).filter((function(e){return e})).map((function(e){return Object(v.b)(e,n)}))),Object(a.a)(M)))}),[M,d,n]);if(I&&i&&s&&l&&j&&d&&o&&r&&M)return{data:I,character:i,characterSheet:s,weapon:l,weaponSheet:j,artifacts:d,artifactSheetsData:o,database:r,dataWoArt:M}}(r);if(!i)return null;var C=i.rarity;return Object(N.jsx)(s.a,{onClick:n,children:Object(N.jsxs)(A.a,{sx:{display:"flex",alignItems:"center"},children:[Object(N.jsx)(o.a,{component:"img",src:i.thumbImg,sx:{width:130,height:"auto"},className:"grad-".concat(C,"star")}),Object(N.jsxs)(o.a,{sx:{pl:1},children:[Object(N.jsx)(j.a,{children:Object(N.jsx)("strong",{children:i.name})}),l?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(j.a,{variant:"h6",children:[" ",i.elementKey&&W.a[i.elementKey]," ",Object(N.jsx)(T.a,{src:null===(t=d.a.weaponTypes)||void 0===t?void 0:t[i.weaponTypeKey]})," ",b.b.getLevelString(l.data.get(x.d.lvl).value,l.data.get(x.d.asc).value)]}),Object(N.jsxs)(j.a,{children:[Object(N.jsx)(M.a,{color:"success",children:"C".concat(l.data.get(x.d.constellation).value)})," ",Object(N.jsx)(M.a,{color:l.data.get(x.d.bonus.auto).value?"info":"secondary",children:Object(N.jsx)("strong",{children:l.data.get(x.d.total.auto).value})})," ",Object(N.jsx)(M.a,{color:l.data.get(x.d.bonus.skill).value?"info":"secondary",children:Object(N.jsx)("strong",{children:l.data.get(x.d.total.skill).value})})," ",Object(N.jsx)(M.a,{color:l.data.get(x.d.bonus.burst).value?"info":"secondary",children:Object(N.jsx)("strong",{children:l.data.get(x.d.total.burst).value})})]})]}):Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(j.a,{variant:"h6",children:Object(N.jsx)(M.a,{color:"primary",children:"NEW"})})}),Object(N.jsx)("small",{children:Object(N.jsx)(I.a,{stars:C,colored:!0})})]})]})})}},346:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(10),c=n(125),r=n(770),i=n(232),l=n(0),s=n(19),o=n(9),j=n(775),u=Object(o.a)(j.a,{shouldForwardProp:function(e){return"baseColor"!==e&&"selectedColor"!==e}})((function(e){var t=e.theme,n=e.baseColor,a=void 0===n?"primary":n,c=e.selectedColor,r=void 0===c?"success":c;return{"&":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&:hover":{backgroundColor:t.palette[a].dark},"&.Mui-selected":{backgroundColor:t.palette[r].main,color:t.palette[r].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[r].dark},"&.Mui-disabled":{backgroundColor:t.palette[a].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[r].dark}}})),d=n(275),b=n(1),O=["value","onChange"];function x(e){var t=e.value,n=e.onChange,o=Object(c.a)(e,O),j=Object(l.useCallback)((function(e,t){return n(t||"")}),[n]);return Object(b.jsx)(r.a,Object(a.a)(Object(a.a)({exclusive:!0,onChange:j,value:t||s.d},o),{},{children:s.d.map((function(e){return Object(b.jsx)(u,{value:e,selectedColor:e,children:Object(b.jsx)(i.a,{sx:{fontSize:"2em",lineHeight:1},children:d.b[e]})},e)}))}))}},377:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return lt}));var a=n(8),c=n(10),r=n(125),i=n(156),l=n(445),s=n(250),o=n(775),j=n(444),u=n(70),d=n(248),b=n(254),O=n(239),x=n(257),h=n(724),v=n(774),f=n(0),p=n(265),m=n(261),g=n(345),y=n(292),k=n(278),C=n(54),w=n(280),S=n(269),_=n(341),A=n(357),K=n(378),T=n(232),D=n(354),E=n(510),M=n(511),I=n(512),W=n(264),L=n(308),G=n(279),N=n(102),z=n(263),B=n(296),F=n(266),R=n(1);function P(){var e=Object(f.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1],r=Object(f.useCallback)((function(){return c(!n)}),[c,n]);return Object(R.jsxs)(m.a,{children:[Object(R.jsx)(l.a,{children:Object(R.jsxs)(s.a,{container:!0,children:[Object(R.jsxs)(s.a,{item:!0,flexGrow:1,children:[Object(R.jsxs)(u.a,{children:["Formulas ","&"," Calculations"]}),Object(R.jsx)(u.a,{variant:"caption",color:"text.secondary",children:"Expand to see every formula and all their calculations."})]}),Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(B.a,{expand:n,onClick:r,"aria-expanded":n,"aria-label":"show more",children:Object(R.jsx)(A.a,{})})})]})}),Object(R.jsx)(K.a,{in:n,timeout:"auto",unmountOnExit:!0,children:Object(R.jsx)(l.a,{sx:{pt:0},children:Object(R.jsx)(V,{})})})]})}function V(){var e=Object(f.useContext)(W.a).data,t=Object(L.b)(e);return Object(R.jsx)(f.Suspense,{fallback:Object(R.jsx)(i.a,{variant:"rectangular",width:"100%",height:1e3}),children:Object(R.jsx)(T.a,{sx:{mr:-1,mb:-1},children:t.map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(R.jsx)(U,{displayNs:c,sectionKey:n},n)}))})})}function U(e){var t=e.sectionKey,n=e.displayNs,c=Object(f.useContext)(W.a).data,r=Object(z.a)(Object(L.a)(c,t),[c,t]);if(!r)return null;var i=r.title,s=r.icon,o=r.action;return Object(R.jsxs)(p.a,{sx:{mb:1},children:[Object(R.jsx)(D.a,{avatar:s&&Object(R.jsx)(F.a,{size:2,sx:{m:-1},src:s}),title:i,action:o,titleTypographyProps:{variant:"subtitle1"}}),Object(R.jsx)(O.a,{}),Object(R.jsx)(l.a,{children:Object.entries(n).map((function(e){var t,n=Object(a.a)(e,2),c=n[0],r=n[1];return!r.isEmpty&&Object(R.jsxs)(E.a,{sx:{bgcolor:"contentLight.main"},children:[Object(R.jsx)(M.a,{expandIcon:Object(R.jsx)(A.a,{}),children:Object(R.jsxs)(u.a,{children:[Object(R.jsx)(C.a,{color:r.variant,children:N.b.get(null!==(t=r.key)&&void 0!==t?t:"")})," ",Object(R.jsx)("strong",{children:Object(G.b)(r.value,r.unit)})]})}),Object(R.jsx)(I.a,{children:r.formulas.map((function(e,t){return Object(R.jsx)(u.a,{children:e},t)}))})]},c)}))})]})}var q=n(342),H=n(288),J=n(309),X=n(45),Q=n(284),Y=n(302),Z=n(306),$=n(25),ee=n(20),te=n(321),ne=n(271),ae=n(329),ce=n(158),re=n(262),ie=n(286),le=n(19),se=n(340);var oe=function(e){var t=e.newBuild,n=void 0!==t&&t,c=Object(f.useContext)(W.a),r=c.data,i=c.oldData,o=c.character,d=c.mainStatAssumptionLevel,b=Object(f.useContext)(ce.b),h=Object(ee.g)(),v=Object(f.useCallback)((function(e){return h.push({pathname:"/artifact",artToEditId:e})}),[h]),p=Object(z.a)(ne.a.getAll,[]),g=Object(ie.a)(),y=Object(a.a)(g,2)[1];Object(f.useEffect)((function(){return b.followAnyArt(y)}));var k=Object(f.useCallback)((function(){if(window.confirm("Do you want to equip this artifact build to this character?")&&i){var e=Object.fromEntries(le.j.map((function(e){return[e,r.get(re.d.art[e].id).value]})));b.equipArtifacts(o.key,e)}}),[o,r,i,b]),C=Object(f.useCallback)((function(){o&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&b.equipArtifacts(o.key,Object($.m)(le.j,(function(e){return""})))}),[o,b]),w=le.j.map((function(e){return r.get(re.d.art[e].id).value})),S=Object.entries(re.d.artSet).map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return[n,r.get(c).value]}));return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(m.a,{sx:{mb:1},children:[Object(R.jsx)(l.a,{children:Object(R.jsx)(se.a,{})}),Object(R.jsx)(O.a,{}),Object(R.jsx)(l.a,{sx:{py:1},children:Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,children:n?Object(R.jsx)(x.a,{onClick:k,className:"mr-2",children:"Equip artifacts"}):b===ce.c&&Object(R.jsx)(x.a,{color:"error",onClick:C,children:"Unequip all artifacts"})}),Object(R.jsx)(s.a,{item:!0,flexGrow:1}),Object(R.jsx)(s.a,{item:!0,children:!!d&&Object(R.jsx)(j.a,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:Object(R.jsx)(u.a,{children:Object(R.jsxs)("strong",{children:["Assume Main Stats are Level ",d]})})})})]})})]}),Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:p&&ne.a.setEffects(p,S).map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(R.jsxs)(m.a,{sx:{flexGrow:1},children:[Object(R.jsx)(D.a,{avatar:Object(R.jsx)(F.a,{size:2,sx:{m:-1},src:p[n].defIconSrc}),title:p[n].name,titleTypographyProps:{variant:"subtitle1"}}),Object(R.jsx)(O.a,{}),Object(R.jsx)(l.a,{children:Object(R.jsx)(s.a,{container:!0,spacing:1,flexDirection:"column",height:"100%",children:Object(R.jsx)(s.a,{item:!0,display:"flex",flexDirection:"column",gap:1,children:c.map((function(e){return Object(R.jsx)(ae.a,{setKey:n,setNumKey:e},n+e)}))})})})]},n)}))}),w.map((function(e,t){return!!e&&Object(R.jsx)(s.a,{item:!0,xs:6,md:4,children:Object(R.jsx)(te.a,{artifactId:e,mainStatAssumptionLevel:d,onEdit:function(){return v(e)}})},t)}))]})]})},je=n(14),ue=n(53),de=n(52),be=n(405),Oe=n(509),xe=n(272),he=n(277),ve=n(274),fe=n(275),pe=n(273),me=n(39),ge=n(344),ye=n(270),ke=n(315),Ce=n(506),we=n(438),Se=n(290),_e=n(303),Ae=n(326);function Ke(){return Object(R.jsxs)(we.a,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:[Object(R.jsx)(De,{}),Object(R.jsx)(s.a,{container:!0,spacing:1,children:Object($.p)(0,2).map((function(e){return Object(R.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(R.jsx)(Ee,{index:e})},e)}))})]})}var Te={xs:12,sm:6,md:6,lg:4};function De(){var e,t,n,r=Object(f.useContext)(W.a),i=r.data,o=r.oldData,j=i.getTeamBuff(),u=[];return Object.entries(null!==(e=j.total)&&void 0!==e?e:{}).forEach((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return u.push([["total",n],c])})),Object.entries(null!==(t=j.premod)&&void 0!==t?t:{}).forEach((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return u.push([["premod",n],c])})),Object.entries(null!==(n=j.enemy)&&void 0!==n?n:{}).forEach((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return u.push([["enemy",n],c])})),u.length?Object(R.jsxs)(m.a,{children:[Object(R.jsx)(l.a,{children:"Team Buffs"}),Object(R.jsx)(O.a,{}),Object(R.jsx)(l.a,{children:Object(R.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:u.map((function(e,t){var n,r=Object(a.a)(e,2),i=r[0],l=r[1];return l&&!l.isEmpty&&Object(f.createElement)(s.a,Object(c.a)(Object(c.a)({item:!0},Te),{},{key:l.key}),Object(R.jsx)(he.b,{node:l,oldValue:null===(n=Object($.l)(null===o||void 0===o?void 0:o.getTeamBuff(),i))||void 0===n?void 0:n.value}))}))})})]}):null}function Ee(e){var t=e.index,n=Object(f.useContext)(W.a),a=n.character,c=n.teamData,r=n.characterDispatch,i=a.key,s=a.team[t],o=Object(Q.a)(s),j=Object(Y.a)(),u=c[s],d=u&&o&&{character:u.character,characterSheet:u.characterSheet,data:u.target,teamData:c,mainStatAssumptionLevel:0,characterDispatch:o};return Object(R.jsxs)(m.a,{children:[Object(R.jsx)(l.a,{children:Object(R.jsx)(Se.b,{fullWidth:!0,value:s,onChange:function(e){return r({type:"team",index:t,charKey:e})},filter:function(e,t){return t!==i&&!a.team.includes(t)},unSelectText:"Teammate ".concat(t+1),unSelectIcon:Object(R.jsx)(Ce.a,{})})}),d&&Object(R.jsx)(W.a.Provider,{value:d,children:Object(R.jsx)(Ae.a,{characterKey:s,onClickHeader:j,artifactChildren:Object(R.jsx)(Me,{dataContext:n}),weaponChildren:Object(R.jsx)(Ie,{dataContext:n}),characterChildren:Object(R.jsx)(We,{dataContext:n})})})]})}function Me(e){var t=e.dataContext,n=Object(z.a)(ne.a.getAll,[]);if(!n)return null;var a=Object.values(n).flatMap((function(e){return Object.values(e.setEffects).flatMap((function(e){return null===e||void 0===e?void 0:e.document}))})).filter((function(e){return e}));return Object(R.jsx)(Le,{sections:a,dataContext:t})}function Ie(e){var t=e.dataContext,n=Object(f.useContext)(W.a),a=(n.data,n.teamData[n.character.key].weaponSheet);return Object(R.jsx)(Le,{sections:a.document,dataContext:t})}function We(e){var t=e.dataContext,n=Object(f.useContext)(W.a),a=n.data,c=n.teamData[n.character.key].characterSheet.getTalent(a.get(re.d.charEle).value),r=Object.values(c.sheets).flatMap((function(e){return e.sections}));return Object(R.jsx)(Le,{sections:r,dataContext:t})}function Le(e){var t=e.sections,n=e.dataContext;return Object(R.jsx)(we.a,{display:"flex",flexDirection:"column",gap:1,pt:0,children:t.map((function(e){var t;return(null===(t=e.conditional)||void 0===t?void 0:t.teamBuff)&&Object(R.jsx)(_e.a,{conditional:e.conditional,fieldContext:n})}))})}function Ge(){var e,t=Object(f.useContext)(W.a),n=t.data,a=t.characterSheet,r=t.character,i=t.character.key,o=Object(Q.a)(i),j=n.get(re.d.charEle).value,d=a.weaponTypeKey,b=n.get(re.d.lvl).value,O=n.get(re.d.asc).value,x=n.get(re.d.constellation).value,h={auto:n.get(re.d.total.auto).value,skill:n.get(re.d.total.skill).value,burst:n.get(re.d.total.burst).value},v={auto:n.get(re.d.bonus.auto).value,skill:n.get(re.d.bonus.skill).value,burst:n.get(re.d.bonus.burst).value};return Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,xs:12,md:3,children:Object(R.jsxs)(m.a,{children:[Object(R.jsx)(be.a,{src:a.cardImg,component:"img",width:"100%",height:"auto"}),Object(R.jsxs)(l.a,{children:[Object(R.jsxs)(u.a,{variant:"h4",children:[a.name," ",Object(R.jsx)(F.a,{src:null===(e=xe.a.weaponTypes)||void 0===e?void 0:e[d]})," ",fe.a[j]," "]}),Object(R.jsx)(u.a,{variant:"h6",children:Object(R.jsx)(ve.a,{stars:a.rarity,colored:!0})}),Object(R.jsxs)(u.a,{variant:"h5",children:["Lvl. ",ye.b.getLevelString(b,O)]}),Object(R.jsx)(s.a,{container:!0,spacing:1,mt:1,children:["auto","skill","burst"].map((function(e){var t;return Object(R.jsx)(s.a,{item:!0,xs:4,children:Object(R.jsx)(Oe.a,{badgeContent:h[e],color:v[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:Object(R.jsx)(T.a,{component:"img",src:null===(t=a.getTalentOfKey(e,j))||void 0===t?void 0:t.img,width:"100%",height:"auto"})})},e)}))}),Object(R.jsx)(u.a,{sx:{textAlign:"center",mt:1},variant:"h6",children:a.constellationName}),Object(R.jsx)(s.a,{container:!0,spacing:1,children:Object(je.a)(Array(6).keys()).map((function(e){var t;return Object(R.jsx)(s.a,{item:!0,xs:4,children:Object(R.jsx)(T.a,{component:"img",src:null===(t=a.getTalentOfKey("constellation".concat(e+1),j))||void 0===t?void 0:t.img,sx:Object(c.a)({cursor:"pointer"},x>e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto",onClick:function(){return o({constellation:e+1===x?e:e+1})}})},e)}))})]})]})}),Object(R.jsxs)(s.a,{item:!0,xs:12,md:9,sx:{"> div:not(:last-child)":{mb:1}},children:[Object(R.jsx)(ge.default,{weaponId:r.equippedWeapon}),Object(R.jsx)(He,{})]})]})}var Ne=["eleMas","critRate_","critDMG_","enerRech_","heal_"],ze=[].concat(["atk","hp","def"],Ne).map((function(e){return re.d.total[e]})),Be=["atk_","atk","hp_","hp","def_","def"].concat(Ne),Fe=[].concat(Object(je.a)(le.e.map((function(e){return re.d.total["".concat(e,"_dmg_")]}))),Object(je.a)(le.e.map((function(e){return re.d.total["".concat(e,"_res_")]}))),Object(je.a)(["stamina","incHeal_","shield_","cdRed_"].map((function(e){return re.d.total[e]})))),Re=Fe.map((function(e){return e.info.key})),Pe=[re.d.total.all_dmg_].concat(Object(je.a)(le.e.map((function(e){return re.d.total["".concat(e,"_enemyRes_")]}))),[re.d.total.normal_dmg_,re.d.total.normal_critRate_,re.d.total.charged_dmg_,re.d.total.charged_critRate_,re.d.total.plunging_dmg_,re.d.total.plunging_critRate_,re.d.total.skill_dmg_,re.d.total.skill_critRate_,re.d.total.burst_dmg_,re.d.total.burst_critRate_],Object(je.a)(Object.keys(me.e).map((function(e){return re.d.total["".concat(e,"_dmg_")]}))),Object(je.a)(Object.keys(me.a).map((function(e){return re.d.total["".concat(e,"_dmg_")]}))),Object(je.a)(["moveSPD_","atkSPD_","weakspotDMG_"].map((function(e){return re.d.total[e]})))),Ve=Pe.map((function(e){return e.info.key})),Ue={xs:12,sm:6,md:6,lg:4};function qe(e){var t=e.nodes,n=e.statBreakpoint,a=e.extra,r=Object(f.useContext)(W.a),i=r.data,l=r.oldData;return Object(R.jsxs)(s.a,{container:!0,columnSpacing:{xs:2,lg:3},rowSpacing:1,children:[t.map((function(e,t){var a;return Object(R.jsx)(s.a,Object(c.a)(Object(c.a)({item:!0},n),{},{children:Object(R.jsx)(he.b,{node:i.get(e),oldValue:null===l||void 0===l||null===(a=l.get(e))||void 0===a?void 0:a.value})}),t)})),a]})}function He(){var e=Object(f.useContext)(W.a),t=e.data,n=e.character,a=e.character.key,r=Object(Q.a)(a),i=t.get(re.d.special);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(De,{}),Object(R.jsx)(Je,{title:"Main Stats",content:Object(R.jsx)(qe,{statBreakpoint:Ue,nodes:ze,extra:i&&Object(R.jsxs)(s.a,Object(c.a)(Object(c.a)({item:!0},Ue),{},{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(R.jsxs)("span",{children:[Object(R.jsx)("b",{children:"Special:"})," ",Object(R.jsxs)(C.a,{color:i.variant,children:[i.key&&fe.a[i.key]," ",i.key&&N.b.get(i.key)]})]}),Object(R.jsx)("span",{children:Object(pe.h)(i.value,i.unit)})]}))}),editContent:Object(R.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:Be.map((function(e){var t,a=N.b.get(e);return Object(R.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(R.jsx)(ke.a,{name:Object(R.jsxs)("span",{children:[fe.a[e]," ",a]}),placeholder:N.b.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===N.b.unit(e),onValueChange:function(t){return r({type:"editStats",statKey:e,value:t})}})},e)}))})}),Object(R.jsx)(Je,{title:"Other Stats",content:Object(R.jsx)(qe,{statBreakpoint:Ue,nodes:Fe}),editContent:Object(R.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:Re.map((function(e){var t,a=N.b.get(e);return Object(R.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(R.jsx)(ke.a,{name:Object(R.jsxs)("span",{children:[fe.a[e]," ",a]}),placeholder:N.b.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===N.b.unit(e),defaultValue:void 0,onValueChange:function(t){return r({type:"editStats",statKey:e,value:t})}})},e)}))})}),Object(R.jsx)(Je,{title:"Misc Stats",content:Object(R.jsx)(qe,{statBreakpoint:{xs:12,sm:6,md:6},nodes:Pe}),editContent:Object(R.jsx)(s.a,{container:!0,columnSpacing:2,rowSpacing:1,children:Ve.map((function(e){var t,a=N.b.get(e);return Object(R.jsx)(s.a,{item:!0,xs:12,lg:6,children:Object(R.jsx)(ke.a,{name:Object(R.jsxs)("span",{children:[fe.a[e]," ",a]}),placeholder:N.b.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===N.b.unit(e),onValueChange:function(t){return r({type:"editStats",statKey:e,value:t})}})},e)}))})})]})}function Je(e){var t=e.title,n=e.content,c=e.editContent,r=Object(f.useState)(!1),i=Object(a.a)(r,2),s=i[0],o=i[1];return Object(R.jsxs)(m.a,{children:[Object(R.jsx)(l.a,{sx:{py:1},children:Object(R.jsxs)(T.a,{display:"flex",justifyContent:"space-between",children:[Object(R.jsx)(u.a,{variant:"subtitle1",children:t}),Object(R.jsx)(x.a,{size:"small",color:s?"error":"info",onClick:function(){return o(!s)},children:Object(R.jsxs)("span",{children:[Object(R.jsx)(de.a,{icon:s?ue.w:ue.m})," ",s?"EXIT":"Edit Stats"]})})]})}),Object(R.jsx)(O.a,{}),Object(R.jsx)(l.a,{children:s?c:n})]})}var Xe=n(407),Qe=n(289),Ye=n(297),Ze=n(295);function $e(){var e=Object(f.useContext)(W.a),t=e.data,n=e.character,c=e.characterSheet,r=Object(Q.a)(n.key),i=t.get(re.d.charEle).value,l=t.get(re.d.asc).value,o=t.get(re.d.constellation).value;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(tt,{}),Object(R.jsxs)(s.a,{container:!0,spacing:1,sx:{mb:1},children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(R.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(R.jsx)(ct,{talentKey:n,subtitle:c})},n)})),!!c.getTalentOfKey("sprint",i)&&Object(R.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(R.jsx)(ct,{talentKey:"sprint",subtitle:"Alternative Sprint"})}),!!c.getTalentOfKey("passive",i)&&Object(R.jsx)(s.a,{item:!0,xs:12,md:6,lg:4,children:Object(R.jsx)(ct,{talentKey:"passive",subtitle:"Passive"})})]}),Object(R.jsx)(s.a,{container:!0,spacing:1,children:[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var t=Object(a.a)(e,3),n=t[0],r=t[1],o=t[2],j=l>=o;return c.getTalentOfKey(n,i)?Object(R.jsx)(s.a,{item:!0,style:{opacity:j?1:.5},xs:12,md:4,children:Object(R.jsx)(ct,{talentKey:n,subtitle:r})},n):null}))}),Object(R.jsxs)(u.a,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",o]}),Object(R.jsx)(s.a,{container:!0,spacing:1,children:Object(je.a)(Array(6).keys()).map((function(e){var t="constellation".concat(e+1);return Object(R.jsx)(s.a,{item:!0,xs:12,md:4,sx:{opacity:o>e?1:.5},children:Object(R.jsx)(ct,{talentKey:t,subtitle:"Contellation Lv. ".concat(e+1),onClickTitle:function(){return r({constellation:e+1===o?e:e+1})}})},e)}))})]})}var et={superconduct:function(e){var t=e.node;return Object(R.jsx)(p.a,{children:Object(R.jsx)(l.a,{sx:{p:1},children:Object(R.jsxs)(u.a,{color:"superconduct.main",children:[N.b.get(t.key)," ",fe.a.electro,"+",fe.a.cryo," ",Object(R.jsx)("strong",{children:Object(G.b)(t.value,t.unit)})]})})})},electrocharged:function(e){var t=e.node;return Object(R.jsx)(p.a,{children:Object(R.jsx)(l.a,{sx:{p:1},children:Object(R.jsxs)(u.a,{color:"electrocharged.main",children:[N.b.get(t.key)," ",fe.a.electro,"+",fe.a.hydro," ",Object(R.jsx)("strong",{children:Object(G.b)(t.value,t.unit)})]})})})},overloaded:function(e){var t=e.node;return Object(R.jsx)(p.a,{children:Object(R.jsx)(l.a,{sx:{p:1},children:Object(R.jsxs)(u.a,{color:"overloaded.main",children:[N.b.get(t.key)," ",fe.a.electro,"+",fe.a.pyro," ",Object(R.jsx)("strong",{children:Object(G.b)(t.value,t.unit)})]})})})},pyroSwirl:function(){var e=Object(f.useState)(Object.keys(nt)[0]),t=Object(a.a)(e,2),n=t[0],c=t[1],r=Object(f.useContext)(W.a).data.getDisplay().reaction["".concat(n,"Swirl")];return Object(R.jsxs)(p.a,{sx:{display:"flex"},children:[Object(R.jsx)(S.a,{size:"small",title:nt[n],color:"success",children:Object.entries(nt).map((function(e){var t=Object(a.a)(e,2),r=t[0],i=t[1];return Object(R.jsx)(v.a,{selected:n===r,disabled:n===r,onClick:function(){return c(r)},children:i},r)}))}),Object(R.jsx)(T.a,{sx:{color:"".concat(n,".main"),p:1},children:Object(R.jsx)("strong",{children:Object(G.b)(r.value,r.unit)})})]})},shattered:function(e){var t=e.node,n=Object(R.jsx)(Qe.a,{placement:"top",title:Object(R.jsxs)(u.a,{children:["Claymores, Plunging Attacks and ",Object(R.jsx)(C.a,{color:"geo",children:"Geo DMG"})]}),children:Object(R.jsx)(T.a,{component:"span",sx:{cursor:"help"},children:Object(R.jsx)(de.a,{icon:ue.v})})});return Object(R.jsx)(p.a,{children:Object(R.jsx)(l.a,{sx:{p:1},children:Object(R.jsxs)(C.a,{color:"shattered",children:[N.b.get(t.key)," ",fe.a.hydro,"+",fe.a.cryo,"+ ",Object(R.jsx)(C.a,{color:"physical",children:Object(R.jsxs)("small",{children:["Heavy Attack",n," "]})})," ",Object(R.jsx)("strong",{children:Object(G.b)(t.value,t.unit)})]})})})}};function tt(){var e=Object(f.useContext)(W.a).data.getDisplay().reaction;return Object(R.jsx)(m.a,{sx:{mb:1},children:Object(R.jsx)(l.a,{children:Object(R.jsx)(s.a,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1],r=et[n];return r?Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(r,{node:c})},n):null}))})})})}var nt={pyro:Object(R.jsxs)("span",{children:[Object(R.jsx)(C.a,{color:"pyro",children:N.b.get("pyro_swirl_hit")})," ",fe.a.pyro," + ",fe.a.anemo]}),electro:Object(R.jsxs)("span",{children:[Object(R.jsx)(C.a,{color:"electro",children:N.b.get("electro_swirl_hit")})," ",fe.a.electro,"+",fe.a.anemo]}),cryo:Object(R.jsxs)("span",{children:[Object(R.jsx)(C.a,{color:"cryo",children:N.b.get("cryo_swirl_hit")})," ",fe.a.cryo," + ",fe.a.anemo]}),hydro:Object(R.jsxs)("span",{children:[Object(R.jsx)(C.a,{color:"hydro",children:N.b.get("hydro_swirl_hit")})," ",fe.a.hydro," + ",fe.a.anemo]})};C.a,N.b.get("crystalize_hit"),fe.a.electro,fe.a.hydro,fe.a.pyro,fe.a.cryo,fe.a.geo,N.b.get("pyro_crystalize_hit"),fe.a.pyro,fe.a.geo,N.b.get("electro_crystalize_hit"),fe.a.electro,fe.a.geo,N.b.get("cryo_crystalize_hit"),fe.a.cryo,fe.a.geo,N.b.get("hydro_crystalize_hit"),fe.a.hydro,fe.a.geo;var at=[1,1,2,4,6,8,10];function ct(e){var t=e.talentKey,n=e.subtitle,a=e.onClickTitle,c=Object(f.useContext)(W.a),r=c.data,i=c.character.talent,o=c.characterSheet,j=c.characterDispatch,d=Object(f.useCallback)((function(e){return Object(R.jsx)(Xe.a,{onClick:a,children:e})}),[a]),b=null;if(t in i){var x=r.get(re.d.bonus[t]).value,h=r.get(re.d.total[t]).value,p=r.get(re.d.asc).value;b=Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(l.a,{sx:{py:1},children:Object(R.jsx)(S.a,{fullWidth:!0,title:"Talent Lv. ".concat(h),color:x?"info":"primary",children:Object(je.a)(Array(at[p]).keys()).map((function(e){return Object(R.jsxs)(v.a,{selected:i[t]===e+1,disabled:i[t]===e+1,onClick:function(){return n=e+1,i[t]=n,void j({talent:i});var n},children:["Talent Lv. ",e+x+1]},e)}))})}),Object(R.jsx)(O.a,{})]})}var g=o.getTalentOfKey(t,r.get(re.d.charEle).value);return Object(R.jsxs)(m.a,{sx:{height:"100%"},children:[b,Object(R.jsxs)(l.a,{children:[Object(R.jsx)(Ye.a,{condition:!!a,wrapper:d,children:Object(R.jsxs)(s.a,{container:!0,sx:{flexWrap:"nowrap"},children:[Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(T.a,{component:"img",src:null===g||void 0===g?void 0:g.img,sx:{width:60,height:"auto"}})}),Object(R.jsxs)(s.a,{item:!0,flexGrow:1,sx:{pl:1},children:[Object(R.jsx)(u.a,{variant:"h6",children:null===g||void 0===g?void 0:g.name}),Object(R.jsx)(u.a,{variant:"subtitle1",children:n})]})]})}),null!==g&&void 0!==g&&g.sections?Object(R.jsx)(Ze.a,{sections:g.sections}):null]})]})}var rt=["children","current","value"];function it(e){var t=e.children,n=e.current,a=e.value,l=Object(r.a)(e,rt);return a!==n?null:Object(R.jsx)(f.Suspense,{fallback:Object(R.jsx)(i.a,{variant:"rectangular",width:"100%",height:1e3}),children:Object(R.jsx)("div",Object(c.a)(Object(c.a)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},l),{},{children:t}))})}function lt(e){var t,n,r=e.characterKey,i=e.footer,x=e.newteamData,h=e.mainStatAssumptionLevel,v=void 0===h?0:h,g=e.onClose,y=e.tabName,C=e.isFlex,w=Object(Z.a)(r,v),S=null!==(t=null===w||void 0===w?void 0:w[r])&&void 0!==t?t:{},A=S.character,K=S.characterSheet,T=S.target,D=Object(f.useState)(y||(x?"newartifacts":"character")),E=Object(a.a)(D,2),M=E[0],I=E[1],L=Object(f.useCallback)((function(e,t){return I(t)}),[I]),G=Object(Q.a)(null!==(n=null===A||void 0===A?void 0:A.key)&&void 0!==n?n:"");if(!w||!A||!K||!T)return Object(R.jsx)(R.Fragment,{});var N=A.compareData,z={character:A,characterSheet:K,mainStatAssumptionLevel:v,data:x?x[r].target:T,teamData:x||w,oldData:N&&x?T:void 0,characterDispatch:G};return Object(R.jsx)(p.a,{children:Object(R.jsxs)(W.a.Provider,{value:z,children:[Object(R.jsxs)(l.a,{sx:{"> div:not(:last-child)":{mb:1}},children:[Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(st,{})}),Object(R.jsx)(s.a,{item:!0,children:!!x&&Object(R.jsxs)(H.a,{exclusive:!0,value:N,onChange:function(e,t){return G({compareData:t})},size:"small",children:[Object(R.jsx)(o.a,{value:!1,disabled:!N,children:Object(R.jsx)("small",{children:"Show New artifact Stats"})}),Object(R.jsx)(o.a,{value:!0,disabled:N,children:Object(R.jsx)("small",{children:"Compare against equipped artifacts"})})]})}),Object(R.jsx)(s.a,{item:!0,flexGrow:1}),!!v&&Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(j.a,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:Object(R.jsx)(u.a,{children:Object(R.jsxs)("strong",{children:["Assume Main Stats are Level ",v]})})})}),!!g&&Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(k.a,{onClick:g})})]}),Object(R.jsx)(m.a,{children:Object(R.jsxs)(d.a,{onChange:L,value:M,variant:"fullWidth",children:[Object(R.jsx)(b.a,{value:"character",label:"Character"}),!!x&&Object(R.jsx)(b.a,{value:"newartifacts",label:"New Artifacts"}),Object(R.jsx)(b.a,{value:"artifacts",label:x?"Current Artifacts":"Artifacts"}),!C&&Object(R.jsx)(b.a,{value:"buffs",label:"Team Buffs"}),Object(R.jsx)(b.a,{value:"talent",label:"Talents"})]})}),Object(R.jsx)(q.a,{}),Object(R.jsx)(P,{}),Object(R.jsx)(_.b,{}),Object(R.jsx)(it,{value:"character",current:M,children:Object(R.jsx)(Ge,{})}),Object(R.jsx)(W.a.Provider,{value:Object(c.a)(Object(c.a)({},z),{},{data:T,oldData:void 0}),children:Object(R.jsx)(it,{value:"artifacts",current:M,children:Object(R.jsx)(oe,{})})}),Object(R.jsx)(it,{value:"newartifacts",current:M,children:Object(R.jsx)(oe,{newBuild:!0})}),Object(R.jsx)(it,{value:"buffs",current:M,children:Object(R.jsx)(Ke,{})}),Object(R.jsx)(it,{value:"talent",current:M,children:Object(R.jsx)($e,{})})]}),!!i&&Object(R.jsx)(O.a,{}),i&&Object(R.jsx)(l.a,{children:i})]})})}function st(){var e,t=Object(f.useContext)(W.a),n=t.character,c=t.characterSheet,r=t.characterDispatch,i=Object(f.useState)(!1),l=Object(a.a)(i,2),o=l[0],j=l[1],u=Object(Y.a)(),d=Object(f.useCallback)((function(e){e=Object($.b)(e,1,90);var t=X.b.findIndex((function(t){return e<=t}));r({level:e,ascension:t})}),[r]),b=Object(f.useCallback)((function(){if(n){var e=n.level,t=void 0===e?1:e,a=n.ascension,c=void 0===a?0:a,i=X.b.findIndex((function(e){return 90!==t&&t===e}));r(c===i?{ascension:c+1}:{ascension:i})}}),[r,n]),O=n.elementKey,p=void 0===O?"anemo":O,m=n.level,k=void 0===m?1:m,_=n.ascension,A=void 0===_?0:_;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(g.a,{show:o,onHide:function(){return j(!1)},onSelect:u}),Object(R.jsxs)(s.a,{container:!0,spacing:1,children:[Object(R.jsx)(s.a,{item:!0,children:Object(R.jsx)(x.a,{onClick:function(){return j(!0)},startIcon:Object(R.jsx)(y.a,{src:null===c||void 0===c?void 0:c.thumbImgSide}),children:null!==(e=null===c||void 0===c?void 0:c.name)&&void 0!==e?e:"Select a Character"})}),Object(R.jsx)(s.a,{item:!0,children:Object(R.jsxs)(h.a,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(null===c||void 0===c?void 0:c.sheet)&&"talents"in(null===c||void 0===c?void 0:c.sheet)&&Object(R.jsx)(S.a,{title:Object(R.jsx)("strong",{children:Object(R.jsx)(C.a,{color:p,children:Object(J.a)("element.".concat(p))})}),children:Object.keys(c.sheet.talents).map((function(e){return Object(R.jsx)(v.a,{selected:p===e,disabled:p===e,onClick:function(){return r({elementKey:e})},children:Object(R.jsx)("strong",{children:Object(R.jsx)(C.a,{color:e,children:Object(J.a)("element.".concat(e))})})},e)}))}),Object(R.jsx)(w.a,{children:Object(R.jsx)(w.c,{onChange:d,value:k,startAdornment:"Lvl. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!c})}),Object(R.jsx)(x.a,{sx:{pl:1},disabled:!Object(X.a)(k)||!c,onClick:b,children:Object(R.jsxs)("strong",{children:["/ ",X.b[A]]})}),Object(R.jsx)(S.a,{title:"Select Level",disabled:!c,children:X.c.map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1],i=n===X.b[c]?"Lv. ".concat(n):"Lv. ".concat(n,"/").concat(X.b[c]),l=n===k&&c===A;return Object(R.jsx)(v.a,{selected:l,disabled:l,onClick:function(){return r({level:n,ascension:c})},children:i},"".concat(n,"/").concat(c))}))})]})})]})]})}}}]);
//# sourceMappingURL=15.4d702ba0.chunk.js.map